(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,u=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,s=1;s<i.length;s++){var o=i[s];0!==a[o]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},s={app:0},a={app:0},r=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-0101c9e5":"8e5820b9","chunk-2d0ab2cc":"c79ea9ce","chunk-2d21a3d2":"3f7ac065","chunk-2d22c341":"843e1b40","chunk-3112e1ea":"8cb30d40","chunk-474f40e8":"ae54dd4e","chunk-59c47205":"74f29a2e","chunk-5cecc67e":"ff62be01"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={"chunk-0101c9e5":1,"chunk-474f40e8":1};s[e]?t.push(s[e]):0!==s[e]&&i[e]&&t.push(s[e]=new Promise((function(t,i){for(var n="css/"+({}[e]||e)+"."+{"chunk-0101c9e5":"864cefa8","chunk-2d0ab2cc":"31d6cfe0","chunk-2d21a3d2":"31d6cfe0","chunk-2d22c341":"31d6cfe0","chunk-3112e1ea":"31d6cfe0","chunk-474f40e8":"2eda4eb4","chunk-59c47205":"31d6cfe0","chunk-5cecc67e":"31d6cfe0"}[e]+".css",a=l.p+n,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var c=r[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===a))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],d=c.getAttribute("data-href");if(d===n||d===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete s[e],h.parentNode.removeChild(h),i(r)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){s[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=r);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(h);var i=a[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",u.name="ChunkLoadError",u.type=n,u.request=s,i[1](u)}a[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=d;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"1dff":function(e,t,i){"use strict";var n=i("2b0e"),s=i("fb9a"),a=i.n(s),r={primary:"#7367F0",success:"#28C76F",danger:"#EA5455",warning:"#FF9F43",dark:"#1E1E1E"},o={disableCustomizer:!0,disableThemeTour:!0,footerType:"static",hideScrollToTop:!1,mainLayoutType:"horizontal",navbarColor:"",navbarType:"floating",routerTransition:"zoom-fade",rtl:!1,sidebarCollapsed:!1,theme:"light",userInfoLocalStorageKey:"userInfo"};n["default"].use(a.a,{theme:{colors:r},rtl:o.rtl}),t["a"]=o},"3a10":function(e,t,i){},"3f31":function(e,t,i){e.exports=i.p+"img/avatar-s-11.1a620230.jpg"},"408c":function(e,t,i){"use strict";(function(e){i("7f7f"),i("4917"),i("7514"),i("3b2b"),i("28a5"),i("ac4d"),i("8a81"),i("a481"),i("55dd"),i("6b54");var t=i("53ca");!function(i,n){"object"==Object(t["a"])(e)&&"object"==Object(t["a"])(e.exports)?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)}("undefined"!=typeof window?window:void 0,(function(e,n){var s=[],a=Object.getPrototypeOf,r=s.slice,o=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},l=s.push,c=s.indexOf,d={},u=d.toString,h=d.hasOwnProperty,p=h.toString,f=p.call(Object),g={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},y=e.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,i){var n,s,a=(i=i||y).createElement("script");if(a.text=e,t)for(n in b)(s=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,s);i.head.appendChild(a).parentNode.removeChild(a)}function x(e){return null==e?e+"":"object"==Object(t["a"])(e)||"function"==typeof e?d[u.call(e)]||"object":Object(t["a"])(e)}var _="3.6.0",$=function e(t,i){return new e.fn.init(t,i)};function k(e){var t=!!e&&"length"in e&&e.length,i=x(e);return!m(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}$.fn=$.prototype={jquery:_,constructor:$,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=$.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return $.each(this,e)},map:function(e){return this.pushStack($.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack($.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack($.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},$.extend=$.fn.extend=function(){var e,i,n,s,a,r,o=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[l]||{},l++),"object"==Object(t["a"])(o)||m(o)||(o={}),l===c&&(o=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(i in e)s=e[i],"__proto__"!==i&&o!==s&&(d&&s&&($.isPlainObject(s)||(a=Array.isArray(s)))?(n=o[i],r=a&&!Array.isArray(n)?[]:a||$.isPlainObject(n)?n:{},a=!1,o[i]=$.extend(d,r,s)):void 0!==s&&(o[i]=s));return o},$.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==u.call(e))&&(!(t=a(e))||"function"==typeof(i=h.call(t,"constructor")&&t.constructor)&&p.call(i)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){w(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(k(e)){for(i=e.length;n<i;n++)if(!1===t.call(e[n],n,e[n]))break}else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(k(Object(e))?$.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:c.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;n<i;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n=[],s=0,a=e.length,r=!i;s<a;s++)!t(e[s],s)!==r&&n.push(e[s]);return n},map:function(e,t,i){var n,s,a=0,r=[];if(k(e))for(n=e.length;a<n;a++)null!=(s=t(e[a],a,i))&&r.push(s);else for(a in e)null!=(s=t(e[a],a,i))&&r.push(s);return o(r)},guid:1,support:g}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=s[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var C=function(e){var t,i,n,s,a,r,o,l,c,d,u,h,p,f,g,m,v,y,b,w="sizzle"+1*new Date,x=e.document,_=0,$=0,k=le(),C=le(),T=le(),S=le(),O=function(e,t){return e===t&&(u=!0),0},E={}.hasOwnProperty,D=[],I=D.pop,A=D.push,j=D.push,z=D.slice,R=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+M+"*("+F+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",P=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",H=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),q=new RegExp("^"+M+"*,"+M+"*"),W=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),Y=new RegExp(P),X=new RegExp("^"+F+"$"),V={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){h()},re=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{j.apply(D=z.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(t){j={apply:D.length?function(e,t){A.apply(e,z.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]);e.length=i-1}}}function oe(e,t,n,s){var a,o,c,d,u,f,v,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return n;if(!s&&(h(t),t=t||p,g)){if(11!==x&&(u=Z.exec(e)))if(a=u[1]){if(9===x){if(!(c=t.getElementById(a)))return n;if(c.id===a)return n.push(c),n}else if(y&&(c=y.getElementById(a))&&b(t,c)&&c.id===a)return n.push(c),n}else{if(u[2])return j.apply(n,t.getElementsByTagName(e)),n;if((a=u[3])&&i.getElementsByClassName&&t.getElementsByClassName)return j.apply(n,t.getElementsByClassName(a)),n}if(i.qsa&&!S[e+" "]&&(!m||!m.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===x&&(U.test(e)||W.test(e))){(y=ee.test(e)&&ve(t.parentNode)||t)===t&&i.scope||((d=t.getAttribute("id"))?d=d.replace(ne,se):t.setAttribute("id",d=w)),o=(f=r(e)).length;while(o--)f[o]=(d?"#"+d:":scope")+" "+be(f[o]);v=f.join(",")}try{return j.apply(n,y.querySelectorAll(v)),n}catch(t){S(e,!0)}finally{d===w&&t.removeAttribute("id")}}}return l(e.replace(B,"$1"),t,n,s)}function le(){var e=[];return function t(i,s){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=s}}function ce(e){return e[w]=!0,e}function de(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){var i=e.split("|"),s=i.length;while(s--)n.attrHandle[i[s]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)while(i=i.nextSibling)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(i,n){var s,a=e([],i.length,t),r=a.length;while(r--)i[s=a[r]]&&(i[s]=!(n[s]=i[s]))}))}))}function ve(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(t in i=oe.support={},a=oe.isXML=function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!J.test(t||i&&i.nodeName||"HTML")},h=oe.setDocument=function(e){var t,s,r=e?e.ownerDocument||e:x;return r!=p&&9===r.nodeType&&r.documentElement&&(f=(p=r).documentElement,g=!a(p),x!=p&&(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ae,!1):s.attachEvent&&s.attachEvent("onunload",ae)),i.scope=de((function(e){return f.appendChild(e).appendChild(p.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.attributes=de((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=de((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=de((function(e){return f.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i,n,s,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];s=t.getElementsByName(e),n=0;while(a=s[n++])if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,a=t.getElementsByTagName(e);if("*"===e){while(i=a[s++])1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(i.qsa=Q.test(p.querySelectorAll))&&(de((function(e){var t;f.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),de((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&de((function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",P)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(f.compareDocumentPosition),b=t||Q.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==x&&b(x,e)?-1:t==p||t.ownerDocument==x&&b(x,t)?1:d?R(d,e)-R(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,s=e.parentNode,a=t.parentNode,r=[e],o=[t];if(!s||!a)return e==p?-1:t==p?1:s?-1:a?1:d?R(d,e)-R(d,t):0;if(s===a)return he(e,t);i=e;while(i=i.parentNode)r.unshift(i);i=t;while(i=i.parentNode)o.unshift(i);while(r[n]===o[n])n++;return n?he(r[n],o[n]):r[n]==x?-1:o[n]==x?1:0}),p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if(h(e),i.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){S(t,!0)}return 0<oe(t,p,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var s=n.attrHandle[t.toLowerCase()],a=s&&E.call(n.attrHandle,t.toLowerCase())?s(e,t,!g):void 0;return void 0!==a?a:i.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},oe.escape=function(e){return(e+"").replace(ne,se)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,n=[],s=0,a=0;if(u=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(O),u){while(t=e[a++])t===e[a]&&(s=n.push(a));while(s--)e.splice(n[s],1)}return d=null,e},s=oe.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===a||4===a)return e.nodeValue}else while(t=e[n++])i+=s(t);return i},(n=oe.selectors={cacheLength:50,createPseudo:ce,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&Y.test(i)&&(t=r(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&k(e,(function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var s=oe.attr(n,e);return null==s?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&-1<s.indexOf(i):"$="===t?i&&s.slice(-i.length)===i:"~="===t?-1<(" "+s.replace(H," ")+" ").indexOf(i):"|="===t&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,s){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,f,g=a!==r?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o,b=!1;if(m){if(a){while(g){h=t;while(h=h[g])if(o?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&y){b=(p=(c=(d=(u=(h=m)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],h=p&&m.childNodes[p];while(h=++p&&h&&h[g]||(b=p=0)||f.pop())if(1===h.nodeType&&++b&&h===t){d[e]=[_,p,b];break}}else if(y&&(b=p=(c=(d=(u=(h=t)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)while(h=++p&&h&&h[g]||(b=p=0)||f.pop())if((o?h.nodeName.toLowerCase()===v:1===h.nodeType)&&++b&&(y&&((d=(u=h[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[_,b]),h===t))break;return(b-=s)===n||b%n==0&&0<=b/n}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return s[w]?s(t):1<s.length?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,i){var n,a=s(e,t),r=a.length;while(r--)e[n=R(e,a[r])]=!(i[n]=a[r])})):function(e){return s(e,0,i)}):s}},pseudos:{not:ce((function(e){var t=[],i=[],n=o(e.replace(B,"$1"));return n[w]?ce((function(e,t,i,s){var a,r=n(e,null,s,[]),o=e.length;while(o--)(a=r[o])&&(e[o]=!(t[o]=a))})):function(e,s,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}})),has:ce((function(e){return function(t){return 0<oe(e,t).length}})),contains:ce((function(e){return e=e.replace(te,ie),function(t){return-1<(t.textContent||s(t)).indexOf(e)}})),lang:ce((function(e){return X.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:me((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:me((function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e})),gt:me((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function we(e,t,i){var n=t.dir,s=t.next,a=s||n,r=i&&"parentNode"===a,o=$++;return t.first?function(t,i,s){while(t=t[n])if(1===t.nodeType||r)return e(t,i,s);return!1}:function(t,i,l){var c,d,u,h=[_,o];if(l){while(t=t[n])if((1===t.nodeType||r)&&e(t,i,l))return!0}else while(t=t[n])if(1===t.nodeType||r)if(d=(u=t[w]||(t[w]={}))[t.uniqueID]||(u[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=d[a])&&c[0]===_&&c[1]===o)return h[2]=c[2];if((d[a]=h)[2]=e(t,i,l))return!0}return!1}}function xe(e){return 1<e.length?function(t,i,n){var s=e.length;while(s--)if(!e[s](t,i,n))return!1;return!0}:e[0]}function _e(e,t,i,n,s){for(var a,r=[],o=0,l=e.length,c=null!=t;o<l;o++)(a=e[o])&&(i&&!i(a,n,s)||(r.push(a),c&&t.push(o)));return r}function $e(e,t,i,n,s,a){return n&&!n[w]&&(n=$e(n)),s&&!s[w]&&(s=$e(s,a)),ce((function(a,r,o,l){var c,d,u,h=[],p=[],f=r.length,g=a||function(e,t,i){for(var n=0,s=t.length;n<s;n++)oe(e,t[n],i);return i}(t||"*",o.nodeType?[o]:o,[]),m=!e||!a&&t?g:_e(g,h,e,o,l),v=i?s||(a?e:f||n)?[]:r:m;if(i&&i(m,v,o,l),n){c=_e(v,p),n(c,[],o,l),d=c.length;while(d--)(u=c[d])&&(v[p[d]]=!(m[p[d]]=u))}if(a){if(s||e){if(s){c=[],d=v.length;while(d--)(u=v[d])&&c.push(m[d]=u);s(null,v=[],c,l)}d=v.length;while(d--)(u=v[d])&&-1<(c=s?R(a,u):h[d])&&(a[c]=!(r[c]=u))}}else v=_e(v===r?v.splice(f,v.length):v),s?s(null,r,v,l):j.apply(r,v)}))}function ke(e){for(var t,i,s,a=e.length,r=n.relative[e[0].type],o=r||n.relative[" "],l=r?1:0,d=we((function(e){return e===t}),o,!0),u=we((function(e){return-1<R(t,e)}),o,!0),h=[function(e,i,n){var s=!r&&(n||i!==c)||((t=i).nodeType?d(e,i,n):u(e,i,n));return t=null,s}];l<a;l++)if(i=n.relative[e[l].type])h=[we(xe(h),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[w]){for(s=++l;s<a;s++)if(n.relative[e[s].type])break;return $e(1<l&&xe(h),1<l&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(B,"$1"),i,l<s&&ke(e.slice(l,s)),s<a&&ke(e=e.slice(s)),s<a&&be(e))}h.push(i)}return xe(h)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,r=oe.tokenize=function(e,t){var i,s,a,r,o,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);o=e,l=[],c=n.preFilter;while(o){for(r in i&&!(s=q.exec(o))||(s&&(o=o.slice(s[0].length)||o),l.push(a=[])),i=!1,(s=W.exec(o))&&(i=s.shift(),a.push({value:i,type:s[0].replace(B," ")}),o=o.slice(i.length)),n.filter)!(s=V[r].exec(o))||c[r]&&!(s=c[r](s))||(i=s.shift(),a.push({value:i,type:r,matches:s}),o=o.slice(i.length));if(!i)break}return t?o.length:o?oe.error(e):C(e,l).slice(0)},o=oe.compile=function(e,t){var i,s,a,o,l,d,u=[],f=[],m=T[e+" "];if(!m){t||(t=r(e)),i=t.length;while(i--)(m=ke(t[i]))[w]?u.push(m):f.push(m);(m=T(e,(s=f,o=0<(a=u).length,l=0<s.length,d=function(e,t,i,r,d){var u,f,m,v=0,y="0",b=e&&[],w=[],x=c,$=e||l&&n.find.TAG("*",d),k=_+=null==x?1:Math.random()||.1,C=$.length;for(d&&(c=t==p||t||d);y!==C&&null!=(u=$[y]);y++){if(l&&u){f=0,t||u.ownerDocument==p||(h(u),i=!g);while(m=s[f++])if(m(u,t||p,i)){r.push(u);break}d&&(_=k)}o&&((u=!m&&u)&&v--,e&&b.push(u))}if(v+=y,o&&y!==v){f=0;while(m=a[f++])m(b,w,t,i);if(e){if(0<v)while(y--)b[y]||w[y]||(w[y]=I.call(r));w=_e(w)}j.apply(r,w),d&&!e&&0<w.length&&1<v+a.length&&oe.uniqueSort(r)}return d&&(_=k,c=x),b},o?ce(d):d))).selector=e}return m},l=oe.select=function(e,t,i,s){var a,l,c,d,u,h="function"==typeof e&&e,p=!s&&r(e=h.selector||e);if(i=i||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,ie),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}a=V.needsContext.test(e)?0:l.length;while(a--){if(c=l[a],n.relative[d=c.type])break;if((u=n.find[d])&&(s=u(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(a,1),!(e=s.length&&be(l)))return j.apply(i,s),i;break}}}return(h||o(e,p))(s,t,!g,i,!t||ee.test(e)&&ve(t.parentNode)||t),i},i.sortStable=w.split("").sort(O).join("")===w,i.detectDuplicates=!!u,h(),i.sortDetached=de((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),de((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&de((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),de((function(e){return null==e.getAttribute("disabled")}))||ue(N,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),oe}(e);$.find=C,$.expr=C.selectors,$.expr[":"]=$.expr.pseudos,$.uniqueSort=$.unique=C.uniqueSort,$.text=C.getText,$.isXMLDoc=C.isXML,$.contains=C.contains,$.escapeSelector=C.escape;var T=function(e,t,i){var n=[],s=void 0!==i;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&$(e).is(i))break;n.push(e)}return n},S=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},O=$.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,i){return m(t)?$.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?$.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?$.grep(e,(function(e){return-1<c.call(t,e)!==i})):$.filter(t,e,i)}$.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?$.find.matchesSelector(n,e)?[n]:[]:$.find.matches(e,$.grep(t,(function(e){return 1===e.nodeType})))},$.fn.extend({find:function(e){var t,i,n=this.length,s=this;if("string"!=typeof e)return this.pushStack($(e).filter((function(){for(t=0;t<n;t++)if($.contains(s[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)$.find(e,s[t],i);return 1<n?$.uniqueSort(i):i},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&O.test(e)?$(e):e||[],!1).length}});var A,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;($.fn.init=function(e,t,i){var n,s;if(!e)return this;if(i=i||A,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:j.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof $?t[0]:t,$.merge(this,$.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),D.test(n[1])&&$.isPlainObject(t))for(n in t)m(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(s=y.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==i.ready?i.ready(e):e($):$.makeArray(e,this)}).prototype=$.fn,A=$(y);var z=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){while((e=e[t])&&1!==e.nodeType);return e}$.fn.extend({has:function(e){var t=$(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if($.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,s=this.length,a=[],r="string"!=typeof e&&$(e);if(!O.test(e))for(;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?-1<r.index(i):1===i.nodeType&&$.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(1<a.length?$.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?c.call($(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack($.uniqueSort($.merge(this.get(),$(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),$.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,i){return T(e,"parentNode",i)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,i){return T(e,"nextSibling",i)},prevUntil:function(e,t,i){return T(e,"previousSibling",i)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),$.merge([],e.childNodes))}},(function(e,t){$.fn[e]=function(i,n){var s=$.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=$.filter(n,s)),1<this.length&&(R[e]||$.uniqueSort(s),z.test(e)&&s.reverse()),this.pushStack(s)}}));var M=/[^\x20\t\r\n\f]+/g;function F(e){return e}function L(e){throw e}function P(e,t,i,n){var s;try{e&&m(s=e.promise)?s.call(e).done(t).fail(i):e&&m(s=e.then)?s.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}$.Callbacks=function(e){var t,i;e="string"==typeof e?(t=e,i={},$.each(t.match(M)||[],(function(e,t){i[t]=!0})),i):$.extend({},e);var n,s,a,r,o=[],l=[],c=-1,d=function(){for(r=r||e.once,a=n=!0;l.length;c=-1){s=l.shift();while(++c<o.length)!1===o[c].apply(s[0],s[1])&&e.stopOnFalse&&(c=o.length,s=!1)}e.memory||(s=!1),n=!1,r&&(o=s?[]:"")},u={add:function(){return o&&(s&&!n&&(c=o.length-1,l.push(s)),function t(i){$.each(i,(function(i,n){m(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==x(n)&&t(n)}))}(arguments),s&&!n&&d()),this},remove:function(){return $.each(arguments,(function(e,t){var i;while(-1<(i=$.inArray(t,o,i)))o.splice(i,1),i<=c&&c--})),this},has:function(e){return e?-1<$.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return r=l=[],o=s="",this},disabled:function(){return!o},lock:function(){return r=l=[],s||n||(o=s=""),this},locked:function(){return!!r},fireWith:function(e,t){return r||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),n||d()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},$.extend({Deferred:function(i){var n=[["notify","progress",$.Callbacks("memory"),$.Callbacks("memory"),2],["resolve","done",$.Callbacks("once memory"),$.Callbacks("once memory"),0,"resolved"],["reject","fail",$.Callbacks("once memory"),$.Callbacks("once memory"),1,"rejected"]],s="pending",a={state:function(){return s},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return $.Deferred((function(t){$.each(n,(function(i,n){var s=m(e[n[4]])&&e[n[4]];r[n[1]]((function(){var e=s&&s.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(i,s,a){var r=0;function o(i,n,s,a){return function(){var l=this,c=arguments,d=function(){var e,d;if(!(i<r)){if((e=s.apply(l,c))===n.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==Object(t["a"])(e)||"function"==typeof e)&&e.then,m(d)?a?d.call(e,o(r,n,F,a),o(r,n,L,a)):(r++,d.call(e,o(r,n,F,a),o(r,n,L,a),o(r,n,F,n.notifyWith))):(s!==F&&(l=void 0,c=[e]),(a||n.resolveWith)(l,c))}},u=a?d:function(){try{d()}catch(d){$.Deferred.exceptionHook&&$.Deferred.exceptionHook(d,u.stackTrace),r<=i+1&&(s!==L&&(l=void 0,c=[d]),n.rejectWith(l,c))}};i?u():($.Deferred.getStackHook&&(u.stackTrace=$.Deferred.getStackHook()),e.setTimeout(u))}}return $.Deferred((function(e){n[0][3].add(o(0,e,m(a)?a:F,e.notifyWith)),n[1][3].add(o(0,e,m(i)?i:F)),n[2][3].add(o(0,e,m(s)?s:L))})).promise()},promise:function(e){return null!=e?$.extend(e,a):a}},r={};return $.each(n,(function(e,t){var i=t[2],o=t[5];a[t[1]]=i.add,o&&i.add((function(){s=o}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),i.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=i.fireWith})),a.promise(r),i&&i.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),s=r.call(arguments),a=$.Deferred(),o=function(e){return function(i){n[e]=this,s[e]=1<arguments.length?r.call(arguments):i,--t||a.resolveWith(n,s)}};if(t<=1&&(P(e,a.done(o(i)).resolve,a.reject,!t),"pending"===a.state()||m(s[i]&&s[i].then)))return a.then();while(i--)P(s[i],o(i),a.reject);return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;$.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&H.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},$.readyException=function(t){e.setTimeout((function(){throw t}))};var B=$.Deferred();function q(){y.removeEventListener("DOMContentLoaded",q),e.removeEventListener("load",q),$.ready()}$.fn.ready=function(e){return B.then(e)["catch"]((function(e){$.readyException(e)})),this},$.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--$.readyWait:$.isReady)||($.isReady=!0)!==e&&0<--$.readyWait||B.resolveWith(y,[$])}}),$.ready.then=B.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?e.setTimeout($.ready):(y.addEventListener("DOMContentLoaded",q),e.addEventListener("load",q));var W=function e(t,i,n,s,a,r,o){var l=0,c=t.length,d=null==n;if("object"===x(n))for(l in a=!0,n)e(t,i,l,n[l],!0,r,o);else if(void 0!==s&&(a=!0,m(s)||(o=!0),d&&(o?(i.call(t,s),i=null):(d=i,i=function(e,t,i){return d.call($(e),i)})),i))for(;l<c;l++)i(t[l],n,o?s:s.call(t[l],l,i(t[l],n)));return a?t:d?i.call(t):c?i(t[0],n):r},U=/^-ms-/,Y=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(U,"ms-").replace(Y,X)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=$.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[V(t)]=i;else for(n in t)s[V(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(V):(t=V(t))in n?[t]:t.match(M)||[]).length;while(i--)delete n[t[i]]}(void 0===t||$.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!$.isEmptyObject(t)}};var G=new K,Q=new K,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,i){var n,s;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(s=i)||"false"!==s&&("null"===s?null:s===+s+""?+s:Z.test(s)?JSON.parse(s):s)}catch(e){}Q.set(e,t,i)}else i=void 0;return i}$.extend({hasData:function(e){return Q.hasData(e)||G.hasData(e)},data:function(e,t,i){return Q.access(e,t,i)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,i){return G.access(e,t,i)},_removeData:function(e,t){G.remove(e,t)}}),$.fn.extend({data:function(e,i){var n,s,a,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(a=Q.get(r),1===r.nodeType&&!G.get(r,"hasDataAttrs"))){n=o.length;while(n--)o[n]&&0===(s=o[n].name).indexOf("data-")&&(s=V(s.slice(5)),te(r,s,a[s]));G.set(r,"hasDataAttrs",!0)}return a}return"object"==Object(t["a"])(e)?this.each((function(){Q.set(this,e)})):W(this,(function(t){var i;if(r&&void 0===t)return void 0!==(i=Q.get(r,e))||void 0!==(i=te(r,e))?i:void 0;this.each((function(){Q.set(this,e,t)}))}),null,i,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),$.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=G.get(e,t),i&&(!n||Array.isArray(i)?n=G.access(e,t,$.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=$.queue(e,t),n=i.length,s=i.shift(),a=$._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete a.stop,s.call(e,(function(){$.dequeue(e,t)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return G.get(e,i)||G.access(e,i,{empty:$.Callbacks("once memory").add((function(){G.remove(e,[t+"queue",i])}))})}}),$.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?$.queue(this[0],e):void 0===t?this:this.each((function(){var i=$.queue(this,e,t);$._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&$.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){$.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=$.Deferred(),a=this,r=this.length,o=function(){--n||s.resolveWith(a,[a])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(r--)(i=G.get(a[r],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),s.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],ae=y.documentElement,re=function(e){return $.contains(e.ownerDocument,e)},oe={composed:!0};ae.getRootNode&&(re=function(e){return $.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===$.css(e,"display")};function ce(e,t,i,n){var s,a,r=20,o=n?function(){return n.cur()}:function(){return $.css(e,t,"")},l=o(),c=i&&i[3]||($.cssNumber[t]?"":"px"),d=e.nodeType&&($.cssNumber[t]||"px"!==c&&+l)&&ne.exec($.css(e,t));if(d&&d[3]!==c){l/=2,c=c||d[3],d=+l||1;while(r--)$.style(e,t,d+c),(1-a)*(1-(a=o()/l||.5))<=0&&(r=0),d/=a;d*=2,$.style(e,t,d+c),i=i||[]}return i&&(d=+d||+l||0,s=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=s)),s}var de={};function ue(e,t){for(var i,n,s,a,r,o,l,c=[],d=0,u=e.length;d<u;d++)(n=e[d]).style&&(i=n.style.display,t?("none"===i&&(c[d]=G.get(n,"display")||null,c[d]||(n.style.display="")),""===n.style.display&&le(n)&&(c[d]=(l=r=a=void 0,r=(s=n).ownerDocument,o=s.nodeName,(l=de[o])||(a=r.body.appendChild(r.createElement(o)),l=$.css(a,"display"),a.parentNode.removeChild(a),"none"===l&&(l="block"),de[o]=l)))):"none"!==i&&(c[d]="none",G.set(n,"display",i)));for(d=0;d<u;d++)null!=c[d]&&(e[d].style.display=c[d]);return e}$.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?$(this).show():$(this).hide()}))}});var he,pe,fe=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i;he=y.createDocumentFragment().appendChild(y.createElement("div")),(pe=y.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),he.appendChild(pe),g.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",g.option=!!he.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?$.merge([e],i):i}function be(e,t){for(var i=0,n=e.length;i<n;i++)G.set(e[i],"globalEval",!t||G.get(t[i],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,g.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function xe(e,t,i,n,s){for(var a,r,o,l,c,d,u=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if("object"===x(a))$.merge(h,a.nodeType?[a]:a);else if(we.test(a)){r=r||u.appendChild(t.createElement("div")),o=(ge.exec(a)||["",""])[1].toLowerCase(),l=ve[o]||ve._default,r.innerHTML=l[1]+$.htmlPrefilter(a)+l[2],d=l[0];while(d--)r=r.lastChild;$.merge(h,r.childNodes),(r=u.firstChild).textContent=""}else h.push(t.createTextNode(a));u.textContent="",p=0;while(a=h[p++])if(n&&-1<$.inArray(a,n))s&&s.push(a);else if(c=re(a),r=ye(u.appendChild(a),"script"),c&&be(r),i){d=0;while(a=r[d++])me.test(a.type||"")&&i.push(a)}return u}var _e=/^([^.]*)(?:\.(.+)|)/;function $e(){return!0}function ke(){return!1}function Ce(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Te(e,i,n,s,a,r){var o,l;if("object"==Object(t["a"])(i)){for(l in"string"!=typeof n&&(s=s||n,n=void 0),i)Te(e,l,n,s,i[l],r);return e}if(null==s&&null==a?(a=n,s=n=void 0):null==a&&("string"==typeof n?(a=s,s=void 0):(a=s,s=n,n=void 0)),!1===a)a=ke;else if(!a)return e;return 1===r&&(o=a,(a=function(e){return $().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=$.guid++)),e.each((function(){$.event.add(this,i,a,s,n)}))}function Se(e,t,i){i?(G.set(e,t,!1),$.event.add(e,t,{namespace:!1,handler:function(e){var n,s,a=G.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)($.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=r.call(arguments),G.set(this,t,a),n=i(this,t),this[t](),a!==(s=G.get(this,t))||n?G.set(this,t,!1):s={},a!==s)return e.stopImmediatePropagation(),e.preventDefault(),s&&s.value}else a.length&&(G.set(this,t,{value:$.event.trigger($.extend(a[0],$.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===G.get(e,t)&&$.event.add(e,t,$e)}$.event={global:{},add:function(e,t,i,n,s){var a,r,o,l,c,d,u,h,p,f,g,m=G.get(e);if(J(e)){i.handler&&(i=(a=i).handler,s=a.selector),s&&$.find.matchesSelector(ae,s),i.guid||(i.guid=$.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(t){return"undefined"!=typeof $&&$.event.triggered!==t.type?$.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;while(c--)p=g=(o=_e.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p&&(u=$.event.special[p]||{},p=(s?u.delegateType:u.bindType)||p,u=$.event.special[p]||{},d=$.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&$.expr.match.needsContext.test(s),namespace:f.join(".")},a),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,r)||e.addEventListener&&e.addEventListener(p,r)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),s?h.splice(h.delegateCount++,0,d):h.push(d),$.event.global[p]=!0)}},remove:function(e,t,i,n,s){var a,r,o,l,c,d,u,h,p,f,g,m=G.hasData(e)&&G.get(e);if(m&&(l=m.events)){c=(t=(t||"").match(M)||[""]).length;while(c--)if(p=g=(o=_e.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p){u=$.event.special[p]||{},h=l[p=(n?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=h.length;while(a--)d=h[a],!s&&g!==d.origType||i&&i.guid!==d.guid||o&&!o.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(h.splice(a,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,m.handle)||$.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)$.event.remove(e,p+t[c],i,n,!0);$.isEmptyObject(l)&&G.remove(e,"handle events")}},dispatch:function(e){var t,i,n,s,a,r,o=new Array(arguments.length),l=$.event.fix(e),c=(G.get(this,"events")||Object.create(null))[l.type]||[],d=$.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){r=$.event.handlers.call(this,l,c),t=0;while((s=r[t++])&&!l.isPropagationStopped()){l.currentTarget=s.elem,i=0;while((a=s.handlers[i++])&&!l.isImmediatePropagationStopped())l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(n=(($.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,o))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()))}return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,s,a,r,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],r={},i=0;i<l;i++)void 0===r[s=(n=t[i]).selector+" "]&&(r[s]=n.needsContext?-1<$(s,this).index(c):$.find(s,this,null,[c]).length),r[s]&&a.push(n);a.length&&o.push({elem:c,handlers:a})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty($.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[$.expando]?e:new $.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&E(t,"input")&&Se(t,"click",$e),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&E(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&E(t,"input")&&G.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},$.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},$.Event=function(e,t){if(!(this instanceof $.Event))return new $.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?$e:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&$.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[$.expando]=!0},$.Event.prototype={constructor:$.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=$e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=$e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=$e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},$.event.addProp),$.each({focus:"focusin",blur:"focusout"},(function(e,t){$.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}})),$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){$.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,s=e.handleObj;return n&&(n===this||$.contains(this,n))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}})),$.fn.extend({on:function(e,t,i,n){return Te(this,e,t,i,n)},one:function(e,t,i,n){return Te(this,e,t,i,n,1)},off:function(e,i,n){var s,a;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,$(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==Object(t["a"])(e)){for(a in e)this.off(a,i,e[a]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=void 0),!1===n&&(n=ke),this.each((function(){$.event.remove(this,e,n,i)}))}});var Oe=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&$(e).children("tbody")[0]||e}function Ae(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function je(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var i,n,s,a,r,o;if(1===t.nodeType){if(G.hasData(e)&&(o=G.get(e).events))for(s in G.remove(t,"handle events"),o)for(i=0,n=o[s].length;i<n;i++)$.event.add(t,s,o[s][i]);Q.hasData(e)&&(a=Q.access(e),r=$.extend({},a),Q.set(t,r))}}function Re(e,t,i,n){t=o(t);var s,a,r,l,c,d,u=0,h=e.length,p=h-1,f=t[0],v=m(f);if(v||1<h&&"string"==typeof f&&!g.checkClone&&Ee.test(f))return e.each((function(s){var a=e.eq(s);v&&(t[0]=f.call(this,s,a.html())),Re(a,t,i,n)}));if(h&&(a=(s=xe(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=a),a||n)){for(l=(r=$.map(ye(s,"script"),Ae)).length;u<h;u++)c=s,u!==p&&(c=$.clone(c,!0,!0),l&&$.merge(r,ye(c,"script"))),i.call(e[u],c,u);if(l)for(d=r[r.length-1].ownerDocument,$.map(r,je),u=0;u<l;u++)c=r[u],me.test(c.type||"")&&!G.access(c,"globalEval")&&$.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?$._evalUrl&&!c.noModule&&$._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):w(c.textContent.replace(De,""),c,d))}return e}function Ne(e,t,i){for(var n,s=t?$.filter(t,e):e,a=0;null!=(n=s[a]);a++)i||1!==n.nodeType||$.cleanData(ye(n)),n.parentNode&&(i&&re(n)&&be(ye(n,"script")),n.parentNode.removeChild(n));return e}$.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,s,a,r,o,l,c,d=e.cloneNode(!0),u=re(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||$.isXMLDoc(e)))for(r=ye(d),n=0,s=(a=ye(e)).length;n<s;n++)o=a[n],l=r[n],"input"===(c=l.nodeName.toLowerCase())&&fe.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(t)if(i)for(a=a||ye(e),r=r||ye(d),n=0,s=a.length;n<s;n++)ze(a[n],r[n]);else ze(e,d);return 0<(r=ye(d,"script")).length&&be(r,!u&&ye(e,"script")),d},cleanData:function(e){for(var t,i,n,s=$.event.special,a=0;void 0!==(i=e[a]);a++)if(J(i)){if(t=i[G.expando]){if(t.events)for(n in t.events)s[n]?$.event.remove(i,n):$.removeEvent(i,n,t.handle);i[G.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),$.fn.extend({detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return W(this,(function(e){return void 0===e?$.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Re(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ie(this,e).appendChild(e)}))},prepend:function(){return Re(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Re(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Re(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&($.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return $.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ve[(ge.exec(e)||["",""])[1].toLowerCase()]){e=$.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&($.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,(function(t){var i=this.parentNode;$.inArray(this,e)<0&&($.cleanData(ye(this)),i&&i.replaceChild(t,this))}),e)}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){$.fn[e]=function(e){for(var i,n=[],s=$(e),a=s.length-1,r=0;r<=a;r++)i=r===a?this:this.clone(!0),$(s[r])[t](i),l.apply(n,i.get());return this.pushStack(n)}}));var Me=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Fe=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Le=function(e,t,i){var n,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];for(s in n=i.call(e),t)e.style[s]=a[s];return n},Pe=new RegExp(se.join("|"),"i");function He(e,t,i){var n,s,a,r,o=e.style;return(i=i||Fe(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||re(e)||(r=$.style(e,t)),!g.pixelBoxStyles()&&Me.test(r)&&Pe.test(t)&&(n=o.width,s=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=i.width,o.width=n,o.minWidth=s,o.maxWidth=a)),void 0!==r?r+"":r}function Be(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(c).appendChild(d);var t=e.getComputedStyle(d);n="1%"!==t.top,l=12===i(t.marginLeft),d.style.right="60%",r=36===i(t.right),s=36===i(t.width),d.style.position="absolute",a=12===i(d.offsetWidth/3),ae.removeChild(c),d=null}}function i(e){return Math.round(parseFloat(e))}var n,s,a,r,o,l,c=y.createElement("div"),d=y.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===d.style.backgroundClip,$.extend(g,{boxSizingReliable:function(){return t(),s},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,i,n,s;return null==o&&(t=y.createElement("table"),i=y.createElement("tr"),n=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",ae.appendChild(t).appendChild(i).appendChild(n),s=e.getComputedStyle(i),o=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===i.offsetHeight,ae.removeChild(t)),o}}))}();var qe=["Webkit","Moz","ms"],We=y.createElement("div").style,Ue={};function Ye(e){var t=$.cssProps[e]||Ue[e];return t||(e in We?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),i=qe.length;while(i--)if((e=qe[i]+t)in We)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ge(e,t,i){var n=ne.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Qe(e,t,i,n,s,a){var r="width"===t?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(l+=$.css(e,i+se[r],!0,s)),n?("content"===i&&(l-=$.css(e,"padding"+se[r],!0,s)),"margin"!==i&&(l-=$.css(e,"border"+se[r]+"Width",!0,s))):(l+=$.css(e,"padding"+se[r],!0,s),"padding"!==i?l+=$.css(e,"border"+se[r]+"Width",!0,s):o+=$.css(e,"border"+se[r]+"Width",!0,s));return!n&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l}function Ze(e,t,i){var n=Fe(e),s=(!g.boxSizingReliable()||i)&&"border-box"===$.css(e,"boxSizing",!1,n),a=s,r=He(e,t,n),o="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(r)){if(!i)return r;r="auto"}return(!g.boxSizingReliable()&&s||!g.reliableTrDimensions()&&E(e,"tr")||"auto"===r||!parseFloat(r)&&"inline"===$.css(e,"display",!1,n))&&e.getClientRects().length&&(s="border-box"===$.css(e,"boxSizing",!1,n),(a=o in e)&&(r=e[o])),(r=parseFloat(r)||0)+Qe(e,t,i||(s?"border":"content"),a,n,r)+"px"}function et(e,t,i,n,s){return new et.prototype.init(e,t,i,n,s)}$.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=He(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,o,l=V(i),c=Ve.test(i),d=e.style;if(c||(i=Ye(l)),o=$.cssHooks[i]||$.cssHooks[l],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,s))?a:d[i];"string"===(r=Object(t["a"])(n))&&(a=ne.exec(n))&&a[1]&&(n=ce(e,i,a),r="number"),null!=n&&n==n&&("number"!==r||c||(n+=a&&a[3]||($.cssNumber[l]?"":"px")),g.clearCloneStyle||""!==n||0!==i.indexOf("background")||(d[i]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,s))||(c?d.setProperty(i,n):d[i]=n))}},css:function(e,t,i,n){var s,a,r,o=V(t);return Ve.test(t)||(t=Ye(o)),(r=$.cssHooks[t]||$.cssHooks[o])&&"get"in r&&(s=r.get(e,!0,i)),void 0===s&&(s=He(e,t,n)),"normal"===s&&t in Ke&&(s=Ke[t]),""===i||i?(a=parseFloat(s),!0===i||isFinite(a)?a||0:s):s}}),$.each(["height","width"],(function(e,t){$.cssHooks[t]={get:function(e,i,n){if(i)return!Xe.test($.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,t,n):Le(e,Je,(function(){return Ze(e,t,n)}))},set:function(e,i,n){var s,a=Fe(e),r=!g.scrollboxSize()&&"absolute"===a.position,o=(r||n)&&"border-box"===$.css(e,"boxSizing",!1,a),l=n?Qe(e,t,n,o,a):0;return o&&r&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Qe(e,t,"border",!1,a)-.5)),l&&(s=ne.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=$.css(e,t)),Ge(0,i,l)}}})),$.cssHooks.marginLeft=Be(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Le(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),$.each({margin:"",padding:"",border:"Width"},(function(e,t){$.cssHooks[e+t]={expand:function(i){for(var n=0,s={},a="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+se[n]+t]=a[n]||a[n-2]||a[0];return s}},"margin"!==e&&($.cssHooks[e+t].set=Ge)})),$.fn.extend({css:function(e,t){return W(this,(function(e,t,i){var n,s,a={},r=0;if(Array.isArray(t)){for(n=Fe(e),s=t.length;r<s;r++)a[t[r]]=$.css(e,t[r],!1,n);return a}return void 0!==i?$.style(e,t,i):$.css(e,t)}),e,t,1<arguments.length)}}),(($.Tween=et).prototype={constructor:et,init:function(e,t,i,n,s,a){this.elem=e,this.prop=i,this.easing=s||$.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||($.cssNumber[i]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,i=et.propHooks[this.prop];return this.options.duration?this.pos=t=$.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=$.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){$.fx.step[e.prop]?$.fx.step[e.prop](e):1!==e.elem.nodeType||!$.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:$.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},$.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},$.fx=et.prototype.init,$.fx.step={};var tt,it,nt,st,at=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function ot(){it&&(!1===y.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,$.fx.interval),$.fx.tick())}function lt(){return e.setTimeout((function(){tt=void 0})),tt=Date.now()}function ct(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=se[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function dt(e,t,i){for(var n,s=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,r=s.length;a<r;a++)if(n=s[a].call(i,t,e))return n}function ut(e,t,i){var n,s,a=0,r=ut.prefilters.length,o=$.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var t=tt||lt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),a=0,r=c.tweens.length;a<r;a++)c.tweens[a].run(n);return o.notifyWith(e,[c,n,i]),n<1&&r?i:(r||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:$.extend({},t),opts:$.extend(!0,{specialEasing:{},easing:$.easing._default},i),originalProperties:t,originalOptions:i,startTime:tt||lt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=$.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)c.tweens[i].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var i,n,s,a,r;for(i in e)if(s=t[n=V(i)],a=e[i],Array.isArray(a)&&(s=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(r=$.cssHooks[n])&&"expand"in r)for(i in a=r.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=s);else t[n]=s}(d,c.opts.specialEasing);a<r;a++)if(n=ut.prefilters[a].call(c,e,d,c.opts))return m(n.stop)&&($._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return $.map(d,dt,c),m(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),$.fx.timer($.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}$.Animation=$.extend(ut,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ce(i.elem,e,ne.exec(t),i),i}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(M);for(var i,n=0,s=e.length;n<s;n++)i=e[n],ut.tweeners[i]=ut.tweeners[i]||[],ut.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,s,a,r,o,l,c,d,u="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&le(e),m=G.get(e,"fxshow");for(n in i.queue||(null==(r=$._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,o=r.empty.fire,r.empty.fire=function(){r.unqueued||o()}),r.unqueued++,h.always((function(){h.always((function(){r.unqueued--,$.queue(e,"fx").length||r.empty.fire()}))}))),t)if(s=t[n],at.test(s)){if(delete t[n],a=a||"toggle"===s,s===(g?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||$.style(e,n)}if((l=!$.isEmptyObject(t))||!$.isEmptyObject(p))for(n in u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=G.get(e,"display")),"none"===(d=$.css(e,"display"))&&(c?d=c:(ue([e],!0),c=e.style.display||c,d=$.css(e,"display"),ue([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===$.css(e,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(d=f.display,c="none"===d?"":d)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=G.access(e,"fxshow",{display:c}),a&&(m.hidden=!g),g&&ue([e],!0),h.done((function(){for(n in g||ue([e]),G.remove(e,"fxshow"),p)$.style(e,n,p[n])}))),l=dt(g?m[n]:0,n,h),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),$.speed=function(e,i,n){var s=e&&"object"==Object(t["a"])(e)?$.extend({},e):{complete:n||!n&&i||m(e)&&e,duration:e,easing:n&&i||i&&!m(i)&&i};return $.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in $.fx.speeds?s.duration=$.fx.speeds[s.duration]:s.duration=$.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){m(s.old)&&s.old.call(this),s.queue&&$.dequeue(this,s.queue)},s},$.fn.extend({fadeTo:function(e,t,i,n){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=$.isEmptyObject(e),a=$.speed(t,i,n),r=function(){var t=ut(this,$.extend({},e),a);(s||G.get(this,"finish"))&&t.stop(!0)};return r.finish=r,s||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",a=$.timers,r=G.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&rt.test(s)&&n(r[s]);for(s=a.length;s--;)a[s].elem!==this||null!=e&&a[s].queue!==e||(a[s].anim.stop(i),t=!1,a.splice(s,1));!t&&i||$.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=G.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],a=$.timers,r=n?n.length:0;for(i.finish=!0,$.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),$.each(["toggle","show","hide"],(function(e,t){var i=$.fn[t];$.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ct(t,!0),e,n,s)}})),$.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){$.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),$.timers=[],$.fx.tick=function(){var e,t=0,i=$.timers;for(tt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||$.fx.stop(),tt=void 0},$.fx.timer=function(e){$.timers.push(e),$.fx.start()},$.fx.interval=13,$.fx.start=function(){it||(it=!0,ot())},$.fx.stop=function(){it=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(t,i){return t=$.fx&&$.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}}))},nt=y.createElement("input"),st=y.createElement("select").appendChild(y.createElement("option")),nt.type="checkbox",g.checkOn=""!==nt.value,g.optSelected=st.selected,(nt=y.createElement("input")).value="t",nt.type="radio",g.radioValue="t"===nt.value;var ht,pt=$.expr.attrHandle;$.fn.extend({attr:function(e,t){return W(this,$.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){$.removeAttr(this,e)}))}}),$.extend({attr:function(e,t,i){var n,s,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?$.prop(e,t,i):(1===a&&$.isXMLDoc(e)||(s=$.attrHooks[t.toLowerCase()]||($.expr.match.bool.test(t)?ht:void 0)),void 0!==i?null===i?void $.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=$.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&E(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,s=t&&t.match(M);if(s&&1===e.nodeType)while(i=s[n++])e.removeAttribute(i)}}),ht={set:function(e,t,i){return!1===t?$.removeAttr(e,i):e.setAttribute(i,i),i}},$.each($.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=pt[t]||$.find.attr;pt[t]=function(e,t,n){var s,a,r=t.toLowerCase();return n||(a=pt[r],pt[r]=s,s=null!=i(e,t,n)?r:null,pt[r]=a),s}}));var ft=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function mt(e){return(e.match(M)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}$.fn.extend({prop:function(e,t){return W(this,$.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[$.propFix[e]||e]}))}}),$.extend({prop:function(e,t,i){var n,s,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&$.isXMLDoc(e)||(t=$.propFix[t]||t,s=$.propHooks[t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=$.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||($.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){$.propFix[this.toLowerCase()]=this})),$.fn.extend({addClass:function(e){var t,i,n,s,a,r,o,l=0;if(m(e))return this.each((function(t){$(this).addClass(e.call(this,t,vt(this)))}));if((t=yt(e)).length)while(i=this[l++])if(s=vt(i),n=1===i.nodeType&&" "+mt(s)+" "){r=0;while(a=t[r++])n.indexOf(" "+a+" ")<0&&(n+=a+" ");s!==(o=mt(n))&&i.setAttribute("class",o)}return this},removeClass:function(e){var t,i,n,s,a,r,o,l=0;if(m(e))return this.each((function(t){$(this).removeClass(e.call(this,t,vt(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)while(i=this[l++])if(s=vt(i),n=1===i.nodeType&&" "+mt(s)+" "){r=0;while(a=t[r++])while(-1<n.indexOf(" "+a+" "))n=n.replace(" "+a+" "," ");s!==(o=mt(n))&&i.setAttribute("class",o)}return this},toggleClass:function(e,i){var n=Object(t["a"])(e),s="string"===n||Array.isArray(e);return"boolean"==typeof i&&s?i?this.addClass(e):this.removeClass(e):m(e)?this.each((function(t){$(this).toggleClass(e.call(this,t,vt(this),i),i)})):this.each((function(){var t,i,a,r;if(s){i=0,a=$(this),r=yt(e);while(t=r[i++])a.hasClass(t)?a.removeClass(t):a.addClass(t)}else void 0!==e&&"boolean"!==n||((t=vt(this))&&G.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":G.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++])if(1===i.nodeType&&-1<(" "+mt(vt(i))+" ").indexOf(t))return!0;return!1}});var bt=/\r/g;$.fn.extend({val:function(e){var t,i,n,s=this[0];return arguments.length?(n=m(e),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?e.call(this,i,$(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=$.map(s,(function(e){return null==e?"":e+""}))),(t=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=$.valHooks[s.type]||$.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(bt,""):null==i?"":i:void 0}}),$.extend({valHooks:{option:{get:function(e){var t=$.find.attr(e,"value");return null!=t?t:mt($.text(e))}},select:{get:function(e){var t,i,n,s=e.options,a=e.selectedIndex,r="select-one"===e.type,o=r?null:[],l=r?a+1:s.length;for(n=a<0?l:r?a:0;n<l;n++)if(((i=s[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!E(i.parentNode,"optgroup"))){if(t=$(i).val(),r)return t;o.push(t)}return o},set:function(e,t){var i,n,s=e.options,a=$.makeArray(t),r=s.length;while(r--)((n=s[r]).selected=-1<$.inArray($.valHooks.option.get(n),a))&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),$.each(["radio","checkbox"],(function(){$.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<$.inArray($(e).val(),t)}},g.checkOn||($.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};$.extend($.event,{trigger:function(i,n,s,a){var r,o,l,c,d,u,p,f,g=[s||y],b=h.call(i,"type")?i.type:i,w=h.call(i,"namespace")?i.namespace.split("."):[];if(o=f=l=s=s||y,3!==s.nodeType&&8!==s.nodeType&&!wt.test(b+$.event.triggered)&&(-1<b.indexOf(".")&&(b=(w=b.split(".")).shift(),w.sort()),d=b.indexOf(":")<0&&"on"+b,(i=i[$.expando]?i:new $.Event(b,"object"==Object(t["a"])(i)&&i)).isTrigger=a?2:3,i.namespace=w.join("."),i.rnamespace=i.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=void 0,i.target||(i.target=s),n=null==n?[i]:$.makeArray(n,[i]),p=$.event.special[b]||{},a||!p.trigger||!1!==p.trigger.apply(s,n))){if(!a&&!p.noBubble&&!v(s)){for(c=p.delegateType||b,wt.test(c+b)||(o=o.parentNode);o;o=o.parentNode)g.push(o),l=o;l===(s.ownerDocument||y)&&g.push(l.defaultView||l.parentWindow||e)}r=0;while((o=g[r++])&&!i.isPropagationStopped())f=o,i.type=1<r?c:p.bindType||b,(u=(G.get(o,"events")||Object.create(null))[i.type]&&G.get(o,"handle"))&&u.apply(o,n),(u=d&&o[d])&&u.apply&&J(o)&&(i.result=u.apply(o,n),!1===i.result&&i.preventDefault());return i.type=b,a||i.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),n)||!J(s)||d&&m(s[b])&&!v(s)&&((l=s[d])&&(s[d]=null),$.event.triggered=b,i.isPropagationStopped()&&f.addEventListener(b,xt),s[b](),i.isPropagationStopped()&&f.removeEventListener(b,xt),$.event.triggered=void 0,l&&(s[d]=l)),i.result}},simulate:function(e,t,i){var n=$.extend(new $.Event,i,{type:e,isSimulated:!0});$.event.trigger(n,null,t)}}),$.fn.extend({trigger:function(e,t){return this.each((function(){$.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return $.event.trigger(e,t,i,!0)}}),g.focusin||$.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){$.event.simulate(t,e.target,$.event.fix(e))};$.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,s=G.access(n,t);s||n.addEventListener(e,i,!0),G.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,s=G.access(n,t)-1;s?G.access(n,t,s):(n.removeEventListener(e,i,!0),G.remove(n,t))}}}));var _t=e.location,$t={guid:Date.now()},kt=/\?/;$.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||$.error("Invalid XML: "+(n?$.map(n.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var Ct=/\[\]$/,Tt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Et(e,i,n,s){var a;if(Array.isArray(i))$.each(i,(function(i,a){n||Ct.test(e)?s(e,a):Et(e+"["+("object"==Object(t["a"])(a)&&null!=a?i:"")+"]",a,n,s)}));else if(n||"object"!==x(i))s(e,i);else for(a in i)Et(e+"["+a+"]",i[a],n,s)}$.param=function(e,t){var i,n=[],s=function(e,t){var i=m(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!$.isPlainObject(e))$.each(e,(function(){s(this.name,this.value)}));else for(i in e)Et(i,e[i],t,s);return n.join("&")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=$.prop(this,"elements");return e?$.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!$(this).is(":disabled")&&Ot.test(this.nodeName)&&!St.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=$(this).val();return null==i?null:Array.isArray(i)?$.map(i,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:i.replace(Tt,"\r\n")}})).get()}});var Dt=/%20/g,It=/#.*$/,At=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Nt={},Mt={},Ft="*/".concat("*"),Lt=y.createElement("a");function Pt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,a=t.toLowerCase().match(M)||[];if(m(i))while(n=a[s++])"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ht(e,t,i,n){var s={},a=e===Mt;function r(o){var l;return s[o]=!0,$.each(e[o]||[],(function(e,o){var c=o(t,i,n);return"string"!=typeof c||a||s[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)})),l}return r(t.dataTypes[0])||!s["*"]&&r("*")}function Bt(e,t){var i,n,s=$.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&$.extend(!0,e,n),e}Lt.href=_t.href,$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,$.ajaxSettings),t):Bt($.ajaxSettings,e)},ajaxPrefilter:Pt(Nt),ajaxTransport:Pt(Mt),ajax:function(i,n){"object"==Object(t["a"])(i)&&(n=i,i=void 0),n=n||{};var s,a,r,o,l,c,d,u,h,p,f=$.ajaxSetup({},n),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?$(g):$.event,v=$.Deferred(),b=$.Callbacks("once memory"),w=f.statusCode||{},x={},_={},k="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(d){if(!o){o={};while(t=jt.exec(r))o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?r:null},setRequestHeader:function(e,t){return null==d&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==d&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)C.always(e[C.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||k;return s&&s.abort(t),T(0,t),this}};if(v.promise(C),f.url=((i||f.url||_t.href)+"").replace(Rt,_t.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(M)||[""],null==f.crossDomain){c=y.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(i){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=$.param(f.data,f.traditional)),Ht(Nt,f,n,C),d)return C;for(h in(u=$.event&&f.global)&&0==$.active++&&$.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!zt.test(f.type),a=f.url.replace(It,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Dt,"+")):(p=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(kt.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(At,"$1"),p=(kt.test(a)?"&":"?")+"_="+$t.guid+++p),f.url=a+p),f.ifModified&&($.lastModified[a]&&C.setRequestHeader("If-Modified-Since",$.lastModified[a]),$.etag[a]&&C.setRequestHeader("If-None-Match",$.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ft+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(g,C,f)||d))return C.abort();if(k="abort",b.add(f.complete),C.done(f.success),C.fail(f.error),s=Ht(Mt,f,n,C)){if(C.readyState=1,u&&m.trigger("ajaxSend",[C,f]),d)return C;f.async&&0<f.timeout&&(l=e.setTimeout((function(){C.abort("timeout")}),f.timeout));try{d=!1,s.send(x,T)}catch(i){if(d)throw i;T(-1,i)}}else T(-1,"No Transport");function T(t,i,n,o){var c,h,p,y,x,_=i;d||(d=!0,l&&e.clearTimeout(l),s=void 0,r=o||"",C.readyState=0<t?4:0,c=200<=t&&t<300||304===t,n&&(y=function(e,t,i){var n,s,a,r,o=e.contents,l=e.dataTypes;while("*"===l[0])l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in o)if(o[s]&&o[s].test(n)){l.unshift(s);break}if(l[0]in i)a=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}r||(r=s)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),i[a]}(f,C,n)),!c&&-1<$.inArray("script",f.dataTypes)&&$.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),y=function(e,t,i,n){var s,a,r,o,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];a=d.shift();while(a)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=c[l+" "+a]||c["* "+a]))for(s in c)if((o=s.split(" "))[1]===a&&(r=c[l+" "+o[0]]||c["* "+o[0]])){!0===r?r=c[s]:!0!==c[s]&&(a=o[0],d.unshift(o[1]));break}if(!0!==r)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,y,C,c),c?(f.ifModified&&((x=C.getResponseHeader("Last-Modified"))&&($.lastModified[a]=x),(x=C.getResponseHeader("etag"))&&($.etag[a]=x)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=y.state,h=y.data,c=!(p=y.error))):(p=_,!t&&_||(_="error",t<0&&(t=0))),C.status=t,C.statusText=(i||_)+"",c?v.resolveWith(g,[h,_,C]):v.rejectWith(g,[C,_,p]),C.statusCode(w),w=void 0,u&&m.trigger(c?"ajaxSuccess":"ajaxError",[C,f,c?h:p]),b.fireWith(g,[C,_]),u&&(m.trigger("ajaxComplete",[C,f]),--$.active||$.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return $.get(e,t,i,"json")},getScript:function(e,t){return $.get(e,void 0,t,"script")}}),$.each(["get","post"],(function(e,t){$[t]=function(e,i,n,s){return m(i)&&(s=s||n,n=i,i=void 0),$.ajax($.extend({url:e,type:t,dataType:s,data:i,success:n},$.isPlainObject(e)&&e))}})),$.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),$._evalUrl=function(e,t,i){return $.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){$.globalEval(e,t,i)}})},$.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=$(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return m(e)?this.each((function(t){$(this).wrapInner(e.call(this,t))})):this.each((function(){var t=$(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m(e);return this.each((function(i){$(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){$(this).replaceWith(this.childNodes)})),this}}),$.expr.pseudos.hidden=function(e){return!$.expr.pseudos.visible(e)},$.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},$.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(n){}};var qt={0:200,1223:204},Wt=$.ajaxSettings.xhr();g.cors=!!Wt&&"withCredentials"in Wt,g.ajax=Wt=!!Wt,$.ajaxTransport((function(t){var i,n;if(g.cors||Wt&&!t.crossDomain)return{send:function(s,a){var r,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];for(r in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)o.setRequestHeader(r,s[r]);i=function(e){return function(){i&&(i=n=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(qt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),n=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s}},abort:function(){i&&i()}}})),$.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return $.globalEval(e),e}}}),$.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),$.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,s){t=$("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Ut,Yt=[],Xt=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||$.expando+"_"+$t.guid++;return this[e]=!0,e}}),$.ajaxPrefilter("json jsonp",(function(t,i,n){var s,a,r,o=!1!==t.jsonp&&(Xt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Xt,"$1"+s):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return r||$.error(s+" was not called"),r[0]},t.dataTypes[0]="json",a=e[s],e[s]=function(){r=arguments},n.always((function(){void 0===a?$(e).removeProp(s):e[s]=a,t[s]&&(t.jsonpCallback=i.jsonpCallback,Yt.push(s)),r&&m(a)&&a(r[0]),r=a=void 0})),"script"})),g.createHTMLDocument=((Ut=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),$.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?((n=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(n)):t=y),a=!i&&[],(s=D.exec(e))?[t.createElement(s[1])]:(s=xe([e],t,a),a&&a.length&&$(a).remove(),$.merge([],s.childNodes)));var n,s,a},$.fn.load=function(e,i,n){var s,a,r,o=this,l=e.indexOf(" ");return-1<l&&(s=mt(e.slice(l)),e=e.slice(0,l)),m(i)?(n=i,i=void 0):i&&"object"==Object(t["a"])(i)&&(a="POST"),0<o.length&&$.ajax({url:e,type:a||"GET",dataType:"html",data:i}).done((function(e){r=arguments,o.html(s?$("<div>").append($.parseHTML(e)).find(s):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},$.expr.pseudos.animated=function(e){return $.grep($.timers,(function(t){return e===t.elem})).length},$.offset={setOffset:function(e,t,i){var n,s,a,r,o,l,c=$.css(e,"position"),d=$(e),u={};"static"===c&&(e.style.position="relative"),o=d.offset(),a=$.css(e,"top"),l=$.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(a+l).indexOf("auto")?(r=(n=d.position()).top,s=n.left):(r=parseFloat(a)||0,s=parseFloat(l)||0),m(t)&&(t=t.call(e,i,$.extend({},o))),null!=t.top&&(u.top=t.top-o.top+r),null!=t.left&&(u.left=t.left-o.left+s),"using"in t?t.using.call(e,u):d.css(u)}},$.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){$.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],s={top:0,left:0};if("fixed"===$.css(n,"position"))t=n.getBoundingClientRect();else{t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&"static"===$.css(e,"position"))e=e.parentNode;e&&e!==n&&1===e.nodeType&&((s=$(e).offset()).top+=$.css(e,"borderTopWidth",!0),s.left+=$.css(e,"borderLeftWidth",!0))}return{top:t.top-s.top-$.css(n,"marginTop",!0),left:t.left-s.left-$.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===$.css(e,"position"))e=e.offsetParent;return e||ae}))}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;$.fn[e]=function(n){return W(this,(function(e,n,s){var a;if(v(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===s)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:s,i?s:a.pageYOffset):e[n]=s}),e,n,arguments.length)}})),$.each(["top","left"],(function(e,t){$.cssHooks[t]=Be(g.pixelPosition,(function(e,i){if(i)return i=He(e,t),Me.test(i)?$(e).position()[t]+"px":i}))})),$.each({Height:"height",Width:"width"},(function(e,t){$.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){$.fn[n]=function(s,a){var r=arguments.length&&(i||"boolean"!=typeof s),o=i||(!0===s||!0===a?"margin":"border");return W(this,(function(t,i,s){var a;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===s?$.css(t,i,o):$.style(t,i,s,o)}),t,r?s:void 0,r)}}))})),$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){$.fn[t]=function(e){return this.on(t,e)}})),$.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),$.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){$.fn[t]=function(e,i){return 0<arguments.length?this.on(t,null,e,i):this.trigger(t)}}));var Vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;$.proxy=function(e,t){var i,n,s;if("string"==typeof t&&(i=e[t],t=e,e=i),m(e))return n=r.call(arguments,2),(s=function(){return e.apply(t||this,n.concat(r.call(arguments)))}).guid=e.guid=e.guid||$.guid++,s},$.holdReady=function(e){e?$.readyWait++:$.ready(!0)},$.isArray=Array.isArray,$.parseJSON=JSON.parse,$.nodeName=E,$.isFunction=m,$.isWindow=v,$.camelCase=V,$.type=x,$.now=Date.now,$.isNumeric=function(e){var t=$.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},$.trim=function(e){return null==e?"":(e+"").replace(Vt,"")},"function"==typeof define&&i("3c35")&&define("jquery",[],(function(){return $}));var Jt=e.jQuery,Kt=e.$;return $.noConflict=function(t){return e.$===$&&(e.$=Kt),t&&e.jQuery===$&&(e.jQuery=Jt),$},"undefined"==typeof n&&(e.jQuery=e.$=$),$}))}).call(this,i("dd40")(e))},"41a6":function(e,t,i){},4363:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var n,s,a=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.vueAppClasses,attrs:{id:"app"}},[i("router-view",{on:{setAppClasses:e.setAppClasses}})],1)},o=[],l=(i("96cf"),i("1da1")),c=(i("4917"),i("1dff")),d={data:function(){return{vueAppClasses:[]}},watch:{"$store.state.theme":function(e){this.toggleClassInBody(e)},"$vs.rtl":function(e){document.documentElement.setAttribute("dir",e?"rtl":"ltr")}},methods:{toggleClassInBody:function(e){"dark"==e?(document.body.className.match("theme-semi-dark")&&document.body.classList.remove("theme-semi-dark"),document.body.classList.add("theme-dark")):"semi-dark"==e?(document.body.className.match("theme-dark")&&document.body.classList.remove("theme-dark"),document.body.classList.add("theme-semi-dark")):(document.body.className.match("theme-dark")&&document.body.classList.remove("theme-dark"),document.body.className.match("theme-semi-dark")&&document.body.classList.remove("theme-semi-dark"))},setAppClasses:function(e){this.vueAppClasses.push(e)},handleWindowResize:function(){this.$store.commit("UPDATE_WINDOW_WIDTH",window.innerWidth),document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"))},handleScroll:function(){this.$store.commit("UPDATE_WINDOW_SCROLL_Y",window.scrollY)}},mounted:function(){this.toggleClassInBody(c["a"].theme),this.$store.commit("UPDATE_WINDOW_WIDTH",window.innerWidth);var e=.01*window.innerHeight,t=this.$router,i=this.$vs;document.documentElement.style.setProperty("--vh","".concat(e,"px")),$(document).ajaxComplete((function(e,n){401==n.status&&(window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),t.push("/login").catch((function(){})),i.notify({title:"Seu usuÃ¡rio foi deslogado, acesso nÃ£o permitido.",text:"Seu acesso estÃ¡ expirado.",iconPack:"feather",icon:"icon-alert-circle",color:"danger"}))}))},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$vs.rtl?"rtl":"ltr",document.documentElement.setAttribute("dir",t),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("scroll",this.handleScroll),$(document).on("focus","input:not(#emailId,#passwordLogin)",(function(){$(this).attr("autocomplete","qualquervalorsemsentido")})),$(document).ajaxSend((function(e,t){var i=window.localStorage.getItem("token");t.setRequestHeader("Authorization","Bearer "+i)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleScroll)}},u=d,h=i("2877"),p=Object(h["a"])(u,r,o,!1,null,null,null),f=p.exports,g=i("ed18"),m=i.n(g),v=i("fb9a"),y=i.n(v),b=(i("c789"),i("04f2"),i("bc3a")),w=i.n(b),x="",_=w.a.create({domain:x}),k=(i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"convstooltip",staticClass:"con-vs-tooltip",on:{mouseleave:e.mouseleavex,mouseenter:e.mouseenterx,mouseup:e.destroy}},[i("transition",{attrs:{name:"tooltip-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],ref:"vstooltip",staticClass:"vs-tooltip",class:["vs-tooltip-"+(e.positionx||e.position),"vs-tooltip-"+e.color,{"after-none":e.noneAfter}],style:e.style},[e.title?i("h4",[e._v(e._s(e.title))]):e._e(),e._v("\n      "+e._s(e.text)+"\n    ")])]),e._t("default")],2)}),C=[],T=(i("0b21"),i("c5f6"),{insertBody:function(e){document.body.insertBefore(e,document.body.firstChild)},removeBody:function(e){var t=document.body;t.removeChild(e)},changePosition:function(e,t,i){var n=0,s=0,a=0,r=window.pageYOffset||document.documentElement.scrollTop;e.getBoundingClientRect().top+300>=window.innerHeight?setTimeout((function(){n=i?e.getBoundingClientRect().top-t.clientHeight+r:e.getBoundingClientRect().top-t.clientHeight+e.clientHeight+r}),1):n=i?e.getBoundingClientRect().top+e.clientHeight+r+5:e.getBoundingClientRect().top+r,s=e.getBoundingClientRect().left,a=e.offsetWidth;var o={left:"".concat(s,"px"),top:"".concat(n,"px"),width:"".concat(a,"px")};return o}}),S=(i("6762"),i("a481"),i("386d"),i("28a5"),{darken:function(e,t){var i=e.split(","),n=t<0?0:255,s=t<0?-1*t:t,a=parseInt(i[0].slice(4)),r=parseInt(i[1]),o=parseInt(i[2]);return"rgb("+(Math.round((n-a)*s)+a)+","+(Math.round((n-r)*s)+r)+","+(Math.round((n-o)*s)+o)+")"},getColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(/^[#]/.test(e)){var n=this.hexToRgb(e);e=1==t?"rgb(".concat(n.r,",").concat(n.g,",").concat(n.b,")"):"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(t,")")}else/^rgba/.test(e)?-1!=e.search(/.([0-9]\))$/)||i||(e=e.replace(/.?([0-9]\))$/,"".concat(t,")"))):/^(rgb)/.test(e)&&1!=t&&(e=e.replace(/^(rgb)/,"rgba"),e=e.replace(/\)$/,",".concat(t,")")));return e},isColor:function(e){var t=["primary","secondary","success","danger","warning","dark","light"];return t.includes(e)},RandomColor:function(){function e(e,t){return Math.floor(Math.random()*(t-e))+e}return"rgb(".concat(e(0,255),",").concat(e(0,255),",").concat(e(0,255),")")},rColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(/^[#]/.test(e)){var i=this.hexToRgb(e);e="rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(t,")")}else if(/^[rgb]/.test(e)){var n=e.split(")")[0];/^[rgba]/.test(e)?n+=")":(n.replace("rgb","rgba"),n+=",".concat(t,")")),e=n}var s=["primary","success","danger","warning","dark"];return e?/[#()]/.test(e)?e:s.includes(e)?"rgba(var(--".concat(e,"),").concat(t,")"):"rgba(var(--primary),".concat(t,")"):"rgba(var(--primary),".concat(t,")")},contrastColor:function(e){var t=e;if(/[#]/g.test(e)){var i=this.hexToRgb(e);t="rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}var n=t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),s=(299*n[0]+587*n[1]+114*n[2])/1e3;return s>=128},setCssVariable:function(e,t){"undefined"!==typeof window&&document.documentElement.style.setProperty(e,t)},hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,i,n){return t+t+i+i+n+n}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},getVariable:function(e,t){return String(e.getPropertyValue(t)).trim()},changeColor:function(e){var t,i=["primary","success","danger","warning","dark"];if(i.includes(e)){var n=getComputedStyle(document.documentElement);t=this.getVariable(n,"--"+e)}else if(/[rgb()]/g.test(e))t=e.replace(/[rgb()]/g,"");else if(/[#]/g.test(e)){var s=this.hexToRgb(e);t="".concat(s.r,",").concat(s.g,",").concat(s.b)}else t="--"+e;return t}}),O={name:"vx-tooltip",props:{title:{default:null,type:[String,Number]},text:{default:null,type:[String,Number]},color:{default:null,type:String},position:{default:"top",type:String},delay:{default:"0s",type:[Number,String]}},data:function(){return{cords:{},active:!1,widthx:"auto",positionx:null,noneAfter:!1}},computed:{style:function(){return{left:this.cords.left,top:this.cords.top,transitionDelay:this.active?this.delay:"0s",background:S.getColor(this.color,1),width:this.widthx}}},methods:{mouseenterx:function(){var e=this;this.active=!0,this.$nextTick((function(){T.insertBody(e.$refs.vstooltip),e.changePosition(e.$refs.convstooltip,e.$refs.vstooltip)}))},mouseleavex:function(){this.active=!1},changePosition:function(e,t){this.noneAfter=!1,this.positionx=null;var i=e.closest(".con-vs-tooltip"),n=window.pageYOffset||document.documentElement.scrollTop,s=i.getBoundingClientRect().top+n-t.clientHeight-4,a=i.getBoundingClientRect().left-t.clientWidth/2+i.clientWidth/2,r=i.clientWidth;"bottom"==this.position?s=i.getBoundingClientRect().top+n+i.clientHeight+4:"left"==this.position?(a=i.getBoundingClientRect().left-t.clientWidth-4,s=i.getBoundingClientRect().top+n+i.clientHeight/2-t.clientHeight/2,-1==Math.sign(a)&&(a=i.getBoundingClientRect().left,s=i.getBoundingClientRect().top+n+i.clientHeight+4,this.positionx="bottom",this.noneAfter=!0)):"right"==this.position&&(a=i.getBoundingClientRect().left+i.clientWidth+4,s=i.getBoundingClientRect().top+n+i.clientHeight/2-t.clientHeight/2,window.innerWidth-(a+t.clientWidth)<=20&&(a=i.getBoundingClientRect().left-t.clientWidth/2-10,s=i.getBoundingClientRect().top+n+i.clientHeight+4,this.positionx="bottom",this.noneAfter=!0)),this.cords={left:"".concat(a,"px"),top:"".concat(s,"px"),width:"".concat(r,"px")}},destroy:function(){var e=this;this.active=!1,this.$nextTick((function(){e.active&&T.removeBody(e.$refs.vstooltip)}))}}},E=O,D=Object(h["a"])(E,k,C,!1,null,null,null),I=D.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({ref:"card",staticClass:"vx-card",class:[{"overflow-hidden":e.tempHidden},{"no-shadow":e.noShadow},{"rounded-none":e.noRadius},{"card-border":e.cardBorder},e.cardClasses],style:e.cardStyles},e.$listeners),[e.hasHeader?i("div",{staticClass:"vx-card__header"},[i("div",{staticClass:"vx-card__title"},[this.$props.title?i("h4",{class:e.titleClasses,style:e.titleStyles},[e._v(e._s(e.title))]):e._e(),this.$props.subtitle?i("h6",{class:e.subtitleClasses,style:e.subtitleStyles},[e._v(e._s(e.subtitle))]):e._e()]),e.hasAction?i("div",{staticClass:"vx-card__actions"},[e._t("actions",(function(){return[(e.actionButtons||e.collapseAction||e.refreshContentAction||e.removeCardAction)&&!e.codeToggler?i("div",{staticClass:"vx-card__action-buttons"},[e.actionButtons||e.collapseAction?i("feather-icon",{staticClass:"ml-4",class:{rotate180:!e.isContentCollapsed},attrs:{icon:"ChevronUpIcon"},on:{click:e.toggleContent}}):e._e(),e.actionButtons||e.refreshContentAction?i("feather-icon",{staticClass:"ml-4",attrs:{icon:"RotateCwIcon"},on:{click:e.refreshcard}}):e._e(),e.actionButtons||e.removeCardAction?i("feather-icon",{staticClass:"ml-4",attrs:{icon:"XIcon"},on:{click:e.removeCard}}):e._e()],1):e._e(),e.codeToggler&&!e.actionButtons?i("div",{staticClass:"vx-card__code-toggler sm:block hidden"},[i("feather-icon",{class:{"border border-solid border-primary border-t-0 border-r-0 border-l-0":e.showCode},attrs:{icon:"CodeIcon"},on:{click:e.toggleCode}})],1):e._e()]}))],2):e._e()]):e._e(),i("div",{ref:"content",staticClass:"vx-card__collapsible-content vs-con-loading__container",class:[{collapsed:e.isContentCollapsed},{"overflow-hidden":e.tempHidden}],style:e.StyleItems},[e._t("no-body"),this.$slots.default?i("div",{staticClass:"vx-card__body"},[e._t("default")],2):e._e(),e._t("no-body-bottom"),this.$slots.footer?i("div",{staticClass:"vx-card__footer"},[e._t("footer")],2):e._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:this.$slots.codeContainer,expression:"this.$slots.codeContainer"}],ref:"codeContainer",staticClass:"vx-card__code-container",class:{collapsed:!e.showCode},style:e.codeContainerStyles},[i("div",{staticClass:"code-content"},[i("prism",{key:e.$vs.rtl,attrs:{language:e.codeLanguage}},[e._t("codeContainer")],2)],1)])])},j=[],z=i("8d51"),R=i.n(z),N={name:"vx-card",props:{title:String,subtitle:String,actionButtons:{type:Boolean,default:!1},actionButtonsColor:{type:String,default:"success"},codeToggler:{type:Boolean,default:!1},noShadow:{default:!1,type:Boolean},noRadius:{default:!1,type:Boolean},cardBorder:{default:!1,type:Boolean},codeLanguage:{default:"markup",type:String},collapseAction:{default:!1,type:Boolean},refreshContentAction:{default:!1,type:Boolean},removeCardAction:{default:!1,type:Boolean},headerBackground:{default:"",type:String},cardBackground:{default:"",type:String},contentColor:{default:"",type:String},titleColor:{default:"",type:String},subtitleColor:{default:"#b8c2cc",type:String}},data:function(){return{isContentCollapsed:!1,showCode:!1,maxHeight:null,cardMaxHeight:null,codeContainerMaxHeight:"0px",tempHidden:!1}},computed:{hasAction:function(){return this.$slots.actions||this.actionButtons||this.collapseAction||this.refreshContentAction||this.removeCardAction||this.codeToggler},hasHeader:function(){return this.hasAction||this.title||this.subtitle},StyleItems:function(){return{maxHeight:this.maxHeight}},cardStyles:function(){var e={maxHeight:this.cardMaxHeight};return S.isColor(this.cardBackground)||(e.background=S.getColor(this.cardBackground)),S.isColor(this.contentColor)||(e.color=S.getColor(this.contentColor)),e},codeContainerStyles:function(){return{maxHeight:this.codeContainerMaxHeight}},cardClasses:function(){var e="";return S.isColor(this.cardBackground)&&(e+=" bg-".concat(this.cardBackground)),S.isColor(this.contentColor)&&(e+=" text-".concat(this.contentColor)),e.trim()},titleStyles:function(){return{color:S.getColor(this.titleColor)}},titleClasses:function(){var e="";return S.isColor(this.titleColor)&&(e+=" text-".concat(this.titleColor)),e.trim()},subtitleStyles:function(){var e={};return S.isColor(this.subtitleColor)||(e.color=S.getColor(this.subtitleColor)),e},subtitleClasses:function(){var e="";return S.isColor(this.subtitleColor)&&(e+=" text-".concat(this.subtitleColor)),e.trim()}},methods:{toggleContent:function(){var e=this;this.$refs.content.style.overflow="hidden";var t=this.$refs.content.scrollHeight;"1.5rem"==this.maxHeight?(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="none",e.$refs.content.style.overflow=null}),300)):(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="1.5rem",e.$refs.content.style.overflow=null}),50)),this.isContentCollapsed=!this.isContentCollapsed,this.$emit("toggleCollapse",this.isContentCollapsed)},refreshcard:function(){this.$vs.loading({container:this.$refs.content,scale:.5}),this.tempHidden=!0,this.$emit("refresh",this)},removeRefreshAnimation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;setTimeout((function(){e.$vs.loading.close(e.$refs.content),e.tempHidden=!1}),t)},removeCard:function(){var e=this,t=this.$refs.card.scrollHeight;this.cardMaxHeight="".concat(t,"px"),this.$el.style.overflow="hidden",setTimeout((function(){e.cardMaxHeight="0px"}),50),this.$emit("remove")},toggleCode:function(){var e=this;this.tempHidden=!0,this.showCode=!this.showCode;var t=this.$refs.codeContainer.scrollHeight;"0px"==this.codeContainerMaxHeight?(this.codeContainerMaxHeight="".concat(t,"px"),setTimeout((function(){e.codeContainerMaxHeight="none",e.tempHidden=!1}),300)):(this.codeContainerMaxHeight="".concat(t,"px"),setTimeout((function(){e.codeContainerMaxHeight="0px",e.tempHidden=!1}),150))}},components:{Prism:R.a}},M=N,F=(i("89b8"),Object(h["a"])(M,A,j,!1,null,null,null)),L=F.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"list"},e._l(e.list,(function(t,n){return i("li",{key:n,staticClass:"list__item"},[i("feather-icon",{staticClass:"w-5 h-5 mr-1",attrs:{icon:e.rtlSpecificIcon}}),i("span",{domProps:{innerHTML:e._s(t)}})],1)})),0)},H=[],B=(i("2fdb"),{name:"vx-list",props:{list:{type:Array,required:!0},icon:{type:String,default:"ChevronsRightIcon"}},computed:{rtlSpecificIcon:function(){var e=this.icon;return this.$vs.rtl&&(e.includes("Left")?e=e.replace("Left","Right"):e.includes("Right")&&(e=e.replace("Right","Left"))),e}}}),q=B,W=(i("dca1"),Object(h["a"])(q,P,H,!1,null,null,null)),U=W.exports,Y=function(e,t){var i=t._c;return i("div",{staticClass:"vx-breadcrumb",class:t.data.staticClass},[i("ul",{staticClass:"flex flex-wrap items-center"},[i("li",{staticClass:"inline-flex items-end"},[i("router-link",{attrs:{to:"/"}},[i("feather-icon",{attrs:{icon:"HomeIcon",svgClasses:"h-5 w-5 mb-1 stroke-current text-primary"}})],1),i("span",{staticClass:"breadcrumb-separator mx-2"},[i("feather-icon",{attrs:{icon:t.props.isRTL?"ChevronsLeftIcon":"ChevronsRightIcon",svgClasses:"w-4 h-4"}})],1)],1),t._l(t.props.route.meta.breadcrumb.slice(1,-1),(function(e,n){return i("li",{key:n,staticClass:"inline-flex items-center"},[e.url?i("router-link",{attrs:{to:e.url}},[t._v(t._s(e.title))]):i("span",{staticClass:"text-primary cursor-default"},[t._v(t._s(e.title))]),i("span",{staticClass:"breadcrumb-separator mx-2 flex items-start"},[i("feather-icon",{attrs:{icon:t.props.isRTL?"ChevronsLeftIcon":"ChevronsRightIcon",svgClasses:"w-4 h-4"}})],1)],1)})),i("li",{staticClass:"inline-flex"},[t.props.route.meta.breadcrumb.slice(-1)[0].active?i("span",{staticClass:"cursor-default"},[t._v(t._s(t.props.route.meta.breadcrumb.slice(-1)[0].title))]):t._e()])],2)])},X=[],V={name:"vx-breadcrumb"},J=V,K=Object(h["a"])(J,Y,X,!0,null,null,null),G=K.exports,Q=i("0a35"),Z={functional:!0,name:"feather-icon",props:{icon:{required:!0},svgClasses:{type:[String,Object,Array],default:""},badge:{}},render:function(e,t){var i=t.props,n=t.data;n.staticClass?n.staticClass=n.staticClass+" feather-icon select-none relative":n.staticClass="feather-icon select-none relative";var s=e(Q[i.icon],{class:i.svgClasses}),a=e("span",{class:"feather-icon-badge bg-primary text-white h-5 w-5 absolute rounded-full text-xs flex items-center justify-center",style:"top: -7px; right: -5px"},[i.badge]),r=[s];return i.badge&&r.push(a),e("span",n,r)}},ee=Z,te=(i("9943"),Object(h["a"])(ee,n,s,!1,null,null,null)),ie=te.exports,ne=function(e,t){var i=t._c;return i("div",{staticClass:"vx-input-group flex",class:t.data.staticClass},[t.slots().prepend?i("div",{staticClass:"vx-input-group-prepend flex",class:t.props.prependClasses},[t._t("prepend")],2):t._e(),i("div",{staticClass:"vx-input-group-default flex-grow"},[t._t("default")],2),t.slots().append?i("div",{staticClass:"vx-input-group-append flex",class:t.props.appendClasses},[t._t("append")],2):t._e()])},se=[],ae={name:"vx-input-group",props:{prependClasses:{type:String},appendClasses:{type:String}}},re=ae,oe=(i("a4fc"),Object(h["a"])(re,ne,se,!0,null,null,null)),le=oe.exports,ce=i("4a7a"),de=i.n(ce);a["default"].component(I.name,I),a["default"].component(L.name,L),a["default"].component(U.name,U),a["default"].component(G.name,G),a["default"].component(ie.name,ie),a["default"].component(le.name,le),de.a.props.components.default=function(){return{Deselect:{render:function(e){return e("feather-icon",{props:{icon:"XIcon",svgClasses:"w-4 h-4 mt-1"}})}},OpenIndicator:{render:function(e){return e("feather-icon",{props:{icon:"ChevronDownIcon",svgClasses:"w-5 h-5"}})}}}},a["default"].component(de.a);i("c1c3"),i("5aea"),i("408c"),i("863b"),i("2397"),i("8449"),i("20d6"),i("55dd"),i("5df3"),i("1c4c");var ue=i("257e"),he=i("262e"),pe=i("99de"),fe=i("7e84"),ge=(i("456d"),i("ac6a"),i("6b54"),i("7514"),i("53ca")),me=(i("3b2b"),i("d4ec")),ve=i("bee2");function ye(e){var t=be();return function(){var i,n=Object(fe["a"])(e);if(t){var s=Object(fe["a"])(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Object(pe["a"])(this,i)}}function be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var we=function(){function e(t){if(Object(me["a"])(this,e),this.handlers=[],"undefined"!==typeof t){if(window.w2ui=window.w2ui||{},!$e.checkName(t))return;window.w2ui[t]=this}}return Object(ve["a"])(e,[{key:"on",value:function(e,t){var i;if("string"===typeof e&&-1!==e.indexOf(".")){var n=e.split(".");e=n[0],i=n[1]}if("string"===typeof e&&-1!==e.indexOf(":")){var s=e.split(":");-1!==["complete","done"].indexOf(e[1])&&(e[1]="after"),e={type:s[0],execute:s[1]},i&&(e.scope=i)}if($.isPlainObject(e)||(e={type:e,scope:i}),e=$.extend({type:null,execute:"before",target:null,onComplete:null},e),e.type){if(t)return Array.isArray(this.handlers)||(this.handlers=[]),this.handlers.push({edata:e,handler:t}),this;console.log("ERROR: You must specify event handler function when calling .on() method of "+this.name)}else console.log("ERROR: You must specify event type when calling .on() method of "+this.name)}},{key:"off",value:function(e,t){var i;if("string"===typeof e&&-1!==e.indexOf(".")){var n=e.split(".");e=n[0],i=n[1],""===e&&(e="*")}if("string"===typeof e&&-1!==e.indexOf(":")){var s=e.split(":");-1!==["complete","done"].indexOf(e[1])&&(e[1]="after"),e={type:s[0],execute:s[1]}}if($.isPlainObject(e)||(e={type:e}),e=$.extend({},{type:null,execute:null,target:null,onComplete:null},e),e.type||i){t||(t=null);for(var a=[],r=0,o=this.handlers.length;r<o;r++){var l=this.handlers[r];(l.edata.type!==e.type&&"*"!==e.type&&(null==l.edata.scope||""!=e.type)||l.edata.target!==e.target&&null!=e.target||l.edata.execute!==e.execute&&null!=e.execute||!(l.handler===t&&null!=t||null!=i&&l.edata.scope==i))&&a.push(l)}return this.handlers=a,this}console.log("ERROR: You must specify event type when calling .off() method of "+this.name)}},{key:"trigger",value:function(e){var t,i,n;e=$.extend({type:null,phase:"before",target:null,doneHandlers:[]},e,{isStopped:!1,isCancelled:!1,done:function(e){this.doneHandlers.push(e)},preventDefault:function(){this.isCancelled=!0},stopPropagation:function(){this.isStopped=!0}}),"before"===e.phase&&(e.onComplete=null),null==e.target&&(e.target=null),Array.isArray(this.handlers)||(this.handlers=[]);for(var s=this.handlers.length-1;s>=0;s--){var a=this.handlers[s];if(null!=a&&(a.edata.type===e.type||"*"===a.edata.type)&&(a.edata.target===e.target||null==a.edata.target)&&(a.edata.execute===e.phase||"*"===a.edata.execute||"*"===a.edata.phase)&&(e=$.extend({},a.edata,e),t=[],n=new RegExp(/\((.*?)\)/).exec(a.handler),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?a.handler.call(this,e.target,e):a.handler.call(this,e),!0===e.isStopped||!0===e.stop))return e}var r="on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1);if("before"===e.phase&&"function"===typeof this[r]&&(i=this[r],t=[],n=new RegExp(/\((.*?)\)/).exec(i),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?i.call(this,e.target,e):i.call(this,e),!0===e.isStopped||!0===e.stop))return e;if(null!=e.object&&"before"===e.phase&&"function"===typeof e.object[r]&&(i=e.object[r],t=[],n=new RegExp(/\((.*?)\)/).exec(i),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?i.call(this,e.target,e):i.call(this,e),!0===e.isStopped||!0===e.stop))return e;if("after"===e.phase){"function"===typeof e.onComplete&&e.onComplete.call(this,e);for(var o=0;o<e.doneHandlers.length;o++)"function"===typeof e.doneHandlers[o]&&e.doneHandlers[o].call(this,e)}return e}}]),e}(),xe={locale:"en-us",dateFormat:"m/d/yyyy",timeFormat:"hh:mi pm",datetimeFormat:"m/d/yyyy|hh:mi pm",currencyPrefix:"$",currencySuffix:"",currencyPrecision:2,groupSymbol:",",decimalSymbol:".",shortmonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortdays:["M","T","W","T","F","S","S"],fulldays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekStarts:"M",phrases:{"${count} letters or more...":"${count} cartas ou mais...","Add new record":"Acrescentar novo registo","Add New":"Acrescentar Novo","Advanced Search":"Pesquisa AvanÃ§ada",after:"depois","AJAX error. See console for more details.":"Erro AJAX. Ver consola para mais detalhes.","All Fields":"Todos os campos",All:"Todos",Any:"Qualquer","Are you sure you want to delete ${count} ${records}?":"Tem a certeza que quer apagar ${count} ${records}??","Attach files by dragging and dropping or Click to Select":"Anexar ficheiros por arrastar e largar ou Clicar para Seleccionar",before:"antes","begins with":"comeÃ§a com",begins:"comeÃ§a",between:"entre",buffered:"tamponado",Cancel:"Cancelar",Close:"Fechar",Column:"Coluna",Confirmation:"ConfirmaÃ§Ã£o",contains:"contÃ©m",Copied:"Copiado","Copy to clipboard":"Copiar para a Ã¡rea de transferÃªncia","Current Date & Time":"Data e Hora Actual","Delete selected records":"Eliminar registos seleccionados",Delete:"Apagar","Do you want to delete search item ${item}?":"Deseja apagar o item de pesquisa ${item}?","Edit selected record":"Editar registo seleccionado",Edit:"Editar","Empty list":"Lista vazia","ends with":"termina com",ends:"fins","Field should be at least ${count} characters.":"O campo deve ter pelo menos ${count} caracteres.",Hide:"Esconder",in:"in","is not":"nÃ£o Ã©",is:"Ã©","less than":"menos do que","Line #":"Linha #","Load ${count} more...":"Carregar ${count} mais...","Loading...":"Carregamento...","Maximum number of files is ${count}":"O nÃºmero mÃ¡ximo de ficheiros Ã© ${count}","Maximum total size is ${count}":"O tamanho mÃ¡ximo total Ã© ${count}",Modified:"Modificado","more than":"mais do que","Multiple Fields":"Campos MÃºltiplos",Name:"Nome","No items found":"NÃ£o foram encontrados artigos","No matches":"Sem fÃ³sforos",No:"NÃ£o",none:"nenhum","Not a float":"NÃ£o Ã© um carro alegÃ³rico","Not a hex number":"NÃ£o Ã© um nÃºmero hexadecimal","Not a valid date":"NÃ£o Ã© uma data vÃ¡lida","Not a valid email":"NÃ£o Ã© um correio electrÃ³nico vÃ¡lido","Not alpha-numeric":"NÃ£o alfa-numÃ©rico","Not an integer":"NÃ£o um nÃºmero inteiro","Not in money format":"NÃ£o em formato de dinheiro","not in":"nÃ£o em",Notification:"NotificaÃ§Ã£o",of:"de",Ok:"Ok","Record ID":"Record ID",record:"registo",records:"registos","Refreshing...":"Atualizando...","Reload data in the list":"Recarregar dados na lista",Remove:"Remover","Request aborted.":"SolicitaÃ§Ã£o abortada","Required field":"Campo obrigatÃ³rio",Reset:"Reinicializar","Restore Default State":"Restaurar o Estado por defeito","Returned data is not in valid JSON format.":"Os dados devolvidos nÃ£o se encontram no formato JSON vÃ¡lido","Save changed records":"Guardar registos alterados","Save Grid State":"Save Grid State",Save:"Guardar","Saved Searches":"Pesquisas Guardadas","Saving...":"Salvar...","Search took ${count} seconds":"A pesquisa demorou ${count} segundos",Search:"Pesquisar","Select Hour":"Seleccionar Hora","Select Minute":"Seleccionar Minuto",selected:"Selecionado","Server Response ${count} seconds":"Resposta do servidor ${count} segundos","Show/hide columns":"Mostrar/ocultar colunas",Show:"EspectÃ¡culo",Size:"Tamanho",Skip:"Saltar","Sorting took ${count} seconds":"A ordenaÃ§Ã£o demorou ${count} segundos","Type to search...":"Digite para pesquisar...",Type:"Tipo",Yes:"Sim",Yesterday:"Ontem","Your remote data source record count has changed, reloading from the first record.":"A sua contagem de registos de fontes de dados Ã  distÃ¢ncia mudou, recarregando a partir do primeiro registo."}},_e={},$e=function(e){var t={};return{version:"2.0.x",settings:e.extend(!0,{},xe,{dataType:"RESTFULLJSON",dateStartYear:1950,dateEndYear:2100,macButtonOrder:!1,warn_missing_translation:!0}),isBin:i,isInt:n,isFloat:s,isMoney:a,isHex:r,isAlphaNumeric:o,isEmail:l,isIpAddress:c,isDate:d,isTime:u,isDateTime:h,age:p,interval:f,date:g,formatSize:m,formatNumber:v,formatDate:y,formatTime:b,formatDateTime:w,stripTags:x,encodeTags:_,decodeTags:$,escapeId:k,unescapeId:C,normMenu:G,bindEvents:Q,base64encode:T,base64decode:S,md5:O,transition:E,lock:D,unlock:I,message:A,naturalCompare:K,template_replacer:R,lang:N,locale:M,getSize:j,getStrWidth:z,scrollBarSize:F,checkName:L,checkUniqueId:P,parseRoute:H,cssPrefix:B,parseColor:Y,hsv2rgb:X,rgb2hsv:V,tooltip:J,getCursorPosition:q,setCursorPosition:W,testLocalStorage:U,hasLocalStorage:U(),isIOS:-1!==navigator.userAgent.toLowerCase().indexOf("iphone")||-1!==navigator.userAgent.toLowerCase().indexOf("ipod")||-1!==navigator.userAgent.toLowerCase().indexOf("ipad")||-1!==navigator.userAgent.toLowerCase().indexOf("mobile")||-1!==navigator.userAgent.toLowerCase().indexOf("android"),isIE:-1!==navigator.userAgent.toLowerCase().indexOf("msie")||-1!==navigator.userAgent.toLowerCase().indexOf("trident"),isSafari:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};function i(e){var t=/^[0-1]+$/;return t.test(e)}function n(e){var t=/^[-+]?[0-9]+$/;return t.test(e)}function s(e){return"string"===typeof e&&(e=e.replace(/\s+/g,"").replace($e.settings.groupSymbol,"").replace($e.settings.decimalSymbol,".")),("number"===typeof e||"string"===typeof e&&""!==e)&&!isNaN(Number(e))}function a(e){if("object"===Object(ge["a"])(e)||""===e)return!1;if(s(e))return!0;var t=$e.settings,i=new RegExp("^"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[-+]?"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[0-9]*[\\"+t.decimalSymbol+"]?[0-9]+"+(t.currencySuffix?"\\"+t.currencySuffix+"?":"")+"$","i");return"string"===typeof e&&(e=e.replace(new RegExp(t.groupSymbol,"g"),"")),i.test(e)}function r(e){var t=/^(0x)?[0-9a-fA-F]+$/;return t.test(e)}function o(e){var t=/^[a-zA-Z0-9_-]+$/;return t.test(e)}function l(e){var t=/^[a-zA-Z0-9._%\-+]+@[Ð°-ÑÐ-Ð¯a-zA-Z0-9.-]+\.[Ð°-ÑÐ-Ð¯a-zA-Z]+$/;return t.test(e)}function c(e){var t=new RegExp("^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");return t.test(e)}function d(e,t,i){if(!e)return!1;var s,a,r,o="Invalid Date";if(null==t&&(t=$e.settings.dateFormat),"function"===typeof e.getFullYear)r=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();else if(parseInt(e)==e&&parseInt(e)>0)e=new Date(parseInt(e)),r=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();else{if(e=String(e),new RegExp("mon","ig").test(t)){t=t.replace(/month/gi,"m").replace(/mon/gi,"m").replace(/dd/gi,"d").replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase(),e=e.replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase();for(var l=0,c=$e.settings.fullmonths.length;l<c;l++){var d=$e.settings.fullmonths[l];e=e.replace(new RegExp(d,"ig"),parseInt(l)+1).replace(new RegExp(d.substr(0,3),"ig"),parseInt(l)+1)}}var u=e.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),h=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase();"mm/dd/yyyy"===h&&(s=u[0],a=u[1],r=u[2]),"m/d/yyyy"===h&&(s=u[0],a=u[1],r=u[2]),"dd/mm/yyyy"===h&&(s=u[1],a=u[0],r=u[2]),"d/m/yyyy"===h&&(s=u[1],a=u[0],r=u[2]),"yyyy/dd/mm"===h&&(s=u[2],a=u[1],r=u[0]),"yyyy/d/m"===h&&(s=u[2],a=u[1],r=u[0]),"yyyy/mm/dd"===h&&(s=u[1],a=u[2],r=u[0]),"yyyy/m/d"===h&&(s=u[1],a=u[2],r=u[0]),"mm/dd/yy"===h&&(s=u[0],a=u[1],r=u[2]),"m/d/yy"===h&&(s=u[0],a=u[1],r=parseInt(u[2])+1900),"dd/mm/yy"===h&&(s=u[1],a=u[0],r=parseInt(u[2])+1900),"d/m/yy"===h&&(s=u[1],a=u[0],r=parseInt(u[2])+1900),"yy/dd/mm"===h&&(s=u[2],a=u[1],r=parseInt(u[0])+1900),"yy/d/m"===h&&(s=u[2],a=u[1],r=parseInt(u[0])+1900),"yy/mm/dd"===h&&(s=u[1],a=u[2],r=parseInt(u[0])+1900),"yy/m/d"===h&&(s=u[1],a=u[2],r=parseInt(u[0])+1900)}return!!n(r)&&(!!n(s)&&(!!n(a)&&(r=+r,s=+s,a=+a,o=new Date(r,s-1,a),o.setFullYear(r),null!=s&&("Invalid Date"!==String(o)&&(o.getMonth()+1===s&&o.getDate()===a&&o.getFullYear()===r&&(!0!==i||o))))))}function u(e,t){if(null==e)return!1;var i,n,s;e=String(e),e=e.toUpperCase(),n=e.indexOf("AM")>=0,s=e.indexOf("PM")>=0;var a=s||n;i=a?12:24,e=e.replace("AM","").replace("PM","").trim();var r=e.split(":"),o=parseInt(r[0]||0),l=parseInt(r[1]||0),c=parseInt(r[2]||0);return!!(a&&1===r.length||2===r.length||3===r.length)&&(!(""===r[0]||o<0||o>i||!this.isInt(r[0])||r[0].length>2)&&(!(r.length>1&&(""===r[1]||l<0||l>59||!this.isInt(r[1])||2!==r[1].length))&&(!(r.length>2&&(""===r[2]||c<0||c>59||!this.isInt(r[2])||2!==r[2].length))&&(!!(a||i!==o||0===l&&0===c)&&((!a||1!==r.length||0!==o)&&(!0!==t||(s&&12!==o&&(o+=12),n&&12===o&&(o+=12),{hours:o,minutes:l,seconds:c})))))))}function h(e,t,i){if("function"===typeof e.getFullYear)return!0!==i||e;var n=parseInt(e);if(n===e)return!(n<0)&&(!0!==i||new Date(n));var s=String(e).indexOf(" ");if(s<0)return!(String(e).indexOf("T")<0||"Invalid Date"==String(new Date(e)))&&(!0!==i||new Date(e));null==t&&(t=$e.settings.datetimeFormat);var a=t.split("|"),r=[e.substr(0,s),e.substr(s).trim()];a[0]=a[0].trim(),a[1]&&(a[1]=a[1].trim());var o=$e.isDate(r[0],a[0],!0),l=$e.isTime(r[1],!0);return!1!==o&&!1!==l&&(!0!==i||(o.setHours(l.hours),o.setMinutes(l.minutes),o.setSeconds(l.seconds),o))}function p(e){var t;if(""===e||null==e)return"";if(t="function"===typeof e.getFullYear?e:parseInt(e)==e&&parseInt(e)>0?new Date(parseInt(e)):new Date(e),"Invalid Date"===String(t))return"";var i=new Date,n=(i.getTime()-t.getTime())/1e3,s="",a="";return n<0?(s=0,a="sec"):n<60?(s=Math.floor(n),a="sec",n<0&&(s=0,a="sec")):n<3600?(s=Math.floor(n/60),a="min"):n<86400?(s=Math.floor(n/60/60),a="hour"):n<2592e3?(s=Math.floor(n/24/60/60),a="day"):n<31536e3?(s=Math.floor(n/30/24/60/60*10)/10,a="month"):n<126144e3?(s=Math.floor(n/365/24/60/60*10)/10,a="year"):n>=126144e3&&(s=Math.floor(n/365.25/24/60/60*10)/10,a="year"),s+" "+a+(s>1?"s":"")}function f(e){var t="";return t=e<1e3?"< 1 sec":e<6e4?Math.floor(e/1e3)+" secs":e<36e5?Math.floor(e/6e4)+" mins":e<864e5?Math.floor(e/36e5*10)/10+" hours":e<2628e6?Math.floor(e/864e5*10)/10+" days":e<31536e6?Math.floor(e/2628e6*10)/10+" months":Math.floor(e/31536e5)/10+" years",t}function g(e){if(""===e||null==e||"object"===Object(ge["a"])(e)&&!e.getMonth)return"";var t=new Date(e);if($e.isInt(e)&&(t=new Date(Number(e))),"Invalid Date"===String(t))return"";var i=$e.settings.shortmonths,n=new Date,s=new Date;s.setTime(s.getTime()-864e5);var a=i[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear(),r=i[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear(),o=i[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear(),l=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+(t.getHours()>=12?"pm":"am"),c=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()+" "+(t.getHours()>=12?"pm":"am"),d=a;return a===r&&(d=l),a===o&&(d=$e.lang("Yesterday")),'<span title="'+a+" "+c+'">'+d+"</span>"}function m(e){if(!$e.isFloat(e)||""===e)return"";if(e=parseFloat(e),0===e)return 0;var t=["Bt","KB","MB","GB","TB","PB","EB","ZB"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return(Math.floor(e/Math.pow(1024,i)*10)/10).toFixed(0===i?0:1)+" "+(t[i]||"??")}function v(e,t,i){if(null==e||""===e||"object"===Object(ge["a"])(e))return"";var n={minimumFractionDigits:t,maximumFractionDigits:t,useGrouping:i};return(null==t||t<0)&&(n.minimumFractionDigits=0,n.maximumFractionDigits=20),parseFloat(e).toLocaleString($e.settings.locale,n)}function y(e,t){if(t||(t=this.settings.dateFormat),""===e||null==e||"object"===Object(ge["a"])(e)&&!e.getMonth)return"";var i=new Date(e);if($e.isInt(e)&&(i=new Date(Number(e))),"Invalid Date"===String(i))return"";var n=i.getFullYear(),s=i.getMonth(),a=i.getDate();return t.toLowerCase().replace("month",$e.settings.fullmonths[s]).replace("mon",$e.settings.shortmonths[s]).replace(/yyyy/g,("000"+n).slice(-4)).replace(/yyy/g,("000"+n).slice(-4)).replace(/yy/g,("0"+n).slice(-2)).replace(/(^|[^a-z$])y/g,"$1"+n).replace(/mm/g,("0"+(s+1)).slice(-2)).replace(/dd/g,("0"+a).slice(-2)).replace(/th/g,1==a?"st":"th").replace(/th/g,2==a?"nd":"th").replace(/th/g,3==a?"rd":"th").replace(/(^|[^a-z$])m/g,"$1"+(s+1)).replace(/(^|[^a-z$])d/g,"$1"+a)}function b(e,t){if(t||(t=this.settings.timeFormat),""===e||null==e||"object"===Object(ge["a"])(e)&&!e.getMonth)return"";var i=new Date(e);if($e.isInt(e)&&(i=new Date(Number(e))),$e.isTime(e)){var n=$e.isTime(e,!0);i=new Date,i.setHours(n.hours),i.setMinutes(n.minutes)}if("Invalid Date"===String(i))return"";var s="am",a=i.getHours(),r=i.getHours(),o=i.getMinutes(),l=i.getSeconds();return o<10&&(o="0"+o),l<10&&(l="0"+l),-1===t.indexOf("am")&&-1===t.indexOf("pm")||(a>=12&&(s="pm"),a>12&&(a-=12),0===a&&(a=12)),t.toLowerCase().replace("am",s).replace("pm",s).replace("hhh",a<10?"0"+a:a).replace("hh24",r<10?"0"+r:r).replace("h24",r).replace("hh",a).replace("mm",o).replace("mi",o).replace("ss",l).replace(/(^|[^a-z$])h/g,"$1"+a).replace(/(^|[^a-z$])m/g,"$1"+o).replace(/(^|[^a-z$])s/g,"$1"+l)}function w(e,t){var i;return""===e||null==e||"object"===Object(ge["a"])(e)&&!e.getMonth?"":("string"!==typeof t?i=[this.settings.dateFormat,this.settings.timeFormat]:(i=t.split("|"),i[0]=i[0].trim(),i[1]=i.length>1?i[1].trim():this.settings.timeFormat),"h12"===i[1]&&(i[1]="h:m pm"),"h24"===i[1]&&(i[1]="h24:m"),this.formatDate(e,i[0])+" "+this.formatTime(e,i[1]))}function x(t){if(null==t)return t;switch(Object(ge["a"])(t)){case"number":break;case"string":t=String(t).replace(/<(?:[^>=]|='[^']*'|="[^"]*"|=[^'"][^\s>]*)*>/gi,"");break;case"object":if(Array.isArray(t)){t=e.extend(!0,[],t);for(var i=0;i<t.length;i++)t[i]=this.stripTags(t[i])}else for(var n in t=e.extend(!0,{},t),t)t[n]=this.stripTags(t[n]);break}return t}function _(t){if(null==t)return t;switch(Object(ge["a"])(t)){case"number":break;case"string":t=String(t).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":if(Array.isArray(t)){t=e.extend(!0,[],t);for(var i=0;i<t.length;i++)t[i]=this.encodeTags(t[i])}else for(var n in t=e.extend(!0,{},t),t)t[n]=this.encodeTags(t[n]);break}return t}function $(t){if(null==t)return t;switch(Object(ge["a"])(t)){case"number":break;case"string":t=String(t).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&");break;case"object":if(Array.isArray(t)){t=e.extend(!0,[],t);for(var i=0;i<t.length;i++)t[i]=this.decodeTags(t[i])}else for(var n in t=e.extend(!0,{},t),t)t[n]=this.decodeTags(t[n]);break}return t}function k(t){return""===t||null==t?"":e.escapeSelector(t)}function C(t){return""===t||null==t?"":e.find.selectors.preFilter.ATTR([null,t])[1]}function T(e){var t,i,n,s,a,r,o,l="",c=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=u(e);while(c<e.length)t=e.charCodeAt(c++),i=e.charCodeAt(c++),n=e.charCodeAt(c++),s=t>>2,a=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,o=63&n,isNaN(i)?r=o=64:isNaN(n)&&(o=64),l=l+d.charAt(s)+d.charAt(a)+d.charAt(r)+d.charAt(o);function u(e){e=String(e).replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}return l}function S(e){var t,i,n,s,a,r,o,l="",c=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length)s=d.indexOf(e.charAt(c++)),a=d.indexOf(e.charAt(c++)),r=d.indexOf(e.charAt(c++)),o=d.indexOf(e.charAt(c++)),t=s<<2|a>>4,i=(15&a)<<4|r>>2,n=(3&r)<<6|o,l+=String.fromCharCode(t),64!==r&&(l+=String.fromCharCode(i)),64!==o&&(l+=String.fromCharCode(n));function u(e){var t,i,n="",s=0,a=0;while(s<e.length)a=e.charCodeAt(s),a<128?(n+=String.fromCharCode(a),s++):a>191&&a<224?(t=e.charCodeAt(s+1),n+=String.fromCharCode((31&a)<<6|63&t),s+=2):(t=e.charCodeAt(s+1),i=e.charCodeAt(s+2),n+=String.fromCharCode((15&a)<<12|(63&t)<<6|63&i),s+=3);return n}return l=u(l),l}function O(e){var t=0;function i(e){return s(n(a(e)))}function n(e){return o(l(r(e),8*e.length))}function s(e){for(var i,n=t?"0123456789ABCDEF":"0123456789abcdef",s="",a=0;a<e.length;a++)i=e.charCodeAt(a),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s}function a(e){var t,i,n="",s=-1;while(++s<e.length)t=e.charCodeAt(s),i=s+1<e.length?e.charCodeAt(s+1):0,55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t=65536+((1023&t)<<10)+(1023&i),s++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function r(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function o(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,n=-271733879,s=-1732584194,a=271733878,r=0;r<e.length;r+=16){var o=i,l=n,c=s,g=a;i=d(i,n,s,a,e[r+0],7,-680876936),a=d(a,i,n,s,e[r+1],12,-389564586),s=d(s,a,i,n,e[r+2],17,606105819),n=d(n,s,a,i,e[r+3],22,-1044525330),i=d(i,n,s,a,e[r+4],7,-176418897),a=d(a,i,n,s,e[r+5],12,1200080426),s=d(s,a,i,n,e[r+6],17,-1473231341),n=d(n,s,a,i,e[r+7],22,-45705983),i=d(i,n,s,a,e[r+8],7,1770035416),a=d(a,i,n,s,e[r+9],12,-1958414417),s=d(s,a,i,n,e[r+10],17,-42063),n=d(n,s,a,i,e[r+11],22,-1990404162),i=d(i,n,s,a,e[r+12],7,1804603682),a=d(a,i,n,s,e[r+13],12,-40341101),s=d(s,a,i,n,e[r+14],17,-1502002290),n=d(n,s,a,i,e[r+15],22,1236535329),i=u(i,n,s,a,e[r+1],5,-165796510),a=u(a,i,n,s,e[r+6],9,-1069501632),s=u(s,a,i,n,e[r+11],14,643717713),n=u(n,s,a,i,e[r+0],20,-373897302),i=u(i,n,s,a,e[r+5],5,-701558691),a=u(a,i,n,s,e[r+10],9,38016083),s=u(s,a,i,n,e[r+15],14,-660478335),n=u(n,s,a,i,e[r+4],20,-405537848),i=u(i,n,s,a,e[r+9],5,568446438),a=u(a,i,n,s,e[r+14],9,-1019803690),s=u(s,a,i,n,e[r+3],14,-187363961),n=u(n,s,a,i,e[r+8],20,1163531501),i=u(i,n,s,a,e[r+13],5,-1444681467),a=u(a,i,n,s,e[r+2],9,-51403784),s=u(s,a,i,n,e[r+7],14,1735328473),n=u(n,s,a,i,e[r+12],20,-1926607734),i=h(i,n,s,a,e[r+5],4,-378558),a=h(a,i,n,s,e[r+8],11,-2022574463),s=h(s,a,i,n,e[r+11],16,1839030562),n=h(n,s,a,i,e[r+14],23,-35309556),i=h(i,n,s,a,e[r+1],4,-1530992060),a=h(a,i,n,s,e[r+4],11,1272893353),s=h(s,a,i,n,e[r+7],16,-155497632),n=h(n,s,a,i,e[r+10],23,-1094730640),i=h(i,n,s,a,e[r+13],4,681279174),a=h(a,i,n,s,e[r+0],11,-358537222),s=h(s,a,i,n,e[r+3],16,-722521979),n=h(n,s,a,i,e[r+6],23,76029189),i=h(i,n,s,a,e[r+9],4,-640364487),a=h(a,i,n,s,e[r+12],11,-421815835),s=h(s,a,i,n,e[r+15],16,530742520),n=h(n,s,a,i,e[r+2],23,-995338651),i=p(i,n,s,a,e[r+0],6,-198630844),a=p(a,i,n,s,e[r+7],10,1126891415),s=p(s,a,i,n,e[r+14],15,-1416354905),n=p(n,s,a,i,e[r+5],21,-57434055),i=p(i,n,s,a,e[r+12],6,1700485571),a=p(a,i,n,s,e[r+3],10,-1894986606),s=p(s,a,i,n,e[r+10],15,-1051523),n=p(n,s,a,i,e[r+1],21,-2054922799),i=p(i,n,s,a,e[r+8],6,1873313359),a=p(a,i,n,s,e[r+15],10,-30611744),s=p(s,a,i,n,e[r+6],15,-1560198380),n=p(n,s,a,i,e[r+13],21,1309151649),i=p(i,n,s,a,e[r+4],6,-145523070),a=p(a,i,n,s,e[r+11],10,-1120210379),s=p(s,a,i,n,e[r+2],15,718787259),n=p(n,s,a,i,e[r+9],21,-343485551),i=f(i,o),n=f(n,l),s=f(s,c),a=f(a,g)}return Array(i,n,s,a)}function c(e,t,i,n,s,a){return f(g(f(f(t,e),f(n,a)),s),i)}function d(e,t,i,n,s,a,r){return c(t&i|~t&n,e,t,s,a,r)}function u(e,t,i,n,s,a,r){return c(t&n|i&~n,e,t,s,a,r)}function h(e,t,i,n,s,a,r){return c(t^i^n,e,t,s,a,r)}function p(e,t,i,n,s,a,r){return c(i^(t|~n),e,t,s,a,r)}function f(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function g(e,t){return e<<t|e>>>32-t}return i(e)}function E(t,i,n,s){var a=e(t).width(),r=e(t).height(),o=.5;if(t&&i){switch(t.parentNode.style.cssText+="perspective: 900px; overflow: hidden;",t.style.cssText+="; position: absolute; z-index: 1019; backface-visibility: hidden",i.style.cssText+="; position: absolute; z-index: 1020; backface-visibility: hidden",n){case"slide-left":t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; transform: translate3d("+a+"px, 0, 0)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: translate3d(0, 0, 0)",t.style.cssText+="transition: "+o+"s; transform: translate3d(-"+a+"px, 0, 0)"}),1);break;case"slide-right":t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; transform: translate3d(-"+a+"px, 0, 0)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: translate3d(0px, 0, 0)",t.style.cssText+="transition: "+o+"s; transform: translate3d("+a+"px, 0, 0)"}),1);break;case"slide-down":t.style.cssText+="overflow: hidden; z-index: 1; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; z-index: 0; transform: translate3d(0, 0, 0)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: translate3d(0, 0, 0)",t.style.cssText+="transition: "+o+"s; transform: translate3d(0, "+r+"px, 0)"}),1);break;case"slide-up":t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; transform: translate3d(0, "+r+"px, 0)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: translate3d(0, 0, 0)",t.style.cssText+="transition: "+o+"s; transform: translate3d(0, 0, 0)"}),1);break;case"flip-left":t.style.cssText+="overflow: hidden; transform: rotateY(0deg)",i.style.cssText+="overflow: hidden; transform: rotateY(-180deg)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: rotateY(0deg)",t.style.cssText+="transition: "+o+"s; transform: rotateY(180deg)"}),1);break;case"flip-right":t.style.cssText+="overflow: hidden; transform: rotateY(0deg)",i.style.cssText+="overflow: hidden; transform: rotateY(180deg)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: rotateY(0deg)",t.style.cssText+="transition: "+o+"s; transform: rotateY(-180deg)"}),1);break;case"flip-down":t.style.cssText+="overflow: hidden; transform: rotateX(0deg)",i.style.cssText+="overflow: hidden; transform: rotateX(180deg)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: rotateX(0deg)",t.style.cssText+="transition: "+o+"s; transform: rotateX(-180deg)"}),1);break;case"flip-up":t.style.cssText+="overflow: hidden; transform: rotateX(0deg)",i.style.cssText+="overflow: hidden; transform: rotateX(-180deg)",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: rotateX(0deg)",t.style.cssText+="transition: "+o+"s; transform: rotateX(180deg)"}),1);break;case"pop-in":t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); transform: scale(.8); opacity: 0;",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; transform: scale(1); opacity: 1;",t.style.cssText+="transition: "+o+"s;"}),1);break;case"pop-out":t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); transform: scale(1); opacity: 1;",i.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); opacity: 0;",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; opacity: 1;",t.style.cssText+="transition: "+o+"s; transform: scale(1.7); opacity: 0;"}),1);break;default:t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",i.style.cssText+="overflow: hidden; translate3d(0, 0, 0); opacity: 0;",e(i).show(),setTimeout((function(){i.style.cssText+="transition: "+o+"s; opacity: 1;",t.style.cssText+="transition: "+o+"s"}),1);break}setTimeout((function(){"slide-down"===n&&(e(t).css("z-index","1019"),e(i).css("z-index","1020")),i&&e(i).css({opacity:"1"}).css($e.cssPrefix({transition:"",transform:""})),t&&e(t).css({opacity:"1"}).css($e.cssPrefix({transition:"",transform:""})),"function"===typeof s&&s()}),1e3*o)}else console.log("ERROR: Cannot do transition when one of the divs is null")}function D(t,i,n){var s={};"object"===Object(ge["a"])(i)?s=i:(s.msg=i,s.spinner=n),s.msg||0===s.msg||(s.msg=""),$e.unlock(t),e(t).prepend('<div class="w2ui-lock"></div><div class="w2ui-lock-msg"></div>');var a=e(t).find(".w2ui-lock"),r=e(t).find(".w2ui-lock-msg");s.msg||r.css({"background-color":"transparent",border:"0px"}),!0===s.spinner&&(s.msg='<div class="w2ui-spinner" '+(s.msg?"":'style="width: 35px; height: 35px"')+"></div>"+s.msg),null!=s.opacity&&a.css("opacity",s.opacity),"function"===typeof a.fadeIn?(a.fadeIn(200),r.html(s.msg).fadeIn(200)):(a.show(),r.html(s.msg).show(0))}function I(t,i){n(i)?(e(t).find(".w2ui-lock").fadeOut(i),setTimeout((function(){e(t).find(".w2ui-lock").remove(),e(t).find(".w2ui-lock-msg").remove()}),i)):(e(t).find(".w2ui-lock").remove(),e(t).find(".w2ui-lock-msg").remove())}function A(t,i){var n=this;return new Promise((function(s,a){var r,o,l=n;if(e().w2tag(),i||(i={width:200,height:100}),null==i.on){var c=i;i=new we,e.extend(i,c)}null==i.width&&(i.width=200),null==i.height&&(i.height=100);var d=parseInt(e(t.box).width()),u=parseInt(e(t.box).height()),h=parseInt(e(t.box).find(t.title).css("height")||0);i.width>d&&(i.width=d-10),i.height>u-h&&(i.height=u-10-h),i.originalWidth=i.width,i.originalHeight=i.height,parseInt(i.width)<0&&(i.width=d+i.width),parseInt(i.width)<10&&(i.width=10),parseInt(i.height)<0&&(i.height=u+i.height-h),parseInt(i.height)<10&&(i.height=10),null==i.hideOnClick&&(i.hideOnClick=!1);var p=e(t.box).data("options")||{};(null==i.width||i.width>p.width-10)&&(i.width=p.width-10),(null==i.height||i.height>p.height-h-5)&&(i.height=p.height-h-5),i.originalHeight<0&&(i.height=u+i.originalHeight-h),i.originalWidth<0&&(i.width=d+2*i.originalWidth);var f=e(t.box).find(t.title),g=e(t.box).find(".w2ui-message.w2ui-closing");e(t.box).find(".w2ui-message.w2ui-closing").length>0&&(clearTimeout(r),b(g,g.data("options")||{}));var m=e(t.box).find(".w2ui-message").length;if(""===(i.html||"").trim()&&""===(i.body||"").trim()&&""===(i.buttons||"").trim()){if(0===m)return;var v=e(t.box).find("#w2ui-message"+(m-1));if(i=v.data("options")||{},i.trigger&&(o=i.trigger({phase:"before",type:"close",target:"self",box:i.box[0]}),!0===o.isCancelled))return;v.css($e.cssPrefix({transition:"0.15s",transform:"translateY(-"+i.height+"px)"})).addClass("w2ui-closing"),1===m?n.unlock&&(t.param?n.unlock(t.param,150):n.unlock(150)):e(t.box).find("#w2ui-message"+(m-2)).css("z-index",1500),r=setTimeout((function(){b(v,i)}),150)}else{""===(i.body||"").trim()&&""===(i.buttons||"").trim()||(i.html='<div class="w2ui-message-body">'+(i.body||"")+'</div><div class="w2ui-message-buttons">'+(i.buttons||"")+"</div>"),e(t.box).find(".w2ui-message").css("z-index",1390),f.data("old-z-index",f.css("z-index")),f.css("z-index",1501),e(t.box).find(t.body).before('<div id="w2ui-message'+m+'" data-mousedown="stop"    class="w2ui-message" style="display: none; z-index: 1500; '+(0===f.length?"top: 0px;":"top: "+$e.getSize(f,"height")+"px;")+(null!=i.width?"width: "+i.width+"px; left: "+(d-i.width)/2+"px;":"left: 10px; right: 10px;")+(null!=i.height?"height: "+i.height+"px;":"bottom: 6px;")+$e.cssPrefix("transition",".3s",!0)+'"'+(!0===i.hideOnClick?t.param?'data-click=\'["message", "'.concat(t.param,'"]'):'data-click="message"':"")+"></div>"),Q("#w2ui-message"+m,n),e(t.box).find("#w2ui-message"+m).data("options",i).data("prev_focus",e(":focus"));var y=e(t.box).find("#w2ui-message"+m).css("display");if(e(t.box).find("#w2ui-message"+m).css($e.cssPrefix({transform:"none"===y?"translateY(-"+i.height+"px)":"translateY(0px)"})),"none"===y){if(e(t.box).find("#w2ui-message"+m).show().html(i.html),i.box=e(t.box).find("#w2ui-message"+m),i.trigger&&(o=i.trigger({phase:"before",type:"open",target:"self",box:i.box[0]}),!0===o.isCancelled))return f.css("z-index",f.data("old-z-index")),void e(t.box).find("#w2ui-message"+m).remove();setTimeout((function(){e(t.box).find("#w2ui-message"+m).css($e.cssPrefix({transform:"none"===y?"translateY(0px)":"translateY(-"+i.height+"px)"}))}),1),0===m&&n.lock&&(t.param?n.lock(t.param):n.lock()),setTimeout((function(){e(t.box).find("#w2ui-message"+m).css($e.cssPrefix({transition:"0s"})),i.trigger&&(i.trigger(e.extend(o,{phase:"after"})),s())}),350)}}function b(i,n){if(null==o&&n.trigger&&(o=n.trigger({phase:"before",type:"open",target:"self"}),!0===o.isCancelled))return f.css("z-index",f.data("old-z-index")),void e(t.box).find("#w2ui-message"+m).remove();var s=i.data("prev_focus");i.remove(),s&&s.length>0?s.focus():l&&"function"==typeof l.focus&&l.focus(),f.css("z-index",f.data("old-z-index")),n.trigger&&n.trigger(e.extend(o,{phase:"after"}))}}))}function j(t,i){var n=e(t),s={left:parseInt(n.css("border-left-width"))||0,right:parseInt(n.css("border-right-width"))||0,top:parseInt(n.css("border-top-width"))||0,bottom:parseInt(n.css("border-bottom-width"))||0},a={left:parseInt(n.css("margin-left"))||0,right:parseInt(n.css("margin-right"))||0,top:parseInt(n.css("margin-top"))||0,bottom:parseInt(n.css("margin-bottom"))||0},r={left:parseInt(n.css("padding-left"))||0,right:parseInt(n.css("padding-right"))||0,top:parseInt(n.css("padding-top"))||0,bottom:parseInt(n.css("padding-bottom"))||0};switch(i){case"top":return s.top+a.top+r.top;case"bottom":return s.bottom+a.bottom+r.bottom;case"left":return s.left+a.left+r.left;case"right":return s.right+a.right+r.right;case"width":return s.left+s.right+a.left+a.right+r.left+r.right+parseInt(n.width());case"height":return s.top+s.bottom+a.top+a.bottom+r.top+r.bottom+parseInt(n.height());case"+width":return s.left+s.right+a.left+a.right+r.left+r.right;case"+height":return s.top+s.bottom+a.top+a.bottom+r.top+r.bottom}return 0}function z(t,i){var n,s='<div id="_tmp_width" style="position: absolute; top: -900px;'+(i||"")+'">'+_(t)+"</div>";return e("body").append(s),n=e("#_tmp_width").width(),e("#_tmp_width").remove(),n}function R(e,t){return"string"===typeof e&&t&&"object"===Object(ge["a"])(t)?e.replace(/\${([^}]+)?}/g,(function(e,i){return t[i]||i})):e}function N(e,t,i){if(!e||"string"!==typeof e||"<=>=".includes(e))return e;!0===t&&(t=void 0,i=!0);var n=this.settings.phrases[e];return null==n&&(n=e,this.settings.warn_missing_translation&&!i&&(console.warn("Missing translation:",e),this.settings.phrases[e]=n)),R(n,t)}function M(t,i){t||(t="en-us"),"string"===typeof t?(5===t.length&&(t="locale/"+t+".json"),$e.settings.phrases={},e.ajax({url:t,type:"GET",dataType:"JSON",success:function(t,n,s){$e.settings=e.extend(!0,{},$e.settings,xe,t),"function"===typeof i&&i()},error:function(e,i,n){console.log("ERROR: Cannot load locale "+t)}})):$e.settings=e.extend(!0,{},$e.settings,xe,t)}function F(){if(t.scrollBarSize)return t.scrollBarSize;var i='<div id="_scrollbar_width" style="position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;">    <div style="height: 120px">1</div></div>';return e("body").append(i),t.scrollBarSize=100-e("#_scrollbar_width > div").width(),e("#_scrollbar_width").remove(),String(navigator.userAgent).indexOf("MSIE")>=0&&(t.scrollBarSize=t.scrollBarSize/2),t.scrollBarSize}function L(e){return null==e?(console.log('ERROR: Property "name" is required but not supplied.'),!1):null!=_e[e]?(console.log('ERROR: Object named "'.concat(e,'" is already registered as w2ui.').concat(e,".")),!1):!!$e.isAlphaNumeric(e)||(console.log('ERROR: Property "name" has to be alpha-numeric (a-z, 0-9, dash and underscore).'),!1)}function P(e,t,i,n){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)if(t[s].id===e)return console.log('ERROR: The item "id='.concat(e,'" is not unique within the ').concat(i,' "').concat(n,'".'),t),!1;return!0}function H(e){var t=[],i=e.replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,(function(e,i,n,s,a,r){return t.push({name:s,optional:!!r}),i=i||"",(r?"":i)+"(?:"+(r?i:"")+(n||"")+(a||n&&"([^/.]+?)"||"([^/]+?)")+")"+(r||"")})).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)");return{path:new RegExp("^"+i+"$","i"),keys:t}}function B(t,i,n){var s={},a={},r="";for(var o in e.isPlainObject(t)?(s=t,!0===i&&(n=!0)):s[t]=i,s)a[o]=s[o],a["-webkit-"+o]=s[o],a["-moz-"+o]=s[o].replace("-webkit-","-moz-"),a["-ms-"+o]=s[o].replace("-webkit-","-ms-"),a["-o-"+o]=s[o].replace("-webkit-","-o-");if(!0===n)for(var l in a)r+=l+": "+a[l]+"; ";else r=a;return r}function q(e){if(null==e)return null;var t,i=0,n=e.ownerDocument||e.document,s=n.defaultView||n.parentWindow;if(e.tagName&&"INPUT"===e.tagName.toUpperCase()&&e.selectionStart)i=e.selectionStart;else if(s.getSelection){if(t=s.getSelection(),t.rangeCount>0){var a=t.getRangeAt(0),r=a.cloneRange();r.selectNodeContents(e),r.setEnd(a.endContainer,a.endOffset),i=r.toString().length}}else if((t=n.selection)&&"Control"!==t.type){var o=t.createRange(),l=n.body.createTextRange();l.moveToElementText(e),l.setEndPoint("EndToEnd",o),i=l.text.length}return i}function W(t,i,n){var s,a=document.createRange(),r=window.getSelection();if(null!=t){for(var o=0;o<t.childNodes.length;o++){var l=e(t.childNodes[o]).text();if(t.childNodes[o].tagName&&(l=e(t.childNodes[o]).html(),l=l.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&nbsp;/g," ")),i<=l.length){s=t.childNodes[o],s.childNodes&&s.childNodes.length>0&&(s=s.childNodes[0]),s.childNodes&&s.childNodes.length>0&&(s=s.childNodes[0]);break}i-=l.length}null!=s&&(i>s.length&&(i=s.length),a.setStart(s,i),n?a.setEnd(s,n):a.collapse(!0),r.removeAllRanges(),r.addRange(a))}}function U(){var e="w2ui_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function Y(e){if("string"!==typeof e)return null;e=e.trim().toUpperCase(),"#"===e[0]&&(e=e.substr(1));var t={};if(3===e.length)t={r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1};else if(6===e.length)t={r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1};else if(8===e.length)t={r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:Math.round(parseInt(e.substr(6,2),16)/255*100)/100};else if(e.length>4&&"RGB("===e.substr(0,4)){var i=e.replace("RGB","").replace(/\(/g,"").replace(/\)/g,"").split(",");t={r:parseInt(i[0],10),g:parseInt(i[1],10),b:parseInt(i[2],10),a:1}}else{if(!(e.length>5&&"RGBA("===e.substr(0,5)))return null;var n=e.replace("RGBA","").replace(/\(/g,"").replace(/\)/g,"").split(",");t={r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10),a:parseFloat(n[3])}}return t}function X(e,t,i,n){var s,a,r,o,l,c,d,u;switch(1===arguments.length&&(t=e.s,i=e.v,n=e.a,e=e.h),e/=360,t/=100,i/=100,o=Math.floor(6*e),l=6*e-o,c=i*(1-t),d=i*(1-l*t),u=i*(1-(1-l)*t),o%6){case 0:s=i,a=u,r=c;break;case 1:s=d,a=i,r=c;break;case 2:s=c,a=i,r=u;break;case 3:s=c,a=d,r=i;break;case 4:s=u,a=c,r=i;break;case 5:s=i,a=c,r=d;break}return{r:Math.round(255*s),g:Math.round(255*a),b:Math.round(255*r),a:null!=n?n:1}}function V(e,t,i,n){1===arguments.length&&(t=e.g,i=e.b,n=e.a,e=e.r);var s,a=Math.max(e,t,i),r=Math.min(e,t,i),o=a-r,l=0===a?0:o/a,c=a/255;switch(a){case r:s=0;break;case e:s=t-i+o*(t<i?6:0),s/=6*o;break;case t:s=i-e+2*o,s/=6*o;break;case i:s=e-t+4*o,s/=6*o;break}return{h:Math.round(360*s),s:Math.round(100*l),v:Math.round(100*c),a:null!=n?n:1}}function J(e,t){var i,n="mouseenter",s="mouseleave";return t=t||{},t.showOn&&(n=t.showOn,delete t.showOn),t.hideOn&&(s=t.hideOn,delete t.hideOn),i="on"+n+"=\"$(this).w2tag(w2utils.base64decode('"+$e.base64encode(e)+"'),JSON.parse(w2utils.base64decode('"+$e.base64encode(JSON.stringify(t))+"')))\"on"+s+'="$(this).w2tag()"',i}
/*
     * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
     * @license    MIT License
     */function K(e,t){var i,n,s=1,a=0,r=0,o=String.alphabet;function l(e,t,n){if(n){for(i=t;n=l(e,i),n<76&&n>65;)++i;return+e.slice(t-1,i)}return n=o&&o.indexOf(e.charAt(t)),n>-1?n+76:(n=e.charCodeAt(t)||0,n<45||n>127?n:n<46?65:n<48?n-1:n<58?n+18:n<65?n-11:n<91?n+11:n<97?n-37:n<123?n+5:n-63)}if((e+="")!=(t+=""))for(;s;)if(n=l(e,a++),s=l(t,r++),n<76&&s<76&&n>66&&s>66&&(n=l(e,a,a),s=l(t,r,a=i),r=i),n!=s)return n<s?-1:1;return 0}function G(e,t){return Array.isArray(e)?(e.forEach((function(t,i){"string"===typeof t||"number"===typeof t?e[i]={id:t,text:t}:null!=t?(null!=t.caption&&null==t.text&&(t.text=t.caption),null!=t.text&&null==t.id&&(t.id=t.text),null==t.text&&null!=t.id&&(t.text=t.id)):e[i]={id:null,text:"null"}})),e):"function"===typeof e?$e.normMenu.call(this,e.call(this,t)):"object"===Object(ge["a"])(e)?Object.keys(e).map((function(t){return{id:t,text:e[t]}})):void 0}function Q(t,i){e(t).each((function(t,n){var s=e(n).data();Object.keys(s).forEach((function(t){if(-1!=["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mousemove","mouseup","focus","blur","input","change","keydown","keyup","keypress"].indexOf(String(t).toLowerCase())){var s=e(n).data(t);"string"==typeof s&&(s=s.split("|").map((function(e){return"true"===e&&(e=!0),"false"===e&&(e=!1),e})));var a=s[0];s=s.slice(1),e(n).off(t+".w2utils-bind").on(t+".w2utils-bind",(function(e){var t=this;switch(a){case"alert":alert(s[0]);break;case"stop":e.stopPropagation();break;case"prevent":e.preventDefault();break;case"stopPrevent":return e.stopPropagation(),e.preventDefault(),!1;default:i[a].apply(i,s.map((function(i,n){switch(String(i).toLowerCase()){case"event":return e;case"this":return t;default:return i}})))}}))}}))}))}}(jQuery);$e.formatters={number:function(e,t){return parseInt(t)>20&&(t=20),parseInt(t)<0&&(t=0),null==e||""===e?"":$e.formatNumber(parseFloat(e),t,!0)},float:function(e,t){return $e.formatters.number(e,t)},int:function(e,t){return $e.formatters.number(e,0)},money:function(e,t){if(null==e||""===e)return"";var i=$e.formatNumber(Number(e),$e.settings.currencyPrecision);return($e.settings.currencyPrefix||"")+i+($e.settings.currencySuffix||"")},currency:function(e,t){return $e.formatters.money(e,t)},percent:function(e,t){return null==e||""===e?"":$e.formatNumber(e,t||1)+"%"},size:function(e,t){return null==e||""===e?"":$e.formatSize(parseInt(e))},date:function(e,t){if(""===t&&(t=$e.settings.dateFormat),null==e||0===e||""===e)return"";var i=$e.isDateTime(e,t,!0);return!1===i&&(i=$e.isDate(e,t,!0)),'<span title="'+i+'">'+$e.formatDate(i,t)+"</span>"},datetime:function(e,t){if(""===t&&(t=$e.settings.datetimeFormat),null==e||0===e||""===e)return"";var i=$e.isDateTime(e,t,!0);return!1===i&&(i=$e.isDate(e,t,!0)),'<span title="'+i+'">'+$e.formatDateTime(i,t)+"</span>"},time:function(e,t){if(""===t&&(t=$e.settings.timeFormat),"h12"===t&&(t="hh:mi pm"),"h24"===t&&(t="h24:mi"),null==e||0===e||""===e)return"";var i=$e.isDateTime(e,t,!0);return!1===i&&(i=$e.isDate(e,t,!0)),'<span title="'+i+'">'+$e.formatTime(e,t)+"</span>"},timestamp:function(e,t){if(""===t&&(t=$e.settings.datetimeFormat),null==e||0===e||""===e)return"";var i=$e.isDateTime(e,t,!0);return!1===i&&(i=$e.isDate(e,t,!0)),i.toString?i.toString():""},gmt:function(e,t){if(""===t&&(t=$e.settings.datetimeFormat),null==e||0===e||""===e)return"";var i=$e.isDateTime(e,t,!0);return!1===i&&(i=$e.isDate(e,t,!0)),i.toUTCString?i.toUTCString():""},age:function(e,t){if(null==e||0===e||""===e)return"";var i=$e.isDateTime(e,null,!0);return!1===i&&(i=$e.isDate(e,null,!0)),'<span title="'+i+'">'+$e.age(e)+(t?" "+t:"")+"</span>"},interval:function(e,t){return null==e||0===e||""===e?"":$e.interval(e)+(t?" "+t:"")},toggle:function(e,t){return e?"Yes":""},password:function(e,t){for(var i="",n=0;n<e.length;n++)i+="*";return i}},self&&(_e=self.w2ui||{},self.w2ui=_e,self.w2utils=$e);var ke=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;if(Object(me["a"])(this,i),n=t.call(this,e.name),n.name=null,n.box=null,n.columns=[],n.columnGroups=[],n.records=[],n.summary=[],n.searches=[],n.toolbar={},n.ranges=[],n.menu=[],n.searchMap={},n.searchData=[],n.sortMap={},n.sortData=[],n.savedSearches=[],n.total=0,n.recid=null,n.last={field:"",label:"",logic:"AND",search:"",searchIds:[],selection:{indexes:[],columns:{}},_selection:null,multi:!1,scrollTop:0,scrollLeft:0,colStart:0,colEnd:0,xhr:null,xhr_cmd:"",xhr_offset:null,xhr_start:0,xhr_response:0,xhr_hasMore:!1,pull_more:!1,pull_refresh:!0,loaded:!1,range_start:null,range_end:null,sel_ind:null,sel_col:null,sel_type:null,sel_recid:null,idCache:{},move:null,cancelClick:null,inEditMode:!1,_edit:null,kbd_timer:null,marker_timer:null,click_time:null,click_recid:null,bubbleEl:null,colResizing:!1,tmp:null,copy_event:null,userSelect:"",columnDrag:!1,state:null,show_extra:0,_toolbar_height:0},n.header="",n.url="",n.limit=100,n.offset=0,n.postData={},n.routeData={},n.httpHeaders={},n.show={header:!1,toolbar:!1,footer:!1,columnHeaders:!0,lineNumbers:!1,orderColumn:!1,expandColumn:!1,selectColumn:!1,emptyRecords:!0,toolbarReload:!0,toolbarColumns:!1,toolbarSearch:!0,toolbarAdd:!1,toolbarEdit:!1,toolbarDelete:!1,toolbarSave:!1,searchAll:!0,searchLogic:!0,searchHiddenMsg:!1,searchSave:!0,statusRange:!0,statusBuffered:!1,statusRecordID:!0,statusSelection:!0,statusResponse:!0,statusSort:!1,statusSearch:!1,recordTitles:!0,selectionBorder:!0,skipRecords:!0,saveRestoreState:!0},n.stateId=null,n.hasFocus=!1,n.autoLoad=!0,n.fixedBody=!0,n.recordHeight=32,n.lineNumberWidth=34,n.keyboard=!0,n.selectType="row",n.multiSearch=!0,n.multiSelect=!0,n.multiSort=!0,n.reorderColumns=!1,n.reorderRows=!1,n.showExtraOnSearch=0,n.markSearch=!0,n.columnTooltip="top|bottom",n.disableCVS=!1,n.nestedFields=!0,n.vs_start=150,n.vs_extra=15,n.style="",n.tabIndex=null,n.method=null,n.dataType=null,n.parser=null,n.advanceOnEdit=!0,n.useLocalStorage=!0,n.stateColProps={text:!1,field:!0,size:!0,min:!1,max:!1,gridMinWidth:!1,sizeCorrected:!1,sizeCalculated:!0,sizeOriginal:!0,sizeType:!0,hidden:!0,sortable:!1,searchable:!1,clipboardCopy:!1,resizable:!1,hideable:!1,attr:!1,style:!1,render:!1,title:!1,editable:!1,frozen:!0,info:!1},n.stateColDefaults={text:"",field:"",size:null,min:20,max:null,gridMinWidth:null,sizeCorrected:null,sizeCalculated:null,sizeOriginal:null,sizeType:null,hidden:!1,sortable:!1,searchable:!1,clipboardCopy:!1,resizable:!0,hideable:!0,attr:"",style:"",render:null,title:null,editable:{},frozen:!1,info:null},n.msgDelete="Are you sure you want to delete ${count} ${records}?",n.msgNotJSON="Returned data is not in valid JSON format.",n.msgAJAXerror="AJAX error. See console for more details.",n.msgRefresh="Refreshing...",n.msgNeedReload="Your remote data source record count has changed, reloading from the first record.",n.msgEmpty="",n.buttons={reload:{type:"button",id:"w2ui-reload",icon:"w2ui-icon-reload",tooltip:"Reload data in the list"},columns:{type:"drop",id:"w2ui-column-on-off",icon:"w2ui-icon-columns",tooltip:"Show/hide columns",arrow:!1,html:""},search:{type:"html",id:"w2ui-search",html:"<div class=\"w2ui-icon w2ui-icon-search w2ui-search-down\" onclick=\"let grid = w2ui[jQuery(this).parents('div.w2ui-grid').attr('name')]; grid.searchShowFields()\"></div>"},add:{type:"button",id:"w2ui-add",text:"Add New",tooltip:"Add new record",icon:"w2ui-icon-plus"},edit:{type:"button",id:"w2ui-edit",text:"Edit",tooltip:"Edit selected record",icon:"w2ui-icon-pencil",disabled:!0},delete:{type:"button",id:"w2ui-delete",text:"Delete",tooltip:"Delete selected records",icon:"w2ui-icon-cross",disabled:!0},save:{type:"button",id:"w2ui-save",text:"Save",tooltip:"Save changed records",icon:"w2ui-icon-check"}},n.operators={text:["is","begins","contains","ends"],number:["=","between",">","<",">=","<="],date:["is","between",{oper:"less",text:"before"},{oper:"more",text:"after"}],list:["is"],hex:["is","between"],color:["is","begins","contains","ends"],enum:["in","not in"]},n.defaultOperator={text:"begins",number:"=",date:"is",list:"is",enum:"in",hex:"begins",color:"begins"},n.operatorsMap={text:"text",int:"number",float:"number",money:"number",currency:"number",percent:"number",hex:"hex",alphanumeric:"text",color:"color",date:"date",time:"date",datetime:"date",list:"list",combo:"text",enum:"enum",file:"enum",select:"list",radio:"list",checkbox:"list",toggle:"list"},n.onAdd=null,n.onEdit=null,n.onRequest=null,n.onLoad=null,n.onDelete=null,n.onSave=null,n.onSelect=null,n.onUnselect=null,n.onClick=null,n.onDblClick=null,n.onContextMenu=null,n.onMenuClick=null,n.onColumnClick=null,n.onColumnDblClick=null,n.onColumnResize=null,n.onColumnAutoResize=null,n.onSort=null,n.onSearch=null,n.onSearchOpen=null,n.onChange=null,n.onRestore=null,n.onExpand=null,n.onCollapse=null,n.onError=null,n.onKeydown=null,n.onToolbar=null,n.onColumnOnOff=null,n.onCopy=null,n.onPaste=null,n.onSelectionExtend=null,n.onEditField=null,n.onRender=null,n.onRefresh=null,n.onReload=null,n.onResize=null,n.onDestroy=null,n.onStateSave=null,n.onStateRestore=null,n.onFocus=null,n.onBlur=null,n.onReorderRow=null,n.onSearchSave=null,n.onSearchRemove=null,n.onSearchSelect=null,n.onColumnSelect=null,n.onColumnDragStart=null,n.onColumnDragEnd=null,n.onResizerDblClick=null,$.extend(!0,Object(ue["a"])(n),e),Array.isArray(n.records)&&n.records.forEach((function(e){null!=e[n.recid]&&(e.recid=e[n.recid]),null==e.recid&&console.log("ERROR: Cannot add records without recid. (obj: "+n.name+")")})),Array.isArray(n.columns)&&n.columns.forEach((function(e){var t=e.searchable;if(null!=t&&!1!==t&&null==n.getSearch(e.field))if($.isPlainObject(t))n.addSearch($.extend({field:e.field,label:e.text,type:"text"},t));else{var i=e.searchable,s="";!0===e.searchable&&(i="text",s='size="20"'),n.addSearch({field:e.field,label:e.text,type:i,attr:s})}})),$e.hasLocalStorage&&n.useLocalStorage)try{var s=JSON.parse(localStorage.w2ui||"{}");if(s&&s.searches){var a=s.searches[n.stateId||n.name];Array.isArray(a)&&a.forEach((function(e){n.savedSearches.push({id:e.name,text:e.name,icon:"w2ui-icon-search",remove:!0,logic:e.logic,data:e.data})}))}}catch(r){}return n}return Object(ve["a"])(i,[{key:"add",value:function(e,t){Array.isArray(e)||(e=[e]);for(var i=0,n=0;n<e.length;n++){var s=e[n];null!=s[this.recid]&&(s.recid=s[this.recid]),null!=s.recid?(s.w2ui&&!0===s.w2ui.summary?t?this.summary.unshift(s):this.summary.push(s):t?this.records.unshift(s):this.records.push(s),i++):console.log("ERROR: Cannot add record without recid. (obj: "+this.name+")")}var a="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;return a?(this.refresh(),i):(this.total=this.records.length,this.localSort(!1,!0),this.localSearch(),this.refreshBody(),this.resizeRecords(),i)}},{key:"find",value:function(e,t){null==e&&(e={});var i=[],n=!1;for(var s in e)-1!=String(s).indexOf(".")&&(n=!0);for(var a=0;a<this.records.length;a++){var r=!0;for(var o in e){var l=this.records[a][o];n&&-1!=String(o).indexOf(".")&&(l=this.parseField(this.records[a],o)),"not-null"==e[o]?null!=l&&""!==l||(r=!1):e[o]!=l&&(r=!1)}r&&!0!==t&&i.push(this.records[a].recid),r&&!0===t&&i.push(a)}return i}},{key:"set",value:function(e,t,i){if("object"==Object(ge["a"])(e)&&null!==e&&(i=t,t=e,e=null),null==e){for(var n=0;n<this.records.length;n++)$.extend(!0,this.records[n],t);!0!==i&&this.refresh()}else{var s=this.get(e,!0);if(null==s)return!1;var a=!this.records[s]||this.records[s].recid!=e;a?$.extend(!0,this.summary[s],t):$.extend(!0,this.records[s],t),!0!==i&&this.refreshRow(e,s)}return!0}},{key:"get",value:function(e,t){if(Array.isArray(e)){for(var i=[],n=0;n<e.length;n++){var s=this.get(e[n],t);null!==s&&i.push(s)}return i}var a=this.last.idCache;a||(this.last.idCache=a={});var r=a[e];if("number"===typeof r){if(r>=0&&r<this.records.length&&this.records[r].recid==e)return!0===t?r:this.records[r];if(r=~r,r>=0&&r<this.summary.length&&this.summary[r].recid==e)return!0===t?r:this.summary[r];this.last.idCache=a={}}for(var o=0;o<this.records.length;o++)if(this.records[o].recid==e)return a[e]=o,!0===t?o:this.records[o];for(var l=0;l<this.summary.length;l++)if(this.summary[l].recid==e)return a[e]=~l,!0===t?l:this.summary[l];return null}},{key:"getFirst",value:function(){if(0==this.records.length)return null;var e=this.records[0].recid,t=this.last.searchIds;return this.searchData.length>0&&(e=Array.isArray(t)&&t.length>0?this.records[t[0]].recid:null),e}},{key:"remove",value:function(){for(var e=0,t=0;t<arguments.length;t++){for(var i=this.records.length-1;i>=0;i--)this.records[i].recid==arguments[t]&&(this.records.splice(i,1),e++);for(var n=this.summary.length-1;n>=0;n--)this.summary[n].recid==arguments[t]&&(this.summary.splice(n,1),e++)}var s="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;return s||(this.localSort(!1,!0),this.localSearch()),this.refresh(),e}},{key:"addColumn",value:function(e,t){var i=0;1==arguments.length?(t=e,e=this.columns.length):("string"==typeof e&&(e=this.getColumn(e,!0)),null==e&&(e=this.columns.length)),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){if(this.columns.splice(e,0,t[n]),t[n].searchable){var s=t[n].searchable,a="";!0===t[n].searchable&&(s="text",a='size="20"'),this.addSearch({field:t[n].field,label:t[n].label,type:s,attr:a})}e++,i++}return this.refresh(),i}},{key:"removeColumn",value:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.columns.length-1;i>=0;i--)this.columns[i].field==arguments[t]&&(this.columns[i].searchable&&this.removeSearch(arguments[t]),this.columns.splice(i,1),e++);return this.refresh(),e}},{key:"getColumn",value:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.columns.length;n++)i.push(this.columns[n].field);return i}for(var s=0;s<this.columns.length;s++)if(this.columns[s].field==e)return!0===t?s:this.columns[s];return null}},{key:"updateColumn",value:function(e,t){var i=this,n=0;return e=Array.isArray(e)?e:[e],e.forEach((function(e){i.columns.forEach((function(i){if(i.field==e){var s=$.extend(!0,{},t);Object.keys(s).forEach((function(e){"function"==typeof s[e]&&(s[e]=s[e](i)),i[e]!=s[e]&&n++})),$.extend(!0,i,s)}}))})),n>0&&this.refresh(),n}},{key:"toggleColumn",value:function(){return this.updateColumn(Array.from(arguments),{hidden:function(e){return!e.hidden}})}},{key:"showColumn",value:function(){return this.updateColumn(Array.from(arguments),{hidden:!1})}},{key:"hideColumn",value:function(){return this.updateColumn(Array.from(arguments),{hidden:!0})}},{key:"addSearch",value:function(e,t){var i=0;1==arguments.length?(t=e,e=this.searches.length):("string"==typeof e&&(e=this.getSearch(e,!0)),null==e&&(e=this.searches.length)),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)this.searches.splice(e,0,t[n]),e++,i++;return this.searchClose(),i}},{key:"removeSearch",value:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&(this.searches.splice(i,1),e++);return this.searchClose(),e}},{key:"getSearch",value:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.searches.length;n++)i.push(this.searches[n].field);return i}for(var s=0;s<this.searches.length;s++)if(this.searches[s].field==e)return!0===t?s:this.searches[s];return null}},{key:"toggleSearch",value:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&(this.searches[i].hidden=!this.searches[i].hidden,e++);return this.searchClose(),e}},{key:"showSearch",value:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&!1!==this.searches[i].hidden&&(this.searches[i].hidden=!1,e++);return this.searchClose(),e}},{key:"hideSearch",value:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&!0!==this.searches[i].hidden&&(this.searches[i].hidden=!0,e++);return this.searchClose(),e}},{key:"getSearchData",value:function(e){for(var t=0;t<this.searchData.length;t++)if(this.searchData[t].field==e)return this.searchData[t];return null}},{key:"localSort",value:function(e,t){var i=this,n=this,s="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(s)console.log("ERROR: grid.localSort can only be used on local data source, grid.url should be empty.");else if(!$.isEmptyObject(this.sortData)){var a=(new Date).getTime();this.selectionSave(),this.prepareData(),t||this.reset();for(var r=0;r<this.sortData.length;r++){var o=this.getColumn(this.sortData[r].field);if(!o)return;"string"==typeof o.render&&(-1!=["date","age"].indexOf(o.render.split(":")[0])&&(this.sortData[r].field_=o.field+"_"),-1!=["time"].indexOf(o.render.split(":")[0])&&(this.sortData[r].field_=o.field+"_"))}return l(),this.records.sort((function(e,t){return d(e,t)})),c(),this.selectionRestore(t),a=(new Date).getTime()-a,!0!==e&&this.show.statusSort&&setTimeout((function(){i.status($e.lang("Sorting took ${count} seconds",{count:a/1e3}))}),10),a}function l(){for(var e=0;e<n.records.length;e++){var t=n.records[e];t.w2ui&&null!=t.w2ui.parent_recid&&(t.w2ui._path=u(t))}}function c(){for(var e=0;e<n.records.length;e++){var t=n.records[e];t.w2ui&&null!=t.w2ui.parent_recid&&(t.w2ui._path=null)}}function d(e,t){if((!e.w2ui||null==e.w2ui.parent_recid)&&(!t.w2ui||null==t.w2ui.parent_recid))return h(e,t);for(var i=u(e),n=u(t),s=0;s<Math.min(i.length,n.length);s++){var a=h(i[s],n[s]);if(0!==a)return a}return i.length>n.length?1:i.length<n.length?-1:(console.log("ERROR: two paths should not be equal."),0)}function u(e){if(!e.w2ui||null==e.w2ui.parent_recid)return[e];if(e.w2ui._path)return e.w2ui._path;var t=n.get(e.w2ui.parent_recid);return t?u(t).concat(e):(console.log("ERROR: no parent record: "+e.w2ui.parent_recid),[e])}function h(e,t){if(e===t)return 0;for(var i=0;i<n.sortData.length;i++){var s=n.sortData[i].field,a=n.sortData[i].field_?n.sortData[i].field_:s,r=e[a],o=t[a];-1!=String(s).indexOf(".")&&(r=n.parseField(e,a),o=n.parseField(t,a));var l=n.getColumn(s);l&&null!=l.editable&&($.isPlainObject(r)&&r.text&&(r=r.text),$.isPlainObject(o)&&o.text&&(o=o.text));var c=p(r,o,i,n.sortData[i].direction,l.sortMode||"default");if(0!==c)return c}var d=p(e.recid,t.recid,-1,"asc");return d}function p(e,t,i,n,s){if(e===t)return 0;if((null==e||""===e)&&null!=t&&""!==t)return 1;if(null!=e&&""!==e&&(null==t||""===t))return-1;var a="asc"===n.toLowerCase()?1:-1;if(Object(ge["a"])(e)!=Object(ge["a"])(t))return Object(ge["a"])(e)>Object(ge["a"])(t)?a:-a;if(e.constructor.name!=t.constructor.name)return e.constructor.name>t.constructor.name?a:-a;e&&"object"==Object(ge["a"])(e)&&(e=e.valueOf()),t&&"object"==Object(ge["a"])(t)&&(t=t.valueOf());var r={}.toString;switch(e&&"object"==Object(ge["a"])(e)&&e.toString!=r&&(e=String(e)),t&&"object"==Object(ge["a"])(t)&&t.toString!=r&&(t=String(t)),"string"==typeof e&&(e=e.toLowerCase().trim()),"string"==typeof t&&(t=t.toLowerCase().trim()),s){case"natural":s=$e.naturalCompare;break}return"function"==typeof s?s(e,t)*a:e>t?a:e<t?-a:0}}},{key:"localSearch",value:function(e){var t=this,i=this,n="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(!n){var s=(new Date).getTime(),a={}.toString,r={};if(this.total=this.records.length,this.last.searchIds=[],this.prepareData(),this.searchData.length>0&&!n){this.total=0;for(var o=0;o<this.records.length;o++){var l=this.records[o],c=f(l);if(c)if(l&&l.w2ui&&g(l.w2ui.parent_recid),this.showExtraOnSearch>0){var d=this.showExtraOnSearch,u=this.showExtraOnSearch;if(o<d&&(d=o),o+u>this.records.length&&(u=this.records.length-o),d>0)for(var h=o-d;h<o;h++)this.last.searchIds.indexOf(h)<0&&this.last.searchIds.push(h);if(this.last.searchIds.indexOf(o)<0&&this.last.searchIds.push(o),u>0)for(var p=o+1;p<=o+u;p++)this.last.searchIds.indexOf(p)<0&&this.last.searchIds.push(p)}else this.last.searchIds.push(o)}this.total=this.last.searchIds.length}return s=(new Date).getTime()-s,!0!==e&&this.show.statusSearch&&setTimeout((function(){t.status($e.lang("Search took ${count} seconds",{count:s/1e3}))}),10),s}function f(e){for(var t,n,s,r,o=0,l=!1,c=0;c<i.searchData.length;c++){var d=i.searchData[c],u=i.getSearch(d.field);if(null!=d){null==u&&(u={field:d.field,type:d.type});var h=i.parseField(e,u.field);switch(t=null===h||void 0===h||"object"==Object(ge["a"])(h)&&h.toString==a?"":String(h).toLowerCase(),null!=d.value&&(Array.isArray(d.value)?(n=d.value[0],s=d.value[1]):n=String(d.value).toLowerCase()),d.operator){case"=":case"is":i.parseField(e,u.field)==d.value?o++:"date"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatDate(r,"yyyy-mm-dd"),n=$e.formatDate($e.isDate(n,$e.settings.dateFormat,!0),"yyyy-mm-dd"),t==n&&o++):"time"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatTime(r,"hh24:mi"),n=$e.formatTime(n,"hh24:mi"),t==n&&o++):"datetime"==u.type&&(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatDateTime(r,"yyyy-mm-dd|hh24:mm:ss"),n=$e.formatDateTime($e.isDateTime(n,$e.settings.datetimeFormat,!0),"yyyy-mm-dd|hh24:mm:ss"),t==n&&o++);break;case"between":-1!=["int","float","money","currency","percent"].indexOf(u.type)?parseFloat(i.parseField(e,u.field))>=parseFloat(n)&&parseFloat(i.parseField(e,u.field))<=parseFloat(s)&&o++:"date"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.isDate(r,$e.settings.dateFormat,!0),n=$e.isDate(n,$e.settings.dateFormat,!0),s=$e.isDate(s,$e.settings.dateFormat,!0),null!=s&&(s=new Date(s.getTime()+864e5)),t>=n&&t<s&&o++):"time"==u.type?(t=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),n=$e.isTime(n,!0),s=$e.isTime(s,!0),n=(new Date).setHours(n.hours,n.minutes,n.seconds?n.seconds:0,0),s=(new Date).setHours(s.hours,s.minutes,s.seconds?s.seconds:0,0),t>=n&&t<s&&o++):"datetime"==u.type&&(t=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),n=$e.isDateTime(n,$e.settings.datetimeFormat,!0),s=$e.isDateTime(s,$e.settings.datetimeFormat,!0),s&&(s=new Date(s.getTime()+864e5)),t>=n&&t<s&&o++);break;case"<=":l=!0;case"<":case"less":-1!=["int","float","money","currency","percent"].indexOf(u.type)?(t=parseFloat(i.parseField(e,u.field)),n=parseFloat(d.value),(t<n||l&&t===n)&&o++):"date"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.isDate(r,$e.settings.dateFormat,!0),n=$e.isDate(n,$e.settings.dateFormat,!0),(t<n||l&&t===n)&&o++):"time"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatTime(r,"hh24:mi"),n=$e.formatTime(n,"hh24:mi"),(t<n||l&&t===n)&&o++):"datetime"==u.type&&(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatDateTime(r,"yyyy-mm-dd|hh24:mm:ss"),n=$e.formatDateTime($e.isDateTime(n,$e.settings.datetimeFormat,!0),"yyyy-mm-dd|hh24:mm:ss"),t.length==n.length&&(t<n||l&&t===n)&&o++);break;case">=":l=!0;case">":case"more":-1!=["int","float","money","currency","percent"].indexOf(u.type)?(t=parseFloat(i.parseField(e,u.field)),n=parseFloat(d.value),(t>n||l&&t===n)&&o++):"date"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.isDate(r,$e.settings.dateFormat,!0),n=$e.isDate(n,$e.settings.dateFormat,!0),(t>n||l&&t===n)&&o++):"time"==u.type?(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatTime(r,"hh24:mi"),n=$e.formatTime(n,"hh24:mi"),(t>n||l&&t===n)&&o++):"datetime"==u.type&&(r=i.parseField(e,u.field+"_")instanceof Date?i.parseField(e,u.field+"_"):i.parseField(e,u.field),t=$e.formatDateTime(r,"yyyy-mm-dd|hh24:mm:ss"),n=$e.formatDateTime($e.isDateTime(n,$e.settings.datetimeFormat,!0),"yyyy-mm-dd|hh24:mm:ss"),t.length==n.length&&(t>n||l&&t===n)&&o++);break;case"in":r=d.value,d.svalue&&(r=d.svalue),-1===r.indexOf($e.isFloat(h)?parseFloat(h):h)&&-1===r.indexOf(t)||o++;break;case"not in":r=d.value,d.svalue&&(r=d.svalue),-1===r.indexOf($e.isFloat(h)?parseFloat(h):h)&&-1===r.indexOf(t)&&o++;break;case"begins":case"begins with":0===t.indexOf(n)&&o++;break;case"contains":t.indexOf(n)>=0&&o++;break;case"null":null==i.parseField(e,u.field)&&o++;break;case"not null":null!=i.parseField(e,u.field)&&o++;break;case"ends":case"ends with":var p=t.lastIndexOf(n);-1!==p&&p==t.length-n.length&&o++;break}}}if("OR"==i.last.logic&&0!==o||"AND"==i.last.logic&&o==i.searchData.length)return!0;if(e.w2ui&&e.w2ui.children&&!0!==e.w2ui.expanded)for(var g=0;g<e.w2ui.children.length;g++){var m=e.w2ui.children[g];if(f(m))return!0}return!1}function g(e){if(void 0!==e&&!r[e]){r[e]=!0;var t=i.get(e,!0);if(null!=t&&-1==$.inArray(t,i.last.searchIds)){var n=i.records[t];n&&n.w2ui&&g(n.w2ui.parent_recid),i.last.searchIds.push(t)}}}console.log("ERROR: grid.localSearch can only be used on local data source, grid.url should be empty.")}},{key:"getRangeData",value:function(e,t){var i=this.get(e[0].recid,!0),n=this.get(e[1].recid,!0),s=e[0].column,a=e[1].column,r=[];if(s==a)for(var o=i;o<=n;o++){var l=this.records[o],c=l[this.columns[s].field]||null;!0!==t?r.push(c):r.push({data:c,column:s,index:o,record:l})}else if(i==n)for(var d=this.records[i],u=s;u<=a;u++){var h=d[this.columns[u].field]||null;!0!==t?r.push(h):r.push({data:h,column:u,index:i,record:d})}else for(var p=i;p<=n;p++){var f=this.records[p];r.push([]);for(var g=s;g<=a;g++){var m=f[this.columns[g].field];!0!==t?r[r.length-1].push(m):r[r.length-1].push({data:m,column:g,index:p,record:f})}}return r}},{key:"addRange",value:function(e){var t,i,n=0;if("row"==this.selectType)return n;Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){if("object"!=Object(ge["a"])(e[s])&&(e[s]={name:"selection"}),"selection"==e[s].name){if(!1===this.show.selectionBorder)continue;var a=this.getSelection();if(0===a.length){this.removeRange("selection");continue}t=a[0],i=a[a.length-1]}else t=e[s].range[0],i=e[s].range[1];if(t){for(var r={name:e[s].name,range:[{recid:t.recid,column:t.column},{recid:i.recid,column:i.column}],style:e[s].style||""},o=!1,l=0;l<this.ranges.length;l++)if(this.ranges[l].name==e[s].name){o=l;break}!1!==o?this.ranges[o]=r:this.ranges.push(r),n++}}return this.refreshRanges(),n}},{key:"removeRange",value:function(){for(var e=0,t=0;t<arguments.length;t++){var i=arguments[t];$("#grid_"+this.name+"_"+i).remove(),$("#grid_"+this.name+"_f"+i).remove();for(var n=this.ranges.length-1;n>=0;n--)this.ranges[n].name==i&&(this.ranges.splice(n,1),e++)}return e}},{key:"refreshRanges",value:function(){if(0!==this.ranges.length){for(var e,t,i,n,s,a=this,r=(new Date).getTime(),o=$("#grid_"+this.name+"_frecords"),l=$("#grid_"+this.name+"_records"),c=0;c<this.ranges.length;c++){var d=this.ranges[c],u=d.range[0],h=d.range[1];null==u.index&&(u.index=this.get(u.recid,!0)),null==h.index&&(h.index=this.get(h.recid,!0));var p=$("#grid_"+this.name+"_rec_"+$e.escapeId(u.recid)+' td[col="'+u.column+'"]'),f=$("#grid_"+this.name+"_rec_"+$e.escapeId(h.recid)+' td[col="'+h.column+'"]'),g=$("#grid_"+this.name+"_frec_"+$e.escapeId(u.recid)+' td[col="'+u.column+'"]'),m=$("#grid_"+this.name+"_frec_"+$e.escapeId(h.recid)+' td[col="'+h.column+'"]'),v=h.column;u.column<this.last.colStart&&h.column>this.last.colStart&&(p=$("#grid_"+this.name+"_rec_"+$e.escapeId(u.recid)+' td[col="start"]')),u.column<this.last.colEnd&&h.column>this.last.colEnd&&(v='"end"',f=$("#grid_"+this.name+"_rec_"+$e.escapeId(h.recid)+' td[col="end"]'));var y=parseInt($("#grid_"+this.name+"_rec_top").next().attr("index")),b=parseInt($("#grid_"+this.name+"_rec_bottom").prev().attr("index")),w=parseInt($("#grid_"+this.name+"_frec_top").next().attr("index")),x=parseInt($("#grid_"+this.name+"_frec_bottom").prev().attr("index"));0===p.length&&u.index<y&&h.index>y&&(p=$("#grid_"+this.name+"_rec_top").next().find("td[col="+u.column+"]")),0===f.length&&h.index>b&&u.index<b&&(f=$("#grid_"+this.name+"_rec_bottom").prev().find("td[col="+v+"]")),0===g.length&&u.index<w&&h.index>w&&(g=$("#grid_"+this.name+"_frec_top").next().find("td[col="+u.column+"]")),0===m.length&&h.index>x&&u.index<x&&(m=$("#grid_"+this.name+"_frec_bottom").prev().find("td[col="+h.column+"]"));var _=$(this.box).find("#grid_"+this.name+"_editable"),k=_.find(".w2ui-input"),C=k.attr("recid"),T=k.attr("column");"selection"==d.name&&d.range[0].recid==C&&d.range[0].column==T||(e=$("#grid_"+this.name+"_f"+d.name),g.length>0||m.length>0?(0===e.length?(o.append('<div id="grid_'+this.name+"_f"+d.name+'" class="w2ui-selection" style="'+d.style+'">'+("selection"==d.name?'<div id="grid_'+this.name+'_resizer" class="w2ui-selection-resizer"></div>':"")+"</div>"),e=$("#grid_"+this.name+"_f"+d.name)):(e.attr("style",d.style),e.find(".w2ui-selection-resizer").show()),0===m.length&&(m=$("#grid_"+this.name+"_frec_"+$e.escapeId(h.recid)+" td:last-child"),0===m.length&&(m=$("#grid_"+this.name+"_frec_bottom td:first-child")),e.css("border-right","0px"),e.find(".w2ui-selection-resizer").hide()),null!=u.recid&&null!=h.recid&&g.length>0&&m.length>0?(t=0,i=l.scrollTop(),g.find(">div").position().top<8&&(t=0,i=0),n=g.position().left-0+t,s=g.position().top-0+i,e.show().css({left:(n>0?n:0)+"px",top:(s>0?s:0)+"px",width:m.position().left-g.position().left+m.width()+2+"px",height:m.position().top-g.position().top+m.height()+1+"px"})):e.hide()):e.hide(),e=$("#grid_"+this.name+"_"+d.name),p.length>0||f.length>0?(0===e.length?(l.append('<div id="grid_'+this.name+"_"+d.name+'" class="w2ui-selection" style="'+d.style+'">'+("selection"==d.name?'<div id="grid_'+this.name+'_resizer" class="w2ui-selection-resizer"></div>':"")+"</div>"),e=$("#grid_"+this.name+"_"+d.name)):e.attr("style",d.style),0===p.length&&(p=$("#grid_"+this.name+"_rec_"+$e.escapeId(u.recid)+" td:first-child"),0===p.length&&(p=$("#grid_"+this.name+"_rec_top td:first-child"))),0!==m.length&&e.css("border-left","0px"),null!=u.recid&&null!=h.recid&&p.length>0&&f.length>0?(t=l.scrollLeft(),i=l.scrollTop(),f.find(">div").position().top<8&&(t=0,i=0),n=p.position().left-0+t,s=p.position().top-0+i,e.show().css({left:(n>0?n:0)+"px",top:(s>0?s:0)+"px",width:f.position().left-p.position().left+f.width()+2+"px",height:f.position().top-p.position().top+f.height()+1+"px"})):e.hide()):e.hide())}$(this.box).find(".w2ui-selection-resizer").off("mousedown").on("mousedown",O).off("dblclick").on("dblclick",(function(e){var t=a.trigger({phase:"before",type:"resizerDblClick",target:a.name,originalEvent:e});!0!==t.isCancelled&&a.trigger($.extend(t,{phase:"after"}))}));var S={phase:"before",type:"selectionExtend",target:a.name,originalRange:null,newRange:null};return(new Date).getTime()-r}function O(e){var t=a.getSelection();a.last.move={type:"expand",x:e.screenX,y:e.screenY,divX:0,divY:0,recid:t[0].recid,column:t[0].column,originalRange:[{recid:t[0].recid,column:t[0].column},{recid:t[t.length-1].recid,column:t[t.length-1].column}],newRange:[{recid:t[0].recid,column:t[0].column},{recid:t[t.length-1].recid,column:t[t.length-1].column}]},$(document).off(".w2ui-"+a.name).on("mousemove.w2ui-"+a.name,E).on("mouseup.w2ui-"+a.name,D),e.preventDefault()}function E(e){var t=a.last.move;if(t&&"expand"==t.type){var i,n;t.divX=e.screenX-t.x,t.divY=e.screenY-t.y;var s=e.originalEvent.target;if("TD"!=s.tagName.toUpperCase()&&(s=$(s).parents("td")[0]),null!=$(s).attr("col")&&(n=parseInt($(s).attr("col"))),s=$(s).parents("tr")[0],i=$(s).attr("recid"),t.newRange[1].recid!=i||t.newRange[1].column!=n){var r=$.extend({},t.newRange);if(t.newRange=[{recid:t.recid,column:t.column},{recid:i,column:n}],S=a.trigger($.extend(S,{originalRange:t.originalRange,newRange:t.newRange})),!0===S.isCancelled)return t.newRange=r,void(S.newRange=r);a.removeRange("grid-selection-expand"),a.addRange({name:"grid-selection-expand",range:S.newRange,style:"background-color: rgba(100,100,100,0.1); border: 2px dotted rgba(100,100,100,0.5);"})}}}function D(e){a.removeRange("grid-selection-expand"),delete a.last.move,$(document).off(".w2ui-"+a.name),a.trigger($.extend(S,{phase:"after"}))}}},{key:"select",value:function(){if(0===arguments.length)return 0;var e=0,t=this.last.selection;this.multiSelect||this.selectNone();var i=Array.prototype.slice.call(arguments);Array.isArray(i[0])&&(i=i[0]);var n={phase:"before",type:"select",target:this.name};1==i.length?(n.multiple=!1,$.isPlainObject(i[0])?(n.recid=i[0].recid,n.column=i[0].column):n.recid=i[0]):(n.multiple=!0,n.recids=i);var s=this.trigger(n);if(!0===s.isCancelled)return 0;if("row"==this.selectType)for(var a=0;a<i.length;a++){var r="object"==Object(ge["a"])(i[a])?i[a].recid:i[a],o=this.get(r,!0);if(null!=o){var l=null,c=null;if((0!==this.searchData.length||o+1>=this.last.range_start&&o+1<=this.last.range_end)&&(l=$("#grid_"+this.name+"_frec_"+$e.escapeId(r)),c=$("#grid_"+this.name+"_rec_"+$e.escapeId(r))),"row"==this.selectType){if(-1!=t.indexes.indexOf(o))continue;t.indexes.push(o),l&&c&&(l.addClass("w2ui-selected").data("selected","yes").find(".w2ui-col-number").addClass("w2ui-row-selected"),c.addClass("w2ui-selected").data("selected","yes").find(".w2ui-col-number").addClass("w2ui-row-selected"),l.find(".w2ui-grid-select-check").prop("checked",!0)),e++}}}else{for(var d={},u=0;u<i.length;u++){var h="object"==Object(ge["a"])(i[u])?i[u].recid:i[u],p="object"==Object(ge["a"])(i[u])?i[u].column:null;if(d[h]=d[h]||[],Array.isArray(p))d[h]=p;else if($e.isInt(p))d[h].push(p);else for(var f=0;f<this.columns.length;f++)this.columns[f].hidden||d[h].push(parseInt(f))}var g=[];for(var m in d){var v=this.get(m,!0);if(null!=v){var y=null,b=null;v+1>=this.last.range_start&&v+1<=this.last.range_end&&(y=$("#grid_"+this.name+"_rec_"+$e.escapeId(m)),b=$("#grid_"+this.name+"_frec_"+$e.escapeId(m)));var w=t.columns[v]||[];-1==t.indexes.indexOf(v)&&t.indexes.push(v);for(var x=0;x<d[m].length;x++)-1==w.indexOf(d[m][x])&&w.push(d[m][x]);w.sort((function(e,t){return e-t}));for(var _=0;_<d[m].length;_++){var k=d[m][_];-1==g.indexOf(k)&&g.push(k),y&&(y.find("#grid_"+this.name+"_data_"+v+"_"+k).addClass("w2ui-selected"),y.find(".w2ui-col-number").addClass("w2ui-row-selected"),y.data("selected","yes"),y.find(".w2ui-grid-select-check").prop("checked",!0)),b&&(b.find("#grid_"+this.name+"_data_"+v+"_"+k).addClass("w2ui-selected"),b.find(".w2ui-col-number").addClass("w2ui-row-selected"),b.data("selected","yes"),b.find(".w2ui-grid-select-check").prop("checked",!0)),e++}t.columns[v]=w}}for(var C=0;C<g.length;C++)$(this.box).find("#grid_"+this.name+"_column_"+g[C]+" .w2ui-col-header").addClass("w2ui-col-selected")}t.indexes.sort((function(e,t){return e-t}));var T=this.records.length>0&&t.indexes.length==this.records.length,S=t.indexes.length>0&&0!==this.searchData.length&&t.indexes.length==this.last.searchIds.length;return T||S?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),this.updateToolbar(t,T),this.trigger($.extend(s,{phase:"after"})),e}},{key:"unselect",value:function(){var e=0,t=this.last.selection,i=Array.prototype.slice.call(arguments);Array.isArray(i[0])&&(i=i[0]);var n={phase:"before",type:"unselect",target:this.name};1==i.length?(n.multiple=!1,$.isPlainObject(i[0])?(n.recid=i[0].recid,n.column=i[0].column):n.recid=i[0]):(n.multiple=!0,n.recids=i);var s=this.trigger(n);if(!0===s.isCancelled)return 0;for(var a=0;a<i.length;a++){var r="object"==Object(ge["a"])(i[a])?i[a].recid:i[a],o=this.get(r);if(null!=o){var l=this.get(o.recid,!0),c=$("#grid_"+this.name+"_frec_"+$e.escapeId(r)),d=$("#grid_"+this.name+"_rec_"+$e.escapeId(r));if("row"==this.selectType){if(-1==t.indexes.indexOf(l))continue;t.indexes.splice(t.indexes.indexOf(l),1),c.removeClass("w2ui-selected w2ui-inactive").removeData("selected").find(".w2ui-col-number").removeClass("w2ui-row-selected"),d.removeClass("w2ui-selected w2ui-inactive").removeData("selected").find(".w2ui-col-number").removeClass("w2ui-row-selected"),0!=c.length&&(c[0].style.cssText="height: "+this.recordHeight+"px; "+c.attr("custom_style"),d[0].style.cssText="height: "+this.recordHeight+"px; "+d.attr("custom_style")),c.find(".w2ui-grid-select-check").prop("checked",!1),e++}else{var u=i[a].column;if(!$e.isInt(u)){for(var h=[],p=0;p<this.columns.length;p++)this.columns[p].hidden||h.push({recid:r,column:p});return this.unselect(h)}var f=t.columns[l];if(!Array.isArray(f)||-1==f.indexOf(u))continue;f.splice(f.indexOf(u),1),$("#grid_"+this.name+"_rec_"+$e.escapeId(r)).find(" > td[col="+u+"]").removeClass("w2ui-selected w2ui-inactive"),$("#grid_"+this.name+"_frec_"+$e.escapeId(r)).find(" > td[col="+u+"]").removeClass("w2ui-selected w2ui-inactive");for(var g=!1,m=!1,v=this.getSelection(),y=0;y<v.length;y++)v[y].column==u&&(g=!0),v[y].recid==r&&(m=!0);g||$(this.box).find(".w2ui-grid-columns td[col="+u+"] .w2ui-col-header, .w2ui-grid-fcolumns td[col="+u+"] .w2ui-col-header").removeClass("w2ui-col-selected"),m||$("#grid_"+this.name+"_frec_"+$e.escapeId(r)).find(".w2ui-col-number").removeClass("w2ui-row-selected"),e++,0===f.length&&(delete t.columns[l],t.indexes.splice(t.indexes.indexOf(l),1),c.removeData("selected"),c.find(".w2ui-grid-select-check").prop("checked",!1),d.removeData("selected"))}}}var b=this.records.length>0&&t.indexes.length==this.records.length,w=t.indexes.length>0&&0!==this.searchData.length&&t.indexes.length==this.last.searchIds.length;return b||w?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),this.updateToolbar(t,b),this.trigger($.extend(s,{phase:"after"})),e}},{key:"selectAll",value:function(){var e=(new Date).getTime();if(!1!==this.multiSelect){var t=this.trigger({phase:"before",type:"select",target:this.name,all:!0});if(!0!==t.isCancelled){for(var i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get,n=this.last.selection,s=[],a=0;a<this.columns.length;a++)s.push(a);if(n.indexes=[],i||0===this.searchData.length){var r=this.records.length;0==this.searchData.length||i||(r=this.last.searchIds.length);for(var o=0;o<r;o++)n.indexes.push(o),"row"!=this.selectType&&(n.columns[o]=s.slice())}else for(var l=0;l<this.last.searchIds.length;l++)n.indexes.push(this.last.searchIds[l]),"row"!=this.selectType&&(n.columns[this.last.searchIds[l]]=s.slice());return"row"==this.selectType?($(this.box).find(".w2ui-grid-records tr").not(".w2ui-empty-record").addClass("w2ui-selected").data("selected","yes").find(".w2ui-col-number").addClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-frecords tr").not(".w2ui-empty-record").addClass("w2ui-selected").data("selected","yes").find(".w2ui-col-number").addClass("w2ui-row-selected"),$(this.box).find("input.w2ui-grid-select-check").prop("checked",!0)):($(this.box).find(".w2ui-grid-columns td .w2ui-col-header, .w2ui-grid-fcolumns td .w2ui-col-header").addClass("w2ui-col-selected"),$(this.box).find(".w2ui-grid-records tr .w2ui-col-number").addClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-records tr").not(".w2ui-empty-record").find(".w2ui-grid-data").not(".w2ui-col-select").addClass("w2ui-selected").data("selected","yes"),$(this.box).find(".w2ui-grid-frecords tr .w2ui-col-number").addClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-frecords tr").not(".w2ui-empty-record").find(".w2ui-grid-data").not(".w2ui-col-select").addClass("w2ui-selected").data("selected","yes"),$(this.box).find("input.w2ui-grid-select-check").prop("checked",!0)),n=this.getSelection(!0),1==n.length?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),n.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete"),this.addRange("selection"),$("#grid_"+this.name+"_check_all").prop("checked",!0),this.status(),this.updateToolbar({indexes:n},!0),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}}}},{key:"selectNone",value:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"unselect",target:this.name,all:!0});if(!0!==t.isCancelled){var i=this.last.selection;return"row"==this.selectType?($(this.box).find(".w2ui-grid-records tr.w2ui-selected").removeClass("w2ui-selected w2ui-inactive").removeData("selected").find(".w2ui-col-number").removeClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-frecords tr.w2ui-selected").removeClass("w2ui-selected w2ui-inactive").removeData("selected").find(".w2ui-col-number").removeClass("w2ui-row-selected"),$(this.box).find("input.w2ui-grid-select-check").prop("checked",!1)):($(this.box).find(".w2ui-grid-columns td .w2ui-col-header, .w2ui-grid-fcolumns td .w2ui-col-header").removeClass("w2ui-col-selected"),$(this.box).find(".w2ui-grid-records tr .w2ui-col-number").removeClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-frecords tr .w2ui-col-number").removeClass("w2ui-row-selected"),$(this.box).find(".w2ui-grid-data.w2ui-selected").removeClass("w2ui-selected w2ui-inactive").removeData("selected"),$(this.box).find("input.w2ui-grid-select-check").prop("checked",!1)),i.indexes=[],i.columns={},this.toolbar.disable("w2ui-edit","w2ui-delete"),this.removeRange("selection"),$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.updateToolbar(i,!1),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}}},{key:"updateToolbar",value:function(e,t){var i=this,n=e&&e.indexes?e.indexes.length:0;function s(t,s){!0===t.batch&&(n>0?i.toolbar.enable(s+t.id):i.toolbar.disable(s+t.id)),null!=t.batch&&!isNaN(t.batch)&&t.batch>0&&(n==t.batch?i.toolbar.enable(s+t.id):i.toolbar.disable(s+t.id)),"function"==typeof t.batch&&t.batch("cell"==i.selectType?e:e?e.indexes:null)}this.toolbar.items.forEach((function(e){s(e,""),Array.isArray(e.items)&&e.items.forEach((function(t){s(t,e.id+":")}))}))}},{key:"getSelection",value:function(e){var t=[],i=this.last.selection;if("row"==this.selectType){for(var n=0;n<i.indexes.length;n++)this.records[i.indexes[n]]&&(!0===e?t.push(i.indexes[n]):t.push(this.records[i.indexes[n]].recid));return t}for(var s=0;s<i.indexes.length;s++){var a=i.columns[i.indexes[s]];if(this.records[i.indexes[s]])for(var r=0;r<a.length;r++)t.push({recid:this.records[i.indexes[s]].recid,index:parseInt(i.indexes[s]),column:a[r]})}return t}},{key:"search",value:function(e,t){for(var i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get,n=[],s=this.last.multi,a=this.last.logic,r=this.last.field,o=this.last.search,l=!1,c=0;c<this.searches.length;c++)this.searches[c].hidden&&null!=this.searches[c].value&&(n.push({field:this.searches[c].field,operator:this.searches[c].operator||"is",type:this.searches[c].type,value:this.searches[c].value||""}),l=!0);if(0===arguments.length){this.focus(),a=$("#grid_".concat(this.name,"_logic")).val(),o="";for(var d=0;d<this.searches.length;d++){var u=this.searches[d],h=$("#grid_"+this.name+"_operator_"+d).val(),p=$("#grid_"+this.name+"_field_"+d),f=$("#grid_"+this.name+"_field2_"+d),g=p.val(),m=f.val(),v=null,y=null;if(-1!=["int","float","money","currency","percent"].indexOf(u.type)){var b=p.data("w2field"),w=f.data("w2field");b&&(g=b.clean(g)),w&&(m=w.clean(m))}if(-1!=["list","enum"].indexOf(u.type)||-1!=["in","not in"].indexOf(h))if(g=p.data("selected")||{},Array.isArray(g)){v=[];for(var x=0;x<g.length;x++)v.push($e.isFloat(g[x].id)?parseFloat(g[x].id):String(g[x].id).toLowerCase()),delete g[x].hidden;$.isEmptyObject(g)&&(g="")}else y=g.text||"",g=g.id||"";if(""!==g&&null!=g||null!=m&&""!==m){var _={field:u.field,type:u.type,operator:h};"between"==h?$.extend(_,{value:[g,m]}):"in"==h&&"string"==typeof g||"not in"==h&&"string"==typeof g?$.extend(_,{value:g.split(",")}):$.extend(_,{value:g}),v&&$.extend(_,{svalue:v}),y&&$.extend(_,{text:y});try{"date"==u.type&&"between"==h&&(_.value[0]=g,_.value[1]=m),"date"==u.type&&"is"==h&&(_.value=g)}catch(K){}n.push(_),s=!0}}}if("string"==typeof e&&(1==arguments.length&&(t=e,e="all"),r=e,o=t,s=!1,a=l?"AND":"OR",null!=t))if("all"==e.toLowerCase())if(this.searches.length>0)for(var k=0;k<this.searches.length;k++){var C=this.searches[k];if("text"==C.type||"alphanumeric"==C.type&&$e.isAlphaNumeric(t)||"int"==C.type&&$e.isInt(t)||"float"==C.type&&$e.isFloat(t)||"percent"==C.type&&$e.isFloat(t)||("hex"==C.type||"color"==C.type)&&$e.isHex(t)||"currency"==C.type&&$e.isMoney(t)||"money"==C.type&&$e.isMoney(t)||"date"==C.type&&$e.isDate(t)||"time"==C.type&&$e.isTime(t)||"datetime"==C.type&&$e.isDateTime(t)||"datetime"==C.type&&$e.isDate(t)||"enum"==C.type&&$e.isAlphaNumeric(t)||"list"==C.type&&$e.isAlphaNumeric(t)){var T=this.defaultOperator[this.operatorsMap[C.type]],S={field:C.field,type:C.type,operator:null!=C.operator?C.operator:T,value:t};""!=String(t).trim()&&n.push(S)}if(-1!=["int","float","money","currency","percent"].indexOf(C.type)&&2==String(t).trim().split("-").length){var O=String(t).trim().split("-"),E={field:C.field,type:C.type,operator:null!=C.operator?C.operator:"between",value:[O[0],O[1]]};n.push(E)}if(-1!=["list","enum"].indexOf(C.type)){var D=[];null==C.options&&(C.options={}),Array.isArray(C.options.items)||(C.options.items=[]);for(var I=0;I<C.options.items;I++){var A=C.options.items[I];try{var j=new RegExp(t,"i");j.test(A)&&D.push(I),A.text&&j.test(A.text)&&D.push(A.id)}catch(K){}}if(D.length>0){var z={field:C.field,type:C.type,operator:null!=C.operator?C.operator:"in",value:D};n.push(z)}}}else for(var R=0;R<this.columns.length;R++){var N={field:this.columns[R].field,type:"text",operator:this.defaultOperator.text,value:t};n.push(N)}else{var M=$("#grid_"+this.name+"_search_all"),F=this.getSearch(e);if(null==F&&(F={field:e,type:"text"}),F.field==e&&(this.last.label=F.label),""!==t){var L=this.defaultOperator[this.operatorsMap[F.type]],P=t;if(-1!=["date","time","datetime"].indexOf(F.type)&&(L="is"),-1!=["list","enum"].indexOf(F.type)){L="is";var H=M.data("selected");P=H&&!$.isEmptyObject(H)?H.id:""}if("int"==F.type&&""!==t){if(L="is",-1!=String(t).indexOf("-")){var B=t.split("-");2==B.length&&(L="between",P=[parseInt(B[0]),parseInt(B[1])])}if(-1!=String(t).indexOf(",")){var q=t.split(",");L="in",P=[];for(var W=0;W<q.length;W++)P.push(q[W])}}null!=F.operator&&(L=F.operator);var U={field:F.field,type:F.type,operator:L,value:P};n.push(U)}}if(Array.isArray(e)){var Y="AND";"string"==typeof t&&(Y=t.toUpperCase(),"OR"!=Y&&"AND"!=Y&&(Y="AND")),o="",s=!0,a=Y;for(var X=0;X<e.length;X++){var V=e[X];"number"==typeof V.value&&(V.operator=this.defaultOperator.number),"string"==typeof V.value&&(V.operator=this.defaultOperator.text),Array.isArray(V.value)&&(V.operator=this.defaultOperator.enum),$e.isDate(V.value)&&(V.operator=this.defaultOperator.date),n.push(V)}}var J=this.trigger({phase:"before",type:"search",target:this.name,multi:0===arguments.length,searchField:e||"multi",searchValue:e?t:"multi",searchData:n,searchLogic:a});!0!==J.isCancelled&&(this.searchData=J.searchData,this.last.field=r,this.last.search=o,this.last.multi=s,this.last.logic=J.searchLogic,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),i?(this.last.xhr_offset=0,this.reload()):(this.localSearch(),this.refresh()),this.trigger($.extend(J,{phase:"after"})))}},{key:"searchOpen",value:function(){if(this.box&&0!==this.searches.length){var e=this,t=(e.toolbar.get("w2ui-search"),this.trigger({phase:"before",type:"searchOpen",target:this.name}));if(!0!==t.isCancelled){var i=$(e.box).find(".w2ui-grid-search-input .w2ui-search-drop");i.addClass("checked"),$("#grid_"+e.name+"_search_all").w2overlay({html:this.getSearchesHTML(),name:this.name+"-searchOverlay",align:"bottom",class:"w2ui-grid-search-advanced",onShow:function(){e.initSearches(),e.last.search_opened=!0,$("#w2ui-overlay-".concat(e.name,"-searchOverlay .w2ui-grid-search-advanced")).data("grid-name",e.name),$e.bindEvents($("#w2ui-overlay-".concat(e.name,"-searchOverlay")).find("select, input, button"),e);var i=$("#w2ui-overlay-".concat(e.name,"-searchOverlay *[rel=search]"));i.length>0&&i[0].focus(),e.trigger($.extend(t,{phase:"after"}))},onHide:function(){i.removeClass("checked"),e.last.search_opened=!1}})}}}},{key:"searchClose",value:function(){this.box&&0!==this.searches.length&&(this.toolbar&&this.toolbar.uncheck("w2ui-search-advanced","w2ui-column-on-off"),$().w2overlay({name:this.name+"-searchOverlay"}))}},{key:"searchSuggest",value:function(e,t,i){var n=this,s=this;if(clearTimeout(this.last.kbd_timer),clearTimeout(this.last.overlay_timer),this.searchShowFields(!0),this.searchClose(),!0!==t){if(!($("#w2ui-overlay-".concat(this.name,"-suggestOverlay")).length>0))if(e){var a=$("#grid_".concat(this.name,"_search_all"))[0];Array.isArray(this.savedSearches)&&this.savedSearches.length>0&&$(a).w2menu({align:"both",name:this.name+"-suggestOverlay",items:this.savedSearches,menuStyle:"top: 34px",topHTML:'<div class="w2ui-grid-search-suggest">'.concat($e.lang("Saved Searches"),"</div>"),render:function(e){var t=e.text;return e.isDefault&&(t="<b>".concat(t,"</b>")),t},onSelect:function(e){var t=s.trigger({phase:"before",type:"searchSelect",target:s.name,index:e.index,item:e.item});!0!==t.isCancelled?(s.last.logic=e.item.logic||"AND",s.last.search="",s.last.label="[Multiple Fields]",s.searchData=$.extend(!0,[],e.item.data),s.searchSelected={name:e.item.id,logic:e.item.logic,data:$.extend(!0,[],e.item.data)},s.reload(),s.trigger($.extend(t,{phase:"after"}))):e.preventDefault()},onRemove:function(e){var t=this,i=s.trigger({phase:"before",type:"searchRemove",target:s.name,index:e.index,item:e.item});!0!==i.isCancelled?s.confirm($e.lang('Do you want to delete search item "${item}"?',{item:e.item.text})).yes((function(){if($e.hasLocalStorage&&t.useLocalStorage)try{var n=JSON.parse(localStorage.w2ui||"{}");if(n&&n.searches){var a=n.searches[s.stateId||s.name];if(Array.isArray(a)){var r=a.findIndex((function(t,i){return t.name==e.item.id}));null!==r&&a.splice(r,1),localStorage.w2ui=JSON.stringify(n)}}}catch(l){}var o=s.savedSearches.findIndex((function(t,i){return t.name==e.item.id}));null!==o&&s.savedSearches.splice(o,1),s.trigger($.extend(i,{phase:"after"}))})):e.preventDefault()}})}else this.last.overlay_timer=setTimeout((function(){n.searchSuggest(!0)}),100)}else $(i).w2overlay({name:this.name+"-suggestOverlay"})}},{key:"searchFieldDrop",value:function(e,t,i){var n=this,s=this.searches[e],a=this.searchData[t];'<select id="grid_'.concat(this.name,"_operator_").concat(e,'" class="w2ui-input" style="padding: 1px 7px; font-size: 13px; height: 27px;"\n               onchange="w2ui[\'').concat(this.name,"'].initOperator(").concat(e,')">').concat(this.getOperators(s.type,s.operators),"</select>");switch(s.type){case"text":case"alphanumeric":case"hex":case"color":case"list":case"combo":case"enum":var r="width: 250px;";-1!=["hex","color"].indexOf(s.type)&&(r="width: 90px;"),'<input rel="search" type="text" id="grid_'+this.name+"_field_"+e+'" name="'+s.field+'"    class="w2ui-input" style="'+r+s.style+'" '+s.inTag+"/>";break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":case"datetime":var o="width: 80px";"datetime"==s.type&&(o="width: 140px;"),'<input rel="search" type="text" class="w2ui-input" style="'+o+s.style+'" id="grid_'+this.name+"_field_"+e+'" name="'+s.field+'" '+s.inTag+'/><span id="grid_'+this.name+"_extra1_"+e+'" style="padding-left: 5px; color: #6f6f6f; font-size: 10px"></span><span id="grid_'+this.name+"_range_"+e+'" style="display: none">&#160;-&#160;&#160;<input rel="search" type="text" class="w2ui-input" style="'+o+s.style+'" id="grid_'+this.name+"_field2_"+e+'" name="'+s.field+'" '+s.inTag+'/></span><span id="grid_'+this.name+"_extra2_"+e+'" style="padding-left: 5px; color: #6f6f6f; font-size: 10px"></span>';break;case"select":'<select rel="search" class="w2ui-input" style="'+s.style+'" id="grid_'+this.name+"_field_"+e+'"  name="'+s.field+'" '+s.inTag+'  onclick="event.stopPropagation();"></select>';break}var l=a.operator;if("more"==l&&"date"==a.type&&(l="since"),"less"==l&&"date"==a.type&&(l="before"),Array.isArray(a.value)){var c="";a.value.forEach((function(e){c+="<li>".concat(e.text||e,"</li>")})),"date"==a.type&&(c="",a.value.forEach((function(e){c+="<li>".concat($e.formatDate(e),"</li>")}))),$(i).w2overlay({name:this.name+"-fieldOverlay",html:'\n                    <div class="w2ui-grid-search-single">\n                        <span class="operator">'.concat(l,'</span>\n                        <div class="options">\n                            <ul>').concat(c,'</ul>\n                        </div>\n                        <div class="buttons">\n                            <button id="remove" class="w2ui-btn">Remove This Field</button>\n                        </div>\n                    </div>'),onShow:function(e){$("#w2ui-overlay").find("#remove").on("click",(function(){n.searchData.splice("".concat(t),1),n.reload(),n.localSearch(),$(i).w2overlay({name:n.name+"-fieldOverlay"})}))}})}else{var d=a.value;"date"==a.type&&(d=$e.formatDateTime(d)),$(i).w2overlay({html:'\n                    <div class="w2ui-grid-search-single">\n                        <div class="options">\n                            <span class="operator">'.concat(l,'</span>\n                            "<span>').concat(d,'</span>"\n                        </div>\n                        <div class="buttons">\n                            <button id="remove" class="w2ui-btn">Remove This Field</button>\n                        </div>\n                    </div>'),onShow:function(e){$("#w2ui-overlay").find("#remove").on("click",(function(){n.searchData.splice("".concat(t),1),n.reload(),n.localSearch(),$(i).w2overlay({name:n.name+"-fieldOverlay"})}))}})}}},{key:"searchSave",value:function(){var e="";this.searchSelected&&(e=this.searchSelected.name,this.searchSelected.isDefault);var t=this,i=this.trigger({phase:"before",type:"searchSave",target:this.name,saveLocalStorage:!0});!0!==i.isCancelled&&this.message({width:350,height:150,body:'<div style="padding-top: 29px; text-align: center;">\n                <span style="width: 280px; display: inline-block; text-align: left; padding-bottom: 4px;">Save Search</span>\n                <input class="search-name" placeholder="Search name" style="width: 280px">\n            </div>',buttons:'\n                <button id="grid-search-cancel" class="w2ui-btn">Cancel</button>\n                <button id="grid-search-save" class="w2ui-btn w2ui-btn-blue" '.concat(""==String(e).trim()?"disabled":"",">Save</button>\n            "),onOpen:function(n){var s=this;setTimeout((function(){$(s.box).find("#grid-search-cancel").on("click",(function(){t.message()})),$(s.box).find("#grid-search-save").on("click",(function(){var e=$(t.box).find(".w2ui-message .search-name").val();if(t.searchSelected){var n=t.savedSearches.findIndex((function(e){return e.id==t.searchSelected.name}));Object.assign(t.savedSearches[n],{id:e,text:e,logic:t.last.logic,data:$.extend(!0,[],t.searchData)})}else t.savedSearches.push({id:e,text:e,icon:"w2ui-icon-search",remove:!0,logic:t.last.logic,data:t.searchData});if($e.hasLocalStorage&&t.useLocalStorage)try{var a=JSON.parse(localStorage.w2ui||"{}");a||(a={}),a.searches||(a.searches={}),Array.isArray(a.searches[t.stateId||t.name])||(a.searches[t.stateId||t.name]=[]);var r=a.searches[t.stateId||t.name],o=r.findIndex((function(e){return e.name==t.searchSelected.name}));-1!==o?Object.assign(r[o],{name:e,logic:t.last.logic,data:t.searchData}):r.push({name:e,logic:t.last.logic,data:t.searchData}),localStorage.w2ui=JSON.stringify(a)}catch(l){return delete localStorage.w2ui,null}t.message(),t.searchSelected?(t.searchSelected.name=e,$(t.box).find("#grid_".concat(t.name,"_search_name .name-text")).html(e)):(t.searchSelected={name:e,logic:t.last.logic,data:$.extend(!0,[],t.searchData)},$(t.box).find("#grid_".concat(t.name,"_search_all")).val(" ").prop("readOnly",!0),$(t.box).find("#grid_".concat(t.name,"_search_name")).show().find(".name-text").html(e)),s.trigger($.extend(i,{phase:"after",name:e}))}));var n=$(s.box).find("input, button");n.off(".message").on("blur.message",(function(e){n.index(e.target)+1===n.length&&(n.get(0).focus(),e.preventDefault())})).on("keydown.message",(function(e){var i=String($(t.box).find(".w2ui-message-body input").val()).trim();13==e.keyCode&&""!=i&&$(t.box).find("#grid-search-save").click(),27==e.keyCode&&t.message()})),$(s.box).find(".w2ui-message-body input").on("input",(function(e){var t=$(this).closest(".w2ui-message").find("#grid-search-save");""===String($(this).val()).trim()?t.prop("disabled",!0):t.prop("disabled",!1)})).val(e).focus()}),25)}})}},{key:"searchReset",value:function(e){for(var t=[],i=!1,n=0;n<this.searches.length;n++)this.searches[n].hidden&&null!=this.searches[n].value&&(t.push({field:this.searches[n].field,operator:this.searches[n].operator||"is",type:this.searches[n].type,value:this.searches[n].value||""}),i=!0);var s=this.trigger({phase:"before",type:"search",reset:!0,target:this.name,searchData:t});if(!0!==s.isCancelled){if(this.searchData=s.searchData,this.searchSelected=null,this.last.search="",this.last.logic=i?"AND":"OR",this.searches.length>0)if(this.multiSearch&&this.show.searchAll)this.last.field="all",this.last.label=$e.lang("All Fields");else{var a=0;while(a<this.searches.length&&(this.searches[a].hidden||!1===this.searches[a].simple))a++;a>=this.searches.length?(this.last.field="",this.last.label=""):(this.last.field=this.searches[a].field,this.last.label=this.searches[a].label)}this.last.multi=!1,this.last.xhr_offset=0,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),$("#grid_"+this.name+"_search_all").val("").removeData("selected"),e||this.reload(),this.trigger($.extend(s,{phase:"after"}))}}},{key:"searchShowFields",value:function(e){var t=$("#grid_"+this.name+"_search_all");if(!0!==e){for(var i='<div class="w2ui-grid-search-fields"><table><tbody>',n=-1;n<this.searches.length;n++){var s=this.searches[n],a=s?s.field:null,r=this.getColumn(a),o=!1,l="This column is hidden";if(1==this.show.searchHiddenMsg&&-1!=n&&(null==r||!0===r.hidden&&!1!==r.hideable)&&(o=!0,null==r&&(l="This column does not exist")),-1==n){if(!this.multiSearch||!this.show.searchAll)continue;s={field:"all",label:$e.lang("All Fields")}}else{if(null!=r&&!1===r.hideable)continue;if(!0===this.searches[n].hidden||!1===this.searches[n].simple)continue}null==s.label&&null!=s.caption&&(console.log("NOTICE: grid search.caption property is deprecated, please use search.label. Search ->",s),s.label=s.caption),i+='<tr style="'+(o?"color: silver":"")+'" '+(o?"onmouseenter=\"jQuery(this).w2tag({ top: 4, html: '"+l+'\' })" onmouseleave="jQuery(this).w2tag()"':"")+($e.isIOS?"onTouchStart":"onClick")+"=\"event.stopPropagation();            w2ui['"+this.name+"'].searchInitInput('"+s.field+"');           jQuery('#grid_"+this.name+"_search_all').w2overlay({ name: '"+this.name+"-searchFields' });\"           jQuery(this).addClass('w2ui-selected');      onmousedown=\"jQuery(this).parent().find('tr').removeClass('w2ui-selected'); jQuery(this).addClass('w2ui-selected')\"       onmouseup=\"jQuery(this).removeClass('w2ui-selected')\"    >   <td>       <span class=\"w2ui-column-check w2ui-icon-"+(s.field==this.last.field?"check":"empty")+'"></span>   </td>   <td>'+s.label+"</td></tr>"}i+="</tbody></table></div>";var c=this.name+"-searchFields";1==$("#w2ui-overlay-"+c).length&&(i=""),setTimeout((function(){$(t).w2overlay({html:i,name:c,left:-10})}),1)}else $(t).w2overlay({name:this.name+"-searchFields"})}},{key:"searchInitInput",value:function(e,t){var i,n=$("#grid_"+this.name+"_search_all");if("all"==e)i={field:"all",label:$e.lang("All Fields")};else if(i=this.getSearch(e),null==i)return;""!=this.last.search?(this.last.label=i.label,this.search(i.field,this.last.search)):(this.last.field=i.field,this.last.label=i.label),n.attr("placeholder",$e.lang("Search")+" "+$e.lang(i.label||i.caption||i.field)),$().w2overlay({name:this.name+"-searchFields"})}},{key:"clear",value:function(e){this.total=0,this.records=[],this.summary=[],this.last.xhr_offset=0,this.last.idCache={},this.reset(!0),e||this.refresh()}},{key:"reset",value:function(e){this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection={indexes:[],columns:{}},this.last.range_start=null,this.last.range_end=null,$("#grid_"+this.name+"_records").prop("scrollTop",0),e||this.refresh()}},{key:"skip",value:function(e,t){var i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;i?(this.offset=parseInt(e),this.offset>this.total&&(this.offset=this.total-this.limit),(this.offset<0||!$e.isInt(this.offset))&&(this.offset=0),this.clear(!0),this.reload(t)):console.log("ERROR: grid.skip() can only be called when you have remote data source.")}},{key:"load",value:function(e,t){null!=e?(this.clear(!0),this.request("get",{},e,t)):console.log('ERROR: You need to provide url argument when calling .load() method of "'+this.name+'" object.')}},{key:"reload",value:function(e){var t=this,i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;t.selectionSave(),i?this.load(i,(function(){t.selectionRestore(),"function"==typeof e&&e()})):(this.reset(!0),this.localSearch(),this.selectionRestore(),"function"==typeof e&&e({status:"success"}))}},{key:"request",value:function(e,t,i,n){var s=this;if(null==t&&(t={}),""!=i&&null!=i||(i=this.url),""!=i&&null!=i){var a;$e.isInt(this.offset)||(this.offset=0),$e.isInt(this.last.xhr_offset)||(this.last.xhr_offset=0);var r={limit:this.limit,offset:parseInt(this.offset)+parseInt(this.last.xhr_offset),searchLogic:this.last.logic,search:this.searchData.map((function(e){var t=$.extend({},e);return s.searchMap&&s.searchMap[t.field]&&(t.field=s.searchMap[t.field]),t})),sort:this.sortData.map((function(e){var t=$.extend({},e);return s.sortMap&&s.sortMap[t.field]&&(t.field=s.sortMap[t.field]),t}))};if(0===this.searchData.length&&(delete r.search,delete r.searchLogic),0===this.sortData.length&&delete r.sort,this.withs&&this.withs.length>0&&(r.withs=this.withs),$.extend(r,this.postData),$.extend(r,t),"delete"!=e&&"save"!=e||(delete r.limit,delete r.offset,r.action=e,"delete"==e&&(r[this.recid||"recid"]=this.getSelection())),"get"==e){if(a=this.trigger({phase:"before",type:"request",target:this.name,url:i,postData:r,httpHeaders:this.httpHeaders}),!0===a.isCancelled)return void("function"==typeof n&&n({status:"error",message:$e.lang("Request aborted.")}))}else a={url:i,postData:r,httpHeaders:this.httpHeaders};if(0===this.last.xhr_offset&&this.lock($e.lang(this.msgRefresh),!0),this.last.xhr)try{this.last.xhr.abort()}catch(u){}if(i="object"!=Object(ge["a"])(a.url)?a.url:a.url.get,"save"==e&&"object"==Object(ge["a"])(a.url)&&(i=a.url.save),"delete"==e&&"object"==Object(ge["a"])(a.url)&&(i=a.url.remove),!$.isEmptyObject(this.routeData)){var o=$e.parseRoute(i);if(o.keys.length>0)for(var l=0;l<o.keys.length;l++)null!=this.routeData[o.keys[l].name]&&(i=i.replace(new RegExp(":"+o.keys[l].name,"g"),this.routeData[o.keys[l].name]))}var c={type:"GET",url:i,data:a.postData,headers:a.httpHeaders,dataType:"json"},d=this.dataType||$e.settings.dataType;switch(d){case"HTTP":c.data="object"==Object(ge["a"])(c.data)?String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):c.data;break;case"HTTPJSON":c.data={request:JSON.stringify(c.data)};break;case"RESTFULL":c.type="GET","save"==e&&(c.type="PUT"),"delete"==e&&(c.type="DELETE"),c.data="object"==Object(ge["a"])(c.data)?String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):c.data;break;case"RESTFULLJSON":c.type="GET","save"==e&&(c.type="PUT"),"delete"==e&&(c.type="DELETE",c.url=c.url+"/"+this.get(this.getSelection()).map((function(e){return e.id})).join()),c.data=c.data,c.data.w2ui=!0,c.contentType="application/json",console.log(["ENTRANDO em REQUEST RESFULLJSON 1",c,this]);break;case"JSON":c.type="POST",c.data=JSON.stringify(c.data),c.contentType="application/json";break}this.method&&(c.type=this.method),this.last.xhr_cmd=e,this.last.xhr_start=(new Date).getTime(),this.last.loaded=!1,this.last.xhr=$.ajax(c).done((function(t,i,a){s.requestComplete(i,a,e,n)})).fail((function(t,i,a){var r={status:i,error:a,rawResponseText:t.responseText},o=s.trigger({phase:"before",type:"error",error:r,xhr:t});if(!0!==o.isCancelled){if("abort"!=i){var l;try{l="object"===Object(ge["a"])(t.responseJSON)?t.responseJSON:JSON.parse(t.responseText)}catch(u){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",total:5,records:[{recid:1,field:"value"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"==Object(ge["a"])(l)?l:t.responseText),s.requestComplete("error",t,e,n)}s.trigger($.extend(o,{phase:"after"}))}})),"get"==e&&this.trigger($.extend(a,{phase:"after"}))}}},{key:"requestComplete",value:function(e,t,i,n){var s=this;this.unlock(),this.last.xhr_response=((new Date).getTime()-this.last.xhr_start)/1e3,setTimeout((function(){s.show.statusResponse&&s.status($e.lang("Server Response ${count} seconds",{count:s.last.xhr_response}))}),10),this.last.pull_more=!1,this.last.pull_refresh=!0;var a="load";"save"==this.last.xhr_cmd&&(a="save"),"delete"==this.last.xhr_cmd&&(a="delete");var r=this.trigger({phase:"before",target:this.name,type:a,xhr:t,status:e});if(!0!==r.isCancelled){var o;if("error"!=e)if("function"==typeof this.parser?(o=this.parser(t.responseJSON),"object"!=Object(ge["a"])(o)&&console.log("ERROR: Your parser did not return proper object")):(o=t.responseJSON,null==o?o={status:"error",message:$e.lang(this.msgNotJSON),responseText:t.responseText}:Array.isArray(o)&&(o={status:"success",records:o,total:o.length})),Array.isArray(o.records)&&o.records.forEach((function(e,t){s.recid&&(e.recid=s.parseField(e,s.recid)),null==e.recid&&(e.recid="recid-"+t)})),"error"==o.status)this.error(o.message);else{if("get"==i){if(null==o.total&&(o.total=-1),null==o.records&&(o.records=[]),o.records.length==this.limit){var l=this.records.length+o.records.length;this.last.xhr_hasMore=l!=this.total}else this.last.xhr_hasMore=!1,this.total=this.offset+this.last.xhr_offset+o.records.length;if(this.last.xhr_hasMore||$("#grid_"+this.name+"_rec_more, #grid_"+this.name+"_frec_more").hide(),0===this.last.xhr_offset)this.records=[],this.summary=[],$e.isInt(o.total)&&(this.total=parseInt(o.total));else if(-1!=o.total&&parseInt(o.total)!=parseInt(this.total))return void this.message($e.lang(this.msgNeedReload),(function(){delete s.last.xhr_offset,s.reload()}));if(o.records)for(var c=0;c<o.records.length;c++)this.records.push(o.records[c]);if(o.summary){this.summary=[];for(var d=0;d<o.summary.length;d++)this.summary.push(o.summary[d])}}if("delete"==i)return this.reset(),void this.reload()}else o={status:"error",message:$e.lang(this.msgAJAXerror),responseText:t.responseText},this.error($e.lang(this.msgAJAXerror));var u="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;u||(this.localSort(),this.localSearch()),this.total=parseInt(this.total),0===this.last.xhr_offset?this.refresh():(this.scroll(),this.resize()),"function"==typeof n&&n(o),this.trigger($.extend(r,{phase:"after"})),this.last.loaded=!0}else"function"==typeof n&&n({status:"error",message:$e.lang("Request aborted.")})}},{key:"error",value:function(e){var t=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});!0!==t.isCancelled&&(this.message(e),this.trigger($.extend(t,{phase:"after"})))}},{key:"getChanges",value:function(e){var t=[];"undefined"==typeof e&&(e=this.records);for(var i=0;i<e.length;i++){var n=e[i];if(n.w2ui){if(null!=n.w2ui.changes){var s={};s[this.recid||"recid"]=n.recid,t.push($.extend(!0,s,n.w2ui.changes))}!0!==n.w2ui.expanded&&n.w2ui.children&&n.w2ui.children.length&&$.merge(t,this.getChanges(n.w2ui.children))}}return t}},{key:"mergeChanges",value:function(){for(var e=this.getChanges(),t=0;t<e.length;t++){var i=this.get(e[t][this.recid||"recid"]);for(var n in e[t])if(!("recid"==n||this.recid&&n==this.recid)){"object"===Object(ge["a"])(e[t][n])&&(e[t][n]=e[t][n].text);try{s(i,n,e[t][n])}catch(a){console.log("ERROR: Cannot merge. ",a.message||"",a)}i.w2ui&&delete i.w2ui.changes}}function s(e,t,i){var n=t.split(".");1==n.length?e[t]=i:(e=e[n[0]],n.shift(),s(e,n.join("."),i))}this.refresh()}},{key:"save",value:function(e){var t=this,i=this.getChanges(),n="object"!=Object(ge["a"])(this.url)?this.url:this.url.save,s=this.trigger({phase:"before",target:this.name,type:"save",changes:i});!0!==s.isCancelled?n?this.request("save",{changes:s.changes},null,(function(i){"error"!==i.status&&t.mergeChanges(),t.trigger($.extend(s,{phase:"after"})),"function"==typeof e&&e(i)})):(this.mergeChanges(),this.trigger($.extend(s,{phase:"after"}))):n&&"function"==typeof e&&e({status:"error",message:$e.lang("Request aborted.")})}},{key:"editField",value:function(e,t,i,n){var s,a,r=this,o=this;if(!0!==this.last.inEditMode){s=this.get(e,!0);var l=this.getCellEditable(s,t);if(l){var c=this.records[s],d=this.columns[t],u=!0===d.frozen?"_f":"_";if(-1==["enum","file"].indexOf(l.type)){var h=this.trigger({phase:"before",type:"editField",target:this.name,recid:e,column:t,value:i,index:s,originalEvent:n});if(!0!==h.isCancelled&&(i=h.value,this.last.inEditMode=!0,this.last._edit={value:i,index:s,column:t,recid:e},this.selectNone(),this.select({recid:e,column:t}),-1==["checkbox","check"].indexOf(l.type))){var p=$("#grid_"+this.name+u+"rec_"+$e.escapeId(e)),f=p.find("[col="+t+"] > div");$(this.box).find("div.w2ui-edit-box").remove(),"row"!=this.selectType&&($("#grid_"+this.name+u+"selection").attr("id","grid_"+this.name+"_editable").removeClass("w2ui-selection").addClass("w2ui-edit-box").prepend('<div style="position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px;"></div>').find(".w2ui-selection-resizer").remove(),f=$("#grid_"+this.name+"_editable >div:first-child")),null==l.inTag&&(l.inTag=""),null==l.outTag&&(l.outTag=""),null==l.style&&(l.style=""),null==l.items&&(l.items=[]);var g=c.w2ui&&c.w2ui.changes&&null!=c.w2ui.changes[d.field]?$e.stripTags(c.w2ui.changes[d.field]):$e.stripTags(c[d.field]);null==g&&(g="");var m="object"!=Object(ge["a"])(g)?g:"";null!=h.old_value&&(m=h.old_value),null!=i&&(g=i);var v=null!=d.style?d.style+";":"";switch("string"==typeof d.render&&-1!=["number","int","float","money","percent","size"].indexOf(d.render.split(":")[0])&&(v+="text-align: right;"),l.items.length>0&&!$.isPlainObject(l.items[0])&&(l.items=$e.normMenu(l.items)),l.type){case"select":for(var y="",b=0;b<l.items.length;b++)y+='<option value="'+l.items[b].id+'"'+(l.items[b].id==g?' selected="selected"':"")+">"+l.items[b].text+"</option>";f.addClass("w2ui-editable").html('<select id="grid_'+this.name+"_edit_"+e+"_"+t+'" column="'+t+'" class="w2ui-input"    style="width: 100%; pointer-events: auto; padding: 0 0 0 3px; margin: 0px; border-left: 0; border-right: 0; border-radius: 0px;            outline: none; font-family: inherit;'+v+l.style+'"     field="'+d.field+'" recid="'+e+'"     '+l.inTag+">"+y+"</select>"+l.outTag),setTimeout((function(){f.find("select").on("change",(function(e){delete o.last.move})).on("blur",(function(e){1!=$(this).data("keep-open")&&o.editChange.call(o,this,s,t,e)}))}),10);break;case"div":var w=p.find("[col="+t+"] > div"),x="font-family: "+w.css("font-family")+"; font-size: "+w.css("font-size")+";";f.addClass("w2ui-editable").html('<div id="grid_'+this.name+"_edit_"+e+"_"+t+'" class="w2ui-input"    contenteditable style="'+x+v+l.style+'" autocorrect="off" autocomplete="off" spellcheck="false"     field="'+d.field+'" recid="'+e+'" column="'+t+'" '+l.inTag+"></div>"+l.outTag),null==i&&f.find("div.w2ui-input").text("object"!=Object(ge["a"])(g)?g:""),a=f.find("div.w2ui-input").get(0),setTimeout((function(){var e=a;$(e).on("blur",(function(i){1!=$(this).data("keep-open")&&o.editChange.call(o,e,s,t,i)}))}),10),null!=i&&$(a).text("object"!=Object(ge["a"])(g)?g:"");break;default:var _=p.find("[col="+t+"] > div"),k="font-family: "+_.css("font-family")+"; font-size: "+_.css("font-size");f.addClass("w2ui-editable").html('<input id="grid_'+this.name+"_edit_"+e+"_"+t+'" autocorrect="off" autocomplete="off" spellcheck="false" type="text"     style="'+k+"; width: 100%; height: 100%; padding: 3px; border-color: transparent; outline: none; border-radius: 0;        pointer-events: auto; "+v+l.style+'"     field="'+d.field+'" recid="'+e+'" column="'+t+'" class="w2ui-input"'+l.inTag+"/>"+l.outTag),"number"==l.type&&(g=$e.formatNumber(g)),"date"==l.type&&(g=$e.formatDate($e.isDate(g,l.format,!0)||new Date,l.format)),null==i&&f.find("input").val("object"!=Object(ge["a"])(g)?g:""),a=f.find("input").get(0),$(a).w2field(l.type,$.extend(l,{selected:g})),setTimeout((function(){var e=a;"list"==l.type&&(e=$($(a).data("w2field").helpers.focus).find("input"),"object"!=Object(ge["a"])(g)&&""!=g&&e.val(g).css({opacity:1}).prev().css({opacity:1}),f.find("input").on("change",(function(e){o.editChange.call(o,a,s,t,e)}))),$(e).on("blur",(function(e){1!=$(this).data("keep-open")&&o.editChange.call(o,a,s,t,e)}))}),10),null!=i&&$(a).val("object"!=Object(ge["a"])(g)?g:"")}return void setTimeout((function(){a||(a=f.find("input").get(0)),r.last.inEditMode&&(f.find("input, select, div.w2ui-input").data("old_value",m).on("mousedown",(function(e){e.stopPropagation()})).on("click",(function(e){"div"==l.type?S.call(f.find("div.w2ui-input")[0],null):S.call(f.find("input, select")[0],null)})).on("paste",(function(e){var t=e.originalEvent;e.preventDefault();var i=t.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,i)})).on("keydown",(function(i){var n=this,r="DIV"==n.tagName.toUpperCase()?$(n).text():$(n).val();switch(i.keyCode){case 8:"list"!=l.type||$(a).data("w2field")||i.preventDefault();break;case 9:case 13:i.preventDefault();break;case 37:0===$e.getCursorPosition(n)&&i.preventDefault();break;case 39:$e.getCursorPosition(n)==r.length&&($e.setCursorPosition(n,r.length),i.preventDefault());break}setTimeout((function(){switch(i.keyCode){case 9:var a=e,r=i.shiftKey?o.prevCell(s,t,!0):o.nextCell(s,t,!0);if(null==r){var l=i.shiftKey?o.prevRow(s,t):o.nextRow(s,t);if(null!=l&&l!=s){a=o.records[l].recid;for(var u=0;u<o.columns.length;u++){var h=o.getCellEditable(s,u);if(null!=h&&-1==["checkbox","check"].indexOf(h.type)&&(r=parseInt(u),!i.shiftKey))break}}}!1===a&&(a=e),null==r&&(r=t),n.blur(),setTimeout((function(){"row"!=o.selectType?(o.selectNone(),o.select({recid:a,column:r})):o.editField(a,r,null,i)}),1),i.preventDefault&&i.preventDefault();break;case 13:if(n.blur(),o.advanceOnEdit){var p=i.shiftKey?o.prevRow(s,t):o.nextRow(s,t);null!=p&&p!=s&&setTimeout((function(){"row"!=o.selectType?(o.selectNone(),o.select({recid:o.records[p].recid,column:t})):o.editField(o.records[p].recid,t,null,i)}),1)}"DIV"==n.tagName.toUpperCase()&&i.preventDefault();break;case 27:var f=o.parseField(c,d.field);c.w2ui&&c.w2ui.changes&&null!=c.w2ui.changes[d.field]&&(f=c.w2ui.changes[d.field]),null!=$(n).data("old_value")&&(f=$(n).data("old_value")),"DIV"==n.tagName.toUpperCase()?$(n).text(null!=f?f:""):n.value=null!=f?f:"",n.blur(),setTimeout((function(){o.select({recid:e,column:t})}),1);break}S.call(n,i)}),1)})).on("keyup",(function(e){S.call(this,e)})),setTimeout((function(){if(o.last.inEditMode){var e=f.find(".w2ui-input"),t=null!=$(e).val()?$(e).val().length:0;"div"==l.type&&(t=$(e).text().length),e.length>0&&(e.focus(),clearTimeout(o.last.kbd_timer),"SELECT"!=e[0].tagName.toUpperCase()&&$e.setCursorPosition(e[0],t),e[0].resize=S,S.call(e[0],null))}}),50),r.trigger($.extend(h,{phase:"after",input:f.find("input, select, div.w2ui-input")})))}),5)}}else console.log('ERROR: input types "enum" and "file" are not supported in inline editing.')}}else if(13==n.keyCode){if(s=this.last._edit.index,t=this.last._edit.column,e=this.last._edit.recid,this.editChange({type:"custom",value:this.last._edit.value},this.get(e,!0),t,n),this.advanceOnEdit){var C=n.shiftKey?this.prevRow(s,t):this.nextRow(s,t);null!=C&&C!=s&&setTimeout((function(){"row"!=r.selectType?(r.selectNone(),r.select({recid:r.records[C].recid,column:t})):r.editField(r.records[C].recid,t,null,n)}),1)}this.last.inEditMode=!1}else{var T=$(this.box).find("div.w2ui-edit-box .w2ui-input");T.length>0&&"DIV"==T[0].tagName&&(T.text(T.text()+i),$e.setCursorPosition(T[0],T.text().length))}function S(e){try{var t="DIV"==this.tagName.toUpperCase()?$(this).text():this.value,i=$("#grid_"+o.name+"_editable"),n="font-family: "+$(this).css("font-family")+"; font-size: "+$(this).css("font-size")+"; white-space: pre;",s=$e.getStrWidth(t,n);s+20>i.width()&&i.width(s+20)}catch(a){}}}},{key:"editChange",value:function(e,t,i,n){var s=this;setTimeout((function(){var e=$(s.box).find("#grid_"+s.name+"_focus");e.is(":focus")||e.focus()}),10);var a=t<0;t=t<0?-t-1:t;var r=a?this.summary:this.records,o=r[t],l=this.columns[i],c=$("#grid_"+this.name+(!0===l.frozen?"_frec_":"_rec_")+$e.escapeId(o.recid)),d=e.tagName&&"DIV"==e.tagName.toUpperCase()?$(e).text():e.value,u=this.parseField(o,l.field),h=$(e).data("w2field");h&&("list"==h.type&&(d=$(e).data("selected")),($.isEmptyObject(d)||null==d)&&(d=""),$.isPlainObject(d)||(d=h.clean(d))),"checkbox"==e.type&&(o.w2ui&&!1===o.w2ui.editable&&(e.checked=!e.checked),d=e.checked);var p={phase:"before",type:"change",target:this.name,input_id:e.id,recid:o.recid,index:t,column:i,originalEvent:n.originalEvent?n.originalEvent:n,value_new:d,value_previous:o.w2ui&&o.w2ui.changes&&o.w2ui.changes.hasOwnProperty(l.field)?o.w2ui.changes[l.field]:u,value_original:u};null!=$(n.target).data("old_value")&&(p.value_previous=$(n.target).data("old_value"));while(1){if(d=p.value_new,"object"!=Object(ge["a"])(d)&&String(u)!=String(d)||"object"==Object(ge["a"])(d)&&d&&d.id!=u&&("object"!=Object(ge["a"])(u)||null==u||d.id!=u.id)){if(p=this.trigger($.extend(p,{type:"change",phase:"before"})),!0!==p.isCancelled){if(d!==p.value_new)continue;o.w2ui=o.w2ui||{},o.w2ui.changes=o.w2ui.changes||{},o.w2ui.changes[l.field]=p.value_new,this.trigger($.extend(p,{phase:"after"}))}}else if(p=this.trigger($.extend(p,{type:"restore",phase:"before"})),!0!==p.isCancelled){if(d!==p.value_new)continue;o.w2ui&&o.w2ui.changes&&delete o.w2ui.changes[l.field],o.w2ui&&$.isEmptyObject(o.w2ui.changes)&&delete o.w2ui.changes,this.trigger($.extend(p,{phase:"after"}))}break}var f=$(c).find("[col="+i+"]");a||(o.w2ui&&o.w2ui.changes&&null!=o.w2ui.changes[l.field]?f.addClass("w2ui-changed"):f.removeClass("w2ui-changed"),f.replaceWith(this.getCellHTML(t,i,a))),$(this.box).find("div.w2ui-edit-box").remove(),this.show.toolbarSave&&(this.getChanges().length>0?this.toolbar.enable("w2ui-save"):this.toolbar.disable("w2ui-save")),this.last.inEditMode=!1}},{key:"delete",value:function(e){var t=this,i=this.trigger({phase:"before",target:this.name,type:"delete",force:e});if(e&&this.message(),!0!==i.isCancelled){e=i.force,setTimeout((function(){$().w2tag()}),20);var n=this.getSelection();if(0!==n.length)if(""==this.msgDelete||e){var s="object"!=Object(ge["a"])(this.url)?this.url:this.url.remove;if(s)this.request("delete");else if("object"!=Object(ge["a"])(n[0]))this.selectNone(),this.remove.apply(this,n);else{for(var a=0;a<n.length;a++){var r=this.columns[n[a].column].field,o=this.get(n[a].recid,!0),l=this.records[o];null!=o&&"recid"!=r&&(this.records[o][r]="",l.w2ui&&l.w2ui.changes&&delete l.w2ui.changes[r])}this.update()}this.trigger($.extend(i,{phase:"after"}))}else{var c=$e.lang(this.msgDelete,{count:n.length,records:$e.lang(1==n.length?"record":"records")});this.confirm({width:380,height:170,yes_text:"Delete",yes_class:"w2ui-btn-red",no_text:"Cancel",body:'<div class="w2ui-centered">'+c+"</div>"}).yes((function(){t.delete(!0)}))}}}},{key:"click",value:function(e,t){var i=(new Date).getTime(),n=null;if(!(1==this.last.cancelClick||t&&t.altKey))if("object"==Object(ge["a"])(e)&&null!==e&&(n=e.column,e=e.recid),null==t&&(t={}),i-parseInt(this.last.click_time)<350&&this.last.click_recid==e&&"click"==t.type)this.dblClick(e,t);else{this.last.bubbleEl&&($(this.last.bubbleEl).w2tag(),this.last.bubbleEl=null),this.last.click_time=i;var s=this.last.click_recid;if(this.last.click_recid=e,null==n&&t.target){var a=t.target;"TD"!=a.tagName.toUpperCase()&&(a=$(a).parents("td")[0]),null!=$(a).attr("col")&&(n=parseInt($(a).attr("col")))}var r=this.trigger({phase:"before",target:this.name,type:"click",recid:e,column:n,originalEvent:t});if(!0!==r.isCancelled){var o=this.getSelection();$("#grid_"+this.name+"_check_all").prop("checked",!1);var l,c,d,u,h=this.get(e,!0),p=[];if(this.last.sel_ind=h,this.last.sel_col=n,this.last.sel_recid=e,this.last.sel_type="click",t.shiftKey&&o.length>0&&this.multiSelect){if(o[0].recid){l=this.get(o[0].recid,!0),c=this.get(e,!0),n>o[0].column?(d=o[0].column,u=n):(d=n,u=o[0].column);for(var f=d;f<=u;f++)p.push(f)}else l=this.get(s,!0),c=this.get(e,!0);var g=[];if(l>c){var m=l;l=c,c=m}for(var v="object"!=Object(ge["a"])(this.url)?this.url:this.url.get,y=l;y<=c;y++)if(!(this.searchData.length>0)||v||-1!=$.inArray(y,this.last.searchIds))if("row"==this.selectType)g.push(this.records[y].recid);else for(var b=0;b<p.length;b++)g.push({recid:this.records[y].recid,column:p[b]});this.select(g)}else{var w=this.last.selection,x=-1!=w.indexes.indexOf(h),_=!1;if($(t.target).parents("td").hasClass("w2ui-col-select")&&(_=!0),(t.ctrlKey||t.shiftKey||t.metaKey||_)&&this.multiSelect||this.showSelectColumn){var k=$(t.target).parents("tr").find(".w2ui-grid-select-check").is(":checked");"row"==this.selectType||-1!=$.inArray(n,w.columns[h])||k||(x=!1),!0===x?this.unselect({recid:e,column:n}):this.select({recid:e,column:n})}else"row"!=this.selectType&&-1==$.inArray(n,w.columns[h])&&(x=!1),o.length>300?this.selectNone():this.unselect(o),!0===x&&1==o.length?this.unselect({recid:e,column:n}):this.select({recid:e,column:n})}this.status(),this.initResize(),this.trigger($.extend(r,{phase:"after"}))}}}},{key:"columnClick",value:function(e,t){if(!0!==this.last.colResizing){var i=this.trigger({phase:"before",type:"columnClick",target:this.name,field:e,originalEvent:t});if(!0!==i.isCancelled){if("row"==this.selectType){var n=this.getColumn(e);n&&n.sortable&&this.sort(e,null,!(!t||!t.ctrlKey&&!t.metaKey)),"line-number"==i.field&&(this.getSelection().length>=this.records.length?this.selectNone():this.selectAll())}else{if(t.altKey){var s=this.getColumn(e);s&&s.sortable&&this.sort(e,null,!(!t||!t.ctrlKey&&!t.metaKey))}if("line-number"==i.field)this.getSelection().length>=this.records.length?this.selectNone():this.selectAll();else{t.shiftKey||t.metaKey||t.ctrlKey||this.selectNone();var a=this.getSelection(),r=this.getColumn(i.field,!0),o=[],l=[];if(0!=a.length&&t.shiftKey){var c=r,d=a[0].column;c>d&&(c=a[0].column,d=r);for(var u=c;u<=d;u++)l.push(u)}else l.push(r);if(i=this.trigger({phase:"before",type:"columnSelect",target:this.name,columns:l}),!0!==i.isCancelled){for(var h=0;h<this.records.length;h++)o.push({recid:this.records[h].recid,column:l});this.select(o)}this.trigger($.extend(i,{phase:"after"}))}}this.trigger($.extend(i,{phase:"after"}))}}}},{key:"columnDblClick",value:function(e,t){var i=this.trigger({phase:"before",type:"columnDblClick",target:this.name,field:e,originalEvent:t});!0!==i.isCancelled&&this.trigger($.extend(i,{phase:"after"}))}},{key:"focus",value:function(e){var t=this,i=this.trigger({phase:"before",type:"focus",target:this.name,originalEvent:e});if(!0===i.isCancelled)return!1;this.hasFocus=!0,$(this.box).removeClass("w2ui-inactive").find(".w2ui-inactive").removeClass("w2ui-inactive"),setTimeout((function(){var e=$(t.box).find("#grid_"+t.name+"_focus");e.is(":focus")||e.focus()}),10),this.trigger($.extend(i,{phase:"after"}))}},{key:"blur",value:function(e){var t=this.trigger({phase:"before",type:"blur",target:this.name,originalEvent:e});if(!0===t.isCancelled)return!1;this.hasFocus=!1,$(this.box).addClass("w2ui-inactive").find(".w2ui-selected").addClass("w2ui-inactive"),$(this.box).find(".w2ui-selection").addClass("w2ui-inactive"),this.trigger($.extend(t,{phase:"after"}))}},{key:"keydown",value:function(e){var t=this,i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(!0===t.keyboard){var n=t.trigger({phase:"before",type:"keydown",target:t.name,originalEvent:e});if(!0!==n.isCancelled)if($(this.box).find(">.w2ui-message").length>0)27==e.keyCode&&this.message();else{var s=!1,a=$("#grid_"+t.name+"_records"),r=t.getSelection();0===r.length&&(s=!0);var o=r[0]||null,l=[],c=r[r.length-1];if("object"==Object(ge["a"])(o)&&null!=o){o=r[0].recid,l=[];var d=0;while(1){if(!r[d]||r[d].recid!=o)break;l.push(r[d].column),d++}c=r[r.length-1].recid}var u=t.get(o,!0),h=t.get(c,!0),p=$("#grid_"+t.name+"_rec_"+(null!=u?$e.escapeId(t.records[u].recid):"none")),f=!1,g=e.keyCode,m=e.shiftKey;switch(g){case 8:case 46:t.delete(),f=!0,e.stopPropagation();break;case 27:t.selectNone(),f=!0;break;case 65:if(!e.metaKey&&!e.ctrlKey)break;t.selectAll(),f=!0;break;case 13:if("row"==this.selectType&&!0===t.show.expandColumn){if(p.length<=0)break;t.toggle(o,e),f=!0}else{for(var v=0;v<this.columns.length;v++){var y=this.getCellEditable(u,v);if(y){l.push(parseInt(v));break}}"row"==this.selectType&&this.last._edit&&this.last._edit.column&&(l=[this.last._edit.column]),l.length>0&&(t.editField(o,l[0],null,e),f=!0)}break;case 37:if(s){J();break}if("row"==this.selectType){if(p.length<=0)break;var b=this.records[u].w2ui||{};!b||null==b.parent_recid||Array.isArray(b.children)&&0!==b.children.length&&b.expanded?t.collapse(o,e):(t.unselect(o),t.collapse(b.parent_recid,e),t.select(b.parent_recid))}else{var w=t.prevCell(u,l[0]);if(m||null!=w||(this.selectNone(),w=0),null!=w)if(m&&t.multiSelect){if(K())return;var x=[],_=[],k=[];if(0===l.indexOf(this.last.sel_col)&&l.length>1){for(var C=0;C<r.length;C++)-1==x.indexOf(r[C].recid)&&x.push(r[C].recid),k.push({recid:r[C].recid,column:l[l.length-1]});t.unselect(k),t.scrollIntoView(u,l[l.length-1],!0)}else{for(var T=0;T<r.length;T++)-1==x.indexOf(r[T].recid)&&x.push(r[T].recid),_.push({recid:r[T].recid,column:w});t.select(_),t.scrollIntoView(u,w,!0)}}else e.metaKey=!1,t.click({recid:o,column:w},e),t.scrollIntoView(u,w,!0);else if(!m)if(r.length>1)t.selectNone();else for(var S=1;S<r.length;S++)t.unselect(r[S])}f=!0;break;case 39:if(s){J();break}if("row"==this.selectType){if(p.length<=0)break;t.expand(o,e)}else{var O=t.nextCell(u,l[l.length-1]);if(m||null!=O||(this.selectNone(),O=this.columns.length-1),null!=O)if(m&&39==g&&t.multiSelect){if(K())return;var E=[],D=[],I=[];if(l.indexOf(this.last.sel_col)==l.length-1&&l.length>1){for(var A=0;A<r.length;A++)-1==E.indexOf(r[A].recid)&&E.push(r[A].recid),I.push({recid:r[A].recid,column:l[0]});t.unselect(I),t.scrollIntoView(u,l[0],!0)}else{for(var j=0;j<r.length;j++)-1==E.indexOf(r[j].recid)&&E.push(r[j].recid),D.push({recid:r[j].recid,column:O});t.select(D),t.scrollIntoView(u,O,!0)}}else e.metaKey=!1,t.click({recid:o,column:O},e),t.scrollIntoView(u,O,!0);else if(!m)if(r.length>1)t.selectNone();else for(var z=0;z<r.length-1;z++)t.unselect(r[z])}f=!0;break;case 38:if(s&&J(),p.length<=0)break;var R=t.prevRow(u,l[0]);if(m||null!=R||(R=0==this.searchData.length||i?0:this.last.searchIds[0]),null!=R){if(m&&t.multiSelect){if(K())return;if("row"==t.selectType)t.last.sel_ind>R&&t.last.sel_ind!=h?t.unselect(t.records[h].recid):t.select(t.records[R].recid);else if(t.last.sel_ind>R&&t.last.sel_ind!=h){R=h;for(var N=[],M=0;M<l.length;M++)N.push({recid:t.records[R].recid,column:l[M]});t.unselect(N)}else{for(var F=[],L=0;L<l.length;L++)F.push({recid:t.records[R].recid,column:l[L]});t.select(F)}}else r.length>300?this.selectNone():this.unselect(r),t.click({recid:t.records[R].recid,column:l[0]},e);t.scrollIntoView(R),e.preventDefault&&e.preventDefault()}else if(!m)if(r.length>1)t.selectNone();else for(var P=1;P<r.length;P++)t.unselect(r[P]);break;case 40:if(s&&J(),p.length<=0)break;var H=t.nextRow(h,l[0]);if(m||null!=H||(H=0==this.searchData.length||i?this.records.length-1:this.last.searchIds[this.last.searchIds.length-1]),null!=H){if(m&&t.multiSelect){if(K())return;if("row"==t.selectType)this.last.sel_ind<H&&this.last.sel_ind!=u?t.unselect(t.records[u].recid):t.select(t.records[H].recid);else if(this.last.sel_ind<H&&this.last.sel_ind!=u){H=u;for(var B=[],q=0;q<l.length;q++)B.push({recid:t.records[H].recid,column:l[q]});t.unselect(B)}else{for(var W=[],U=0;U<l.length;U++)W.push({recid:t.records[H].recid,column:l[U]});t.select(W)}}else r.length>300?this.selectNone():this.unselect(r),t.click({recid:t.records[H].recid,column:l[0]},e);t.scrollIntoView(H),f=!0}else if(!m)if(r.length>1)t.selectNone();else for(var Y=0;Y<r.length-1;Y++)t.unselect(r[Y]);break;case 17:case 91:if(s)break;$e.isSafari&&(t.last.copy_event=t.copy(!1,e),$("#grid_"+t.name+"_focus").val(t.last.copy_event.text).select());break;case 67:(e.metaKey||e.ctrlKey)&&($e.isSafari||(t.last.copy_event=t.copy(!1,e),$("#grid_"+t.name+"_focus").val(t.last.copy_event.text).select()),t.copy(t.last.copy_event,e));break;case 88:if(s)break;(e.ctrlKey||e.metaKey)&&($e.isSafari||(t.last.copy_event=t.copy(!1,e),$("#grid_"+t.name+"_focus").val(t.last.copy_event.text).select()),t.copy(t.last.copy_event,e));break}for(var X=[32,187,189,192,219,220,221,186,222,188,190,191],V=48;V<=111;V++)X.push(V);-1==X.indexOf(g)||e.ctrlKey||e.metaKey||f||(0===l.length&&l.push(0),f=!1,setTimeout((function(){var i=$("#grid_"+t.name+"_focus"),n=i.val();i.val(""),t.editField(o,l[0],n,e)}),1)),f&&e.preventDefault&&e.preventDefault(),t.trigger($.extend(n,{phase:"after"}))}}function J(){if(t.records&&0!==t.records.length){var e=Math.floor(a[0].scrollTop/t.recordHeight)+1;(!t.records[e]||e<2)&&(e=0),"undefined"!==typeof t.records[e]&&t.select({recid:t.records[e].recid,column:0})}}function K(){if("click"!=t.last.sel_type)return!1;if("row"!=t.selectType){if(t.last.sel_type="key",r.length>1){for(var e=0;e<r.length;e++)if(r[e].recid==t.last.sel_recid&&r[e].column==t.last.sel_col){r.splice(e,1);break}return t.unselect(r),!0}return!1}return t.last.sel_type="key",r.length>1&&(r.splice(r.indexOf(t.records[t.last.sel_ind].recid),1),t.unselect(r),!0)}}},{key:"scrollIntoView",value:function(e,t,i){var n=this.records.length;if(0==this.searchData.length||this.url||(n=this.last.searchIds.length),0!==n){if(null==e){var s=this.getSelection();if(0===s.length)return;$.isPlainObject(s[0])?(e=s[0].index,t=s[0].column):e=this.get(s[0],!0)}var a=$("#grid_"+this.name+"_records"),r=this.last.searchIds.length;if(r>0&&(e=this.last.searchIds.indexOf(e)),a.height()<this.recordHeight*(r>0?r:n)&&a.length>0){var o=Math.floor(a[0].scrollTop/this.recordHeight),l=o+Math.floor(a.height()/this.recordHeight);e==o&&(!0===i?a.prop({scrollTop:a.scrollTop()-a.height()/1.3}):(a.stop(),a.animate({scrollTop:a.scrollTop()-a.height()/1.3},250,"linear"))),e==l&&(!0===i?a.prop({scrollTop:a.scrollTop()+a.height()/1.3}):(a.stop(),a.animate({scrollTop:a.scrollTop()+a.height()/1.3},250,"linear"))),(e<o||e>l)&&(!0===i?a.prop({scrollTop:(e-1)*this.recordHeight}):(a.stop(),a.animate({scrollTop:(e-1)*this.recordHeight},250,"linear")))}if(null!=t){for(var c=0,d=0,u=$e.scrollBarSize(),h=0;h<=t;h++){var p=this.columns[h];p.frozen||p.hidden||(c=d,d+=parseInt(p.sizeCalculated))}a.width()<d-a.scrollLeft()?!0===i?a.prop({scrollLeft:c-u}):a.animate({scrollLeft:c-u},250,"linear"):c<a.scrollLeft()&&(!0===i?a.prop({scrollLeft:d-a.width()+2*u}):a.animate({scrollLeft:d-a.width()+2*u},250,"linear"))}}}},{key:"dblClick",value:function(e,t){var i=null;if("object"==Object(ge["a"])(e)&&null!==e&&(i=e.column,e=e.recid),null==t&&(t={}),null==i&&t.target){var n=t.target;"TD"!=n.tagName.toUpperCase()&&(n=$(n).parents("td")[0]),i=parseInt($(n).attr("col"))}var s=this.get(e,!0),a=this.records[s],r=this.trigger({phase:"before",target:this.name,type:"dblClick",recid:e,column:i,originalEvent:t});if(!0!==r.isCancelled){this.selectNone();var o=this.getCellEditable(s,i);o?this.editField(e,i,null,t):(this.select({recid:e,column:i}),(this.show.expandColumn||a&&a.w2ui&&Array.isArray(a.w2ui.children))&&this.toggle(e)),this.trigger($.extend(r,{phase:"after"}))}}},{key:"contextMenu",value:function(e,t,i){var n=this;if("text"!=this.last.userSelect){null==i&&(i={offsetX:0,offsetY:0,target:$("#grid_"+this.name+"_rec_"+e)[0]}),null==i.offsetX&&(i.offsetX=i.layerX-i.target.offsetLeft,i.offsetY=i.layerY-i.target.offsetTop),$e.isFloat(e)&&(e=parseFloat(e));var s=this.getSelection();if("row"==this.selectType)-1==s.indexOf(e)&&this.click(e);else{var a=$(i.target);"TD"!=a[0].tagName.toUpperCase()&&(a=$(i.target).parents("td"));var r=!1;t=a.attr("col");for(var o=0;o<s.length;o++)s[o].recid!=e&&s[o].column!=t||(r=!0);r||null==e||this.click({recid:e,column:t}),r||null==t||this.columnClick(this.columns[t].field,i)}var l=this.trigger({phase:"before",type:"contextMenu",target:this.name,originalEvent:i,recid:e,column:t});!0!==l.isCancelled&&(n.menu.length>0&&$(n.box).find(i.target).w2menu(n.menu,{originalEvent:i,contextMenu:!0,onSelect:function(t){n.menuClick(e,t)}}),i.preventDefault&&i.preventDefault(),this.trigger($.extend(l,{phase:"after"})))}}},{key:"menuClick",value:function(e,t){var i=this.trigger({phase:"before",type:"menuClick",target:this.name,originalEvent:t.originalEvent,menuEvent:t,recid:e,menuIndex:t.index,menuItem:t.item});!0!==i.isCancelled&&this.trigger($.extend(i,{phase:"after"}))}},{key:"toggle",value:function(e){var t=this.get(e);if(null!=t)return t.w2ui=t.w2ui||{},!0===t.w2ui.expanded?this.collapse(e):this.expand(e)}},{key:"expand",value:function(e){var t=this.get(e,!0),i=this.records[t];i.w2ui=i.w2ui||{};var n,s=$e.escapeId(e),a=i.w2ui.children;if(Array.isArray(a)){if(!0===i.w2ui.expanded||0===a.length)return!1;if(n=this.trigger({phase:"before",type:"expand",target:this.name,recid:e}),!0===n.isCancelled)return!1;i.w2ui.expanded=!0,a.forEach((function(e){e.w2ui=e.w2ui||{},e.w2ui.parent_recid=i.recid,null==e.w2ui.children&&(e.w2ui.children=[])})),this.records.splice.apply(this.records,[t+1,0].concat(a)),this.total+=a.length;var r="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;r||(this.localSort(!0,!0),this.searchData.length>0&&this.localSearch(!0)),this.refresh(),this.trigger($.extend(n,{phase:"after"}))}else{if($("#grid_"+this.name+"_rec_"+s+"_expanded_row").length>0||!0!==this.show.expandColumn)return!1;if("none"==i.w2ui.expanded)return!1;if($("#grid_"+this.name+"_rec_"+s).after('<tr id="grid_'+this.name+"_rec_"+e+'_expanded_row" class="w2ui-expanded-row">    <td colspan="100" class="w2ui-expanded2">        <div id="grid_'+this.name+"_rec_"+e+'_expanded"></div>    </td>    <td class="w2ui-grid-data-last"></td></tr>'),$("#grid_"+this.name+"_frec_"+s).after('<tr id="grid_'+this.name+"_frec_"+e+'_expanded_row" class="w2ui-expanded-row">'+(this.show.lineNumbers?'<td class="w2ui-col-number"></td>':"")+'    <td class="w2ui-grid-data w2ui-expanded1" colspan="100">       <div id="grid_'+this.name+"_frec_"+e+'_expanded"></div>   </td></tr>'),n=this.trigger({phase:"before",type:"expand",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+e+"_expanded",fbox_id:"grid_"+this.name+"_frec_"+s+"_expanded"}),!0===n.isCancelled)return $("#grid_"+this.name+"_rec_"+s+"_expanded_row").remove(),$("#grid_"+this.name+"_frec_"+s+"_expanded_row").remove(),!1;var o=$(this.box).find("#grid_"+this.name+"_rec_"+e+"_expanded"),l=$(this.box).find("#grid_"+this.name+"_frec_"+e+"_expanded"),c=o.find("> div:first-child").height();o.height()<c&&o.css({height:c+"px"}),l.height()<c&&l.css({height:c+"px"}),$("#grid_"+this.name+"_rec_"+s).attr("expanded","yes").addClass("w2ui-expanded"),$("#grid_"+this.name+"_frec_"+s).attr("expanded","yes").addClass("w2ui-expanded"),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html("-"),i.w2ui.expanded=!0,this.trigger($.extend(n,{phase:"after"})),this.resizeRecords()}return!0}},{key:"collapse",value:function(e){var t=this,i=this.get(e,!0),n=this.records[i];n.w2ui=n.w2ui||{};var s,a=$e.escapeId(e),r=n.w2ui.children;if(Array.isArray(r)){if(!0!==n.w2ui.expanded)return!1;if(s=this.trigger({phase:"before",type:"collapse",target:this.name,recid:e}),!0===s.isCancelled)return!1;h(n);for(var o=[],l=n;null!=l;l=this.get(l.w2ui.parent_recid))o.push(l.w2ui.parent_recid);var c=i+1,d=c;while(1){if(this.records.length<=d+1||null==this.records[d+1].w2ui||o.indexOf(this.records[d+1].w2ui.parent_recid)>=0)break;d++}this.records.splice(c,d-c+1),this.total-=d-c+1;var u="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;u||this.searchData.length>0&&this.localSearch(!0),this.refresh(),this.trigger($.extend(s,{phase:"after"}))}else{if(0===$("#grid_"+this.name+"_rec_"+a+"_expanded_row").length||!0!==this.show.expandColumn)return!1;if(s=this.trigger({phase:"before",type:"collapse",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+a+"_expanded",fbox_id:"grid_"+this.name+"_frec_"+a+"_expanded"}),!0===s.isCancelled)return!1;$("#grid_"+this.name+"_rec_"+a).removeAttr("expanded").removeClass("w2ui-expanded"),$("#grid_"+this.name+"_frec_"+a).removeAttr("expanded").removeClass("w2ui-expanded"),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html("+"),$("#grid_"+this.name+"_rec_"+a+"_expanded").css("height","0px"),$("#grid_"+this.name+"_frec_"+a+"_expanded").css("height","0px"),setTimeout((function(){$("#grid_"+t.name+"_rec_"+a+"_expanded_row").remove(),$("#grid_"+t.name+"_frec_"+a+"_expanded_row").remove(),n.w2ui.expanded=!1,t.trigger($.extend(s,{phase:"after"})),t.resizeRecords()}),300)}return!0;function h(e){e.w2ui.expanded=!1;for(var t=0;t<e.w2ui.children.length;t++){var i=e.w2ui.children[t];i.w2ui.expanded&&h(i)}}}},{key:"sort",value:function(e,t,i){var n=this.trigger({phase:"before",type:"sort",target:this.name,field:e,direction:t,multiField:i});if(!0!==n.isCancelled){if(null!=e){for(var s=this.sortData.length,a=0;a<this.sortData.length;a++)if(this.sortData[a].field==e){s=a;break}if(null==t)if(null==this.sortData[s])t="asc";else switch(null==this.sortData[s].direction&&(this.sortData[s].direction=""),this.sortData[s].direction.toLowerCase()){case"asc":t="desc";break;case"desc":t="asc";break;default:t="asc";break}!1===this.multiSort&&(this.sortData=[],s=0),1!=i&&(this.sortData=[],s=0),null==this.sortData[s]&&(this.sortData[s]={}),this.sortData[s].field=e,this.sortData[s].direction=t}else this.sortData=[];var r="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;r?(this.trigger($.extend(n,{phase:"after",direction:t})),this.last.xhr_offset=0,this.reload()):(this.localSort(!0,!0),this.searchData.length>0&&this.localSearch(!0),this.last.scrollTop=0,$("#grid_"+this.name+"_records").prop("scrollTop",0),this.trigger($.extend(n,{phase:"after",direction:t})),this.refresh())}}},{key:"copy",value:function(e,t){if($.isPlainObject(e))return this.trigger($.extend(e,{phase:"after"})),e.text;var i=this.getSelection();if(0===i.length)return"";var n,s="";if("object"==Object(ge["a"])(i[0])){for(var a=i[0].column,r=i[0].column,o=[],l=0;l<i.length;l++)i[l].column<a&&(a=i[l].column),i[l].column>r&&(r=i[l].column),-1==o.indexOf(i[l].index)&&o.push(i[l].index);o.sort((function(e,t){return e-t}));for(var c=0;c<o.length;c++){for(var d=o[c],u=a;u<=r;u++){var h=this.columns[u];!0!==h.hidden&&(s+=this.getCellCopy(d,u)+"\t")}s=s.substr(0,s.length-1),s+="\n"}}else{for(var p=0;p<this.columns.length;p++){var f=this.columns[p];if(!0!==f.hidden){var g=f.text?f.text:f.field;f.text&&f.text.length<3&&f.tooltip&&(g=f.tooltip),s+='"'+$e.stripTags(g)+'"\t'}}s=s.substr(0,s.length-1),s+="\n";for(var m=0;m<i.length;m++){for(var v=this.get(i[m],!0),y=0;y<this.columns.length;y++){var b=this.columns[y];!0!==b.hidden&&(s+='"'+this.getCellCopy(v,y)+'"\t')}s=s.substr(0,s.length-1),s+="\n"}}return s=s.substr(0,s.length-1),null==e?(n=this.trigger({phase:"before",type:"copy",target:this.name,text:s,cut:88==t.keyCode,originalEvent:t}),!0===n.isCancelled?"":(s=n.text,this.trigger($.extend(n,{phase:"after"})),s)):!1===e?(n=this.trigger({phase:"before",type:"copy",target:this.name,text:s,cut:88==t.keyCode,originalEvent:t}),!0===n.isCancelled?"":(s=n.text,n)):void 0}},{key:"getCellCopy",value:function(e,t){return $e.stripTags(this.getCellHTML(e,t))}},{key:"paste",value:function(e){var t=this.getSelection(),i=this.get(t[0].recid,!0),n=t[0].column,s=this.trigger({phase:"before",type:"paste",target:this.name,text:e,index:i,column:n});if(!0!==s.isCancelled){if(e=s.text,"row"==this.selectType||0===t.length)return console.log("ERROR: You can paste only if grid.selectType = 'cell' and when at least one cell selected."),void this.trigger($.extend(s,{phase:"after"}));var a=[];e=e.split("\n");for(var r=0;r<e.length;r++){var o=e[r].split("\t"),l=0,c=this.records[i],d=[];if(null!=c){for(var u=0;u<o.length;u++)this.columns[n+l]&&(this.setCellPaste(c,n+l,o[u]),d.push(n+l),l++);for(var h=0;h<d.length;h++)a.push({recid:c.recid,column:d[h]});i++}}this.selectNone(),this.select(a),this.refresh(),this.trigger($.extend(s,{phase:"after"}))}}},{key:"setCellPaste",value:function(e,t,i){var n=this.columns[t].field;e.w2ui=e.w2ui||{},e.w2ui.changes=e.w2ui.changes||{},e.w2ui.changes[n]=i}},{key:"resize",value:function(){var e=(new Date).getTime();if(this.box&&$(this.box).attr("name")==this.name){$(this.box).find("> div.w2ui-grid-box").css("width",$(this.box).width()).css("height",$(this.box).height());var t=this.trigger({phase:"before",type:"resize",target:this.name});if(!0!==t.isCancelled)return this.resizeBoxes(),this.resizeRecords(),this.toolbar&&this.toolbar.resize&&this.toolbar.resize(),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}}},{key:"update",value:function(e){var t=(new Date).getTime();if(null==this.box)return 0;if(null==e){for(var i=this.last.range_start-1;i<=this.last.range_end-1;i++)if(!(i<0)){var n=this.records[i]||{};n.w2ui||(n.w2ui={});for(var s=0;s<this.columns.length;s++){var a=$(this.box).find("#grid_"+this.name+"_rec_"+$e.escapeId(n.recid)),r=$(this.box).find("#grid_"+this.name+"_data_"+i+"_"+s);r.replaceWith(this.getCellHTML(i,s,!1)),r=$(this.box).find("#grid_"+this.name+"_data_"+i+"_"+s),null==n.w2ui.style||$.isEmptyObject(n.w2ui.style)?r.attr("style",""):("string"==typeof n.w2ui.style&&a.attr("style",n.w2ui.style),$.isPlainObject(n.w2ui.style)&&"string"==typeof n.w2ui.style[s]&&r.attr("style",n.w2ui.style[s])),null==n.w2ui.class||$.isEmptyObject(n.w2ui.class)||("string"==typeof n.w2ui.class&&a.addClass(n.w2ui.class),$.isPlainObject(n.w2ui.class)&&"string"==typeof n.w2ui.class[s]&&r.addClass(n.w2ui.class[s]))}}}else for(var o=0;o<e.length;o++){var l=e[o].index,c=e[o].column;if(!(l<0))if(null!=l&&null!=c){var d=this.records[l]||{},u=$(this.box).find("#grid_"+this.name+"_rec_"+$e.escapeId(d.recid)),h=$(this.box).find("#grid_"+this.name+"_data_"+l+"_"+c);d.w2ui||(d.w2ui={}),h.replaceWith(this.getCellHTML(l,c,!1)),h=$(this.box).find("#grid_"+this.name+"_data_"+l+"_"+c),null==d.w2ui.style||$.isEmptyObject(d.w2ui.style)?h.attr("style",""):("string"==typeof d.w2ui.style&&u.attr("style",d.w2ui.style),$.isPlainObject(d.w2ui.style)&&"string"==typeof d.w2ui.style[c]&&h.attr("style",d.w2ui.style[c])),null==d.w2ui.class||$.isEmptyObject(d.w2ui.class)||("string"==typeof d.w2ui.class&&u.addClass(d.w2ui.class),$.isPlainObject(d.w2ui.class)&&"string"==typeof d.w2ui.class[c]&&h.addClass(d.w2ui.class[c]))}else console.log("ERROR: Wrong argument for grid.update(cells), cells should be [{ index: X, column: Y }, ...]")}return(new Date).getTime()-t}},{key:"refreshCell",value:function(e,t){var i=this.get(e,!0),n=this.getColumn(t,!0),s=!this.records[i]||this.records[i].recid!=e,a=$(this.box).find((s?".w2ui-grid-summary ":"")+"#grid_"+this.name+"_data_"+i+"_"+n);if(0==a.length)return!1;a.replaceWith(this.getCellHTML(i,n,s))}},{key:"refreshRow",value:function(e,t){var i=$(this.box).find("#grid_"+this.name+"_frec_"+$e.escapeId(e)),n=$(this.box).find("#grid_"+this.name+"_rec_"+$e.escapeId(e));if(i.length>0){null==t&&(t=this.get(e,!0));var s=i.attr("line"),a=!this.records[t]||this.records[t].recid!=e,r="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(this.searchData.length>0&&!r)for(var o=0;o<this.last.searchIds.length;o++)this.last.searchIds[o]==t&&(t=o);var l=this.getRecordHTML(t,s,a);$(i).replaceWith(l[0]),$(n).replaceWith(l[1]);var c=this.records[t].w2ui?this.records[t].w2ui.style:"";"string"==typeof c&&(i=$(this.box).find("#grid_"+this.name+"_frec_"+$e.escapeId(e)),n=$(this.box).find("#grid_"+this.name+"_rec_"+$e.escapeId(e)),i.attr("custom_style",c),n.attr("custom_style",c),i.hasClass("w2ui-selected")&&(c=c.replace("background-color","none")),i[0].style.cssText="height: "+this.recordHeight+"px;"+c,n[0].style.cssText="height: "+this.recordHeight+"px;"+c),a&&this.resize()}}},{key:"refresh",value:function(){var e=this,t=(new Date).getTime(),i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(this.total<=0&&!i&&0===this.searchData.length&&(this.total=this.records.length),this.toolbar.disable("w2ui-edit","w2ui-delete"),this.box){var n=this.trigger({phase:"before",target:this.name,type:"refresh"});if(!0!==n.isCancelled){if(this.show.header?$("#grid_"+this.name+"_header").html(this.header+"&#160;").show():$("#grid_"+this.name+"_header").hide(),this.show.toolbar){if(this.toolbar&&this.toolbar.get("w2ui-column-on-off")&&this.toolbar.get("w2ui-column-on-off").checked);else if($("#grid_"+this.name+"_toolbar").show(),"object"==Object(ge["a"])(this.toolbar))for(var s=this.toolbar.items,a=0;a<s.length;a++)"w2ui-search"!=s[a].id&&"break"!=s[a].type&&this.toolbar.refresh(s[a].id)}else $("#grid_"+this.name+"_toolbar").hide();this.searchClose();var r=$("#grid_"+this.name+"_search_all");!this.multiSearch&&"all"==this.last.field&&this.searches.length>0&&(this.last.field=this.searches[0].field,this.last.label=this.searches[0].label);for(var o=0;o<this.searches.length;o++)this.searches[o].field==this.last.field&&(this.last.label=this.searches[o].label);if(this.last.multi?(r.attr("placeholder","["+$e.lang("Multiple Fields")+"]"),r.w2field("clear")):r.attr("placeholder",$e.lang("Search")+" "+$e.lang(this.last.label)),r.val()!=this.last.search){var l=this.last.search,c=r.data("w2field");c&&(l=c.format(l)),r.val(l)}this.refreshSearch(),this.refreshBody(),this.show.footer?$("#grid_"+this.name+"_footer").html(this.getFooterHTML()).show():$("#grid_"+this.name+"_footer").hide();var d=this.last.selection,u=this.records.length>0&&d.indexes.length==this.records.length,h=d.indexes.length>0&&0!==this.searchData.length&&d.indexes.length==this.last.searchIds.length;u||h?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status();for(var p=this.find({"w2ui.expanded":!0},!0),f=0;f<p.length;f++){var g=this.records[p[f]].w2ui;g&&!Array.isArray(g.children)&&(g.expanded=!1)}return this.markSearch&&setTimeout((function(){for(var t=[],i=0;i<e.searchData.length;i++){var n=e.searchData[i],s=e.getSearch(n.field);if(s&&!s.hidden){var a=e.getColumn(n.field,!0);t.push({field:n.field,search:n.value,col:a})}}t.length>0&&t.forEach((function(t){$(e.box).find('td[col="'+t.col+'"]').not(".w2ui-head").w2marker(t.search)}))}),50),this.show.toolbarSave&&(this.getChanges().length>0?this.toolbar.enable("w2ui-save"):this.toolbar.disable("w2ui-save")),this.trigger($.extend(n,{phase:"after"})),this.resize(),this.addRange("selection"),setTimeout((function(){e.resize(),e.scroll()}),1),this.reorderColumns&&!this.last.columnDrag?this.last.columnDrag=this.initColumnDrag():!this.reorderColumns&&this.last.columnDrag&&this.last.columnDrag.remove(),(new Date).getTime()-t}}}},{key:"refreshSearch",value:function(){var e=this;if(this.multiSearch&&this.searchData.length>0){0==$(this.box).find(".w2ui-grid-searches").length&&$(this.box).find(".w2ui-grid-toolbar").css("height",this.last._toolbar_height+35+"px").append('<div id="grid_'.concat(this.name,'_searches" class="w2ui-grid-searches"></div>'));var t='\n                <span id="grid_'.concat(this.name,'_search_logic" class="w2ui-grid-search-logic"></span>\n                <div class="grid-search-line"></div>');this.searchData.forEach((function(i,n){var s,a=e.getSearch(i.field,!0),r=e.searches[a];if(s=Array.isArray(i.value)?'<span class="grid-search-count">'.concat(i.value.length,"</span>"):": ".concat(i.value),r&&"date"==r.type)if("between"==i.operator){var o=i.value[0],l=i.value[1];Number(o)===o&&(o=$e.formatDate(o)),Number(l)===l&&(l=$e.formatDate(l)),s=": ".concat(o," - ").concat(l)}else{var c=i.value;Number(c)==c&&(c=$e.formatDate(c));var d=i.operator;"more"==d&&(d="since"),"less"==d&&(d="before"),"more:"==d.substr(0,5)&&(d="since"),s=": ".concat(d," ").concat(c)}t+='<span class="w2ui-action" data-click="searchFieldDrop|'.concat(a,"|").concat(n,'|this">\n                    ').concat(r?r.label:"","\n                    ").concat(s,'\n                    <span class="icon-chevron-down"></span>\n                </span>')})),t+="\n                ".concat(this.show.searchSave?'<div class="grid-search-line"></div>\n                       <button class="w2ui-btn grid-search-btn" data-click="searchSave">Save</button>\n                      ':"",'\n                <button class="w2ui-btn grid-search-btn btn-remove"\n                    data-click="searchReset">X</button>\n            '),$(this.box).find("#grid_".concat(this.name,"_searches")).html(t),$("#grid_".concat(this.name,"_search_logic")).html($e.lang("AND"==this.last.logic?"All":"Any"))}else $(this.box).find(".w2ui-grid-toolbar").css("height",this.last._toolbar_height).find(".w2ui-grid-searches").remove();this.searchSelected?($(this.box).find("#grid_".concat(this.name,"_search_all")).val(" ").prop("readOnly",!0),$(this.box).find("#grid_".concat(this.name,"_search_name")).show().find(".name-text").html(this.searchSelected.name)):($(this.box).find("#grid_".concat(this.name,"_search_all")).prop("readOnly",!1),$(this.box).find("#grid_".concat(this.name,"_search_name")).hide().find(".name-text").html("")),$e.bindEvents("#grid_".concat(this.name,"_searches .w2ui-action, #grid_").concat(this.name,"_searches button"),this)}},{key:"refreshBody",value:function(){var e=this,t=this.find({"w2ui.summary":!0},!0);if(t.length>0){for(var i=0;i<t.length;i++)this.summary.push(this.records[t[i]]);for(var n=t.length-1;n>=0;n--)this.records.splice(t[n],1)}this.scroll();var s=this.getRecordsHTML(),a=this.getColumnsHTML(),r='<div id="grid_'+this.name+'_frecords" class="w2ui-grid-frecords" style="margin-bottom: '+($e.scrollBarSize()-1)+'px;">'+s[0]+'</div><div id="grid_'+this.name+'_records" class="w2ui-grid-records" onscroll="w2ui[\''+this.name+"'].scroll(event);\">"+s[1]+'</div><div id="grid_'+this.name+'_scroll1" class="w2ui-grid-scroll1" style="height: '+$e.scrollBarSize()+'px"></div><div id="grid_'+this.name+'_fcolumns" class="w2ui-grid-fcolumns">    <table><tbody>'+a[0]+'</tbody></table></div><div id="grid_'+this.name+'_columns" class="w2ui-grid-columns">    <table><tbody>'+a[1]+"</tbody></table></div>",o=$("#grid_"+this.name+"_body",this.box).html(r),l=$("#grid_"+this.name+"_records",this.box),c=$("#grid_"+this.name+"_frecords",this.box),d=this;if("row"==this.selectType&&(l.on("mouseover mouseout","tr",(function(e){$("#grid_"+d.name+"_frec_"+$e.escapeId($(this).attr("recid"))).toggleClass("w2ui-record-hover","mouseover"==e.type)})),c.on("mouseover mouseout","tr",(function(e){$("#grid_"+d.name+"_rec_"+$e.escapeId($(this).attr("recid"))).toggleClass("w2ui-record-hover","mouseover"==e.type)}))),$e.isIOS?l.add(c).on("click","tr",(function(e){d.dblClick($(this).attr("recid"),e)})):l.add(c).on("click","tr",(function(e){d.click($(this).attr("recid"),e)})).on("contextmenu","tr",(function(e){d.contextMenu($(this).attr("recid"),null,e)})),o.data("scrolldata",{lastTime:0,lastDelta:0,time:0}).find(".w2ui-grid-frecords").on("mousewheel DOMMouseScroll ",(function(t){t.preventDefault();var i=t.originalEvent,n=o.data("scrolldata"),s=$(this).siblings(".w2ui-grid-records").addBack().filter(".w2ui-grid-records"),a=null!=typeof i.wheelDelta?-1*i.wheelDelta/120:(i.detail||i.deltaY)/3,r=s.scrollTop();n.time=+new Date,n.lastTime<n.time-150&&(n.lastDelta=0),n.lastTime=n.time,n.lastDelta+=a,a=Math.abs(n.lastDelta)<1?0:Math.round(n.lastDelta),o.data("scrolldata",n),a*=(Math.round(l.height()/e.recordHeight)-1)*e.recordHeight/4,s.stop().animate({scrollTop:r+a},250,"linear")})),0===this.records.length&&this.msgEmpty?$("#grid_"+this.name+"_body").append('<div id="grid_'+this.name+'_empty_msg" class="w2ui-grid-empty-msg"><div>'+this.msgEmpty+"</div></div>"):$("#grid_"+this.name+"_empty_msg").length>0&&$("#grid_"+this.name+"_empty_msg").remove(),this.summary.length>0){var u=this.getSummaryHTML();$("#grid_"+this.name+"_fsummary").html(u[0]).show(),$("#grid_"+this.name+"_summary").html(u[1]).show()}else $("#grid_"+this.name+"_fsummary").hide(),$("#grid_"+this.name+"_summary").hide()}},{key:"render",value:function(e){var t=this,i=this,n=(new Date).getTime();if(null!=e&&($(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-grid w2ui-inactive").html(""),this.box=e),this.box){var s="object"!=Object(ge["a"])(this.url)?this.url:this.url.get,a=this.trigger({phase:"before",target:this.name,type:"render",box:e});if(!0!==a.isCancelled){if(this.reset(!0),!this.last.field)if(this.multiSearch&&this.show.searchAll)this.last.field="all",this.last.label=$e.lang("All Fields");else{var r=0;while(r<this.searches.length&&(this.searches[r].hidden||!1===this.searches[r].simple))r++;r>=this.searches.length?(this.last.field="",this.last.label=""):(this.last.field=this.searches[r].field,this.last.label=this.searches[r].label)}if($(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-grid w2ui-inactive").html('<div class="w2ui-grid-box">    <div id="grid_'+this.name+'_header" class="w2ui-grid-header"></div>    <div id="grid_'+this.name+'_toolbar" class="w2ui-grid-toolbar"></div>    <div id="grid_'+this.name+'_body" class="w2ui-grid-body"></div>    <div id="grid_'+this.name+'_fsummary" class="w2ui-grid-body w2ui-grid-summary"></div>    <div id="grid_'+this.name+'_summary" class="w2ui-grid-body w2ui-grid-summary"></div>    <div id="grid_'+this.name+'_footer" class="w2ui-grid-footer"></div>    <textarea id="grid_'+this.name+'_focus" class="w2ui-grid-focus-input" '+(this.tabIndex?'tabindex="'+this.tabIndex+'"':"")+($e.isIOS?"readonly":"")+"></textarea></div>"),"row"!=this.selectType&&$(this.box).addClass("w2ui-ss"),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.initToolbar(),null!=this.toolbar&&this.toolbar.render($("#grid_"+this.name+"_toolbar")[0]),this.last._toolbar_height=$("#grid_".concat(this.name,"_toolbar")).prop("offsetHeight"),this.last.field&&"all"!=this.last.field){var o=this.searchData;setTimeout((function(){t.searchInitInput(t.last.field,1==o.length?o[0].value:null)}),1)}$("#grid_"+this.name+"_footer").html(this.getFooterHTML()),this.last.state||(this.last.state=this.stateSave(!0)),this.stateRestore(),s&&(this.clear(),this.refresh());for(var l,c=!1,d=0;d<this.searches.length;d++)if(this.searches[d].hidden){c=!0;break}return c?(this.searchReset(!1),s||setTimeout((function(){t.searchReset()}),1)):this.reload(),$(this.box).find("#grid_"+this.name+"_focus").on("focus",(function(e){clearTimeout(i.last.kbd_timer),i.hasFocus||i.focus()})).on("blur",(function(e){clearTimeout(i.last.kbd_timer),i.last.kbd_timer=setTimeout((function(){i.hasFocus&&i.blur()}),100)})).on("paste",(function(e){var t=e.originalEvent.clipboardData?e.originalEvent.clipboardData:null;if(t&&t.types&&-1!=t.types.indexOf("text/plain")){e.preventDefault();var n=t.getData("text/plain");-1!=n.indexOf("\r")&&-1==n.indexOf("\n")&&(n=n.replace(/\r/g,"\n")),_e[i.name].paste(n)}else{var s=this;setTimeout((function(){_e[i.name].paste(s.value),s.value=""}),1)}})).on("keydown",(function(e){_e[i.name].keydown.call(_e[i.name],e)})),$(this.box).off("mousedown.mouseStart").on("mousedown.mouseStart",u),this.updateToolbar(),this.trigger($.extend(a,{phase:"after"})),0===$(".w2ui-layout").length&&$(window).off("resize.w2ui-"+i.name).on("resize.w2ui-"+i.name,(function(e){null==_e[i.name]?$(window).off("resize.w2ui-"+i.name):_e[i.name].resize()})),(new Date).getTime()-n}}function u(e){if(1==e.which&&("text"==i.last.userSelect&&(i.last.userSelect="",$(i.box).find(".w2ui-grid-body").css($e.cssPrefix("user-select","none"))),("row"!=i.selectType||!$(e.target).parents().hasClass("w2ui-head")&&!$(e.target).hasClass("w2ui-head"))&&(!i.last.move||"expand"!=i.last.move.type))){if(e.altKey)$(i.box).find(".w2ui-grid-body").css($e.cssPrefix("user-select","text")),i.selectNone(),i.last.move={type:"text-select"},i.last.userSelect="text";else{var t=e.target,n={x:e.offsetX-10,y:e.offsetY-10},s=!1;while(t){if(t.classList&&t.classList.contains("w2ui-grid"))break;t.tagName&&"TD"==t.tagName.toUpperCase()&&(s=!0),t.tagName&&"TR"!=t.tagName.toUpperCase()&&1==s&&(n.x+=t.offsetLeft,n.y+=t.offsetTop),t=t.parentNode}i.last.move={x:e.screenX,y:e.screenY,divX:0,divY:0,focusX:n.x,focusY:n.y,recid:$(e.target).parents("tr").attr("recid"),column:parseInt("TD"==e.target.tagName.toUpperCase()?$(e.target).attr("col"):$(e.target).parents("td").attr("col")),type:"select",ghost:!1,start:!0},null==i.last.move.recid&&(i.last.move.type="select-column");var a=e.target,r=$(i.box).find("#grid_"+i.name+"_focus");if(i.last.move){var o=i.last.move.focusX,l=i.last.move.focusY,c=$(a).parents("table").parent();(c.hasClass("w2ui-grid-records")||c.hasClass("w2ui-grid-frecords")||c.hasClass("w2ui-grid-columns")||c.hasClass("w2ui-grid-fcolumns")||c.hasClass("w2ui-grid-summary"))&&(o=i.last.move.focusX-$(i.box).find("#grid_"+i.name+"_records").scrollLeft(),l=i.last.move.focusY-$(i.box).find("#grid_"+i.name+"_records").scrollTop()),($(a).hasClass("w2ui-grid-footer")||$(a).parents("div.w2ui-grid-footer").length>0)&&(l=$(i.box).find("#grid_"+i.name+"_footer").position().top),c.hasClass("w2ui-scroll-wrapper")&&c.parent().hasClass("w2ui-toolbar")&&(o=i.last.move.focusX-c.scrollLeft()),r.css({left:o-10,top:l})}setTimeout((function(){-1!=["INPUT","TEXTAREA","SELECT"].indexOf(a.tagName.toUpperCase())?$(a).focus():r.is(":focus")||r.focus()}),50),i.multiSelect||i.reorderRows||"drag"!=i.last.move.type||delete i.last.move}if(1==i.reorderRows){var d=e.target;if("TD"!=d.tagName.toUpperCase()&&(d=$(d).parents("td")[0]),$(d).hasClass("w2ui-col-number")||$(d).hasClass("w2ui-col-order")){i.selectNone(),i.last.move.reorder=!0;var u=$(i.box).find(".w2ui-even.w2ui-empty-record").css("background-color"),f=$(i.box).find(".w2ui-odd.w2ui-empty-record").css("background-color");$(i.box).find(".w2ui-even td").not(".w2ui-col-number").css("background-color",u),$(i.box).find(".w2ui-odd td").not(".w2ui-col-number").css("background-color",f);var g=i.last.move,m=$(i.box).find(".w2ui-grid-records");if(!g.ghost){var v=$("#grid_"+i.name+"_rec_"+g.recid),y=v.parents("table").find("tr:first-child").clone();g.offsetY=e.offsetY,g.from=g.recid,g.pos=v.position(),g.ghost=$(v).clone(!0),g.ghost.removeAttr("id"),v.find("td").remove(),v.append('<td colspan="1000"><div style="height: '+i.recordHeight+'px; background-color: #eee; border-bottom: 1px dashed #aaa; border-top: 1px dashed #aaa;"></div></td>'),m.append('<div id="grid_'+i.name+'_ghost_line" style="position: absolute; z-index: 999999; pointer-events: none; width: 100%;"></div>'),m.append('<table id="grid_'+i.name+'_ghost" style="position: absolute; z-index: 999998; opacity: 0.9; pointer-events: none;"></table>'),$("#grid_"+i.name+"_ghost").append(y).append(g.ghost)}var b=$("#grid_"+i.name+"_ghost");b.css({top:g.pos.top,left:g.pos.left,"border-top":"1px solid #aaa","border-bottom":"1px solid #aaa"})}else i.last.move.reorder=!1}$(document).on("mousemove.w2ui-"+i.name,h).on("mouseup.w2ui-"+i.name,p),e.stopPropagation()}}function h(e){var t=i.last.move;if(t&&-1!=["select","select-column"].indexOf(t.type)&&(t.divX=e.screenX-t.x,t.divY=e.screenY-t.y,!(Math.abs(t.divX)<=1&&Math.abs(t.divY)<=1)))if(i.last.cancelClick=!0,1==i.reorderRows&&i.last.move.reorder){$(i.box).find(".w2ui-grid-records");var n=$(e.target).parents("tr"),s=n.attr("recid");if("-none-"==s&&(s="bottom"),s!=t.from){var a=$("#grid_"+i.name+"_rec_"+s);$(i.box).find(".insert-before"),a.addClass("insert-before"),t.lastY=e.screenY,t.to=s;var r=a.position(),o=$("#grid_"+i.name+"_ghost_line");r?o.css({top:r.top,left:t.pos.left,"border-top":"2px solid #769EFC"}):o.css({"border-top":"2px solid transparent"})}var c=$("#grid_"+i.name+"_ghost");c.css({top:t.pos.top+t.divY,left:t.pos.left})}else{t.start&&t.recid&&(i.selectNone(),t.start=!1);var d=[],u="TR"==e.target.tagName.toUpperCase()?$(e.target).attr("recid"):$(e.target).parents("tr").attr("recid");if(null==u){if("row"==i.selectType)return;if(i.last.move&&"select"==i.last.move.type)return;var h=parseInt($(e.target).parents("td").attr("col"));if(isNaN(h))i.removeRange("column-selection"),$(i.box).find(".w2ui-grid-columns .w2ui-col-header, .w2ui-grid-fcolumns .w2ui-col-header").removeClass("w2ui-col-selected"),$(i.box).find(".w2ui-col-number").removeClass("w2ui-row-selected"),delete t.colRange;else{var p=h+"-"+h;t.column<h&&(p=t.column+"-"+h),t.column>h&&(p=h+"-"+t.column);for(var f=[],g=p.split("-"),m=parseInt(g[0]);m<=parseInt(g[1]);m++)f.push(m);if(t.colRange!=p&&(l=i.trigger({phase:"before",type:"columnSelect",target:i.name,columns:f,isCancelled:!1}),!0!==l.isCancelled)){null==t.colRange&&i.selectNone();var v=p.split("-");$(i.box).find(".w2ui-grid-columns .w2ui-col-header, .w2ui-grid-fcolumns .w2ui-col-header").removeClass("w2ui-col-selected");for(var y=parseInt(v[0]);y<=parseInt(v[1]);y++)$(i.box).find("#grid_"+i.name+"_column_"+y+" .w2ui-col-header").addClass("w2ui-col-selected");$(i.box).find(".w2ui-col-number").not(".w2ui-head").addClass("w2ui-row-selected"),t.colRange=p,i.removeRange("column-selection"),i.addRange({name:"column-selection",range:[{recid:i.records[0].recid,column:v[0]},{recid:i.records[i.records.length-1].recid,column:v[1]}],style:"background-color: rgba(90, 145, 234, 0.1)"})}}}else{var b=i.get(t.recid,!0);if(null==b||i.records[b]&&i.records[b].recid!=t.recid)return;var w=i.get(u,!0);if(null==w)return;var x=parseInt(t.column),_=parseInt("TD"==e.target.tagName.toUpperCase()?$(e.target).attr("col"):$(e.target).parents("td").attr("col"));if(isNaN(x)&&isNaN(_)&&(x=0,_=i.columns.length-1),b>w){var k=b;b=w,w=k}var C="ind1:"+b+",ind2;"+w+",col1:"+x+",col2:"+_;if(t.range==C)return;t.range=C;for(var T=b;T<=w;T++)if(!(i.last.searchIds.length>0&&-1==i.last.searchIds.indexOf(T)))if("row"!=i.selectType){if(x>_){var S=x;x=_,_=S}for(var O=x;O<=_;O++)i.columns[O].hidden||d.push({recid:i.records[T].recid,column:parseInt(O)})}else d.push(i.records[T].recid);if("row"!=i.selectType){for(var E=i.getSelection(),D=[],I=0;I<d.length;I++){for(var A=!1,j=0;j<E.length;j++)d[I].recid==E[j].recid&&d[I].column==E[j].column&&(A=!0);A||D.push({recid:d[I].recid,column:d[I].column})}i.select(D),D=[];for(var z=0;z<E.length;z++){for(var R=!1,N=0;N<d.length;N++)d[N].recid==E[z].recid&&d[N].column==E[z].column&&(R=!0);R||D.push({recid:E[z].recid,column:E[z].column})}i.unselect(D)}else if(i.multiSelect){for(var M=i.getSelection(),F=0;F<d.length;F++)-1==M.indexOf(d[F])&&i.select(d[F]);for(var L=0;L<M.length;L++)-1==d.indexOf(M[L])&&i.unselect(M[L])}}}}function p(e){var t=i.last.move;if(setTimeout((function(){delete i.last.cancelClick}),1),!$(e.target).parents().hasClass(".w2ui-head")&&!$(e.target).hasClass(".w2ui-head")){if(t&&-1!=["select","select-column"].indexOf(t.type)){if(null!=t.colRange&&!0!==l.isCancelled){for(var n=t.colRange.split("-"),s=[],a=0;a<i.records.length;a++){for(var r=[],o=parseInt(n[0]);o<=parseInt(n[1]);o++)r.push(o);s.push({recid:i.records[a].recid,column:r})}i.removeRange("column-selection"),i.trigger($.extend(l,{phase:"after"})),i.select(s)}if(1==i.reorderRows&&i.last.move.reorder)if(null!=t.to){var c=i.trigger({phase:"before",target:i.name,type:"reorderRow",recid:t.from,moveBefore:t.to});if(!0===c.isCancelled)return f(),void delete i.last.move;var d=i.get(t.from,!0),u=i.get(t.to,!0);"bottom"==t.to&&(u=i.records.length);var h=i.records[d];null!=d&&null!=u&&(i.records.splice(d,1),d>u?i.records.splice(u,0,h):i.records.splice(u-1,0,h)),f(),i.trigger($.extend(c,{phase:"after"}))}else f()}delete i.last.move,$(document).off(".w2ui-"+i.name)}}function f(){$("#grid_"+i.name+"_ghost").remove(),$("#grid_"+i.name+"_ghost_line").remove(),i.refresh(),delete i.last.move}}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});!0!==e.isCancelled&&($(this.box).off(),"object"==Object(ge["a"])(this.toolbar)&&this.toolbar.destroy&&this.toolbar.destroy(),$(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-grid w2ui-inactive").html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})))}},{key:"initColumnOnOff",value:function(){if(this.show.toolbarColumns){for(var e='<div class="w2ui-grid-col-onoff"><table><tbody><tr id="grid_'+this.name+'_column_ln_check" onclick="w2ui[\''+this.name+'\'].columnOnOff(event, \'line-numbers\'); event.stopPropagation();">   <td style="width: 30px; text-align: center; padding-right: 3px; color: #888;">      <span class="w2ui-column-check w2ui-icon-'+(this.show.lineNumbers?"check":"empty")+'"></span>   </td>   <td>      <label>'+$e.lang("Line #")+"</label>   </td></tr>",t=0;t<this.columns.length;t++){var i=this.columns[t],n=this.columns[t].text;!1!==i.hideable&&(!n&&this.columns[t].tooltip&&(n=this.columns[t].tooltip),n||(n="- column "+(parseInt(t)+1)+" -"),e+='<tr id="grid_'+this.name+"_column_"+t+'_check"        onclick="w2ui[\''+this.name+"'].columnOnOff(event, '"+i.field+'\'); event.stopPropagation();">   <td style="width: 30px; text-align: center; padding-right: 3px; color: #888;">      <span class="w2ui-column-check w2ui-icon-'+(i.hidden?"empty":"check")+'"></span>   </td>   <td>       <label>'+$e.stripTags(n)+"</label>   </td></tr>")}var s="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;(s&&this.show.skipRecords||this.show.saveRestoreState)&&(e+='<tr style="pointer-events: none"><td colspan="2"><div style="border-top: 1px solid #ddd;"></div></td></tr>'),s&&this.show.skipRecords&&(e+='<tr><td colspan="2" style="padding: 0px">    <div style="cursor: pointer; padding: 2px 8px; cursor: default">'+$e.lang("Skip")+'        <input type="text" style="width: 60px" value="'+this.offset+'"             onkeydown="if ([48,49,50,51,52,53,54,55,56,57,58,13,8,46,37,39].indexOf(event.keyCode) == -1) { event.preventDefault() }"            onkeypress="if (event.keyCode == 13) {                w2ui[\''+this.name+"'].skip(this.value);                jQuery('.w2ui-overlay')[0].hide();             }\"/> "+$e.lang("records")+"    </div></td></tr>"),this.show.saveRestoreState&&(e+='<tr><td colspan="2" onclick="let grid = w2ui[\''+this.name+"']; grid.toolbar.uncheck('w2ui-column-on-off'); grid.stateSave();\">    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">"+$e.lang("Save Grid State")+'</div></td></tr><tr><td colspan="2" onclick="let grid = w2ui[\''+this.name+"']; grid.toolbar.uncheck('w2ui-column-on-off'); grid.stateReset();\">    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">"+$e.lang("Restore Default State")+"</div></td></tr>"),e+="</tbody></table></div>",this.toolbar.get("w2ui-column-on-off").html=e}}},{key:"initColumnDrag",value:function(e){if(this.columnGroups&&this.columnGroups.length)throw"Draggable columns are not currently supported with column groups.";var t=this,i={};function n(){i.pressed=!1,clearTimeout(i.timeout)}function s(e){i.timeout&&clearTimeout(i.timeout);var n=this;i.pressed=!0,i.timeout=setTimeout((function(){if(i.pressed&&0!==i.numberPreColumnsPresent){var s,o,l,c,d,u=["w2ui-col-number","w2ui-col-expand","w2ui-col-select"],h=["w2ui-head-last"],p=u.concat(h),f=".w2ui-col-number, .w2ui-col-expand, .w2ui-col-select",g=".w2ui-head.w2ui-col-number, .w2ui-head.w2ui-col-expand, .w2ui-head.w2ui-col-select";if($(e.originalEvent.target).parents().hasClass("w2ui-head")){for(var m=0,v=p.length;m<v;m++)if($(e.originalEvent.target).parents().hasClass(p[m]))return;if(i.numberPreColumnsPresent=$(t.box).find(g).length,i.columnHead=c=$(e.originalEvent.target).parents(".w2ui-head"),i.originalPos=d=parseInt(c.attr("col"),10),s=t.trigger({type:"columnDragStart",phase:"before",originalEvent:e,origColumnNumber:d,target:c[0]}),!0===s.isCancelled)return!1;o=i.columns=$(t.box).find(".w2ui-head:not(.w2ui-head-last)"),$(document).on("mouseup",r),$(document).on("mousemove",a),i.ghost=$(n).clone(!0),$(i.ghost).find('[col]:not([col="'+i.originalPos+'"]), .w2ui-toolbar, .w2ui-grid-header').remove(),$(i.ghost).find(f).remove(),$(i.ghost).find(".w2ui-grid-body").css({top:0}),l=$(i.ghost).find('[col="'+i.originalPos+'"]'),$(document.body).append(i.ghost),$(i.ghost).css({width:0,height:0,margin:0,position:"fixed",zIndex:999999,opacity:0}).addClass(".w2ui-grid-ghost").animate({width:l.width(),height:$(t.box).find(".w2ui-grid-body").first().height(),left:e.pageX,top:e.pageY,opacity:.8},0),i.offsets=[];for(var y=0,b=o.length;y<b;y++)i.offsets.push($(o[y]).offset().left);t.trigger($.extend(s,{phase:"after"}))}}}),150)}function a(e){if(i.pressed){var t=e.originalEvent.pageX,n=e.originalEvent.pageY,s=i.offsets,a=$(".w2ui-head:not(.w2ui-head-last)").width();i.targetInt=Math.max(i.numberPreColumnsPresent,l(t,s,a)),o(i.targetInt),c(t,n)}}function r(e){i.pressed=!1;var n,s,o,l,c,d=$(".w2ui-grid-ghost");if(n=t.trigger({type:"columnDragEnd",phase:"before",originalEvent:e,target:i.columnHead[0]}),!0===n.isCancelled)return!1;o=t.columns[i.originalPos],l=t.columns,c=$(i.columns[Math.min(i.lastInt,i.columns.length-1)]),s=i.lastInt<i.columns.length?parseInt(c.attr("col")):l.length,s!==i.originalPos+1&&s!==i.originalPos&&c&&c.length?($(i.ghost).animate({top:$(t.box).offset().top,left:c.offset().left,width:0,height:0,opacity:.2},300,(function(){$(this).remove(),d.remove()})),l.splice(s,0,$.extend({},o)),l.splice(l.indexOf(o),1)):($(i.ghost).remove(),d.remove()),$(document).off("mouseup",r),$(document).off("mousemove",a),i.marker&&i.marker.remove(),i={},t.refresh(),t.trigger($.extend(n,{phase:"after",targetColumnNumber:s-1}))}function o(e){i.marker||i.markerLeft||(i.marker=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>'),i.markerLeft=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>')),i.lastInt&&i.lastInt===e||(i.lastInt=e,i.marker.remove(),i.markerLeft.remove(),$(".w2ui-head").removeClass("w2ui-col-intersection"),e>=i.columns.length?($(i.columns[i.columns.length-1]).children("div:last").append(i.marker.addClass("right").removeClass("left")),$(i.columns[i.columns.length-1]).addClass("w2ui-col-intersection")):e<=i.numberPreColumnsPresent?($(i.columns[i.numberPreColumnsPresent]).prepend(i.marker.addClass("left").removeClass("right")).css({position:"relative"}),$(i.columns[i.numberPreColumnsPresent]).prev().addClass("w2ui-col-intersection")):($(i.columns[e]).children("div:last").prepend(i.marker.addClass("left").removeClass("right")),$(i.columns[e]).prev().children("div:last").append(i.markerLeft.addClass("right").removeClass("left")).css({position:"relative"}),$(i.columns[e-1]).addClass("w2ui-col-intersection")))}function l(e,t,i){if(e<=t[0])return 0;if(e>=t[t.length-1]+i)return t.length;for(var n=0,s=t.length;n<s;n++){var a=t[n],r=t[n+1]||t[n]+i,o=(r-t[n])/2+t[n];if(e>a&&e<=o)return n;if(e>o&&e<=r)return n+1}return intersection}function c(e,t){$(i.ghost).css({left:e-10,top:t-10})}return i.lastInt=void 0,i.pressed=!1,i.timeout=null,i.columnHead=null,$(t.box).off("mousedown.colDrag").on("mousedown.colDrag",s),$(t.box).off("mouseup.colDrag").on("mouseup.colDrag",n),{remove:function(){$(t.box).off("mousedown.colDrag",s),$(t.box).off("mouseup.colDrag",n),$(t.box).find(".w2ui-head").removeAttr("draggable"),t.last.columnDrag=!1}}}},{key:"columnOnOff",value:function(e,t){var i=$(e.target).parents("tr").find(".w2ui-column-check"),n=this.trigger({phase:"before",target:this.name,type:"columnOnOff",field:t,originalEvent:e});if(!0!==n.isCancelled){for(var s=this,a=!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!$(e.target).hasClass("w2ui-column-check"),r=s.find({"w2ui.expanded":!0},!0),o=0;o<r.length;o++){var l=this.records[o].w2ui;l&&!Array.isArray(l.children)&&(this.records[o].w2ui.expanded=!1)}if("line-numbers"==t)this.show.lineNumbers=!this.show.lineNumbers,this.show.lineNumbers?i.addClass("w2ui-icon-check").removeClass("w2ui-icon-empty"):i.addClass("w2ui-icon-empty").removeClass("w2ui-icon-check"),this.refreshBody(),this.resizeRecords();else{var c=this.getColumn(t);c.hidden?(i.addClass("w2ui-icon-check").removeClass("w2ui-icon-empty"),setTimeout((function(){s.showColumn(c.field)}),a?0:50)):(i.addClass("w2ui-icon-empty").removeClass("w2ui-icon-check"),setTimeout((function(){s.hideColumn(c.field)}),a?0:50))}a&&setTimeout((function(){$().w2overlay({name:s.name+"_toolbar"})}),40),this.trigger($.extend(n,{phase:"after"}))}}},{key:"scrollToColumn",value:function(e){if(null!=e){for(var t=0,i=!1,n=0;n<this.columns.length;n++){var s=this.columns[n];if(s.field==e){i=!0;break}if(!s.frozen&&!s.hidden){var a=parseInt(s.sizeCalculated?s.sizeCalculated:s.size);t+=a}}i&&(this.last.scrollLeft=t+1,this.scroll())}}},{key:"initToolbar",value:function(){var e=this,t=this;if(null==this.toolbar.render){var i=this.toolbar.items||[];if(this.toolbar.items=[],this.toolbar=new je($.extend(!0,{},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.show.toolbarReload&&this.toolbar.items.push($.extend(!0,{},this.buttons.reload)),this.show.toolbarColumns&&this.toolbar.items.push($.extend(!0,{},this.buttons.columns)),this.show.toolbarSearch){var n='\n                    <div class="w2ui-grid-search-input">\n                        '.concat(this.buttons.search.html,'\n                        <div id="grid_').concat(this.name,'_search_name" class="w2ui-grid-search-name">\n                            <span class="name-icon w2ui-icon-search"></span>\n                            <span class="name-text"></span>\n                            <span class="name-cross w2ui-action" data-click="searchReset">x</span>\n                        </div>\n                        <input type="text" id="grid_').concat(this.name,'_search_all" class="w2ui-search-all" tabindex="-1"\n                            autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false"\n                            placeholder="').concat($e.lang(this.last.label),'" value="').concat(this.last.search,'"\n                            data-focus="searchSuggest" data-blur="searchSuggest|true|true|this" data-click="stop"\n                        >\n                        <div class="w2ui-search-drop w2ui-action" data-click="searchOpen"\n                                style="').concat(this.multiSearch?"":"display: none",'">\n                            <span class="w2ui-icon-drop"></span>\n                        </div>\n                    </div>');this.toolbar.items.push({id:"w2ui-search",type:"html",html:n,onRefresh:function(e){var i=this;e.done((function(){var e=$(i.box).find("#grid_".concat(t.name,"_search_all"));$e.bindEvents($(i.box).find("#grid_".concat(t.name,"_search_all, .w2ui-action")),t),e.on("change",(function(e){var i=this.value,n=jQuery(this).data("selected"),s=jQuery(this).data("w2field");s&&(i=s.clean(i)),s&&"list"==s.type&&n&&"undefined"==typeof n.id?t.searchReset():t.search(t.last.field,i),t.searchSuggest(!0,!0,this)})).on("keydown",(function(e){13==e.keyCode&&$e.isIE&&$(this).trigger("change"),40==e.keyCode&&t.searchSuggest(!0)}))}))}})}if(this.show.toolbarAdd&&Array.isArray(i)&&-1==i.map((function(e){return e.id})).indexOf(this.buttons.add.id)&&this.toolbar.items.push($.extend(!0,{},this.buttons.add)),this.show.toolbarEdit&&Array.isArray(i)&&-1==i.map((function(e){return e.id})).indexOf(this.buttons.edit.id)&&this.toolbar.items.push($.extend(!0,{},this.buttons.edit)),this.show.toolbarDelete&&Array.isArray(i)&&-1==i.map((function(e){return e.id})).indexOf(this.buttons.delete.id)&&this.toolbar.items.push($.extend(!0,{},this.buttons.delete)),this.show.toolbarSave&&Array.isArray(i)&&-1==i.map((function(e){return e.id})).indexOf(this.buttons.save.id)&&((this.show.toolbarAdd||this.show.toolbarDelete||this.show.toolbarEdit)&&this.toolbar.items.push({type:"break",id:"w2ui-break2"}),this.toolbar.items.push($.extend(!0,{},this.buttons.save))),i)for(var s=0;s<i.length;s++)this.toolbar.items.push(i[s]);this.toolbar.on("click",(function(t){var i=e.trigger({phase:"before",type:"toolbar",target:t.target,originalEvent:t});if(!0!==i.isCancelled){var n,s=t.target;switch(s){case"w2ui-reload":if(n=e.trigger({phase:"before",type:"reload",target:e.name}),!0===n.isCancelled)return!1;e.reload(),e.trigger($.extend(n,{phase:"after"}));break;case"w2ui-column-on-off":e.initColumnOnOff(),e.initResize(),e.resize();break;case"w2ui-search-advanced":var a=e.toolbar.get(s);a.checked?e.searchClose():e.searchOpen(),e.toolbar.tooltipHide("w2ui-search-advanced"),t.preventDefault();break;case"w2ui-add":if(n=e.trigger({phase:"before",target:e.name,type:"add",recid:null}),!0===n.isCancelled)return!1;e.trigger($.extend(n,{phase:"after"})),setTimeout((function(){$().w2tag()}),20);break;case"w2ui-edit":var r=e.getSelection(),o=null;if(1==r.length&&(o=r[0]),n=e.trigger({phase:"before",target:e.name,type:"edit",recid:o}),!0===n.isCancelled)return!1;e.trigger($.extend(n,{phase:"after"})),setTimeout((function(){$().w2tag()}),20);break;case"w2ui-delete":e.delete();break;case"w2ui-save":e.save();break}e.trigger($.extend(i,{phase:"after"}))}})),this.toolbar.on("refresh",(function(t){if("w2ui-search"==t.target){var i=e.searchData;setTimeout((function(){e.searchInitInput(e.last.field,1==i.length?i[0].value:null)}),1)}}))}}},{key:"initResize",value:function(){var e=this;$(this.box).find(".w2ui-resizer").off(".grid-col-resize").on("click.grid-col-resize",(function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault&&e.preventDefault()})).on("mousedown.grid-col-resize",(function(t){t||(t=window.event),e.last.colResizing=!0,e.last.tmp={x:t.screenX,y:t.screenY,gx:t.screenX,gy:t.screenY,col:parseInt($(this).attr("name"))},e.last.tmp.tds=$("#grid_"+e.name+"_body table tr:first-child td[col="+e.last.tmp.col+"]"),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault&&t.preventDefault();for(var i=0;i<e.columns.length;i++)e.columns[i].hidden||(null==e.columns[i].sizeOriginal&&(e.columns[i].sizeOriginal=e.columns[i].size),e.columns[i].size=e.columns[i].sizeCalculated);var n,s={phase:"before",type:"columnResize",target:e.name,column:e.last.tmp.col,field:e.columns[e.last.tmp.col].field};s=e.trigger($.extend(s,{resizeBy:0,originalEvent:t}));var a=function(t){if(1==e.last.colResizing)if(t||(t=window.event),s=e.trigger($.extend(s,{resizeBy:t.screenX-e.last.tmp.gx,originalEvent:t})),!0!==s.isCancelled){e.last.tmp.x=t.screenX-e.last.tmp.x,e.last.tmp.y=t.screenY-e.last.tmp.y;var i=parseInt(e.columns[e.last.tmp.col].size)+e.last.tmp.x+"px";e.columns[e.last.tmp.col].size=i,n&&clearTimeout(n),n=setTimeout((function(){e.resizeRecords(),e.scroll()}),100),e.last.tmp.tds.css({width:i}),e.last.tmp.x=t.screenX,e.last.tmp.y=t.screenY}else s.isCancelled=!1},r=function(t){$(document).off(".grid-col-resize"),e.resizeRecords(),e.scroll(),e.trigger($.extend(s,{phase:"after",originalEvent:t})),setTimeout((function(){e.last.colResizing=!1}),1)};$(document).off(".grid-col-resize").on("mousemove.grid-col-resize",a).on("mouseup.grid-col-resize",r)})).on("dblclick.grid-col-resize",(function(t){var i=this,n=parseInt($(this).attr("name")),s=e.columns[n],a=0;if(!1===s.autoResize)return!0;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault&&t.preventDefault(),$('.w2ui-grid-records td[col="'+n+'"] > div',e.box).each((function(){var e=i.offsetWidth-i.scrollWidth;e<a&&(a=e-3)}));var r={phase:"before",type:"columnAutoResize",target:e.name,column:s,field:s.field};r=e.trigger($.extend(r,{resizeBy:Math.abs(a),originalEvent:t})),!0!==r.isCancelled?(a<0&&(s.size=Math.min(parseInt(s.size)+Math.abs(a),s.max||1/0)+"px",e.resizeRecords(),e.resizeRecords(),e.scroll()),e.trigger($.extend(r,{phase:"after",originalEvent:t}))):r.isCancelled=!1})).each((function(e,t){var i=$(t).parent();$(t).css({height:i.height(),"margin-left":i.width()-3+"px"})}))}},{key:"resizeBoxes",value:function(){var e=$("#grid_"+this.name+"_header"),t=$("#grid_"+this.name+"_toolbar"),i=$("#grid_"+this.name+"_fsummary"),n=$("#grid_"+this.name+"_summary"),s=$("#grid_"+this.name+"_footer"),a=$("#grid_"+this.name+"_body");this.show.header&&e.css({top:"0px",left:"0px",right:"0px"}),this.show.toolbar&&t.css({top:0+(this.show.header?$e.getSize(e,"height"):0)+"px",left:"0px",right:"0px"}),this.summary.length>0&&(i.css({bottom:0+(this.show.footer?$e.getSize(s,"height"):0)+"px"}),n.css({bottom:0+(this.show.footer?$e.getSize(s,"height"):0)+"px",right:"0px"})),this.show.footer&&s.css({bottom:"0px",left:"0px",right:"0px"}),a.css({top:0+(this.show.header?$e.getSize(e,"height"):0)+(this.show.toolbar?$e.getSize(t,"height"):0)+"px",bottom:0+(this.show.footer?$e.getSize(s,"height"):0)+(this.summary.length>0?$e.getSize(n,"height"):0)+"px",left:"0px",right:"0px"})}},{key:"resizeRecords",value:function(){var e=this;$(this.box).find(".w2ui-empty-record").remove();var t=$(this.box),i=$(this.box).find("> div.w2ui-grid-box"),n=$("#grid_"+this.name+"_header"),s=$("#grid_"+this.name+"_toolbar"),a=$("#grid_"+this.name+"_summary"),r=$("#grid_"+this.name+"_fsummary"),o=$("#grid_"+this.name+"_footer"),l=$("#grid_"+this.name+"_body"),c=$("#grid_"+this.name+"_columns"),d=$("#grid_"+this.name+"_fcolumns"),u=$("#grid_"+this.name+"_records"),h=$("#grid_"+this.name+"_frecords"),p=$("#grid_"+this.name+"_scroll1"),f=8*String(this.total).length+10;f<34&&(f=34),null!=this.lineNumberWidth&&(f=this.lineNumberWidth);for(var g=!1,m=!1,v=0,y=0;y<this.columns.length;y++)if(!this.columns[y].frozen&&!this.columns[y].hidden){var b=parseInt(this.columns[y].sizeCalculated?this.columns[y].sizeCalculated:this.columns[y].size);v+=b}if(u.width()<v&&(g=!0),l.height()-c.height()<$(u).find(">table").height()+(g?$e.scrollBarSize():0)&&(m=!0),this.fixedBody){var w=i.height()-(this.show.header?$e.getSize(n,"height"):0)-(this.show.toolbar?$e.getSize(s,"height"):0)-("none"!=a.css("display")?$e.getSize(a,"height"):0)-(this.show.footer?$e.getSize(o,"height"):0);l.css("height",w)}else{var x=$e.getSize(c,"height")+$e.getSize($("#grid_"+this.name+"_records table"),"height")+(g?$e.scrollBarSize():0);this.height=x+$e.getSize(i,"+height")+(this.show.header?$e.getSize(n,"height"):0)+(this.show.toolbar?$e.getSize(s,"height"):0)+("none"!=a.css("display")?$e.getSize(a,"height"):0)+(this.show.footer?$e.getSize(o,"height"):0),i.css("height",this.height),l.css("height",x),t.css("height",$e.getSize(i,"height")+$e.getSize(t,"+height"))}var _,k,C=this.records.length,T="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(0==this.searchData.length||T||(C=this.last.searchIds.length),this.fixedBody||(m=!1),g||m?(c.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",$e.scrollBarSize()).show(),u.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+$e.getSize(c,"height")+"px","-webkit-overflow-scrolling":"touch","overflow-x":g?"auto":"hidden","overflow-y":m?"auto":"hidden"})):(c.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").hide(),u.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+$e.getSize(c,"height")+"px",overflow:"hidden"}),u.length>0&&(this.last.scrollTop=0,this.last.scrollLeft=0)),g?(h.css("margin-bottom",$e.scrollBarSize()),p.show()):(h.css("margin-bottom",0),p.hide()),h.css({overflow:"hidden",top:u.css("top")}),this.show.emptyRecords&&!m){var S=Math.floor(u.height()/this.recordHeight)-1,O=0;if(u[0]&&(O=u[0].scrollHeight-S*this.recordHeight),O>=this.recordHeight&&(O-=this.recordHeight,S++),this.fixedBody){for(var E=C;E<S;E++)D(E,this.recordHeight,this);D(S,O,this)}}function D(e,t,i){var n="",s="",a="";n+='<tr class="'+(e%2?"w2ui-even":"w2ui-odd")+' w2ui-empty-record" recid="-none-" style="height: '+t+'px">',s+='<tr class="'+(e%2?"w2ui-even":"w2ui-odd")+' w2ui-empty-record" recid="-none-" style="height: '+t+'px">',i.show.lineNumbers&&(n+='<td class="w2ui-col-number"></td>'),i.show.selectColumn&&(n+='<td class="w2ui-grid-data w2ui-col-select"></td>'),i.show.expandColumn&&(n+='<td class="w2ui-grid-data w2ui-col-expand"></td>'),s+='<td class="w2ui-grid-data-spacer" col="start" style="border-right: 0"></td>',i.show.orderColumn&&(s+='<td class="w2ui-grid-data w2ui-col-order" col="order"></td>');for(var r=0;r<i.columns.length;r++){var o=i.columns[r];(o.hidden||r<i.last.colStart||r>i.last.colEnd)&&!o.frozen||(a='<td class="w2ui-grid-data" '+(null!=o.attr?o.attr:"")+' col="'+r+'"></td>',o.frozen?n+=a:s+=a)}n+='<td class="w2ui-grid-data-last"></td> </tr>',s+='<td class="w2ui-grid-data-last" col="end"></td> </tr>',$("#grid_"+i.name+"_frecords > table").append(n),$("#grid_"+i.name+"_records > table").append(s)}if(l.length>0){var I=parseInt(l.width())-(m?$e.scrollBarSize():0)-(this.show.lineNumbers?f:0)-(this.show.selectColumn?26:0)-(this.show.expandColumn?26:0)-1;_=I,k=0;for(var A=!1,j=0;j<this.columns.length;j++){var z=this.columns[j];z.gridMinWidth>0&&(z.gridMinWidth>_&&!0!==z.hidden&&(z.hidden=!0,A=!0),z.gridMinWidth<_&&!0===z.hidden&&(z.hidden=!1,A=!0))}if(!0===A)return void this.refresh();for(var R=0;R<this.columns.length;R++){var N=this.columns[R];N.hidden||("px"==String(N.size).substr(String(N.size).length-2).toLowerCase()?(I-=parseFloat(N.size),this.columns[R].sizeCalculated=N.size,this.columns[R].sizeType="px"):(k+=parseFloat(N.size),this.columns[R].sizeType="%",delete N.sizeCorrected))}if(100!=k&&k>0)for(var M=0;M<this.columns.length;M++){var F=this.columns[M];F.hidden||"%"==F.sizeType&&(F.sizeCorrected=Math.round(100*parseFloat(F.size)*100/k)/100+"%")}for(var L=0;L<this.columns.length;L++){var P=this.columns[L];P.hidden||"%"==P.sizeType&&(null!=this.columns[L].sizeCorrected?this.columns[L].sizeCalculated=Math.floor(I*parseFloat(P.sizeCorrected)/100)-1+"px":this.columns[L].sizeCalculated=Math.floor(I*parseFloat(P.size)/100)-1+"px")}}for(var H=0,B=0;B<this.columns.length;B++){var q=this.columns[B];q.hidden||(null==q.min&&(q.min=20),parseInt(q.sizeCalculated)<parseInt(q.min)&&(q.sizeCalculated=q.min+"px"),parseInt(q.sizeCalculated)>parseInt(q.max)&&(q.sizeCalculated=q.max+"px"),H+=parseInt(q.sizeCalculated))}var W=parseInt(_)-parseInt(H);if(W>0&&k>0){var U=0;while(1){var Y=this.columns[U];if(null!=Y)if(Y.hidden||"px"==Y.sizeType)U++;else{if(Y.sizeCalculated=parseInt(Y.sizeCalculated)+1+"px",W--,0===W)break;U++}else U=0}}else W>0&&c.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",$e.scrollBarSize()).show();var X=1;this.show.lineNumbers&&(X+=f),this.show.selectColumn&&(X+=26),this.show.expandColumn&&(X+=26);for(var V=0;V<this.columns.length;V++)this.columns[V].hidden||this.columns[V].frozen&&(X+=parseInt(this.columns[V].sizeCalculated));d.css("width",X),h.css("width",X),r.css("width",X),p.css("width",X),c.css("left",X),u.css("left",X),a.css("left",X),c.find("> table > tbody > tr:nth-child(1) td").add(d.find("> table > tbody > tr:nth-child(1) td")).each((function(t,i){$(i).hasClass("w2ui-col-number")&&$(i).css("width",f);var n=$(i).attr("col");if(null!=n){if("start"==n){for(var s=0,a=0;a<e.last.colStart;a++)!e.columns[a]||e.columns[a].frozen||e.columns[a].hidden||(s+=parseInt(e.columns[a].sizeCalculated));$(i).css("width",s+"px")}e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated)}if($(i).hasClass("w2ui-head-last"))if(e.last.colEnd+1<e.columns.length){for(var r=0,o=e.last.colEnd+1;o<e.columns.length;o++)!e.columns[o]||e.columns[o].frozen||e.columns[o].hidden||(r+=parseInt(e.columns[o].sizeCalculated));$(i).css("width",r+"px")}else $(i).css("width",$e.scrollBarSize()+(W>0&&0===k?W:0)+"px")})),3==c.find("> table > tbody > tr").length&&c.find("> table > tbody > tr:nth-child(1) td").add(d.find("> table > tbody > tr:nth-child(1) td")).html("").css({height:"0px",border:"0px",padding:"0px",margin:"0px"}),u.find("> table > tbody > tr:nth-child(1) td").add(h.find("> table > tbody > tr:nth-child(1) td")).each((function(t,i){$(i).hasClass("w2ui-col-number")&&$(i).css("width",f);var n=$(i).attr("col");if(null!=n){if("start"==n){for(var s=0,a=0;a<e.last.colStart;a++)!e.columns[a]||e.columns[a].frozen||e.columns[a].hidden||(s+=parseInt(e.columns[a].sizeCalculated));$(i).css("width",s+"px")}e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated)}if($(i).hasClass("w2ui-grid-data-last")&&0===$(i).parents(".w2ui-grid-frecords").length)if(e.last.colEnd+1<e.columns.length){for(var r=0,o=e.last.colEnd+1;o<e.columns.length;o++)!e.columns[o]||e.columns[o].frozen||e.columns[o].hidden||(r+=parseInt(e.columns[o].sizeCalculated));$(i).css("width",r+"px")}else $(i).css("width",(W>0&&0===k?W:0)+"px")})),a.find("> table > tbody > tr:nth-child(1) td").add(r.find("> table > tbody > tr:nth-child(1) td")).each((function(t,i){$(i).hasClass("w2ui-col-number")&&$(i).css("width",f);var n=$(i).attr("col");if(null!=n){if("start"==n){for(var s=0,a=0;a<e.last.colStart;a++)!e.columns[a]||e.columns[a].frozen||e.columns[a].hidden||(s+=parseInt(e.columns[a].sizeCalculated));$(i).css("width",s+"px")}e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated)}$(i).hasClass("w2ui-grid-data-last")&&0===$(i).parents(".w2ui-grid-frecords").length&&$(i).css("width",$e.scrollBarSize()+(W>0&&0===k?W:0)+"px")})),this.initResize(),this.refreshRanges(),(this.last.scrollTop||this.last.scrollLeft)&&u.length>0&&(c.prop("scrollLeft",this.last.scrollLeft),u.prop("scrollTop",this.last.scrollTop),u.prop("scrollLeft",this.last.scrollLeft))}},{key:"getSearchesHTML",value:function(){for(var e='\n            <div class="search-title">\n                '.concat($e.lang("Advanced Search"),'\n                <span class="search-logic" style="').concat(this.show.searchLogic?"":"display: none",'">\n                    <select id="grid_').concat(this.name,'_logic">\n                        <option value="AND" ').concat("AND"==this.last.logic?"selected":"",">").concat($e.lang("All"),'</option>\n                        <option value="OR" ').concat("OR"==this.last.logic?"selected":"",">").concat($e.lang("Any"),'</option>\n                    </select>\n                </span>\n            </div>\n            <table cellspacing="0"><tbody>\n        '),t=0;t<this.searches.length;t++){var i=this.searches[t];if(i.type=String(i.type).toLowerCase(),!i.hidden){null==i.inTag&&(i.inTag=""),null==i.outTag&&(i.outTag=""),null==i.style&&(i.style=""),null==i.type&&(i.type="text"),null==i.label&&null!=i.caption&&(console.log("NOTICE: grid search.caption property is deprecated, please use search.label. Search ->",i),i.label=i.caption);var n='<select id="grid_'.concat(this.name,"_operator_").concat(t,'" class="w2ui-input" data-change="initOperator|').concat(t,'">\n                    ').concat(this.getOperators(i.type,i.operators),"\n                </select>");e+='<tr>\n                        <td class="caption">'.concat(i.label||"",'</td>\n                        <td class="operator">').concat(n,'</td>\n                        <td class="value">');var s=void 0;switch(i.type){case"text":case"alphanumeric":case"hex":case"color":case"list":case"combo":case"enum":s="width: 250px;",-1!=["hex","color"].indexOf(i.type)&&(s="width: 90px;"),e+='<input rel="search" type="text" id="grid_'.concat(this.name,"_field_").concat(t,'" name="').concat(i.field,'"\n                               class="w2ui-input" style="').concat(s+i.style,'" ').concat(i.inTag,">");break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":case"datetime":s="width: 90px;","datetime"==i.type&&(s="width: 140px;"),e+='<input id="grid_'.concat(this.name,"_field_").concat(t,'" name="').concat(i.field,'" ').concat(i.inTag,' rel="search" type="text"\n                                class="w2ui-input" style="').concat(s+i.style,'">\n                            <span id="grid_').concat(this.name,"_range_").concat(t,'" style="display: none">&#160;-&#160;&#160;\n                                <input rel="search" type="text" class="w2ui-input" style="').concat(s+i.style,'" id="grid_').concat(this.name,"_field2_").concat(t,'" name="').concat(i.field,'" ').concat(i.inTag,">\n                            </span>");break;case"select":e+='<select rel="search" class="w2ui-input" style="'.concat(i.style,'" id="grid_').concat(this.name,"_field_").concat(t,'"\n                                name="').concat(i.field,'" ').concat(i.inTag,"></select>");break}e+=i.outTag+"    </td></tr>"}}return e+='<tr>\n            <td colspan="2" class="actions">\n                <button type="button" class="w2ui-btn close-btn" data-click="searchClose">'.concat($e.lang("Close"),'</button>\n            </td>\n            <td class="actions">\n                <button type="button" class="w2ui-btn" data-click="searchReset">').concat($e.lang("Reset"),'</button>\n                <button type="button" class="w2ui-btn w2ui-btn-blue" data-click="search">').concat($e.lang("Search"),"</button>\n            </td>\n        </tr></tbody></table>"),e}},{key:"getOperators",value:function(e,t){var i=this.operators[this.operatorsMap[e]]||[];null!=t&&Array.isArray(t)&&(i=t);var n="";return i.forEach((function(e){var t=e;Array.isArray(e)?(t=e[1],e=e[0],null==t&&(t=e)):$.isPlainObject(e)&&(t=e.text,e=e.oper),n+='<option value="'.concat(e,'">').concat($e.lang(t),"</option>\n")})),n}},{key:"initOperator",value:function(e){var t,i=this.searches[e],n=this.getSearchData(i.field),s=$("#grid_".concat(this.name,"_range_").concat(e)),a=$("#grid_".concat(this.name,"_field_").concat(e)),r=$("#grid_".concat(this.name,"_field2_").concat(e)),o=$("#grid_".concat(this.name,"_operator_").concat(e)),l=o.val();switch(a.show(),s.hide(),l){case"between":s.show(),r.w2field(i.type,i.options);break;case"null":case"not null":a.hide(),a.val(l),a.trigger("change");break}switch(i.type){case"text":case"alphanumeric":if("in"==l||"not in"==l){var c=a.data("w2field");c&&"clear"!=c.type||(a.w2field("enum",i.options),n&&Array.isArray(n.value)&&a.data("selected",n.value))}else{var d=a.data("selected");a.w2field("clear"),a.removeData("w2field"),Array.isArray(d)&&d.length>0&&d[0].text&&a.val(d[0].text)}break;case"int":case"float":case"hex":case"color":case"money":case"currency":case"percent":case"date":case"time":case"datetime":a.w2field(i.type,i.options),r.w2field(i.type,i.options),setTimeout((function(){a.keydown(),r.keydown()}),1);break;case"list":case"combo":case"enum":t=i.options,"list"==i.type&&(t.selected={}),"enum"==i.type&&(t.selected=[]),n&&(t.selected=n.value),a.w2field(i.type,$.extend({openOnFocus:!0},t)),n&&null!=n.text&&a.data("selected",{id:n.value,text:n.text});break;case"select":t='<option value="">--</option>';for(var u=0;u<i.options.items.length;u++){var h=i.options.items[u];if($.isPlainObject(i.options.items[u])){var p=h.id,f=h.text;null==p&&null!=h.value&&(p=h.value),null==f&&null!=h.text&&(f=h.text),null==p&&(p=""),t+='<option value="'+p+'">'+f+"</option>"}else t+='<option value="'+h+'">'+h+"</option>"}a.html(t);break}}},{key:"initSearches",value:function(){for(var e=this,t=this,i=function(t){var i=e.searches[t],n=e.getSearchData(i.field);i.type=String(i.type).toLowerCase(),"object"!=Object(ge["a"])(i.options)&&(i.options={});var s=i.operator,a=e.operators[e.operatorsMap[i.type]]||[];i.operators&&(a=i.operators),$.isPlainObject(s)&&(s=s.oper),a.forEach((function(e,t){$.isPlainObject(e)&&(a[t]=e.oper)})),n&&n.operator&&(s=n.operator);var r=e.defaultOperator[e.operatorsMap[i.type]];-1==a.indexOf(s)&&(s=r),$("#grid_".concat(e.name,"_operator_").concat(t)).val(s),e.initOperator(t);$("#grid_".concat(e.name,"_operator_").concat(t));var o=$("#grid_".concat(e.name,"_field_").concat(t)),l=$("#grid_".concat(e.name,"_field2_").concat(t));null!=n&&("int"==n.type&&-1!=["in","not in"].indexOf(n.operator)&&o.w2field("clear").val(n.value),Array.isArray(n.value)?-1!=["in","not in"].indexOf(n.operator)?o.val(n.value).trigger("change"):(o.val(n.value[0]).trigger("change"),l.val(n.value[1]).trigger("change")):null!=n.value&&o.val(n.value).trigger("change"))},n=0;n<this.searches.length;n++)i(n);$("#w2ui-overlay-".concat(this.name,"-searchOverlay .w2ui-grid-search-advanced *[rel=search]")).on("keypress",(function(e){13==e.keyCode&&(t.search(),$().w2overlay({name:t.name+"-searchOverlay"}))}))}},{key:"getColumnsHTML",value:function(){var e=this,t="",i="";if(this.show.columnHeaders)if(this.columnGroups.length>0){var n=l(!0),s=o(),a=l(!1);t=n[0]+s[0]+a[0],i=n[1]+s[1]+a[1]}else{var r=l(!0);t=r[0],i=r[1]}return[t,i];function o(){var t="<tr>",i="<tr>",n="",s=e.columnGroups.length-1;null==e.columnGroups[s].text&&null!=e.columnGroups[s].caption&&(console.log("NOTICE: grid columnGroup.caption property is deprecated, please use columnGroup.text. Group -> ",e.columnGroups[s]),e.columnGroups[s].text=e.columnGroups[s].caption),""!=e.columnGroups[e.columnGroups.length-1].text&&e.columnGroups.push({text:""}),e.show.lineNumbers&&(t+='<td class="w2ui-head w2ui-col-number">    <div>&#160;</div></td>'),e.show.selectColumn&&(t+='<td class="w2ui-head w2ui-col-select">    <div style="height: 25px">&#160;</div></td>'),e.show.expandColumn&&(t+='<td class="w2ui-head w2ui-col-expand">    <div style="height: 25px">&#160;</div></td>');var a=0;i+='<td id="grid_'+e.name+'_column_start" class="w2ui-head" col="start" style="border-right: 0"></td>',e.show.orderColumn&&(i+='<td class="w2ui-head w2ui-col-order" col="order">    <div style="height: 25px">&#160;</div></td>');for(var r=0;r<e.columnGroups.length;r++){var o=e.columnGroups[r],l=e.columns[a]||{};null!=o.colspan&&(o.span=o.colspan),null!=o.span&&o.span==parseInt(o.span)||(o.span=1),null==l.text&&null!=l.caption&&(console.log("NOTICE: grid column.caption property is deprecated, please use column.text. Column ->",l),l.text=l.caption);for(var c=0,d=a;d<a+o.span;d++)e.columns[d]&&!e.columns[d].hidden&&c++;if(r==e.columnGroups.length-1&&(c=100),c<=0);else if(!0===o.main){for(var u="",h=0;h<e.sortData.length;h++)e.sortData[h].field==l.field&&("asc"===(e.sortData[h].direction||"").toLowerCase()&&(u="w2ui-sort-up"),"desc"===(e.sortData[h].direction||"").toLowerCase()&&(u="w2ui-sort-down"));var p="";!1!==l.resizable&&(p='<div class="w2ui-resizer" name="'+a+'"></div>');var f="function"==typeof l.text?l.text(l):l.text;n='<td id="grid_'+e.name+"_column_"+a+'" class="w2ui-head '+u+'" col="'+a+'"     rowspan="2" colspan="'+c+'"     oncontextmenu = "w2ui[\''+e.name+"'].contextMenu(null, "+a+', event);"    onclick="w2ui[\''+e.name+"'].columnClick('"+l.field+"', event);\"    ondblclick=\"w2ui['"+e.name+"'].columnDblClick('"+l.field+"', event);\">"+p+'    <div class="w2ui-col-group w2ui-col-header '+(u?"w2ui-col-sorted":"")+'">        <div class="'+u+'"></div>'+(f||"&#160;")+"    </div></td>",l&&l.frozen?t+=n:i+=n}else{var g="function"==typeof o.text?o.text(o):o.text;n='<td id="grid_'+e.name+"_column_"+a+'" class="w2ui-head" col="'+a+'"         colspan="'+c+'">    <div class="w2ui-col-group">'+(g||"&#160;")+"    </div></td>",l&&l.frozen?t+=n:i+=n}a+=o.span}return t+="<td></td></tr>",i+='<td id="grid_'+e.name+'_column_end" class="w2ui-head" col="end"></td></tr>',[t,i]}function l(t){var i="<tr>",n="<tr>";e.show.lineNumbers&&(i+='<td class="w2ui-head w2ui-col-number"        onclick="w2ui[\''+e.name+"'].columnClick('line-number', event);\"       ondblclick=\"w2ui['"+e.name+"'].columnDblClick('line-number', event);\">    <div>#</div></td>"),e.show.selectColumn&&(i+='<td class="w2ui-head w2ui-col-select"       onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">    <div>        <input type="checkbox" id="grid_'+e.name+'_check_all" tabindex="-1"            style="'+(0==e.multiSelect?"display: none;":"")+'"            onmousedown="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;"            onclick="let grid = w2ui[\''+e.name+"'];               if (this.checked) grid.selectAll(); else grid.selectNone();               if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;               clearTimeout(grid.last.kbd_timer); /* keep focus */            \"/>    </div></td>"),e.show.expandColumn&&(i+='<td class="w2ui-head w2ui-col-expand">    <div>&#160;</div></td>');var s,a=0,r=0;n+='<td id="grid_'+e.name+'_column_start" class="w2ui-head" col="start" style="border-right: 0"></td>',e.show.orderColumn&&(n+='<td class="w2ui-head w2ui-col-order" col="order">    <div>&#160;</div></td>');for(var o=0;o<e.columns.length;o++){var l=e.columns[o];if(null==l.text&&null!=l.caption&&(console.log("NOTICE: grid column.caption property is deprecated, please use column.text. Column -> ",l),l.text=l.caption),null==l.size&&(l.size="100%"),o==r&&(s=e.columnGroups[a++]||{},r+=s.span),(!(o<e.last.colStart||o>e.last.colEnd)||l.frozen)&&!l.hidden&&(!0!==s.main||t)){var c=e.getColumnCellHTML(o);l&&l.frozen?i+=c:n+=c}}return i+='<td class="w2ui-head w2ui-head-last"><div>&#160;</div></td>',n+='<td class="w2ui-head w2ui-head-last" col="end"><div>&#160;</div></td>',i+="</tr>",n+="</tr>",[i,n]}}},{key:"getColumnCellHTML",value:function(e){var t=this.columns[e];if(null==t)return"";for(var i=!this.reorderColumns||this.columnGroups&&this.columnGroups.length?"":" w2ui-reorder-cols-head ",n="",s=0;s<this.sortData.length;s++)this.sortData[s].field==t.field&&("asc"===(this.sortData[s].direction||"").toLowerCase()&&(n="w2ui-sort-up"),"desc"===(this.sortData[s].direction||"").toLowerCase()&&(n="w2ui-sort-down"));var a=this.last.selection.columns,r=!1;for(var o in a)for(var l=0;l<a[o].length;l++)a[o][l]==e&&(r=!0);var c="function"==typeof t.text?t.text(t):t.text,d='<td id="grid_'+this.name+"_column_"+e+'" col="'+e+'" class="w2ui-head '+n+i+'" '+("normal"==this.columnTooltip&&t.tooltip?'title="'+t.tooltip+'" ':"")+"    onmouseEnter = \"w2ui['"+this.name+"'].columnTooltipShow('"+e+"', event);\"    onmouseLeave  = \"w2ui['"+this.name+"'].columnTooltipHide('"+e+"', event);\"    oncontextmenu = \"w2ui['"+this.name+"'].contextMenu(null, "+e+', event);"    onclick="w2ui[\''+this.name+"'].columnClick('"+t.field+"', event);\"    ondblclick=\"w2ui['"+this.name+"'].columnDblClick('"+t.field+"', event);\">"+(!1!==t.resizable?'<div class="w2ui-resizer" name="'+e+'"></div>':"")+'    <div class="w2ui-col-header '+(n?"w2ui-col-sorted":"")+" "+(r?"w2ui-col-selected":"")+'">        <div class="'+n+'"></div>'+(c||"&#160;")+"    </div></td>";return d}},{key:"columnTooltipShow",value:function(e,t){if("normal"!=this.columnTooltip){var i=$(this.box).find("#grid_"+this.name+"_column_"+e),n=this.columns[e],s=this.columnTooltip;i.prop("_mouse_over",!0),setTimeout((function(){!0===i.prop("_mouse_over")&&!0!==i.prop("_mouse_tooltip")&&(i.prop("_mouse_tooltip",!0),i.w2tag(n.tooltip,{position:s,top:5}))}),1)}}},{key:"columnTooltipHide",value:function(e,t){if("normal"!=this.columnTooltip){var i=$(this.box).find("#grid_"+this.name+"_column_"+e);i.removeProp("_mouse_over"),setTimeout((function(){!0!==i.prop("_mouse_over")&&!0===i.prop("_mouse_tooltip")&&(i.removeProp("_mouse_tooltip"),i.w2tag())}),1)}}},{key:"getRecordsHTML",value:function(){var e=this.records.length,t="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;0==this.searchData.length||t||(e=this.last.searchIds.length),e>this.vs_start?this.last.show_extra=this.vs_extra:this.last.show_extra=this.vs_start;var i=$("#grid_"+this.name+"_records"),n=Math.floor((i.height()||0)/this.recordHeight)+this.last.show_extra+1;(!this.fixedBody||n>e)&&(n=e);var s=this.getRecordHTML(-1,0),a="<table><tbody>"+s[0],r="<table><tbody>"+s[1];a+='<tr id="grid_'+this.name+'_frec_top" line="top" style="height: 0px">    <td colspan="2000"></td></tr>',r+='<tr id="grid_'+this.name+'_rec_top" line="top" style="height: 0px">    <td colspan="2000"></td></tr>';for(var o=0;o<n;o++)s=this.getRecordHTML(o,o+1),a+=s[0],r+=s[1];var l=(e-n)*this.recordHeight;return a+='<tr id="grid_'+this.name+'_frec_bottom" rec="bottom" line="bottom" style="height: '+l+'px; vertical-align: top">    <td colspan="2000" style="border-right: 1px solid #D6D5D7;"></td></tr><tr id="grid_'+this.name+'_frec_more" style="display: none; ">    <td colspan="2000" class="w2ui-load-more"></td></tr></tbody></table>',r+='<tr id="grid_'+this.name+'_rec_bottom" rec="bottom" line="bottom" style="height: '+l+'px; vertical-align: top">    <td colspan="2000" style="border: 0"></td></tr><tr id="grid_'+this.name+'_rec_more" style="display: none">    <td colspan="2000" class="w2ui-load-more"></td></tr></tbody></table>',this.last.range_start=0,this.last.range_end=n,[a,r]}},{key:"getSummaryHTML",value:function(){if(0!==this.summary.length){for(var e=this.getRecordHTML(-1,0),t="<table><tbody>"+e[0],i="<table><tbody>"+e[1],n=0;n<this.summary.length;n++)e=this.getRecordHTML(n,n+1,!0),t+=e[0],i+=e[1];return t+="</tbody></table>",i+="</tbody></table>",[t,i]}}},{key:"scroll",value:function(e){var t=this,i=this,n="object"!=Object(ge["a"])(this.url)?this.url:this.url.get,s=$("#grid_"+this.name+"_records"),a=$("#grid_"+this.name+"_frecords");if(e){var r=e.target.scrollTop,o=e.target.scrollLeft;this.last.scrollTop=r,this.last.scrollLeft=o,$("#grid_"+this.name+"_columns")[0].scrollLeft=o,$("#grid_"+this.name+"_summary")[0].scrollLeft=o,a[0].scrollTop=r}this.last.bubbleEl&&($(this.last.bubbleEl).w2tag(),this.last.bubbleEl=null);var l=null,c=null;if(this.disableCVS||this.columnGroups.length>0)l=0,c=this.columns.length-1;else{for(var d=s.width(),u=0,h=0;h<this.columns.length;h++)if(!this.columns[h].frozen&&!this.columns[h].hidden){var p=parseInt(this.columns[h].sizeCalculated?this.columns[h].sizeCalculated:this.columns[h].size);u+p+30>this.last.scrollLeft&&null==l&&(l=h),u+p-30>this.last.scrollLeft+d&&null==c&&(c=h),u+=p}null==c&&(c=this.columns.length-1)}if(null!=l&&(l<0&&(l=0),c<0&&(c=0),l==c&&(l>0?l--:c++),l!=this.last.colStart||c!=this.last.colEnd)){var f=$(this.box),g=Math.abs(l-this.last.colStart),m=Math.abs(c-this.last.colEnd);if(g<5&&m<5){var v=f.find(".w2ui-grid-columns #grid_"+this.name+"_column_start"),y=f.find(".w2ui-grid-columns .w2ui-head-last"),b=f.find("#grid_"+this.name+"_records .w2ui-grid-data-spacer"),w=f.find("#grid_"+this.name+"_records .w2ui-grid-data-last"),x=f.find("#grid_"+this.name+"_summary .w2ui-grid-data-spacer"),_=f.find("#grid_"+this.name+"_summary .w2ui-grid-data-last");if(l>this.last.colStart)for(var k=this.last.colStart;k<l;k++)f.find("#grid_"+this.name+"_columns #grid_"+this.name+"_column_"+k).remove(),f.find("#grid_"+this.name+'_records td[col="'+k+'"]').remove(),f.find("#grid_"+this.name+'_summary td[col="'+k+'"]').remove();if(c<this.last.colEnd)for(var C=this.last.colEnd;C>c;C--)f.find("#grid_"+this.name+"_columns #grid_"+this.name+"_column_"+C).remove(),f.find("#grid_"+this.name+'_records td[col="'+C+'"]').remove(),f.find("#grid_"+this.name+'_summary td[col="'+C+'"]').remove();if(l<this.last.colStart)for(var T=function(e){if(t.columns[e]&&(t.columns[e].frozen||t.columns[e].hidden))return"continue";v.after(t.getColumnCellHTML(e)),b.each((function(i,n){var s=$(n).parent().attr("index"),a='<td class="w2ui-grid-data" col="'+e+'" style="height: 0px"></td>';null!=s&&(a=t.getCellHTML(parseInt(s),e,!1)),$(n).after(a)})),x.each((function(i,n){var s=$(n).parent().attr("index"),a='<td class="w2ui-grid-data" col="'+e+'" style="height: 0px"></td>';null!=s&&(a=t.getCellHTML(parseInt(s),e,!0)),$(n).after(a)}))},S=this.last.colStart-1;S>=l;S--)T(S);if(c>this.last.colEnd)for(var O=function(e){if(t.columns[e]&&(t.columns[e].frozen||t.columns[e].hidden))return"continue";y.before(t.getColumnCellHTML(e)),w.each((function(i,n){var s=$(n).parent().attr("index"),a='<td class="w2ui-grid-data" col="'+e+'" style="height: 0px"></td>';null!=s&&(a=t.getCellHTML(parseInt(s),e,!1)),$(n).before(a)})),_.each((function(i,n){var s=$(n).parent().attr("index")||-1,a=t.getCellHTML(parseInt(s),e,!0);$(n).before(a)}))},E=this.last.colEnd+1;E<=c;E++)O(E);this.last.colStart=l,this.last.colEnd=c,this.resizeRecords()}else{this.last.colStart=l,this.last.colEnd=c;var D=this.getColumnsHTML(),I=this.getRecordsHTML(),A=this.getSummaryHTML(),j=f.find("#grid_"+this.name+"_columns"),z=f.find("#grid_"+this.name+"_records"),R=f.find("#grid_"+this.name+"_frecords"),N=f.find("#grid_"+this.name+"_summary");j.find("tbody").html(D[1]),R.html(I[0]),z.prepend(I[1]),null!=A&&N.html(A[1]),setTimeout((function(){z.find("> table").not("table:first-child").remove(),N[0]&&(N[0].scrollLeft=t.last.scrollLeft)}),1),this.resizeRecords()}}var M=this.records.length;if(M>this.total&&-1!==this.total&&(M=this.total),0==this.searchData.length||n||(M=this.last.searchIds.length),0!==M&&0!==s.length&&0!==s.height()){M>this.vs_start?this.last.show_extra=this.vs_extra:this.last.show_extra=this.vs_start;var F=Math.round(s[0].scrollTop/this.recordHeight+1),L=F+(Math.round(s.height()/this.recordHeight)-1);if(F>M&&(F=M),L>=M-1&&(L=M),$("#grid_"+this.name+"_footer .w2ui-footer-right").html((this.show.statusRange?$e.formatNumber(this.offset+F)+"-"+$e.formatNumber(this.offset+L)+(-1!=this.total?" "+$e.lang("of")+" "+$e.formatNumber(this.total):""):"")+(n&&this.show.statusBuffered?" ("+$e.lang("buffered")+" "+$e.formatNumber(M)+(this.offset>0?", skip "+$e.formatNumber(this.offset):"")+")":"")),n||this.fixedBody&&!(-1!=this.total&&this.total<=this.vs_start)){var P=Math.floor(s[0].scrollTop/this.recordHeight)-this.last.show_extra,H=P+Math.floor(s.height()/this.recordHeight)+2*this.last.show_extra+1;P<1&&(P=1),H>this.total&&-1!=this.total&&(H=this.total);var B=s.find("#grid_"+this.name+"_rec_top"),q=s.find("#grid_"+this.name+"_rec_bottom"),W=a.find("#grid_"+this.name+"_frec_top"),U=a.find("#grid_"+this.name+"_frec_bottom");-1!=String(B.next().prop("id")).indexOf("_expanded_row")&&(B.next().remove(),W.next().remove()),this.total>H&&-1!=String(q.prev().prop("id")).indexOf("_expanded_row")&&(q.prev().remove(),U.prev().remove());var Y,X,V,J,K,G=parseInt(B.next().attr("line")),Q=parseInt(q.prev().attr("line"));if(G<P||1==G||this.last.pull_refresh){if(H<=Q+this.last.show_extra-2&&H!=this.total)return;this.last.pull_refresh=!1;while(1){if(X=a.find("#grid_"+this.name+"_frec_top").next(),V=s.find("#grid_"+this.name+"_rec_top").next(),"bottom"==V.attr("line"))break;if(!(parseInt(V.attr("line"))<P))break;X.remove(),V.remove()}Y=s.find("#grid_"+this.name+"_rec_bottom").prev(),J=Y.attr("line"),"top"==J&&(J=P);for(var Z=parseInt(J)+1;Z<=H;Z++)this.records[Z-1]&&(V=this.records[Z-1].w2ui,V&&!Array.isArray(V.children)&&(V.expanded=!1),K=this.getRecordHTML(Z-1,Z),q.before(K[1]),U.before(K[0]));re(),setTimeout((function(){t.refreshRanges()}),0)}else{if(P>=G-this.last.show_extra+2&&P>1)return;while(1){if(X=a.find("#grid_"+this.name+"_frec_bottom").prev(),V=s.find("#grid_"+this.name+"_rec_bottom").prev(),"top"==V.attr("line"))break;if(!(parseInt(V.attr("line"))>H))break;X.remove(),V.remove()}Y=s.find("#grid_"+this.name+"_rec_top").next(),J=Y.attr("line"),"bottom"==J&&(J=H);for(var ee=parseInt(J)-1;ee>=P;ee--)this.records[ee-1]&&(V=this.records[ee-1].w2ui,V&&!Array.isArray(V.children)&&(V.expanded=!1),K=this.getRecordHTML(ee-1,ee),B.after(K[1]),W.after(K[0]));re(),setTimeout((function(){t.refreshRanges()}),0)}var te=(P-1)*this.recordHeight,ie=(M-H)*this.recordHeight;ie<0&&(ie=0),B.css("height",te+"px"),W.css("height",te+"px"),q.css("height",ie+"px"),U.css("height",ie+"px"),this.last.range_start=P,this.last.range_end=H;var ne=Math.floor(s[0].scrollTop/this.recordHeight),se=ne+Math.floor(s.height()/this.recordHeight);if(se+10>M&&!0!==this.last.pull_more&&(M<this.total-this.offset||-1==this.total&&this.last.xhr_hasMore)){!0===this.autoLoad&&(this.last.pull_more=!0,this.last.xhr_offset+=this.limit,this.request("get"));var ae=$("#grid_"+this.name+"_rec_more, #grid_"+this.name+"_frec_more");ae.show().eq(1).off(".load-more").on("click.load-more",(function(){$(this).find("td").html('<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>'),i.last.pull_more=!0,i.last.xhr_offset+=i.limit,i.request("get")})).find("td").html(i.autoLoad?'<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>':'<div style="padding-top: 15px">'+$e.lang("Load ${count} more...",{count:i.limit})+"</div>")}}}function re(){i.markSearch&&(clearTimeout(i.last.marker_timer),i.last.marker_timer=setTimeout((function(){for(var e=[],t=0;t<i.searchData.length;t++){var n=i.searchData[t],s=i.getSearch(n.field);if(s&&!s.hidden){var a=i.getColumn(n.field,!0);e.push({field:n.field,search:n.value,col:a})}}e.length>0&&e.forEach((function(e){$(i.box).find('td[col="'+e.col+'"]').not(".w2ui-head").w2marker(e.search)}))}),50))}}},{key:"getRecordHTML",value:function(e,t,i){var n,s="",a="",r="",o=this.last.selection;if(-1==e){a+='<tr line="0">',r+='<tr line="0">',this.show.lineNumbers&&(a+='<td class="w2ui-col-number" style="height: 0px;"></td>'),this.show.selectColumn&&(a+='<td class="w2ui-col-select" style="height: 0px;"></td>'),this.show.expandColumn&&(a+='<td class="w2ui-col-expand" style="height: 0px;"></td>'),r+='<td class="w2ui-grid-data w2ui-grid-data-spacer" col="start" style="height: 0px; width: 0px;"></td>',this.show.orderColumn&&(r+='<td class="w2ui-col-order" style="height: 0px;" col="order"></td>');for(var l=0;l<this.columns.length;l++){var c=this.columns[l];if(s='<td class="w2ui-grid-data" col="'+l+'" style="height: 0px;"></td>',c.frozen&&!c.hidden)a+=s;else{if(c.hidden||l<this.last.colStart||l>this.last.colEnd)continue;r+=s}}return a+='<td class="w2ui-grid-data-last" style="height: 0px"></td>',r+='<td class="w2ui-grid-data-last" col="end" style="height: 0px"></td>',a+="</tr>",r+="</tr>",[a,r]}var d="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(!0!==i)if(this.searchData.length>0&&!d){if(e>=this.last.searchIds.length)return"";e=this.last.searchIds[e],n=this.records[e]}else{if(e>=this.records.length)return"";n=this.records[e]}else{if(e>=this.summary.length)return"";n=this.summary[e]}if(!n)return"";if(null==n.recid&&null!=this.recid){var u=this.parseField(n,this.recid);null!=u&&(n.recid=u)}var h=!1;-1!=o.indexes.indexOf(e)&&(h=!0);var p=n.w2ui?n.w2ui.style:"";null!=p&&"string"==typeof p||(p="");var f=n.w2ui?n.w2ui.class:"";if(null!=f&&"string"==typeof f||(f=""),a+='<tr id="grid_'+this.name+"_frec_"+n.recid+'" recid="'+n.recid+'" line="'+t+'" index="'+e+'"  class="'+(t%2===0?"w2ui-even":"w2ui-odd")+" w2ui-record "+f+(h&&"row"==this.selectType?" w2ui-selected":"")+(n.w2ui&&!1===n.w2ui.editable?" w2ui-no-edit":"")+(n.w2ui&&!0===n.w2ui.expanded?" w2ui-expanded":"")+'"  style="height: '+this.recordHeight+"px; "+(h||""==p?p.replace("background-color","none"):p)+'" '+(""!=p?'custom_style="'+p+'"':"")+">",r+='<tr id="grid_'+this.name+"_rec_"+n.recid+'" recid="'+n.recid+'" line="'+t+'" index="'+e+'"  class="'+(t%2===0?"w2ui-even":"w2ui-odd")+" w2ui-record "+f+(h&&"row"==this.selectType?" w2ui-selected":"")+(n.w2ui&&!1===n.w2ui.editable?" w2ui-no-edit":"")+(n.w2ui&&!0===n.w2ui.expanded?" w2ui-expanded":"")+'"  style="height: '+this.recordHeight+"px; "+(h||""==p?p.replace("background-color","none"):p)+'" '+(""!=p?'custom_style="'+p+'"':"")+">",this.show.lineNumbers&&(a+='<td id="grid_'+this.name+"_cell_"+e+"_number"+(i?"_s":"")+'"    class="w2ui-col-number '+(h?" w2ui-row-selected":"")+'"'+(this.reorderRows?' style="cursor: move"':"")+">"+(!0!==i?this.getLineHTML(t,n):"")+"</td>"),this.show.selectColumn&&(a+='<td id="grid_'+this.name+"_cell_"+e+"_select"+(i?"_s":"")+'" class="w2ui-grid-data w2ui-col-select">'+(!0===i||n.w2ui&&!0===n.w2ui.hideCheckBox?"":'    <div>        <input class="w2ui-grid-select-check" type="checkbox" tabindex="-1" '+(h?'checked="checked"':"")+' style="pointer-events: none"/>    </div>')+"</td>"),this.show.expandColumn){var g="";g=n.w2ui&&!0===n.w2ui.expanded?"-":"+",!n.w2ui||"none"!=n.w2ui.expanded&&Array.isArray(n.w2ui.children)&&n.w2ui.children.length||(g=""),n.w2ui&&"spinner"==n.w2ui.expanded&&(g='<div class="w2ui-spinner" style="width: 16px; margin: -2px 2px;"></div>'),a+='<td id="grid_'+this.name+"_cell_"+e+"_expand"+(i?"_s":"")+'" class="w2ui-grid-data w2ui-col-expand">'+(!0!==i?'    <div ondblclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;"             onclick="w2ui[\''+this.name+"'].toggle(jQuery(this).parents('tr').attr('recid'));                 if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">        "+g+" </div>":"")+"</td>"}r+='<td class="w2ui-grid-data-spacer" col="start" style="border-right: 0"></td>',this.show.orderColumn&&(r+='<td id="grid_'+this.name+"_cell_"+e+"_order"+(i?"_s":"")+'" class="w2ui-grid-data w2ui-col-order" col="order">'+(!0!==i?'<div title="Drag to reorder">&nbsp;</div>':"")+"</td>");var m=0,v=0;while(1){var y=1,b=this.columns[m];if(null==b)break;if(b.hidden)m++,v>0&&v--;else if(v>0){if(m++,null==this.columns[m])break;n.w2ui.colspan[this.columns[m-1].field]=0,v--}else{if(n.w2ui){var w=n.w2ui.colspan,x=this.columns[m].field;w&&0===w[x]&&delete w[x]}if(!(m<this.last.colStart||m>this.last.colEnd)||b.frozen){if(n.w2ui&&"object"==Object(ge["a"])(n.w2ui.colspan)){var _=parseInt(n.w2ui.colspan[b.field])||null;if(_>1){for(var $=0,k=m;k<m+_;k++){if(k>=this.columns.length)break;this.columns[k].hidden&&$++}y=_-$,v=_-1}}var C=this.getCellHTML(e,m,i,y);b.frozen?a+=C:r+=C,m++}else m++}}return a+='<td class="w2ui-grid-data-last"></td>',r+='<td class="w2ui-grid-data-last" col="end"></td>',a+="</tr>",r+="</tr>",[a,r]}},{key:"getLineHTML",value:function(e){return"<div>"+e+"</div>"}},{key:"getCellHTML",value:function(e,t,i,n){var s=this,a=this.columns[t];if(null==a)return"";var r=!0!==i?this.records[e]:this.summary[e],o=-1!==e?this.getCellValue(e,t,i):"",l=-1!==e?this.getCellEditable(e,t):"",c="max-height: "+parseInt(this.recordHeight)+"px;"+(a.clipboardCopy?"margin-right: 20px":""),d=!i&&r&&r.w2ui&&r.w2ui.changes&&null!=r.w2ui.changes[a.field],u="",h="",p=this.last.selection,f=!1,g="";if(-1!=p.indexes.indexOf(e)&&(f=!0),null==n&&(n=r&&r.w2ui&&r.w2ui.colspan&&r.w2ui.colspan[a.field]?r.w2ui.colspan[a.field]:1),0===t&&r&&r.w2ui&&Array.isArray(r.w2ui.children)){var m=0,v=this.get(r.w2ui.parent_recid,!0);while(1){if(null==v)break;m++;var y=this.records[v].w2ui;if(null==y||null==y.parent_recid)break;v=this.get(y.parent_recid,!0)}if(r.w2ui.parent_recid)for(var b=0;b<m;b++)g+='<span class="w2ui-show-children w2ui-icon-empty"></span>';g+='<span class="w2ui-show-children '+(r.w2ui.children.length>0?r.w2ui.expanded?"w2ui-icon-collapse":"w2ui-icon-expand":"w2ui-icon-empty")+'"  onclick="event.stopPropagation(); w2ui[\''+this.name+"'].toggle(jQuery(this).parents('tr').attr('recid'))\"></span>"}if(!0===a.info&&(a.info={}),null!=a.info){var w="w2ui-icon-info";"function"==typeof a.info.icon?w=a.info.icon(r):"object"==Object(ge["a"])(a.info.icon)?w=a.info.icon[this.parseField(r,a.field)]||"":"string"==typeof a.info.icon&&(w=a.info.icon);var x=a.info.style||"";"function"==typeof a.info.style?x=a.info.style(r):"object"==Object(ge["a"])(a.info.style)?x=a.info.style[this.parseField(r,a.field)]||"":"string"==typeof a.info.style&&(x=a.info.style),g+='<span class="w2ui-info '+w+'" style="'+x+'" '+(null!=a.info.showOn?"on"+a.info.showOn:"onclick")+"=\"event.stopPropagation(); w2ui['"+this.name+"'].showBubble("+e+", "+t+')"'+(null!=a.info.hideOn?"on"+a.info.hideOn:"")+"=\"let grid = w2ui['"+this.name+"']; if (grid.last.bubbleEl) { $(grid.last.bubbleEl).w2tag() } grid.last.bubbleEl = null;\"></span>"}if(null!=a.render&&-1!==e){if("function"==typeof a.render){var _=a.render.call(this,r,e,t,o);null!=_&&"object"==Object(ge["a"])(_)?(o=(_.html||"").trim(),h=_.class||"",u=_.style||""):o=(_||"").trim(),(o.length<4||"<div"!=o.substr(0,4).toLowerCase())&&(o='<div style="'+c+'" title="'+j(o)+'">'+g+String(o)+"</div>")}if("object"==Object(ge["a"])(a.render)){var k=a.render[o];null!=k&&""!==k||(k=o),o='<div style="'+c+'" title="'+j(k)+'">'+g+String(k)+"</div>"}if("string"==typeof a.render){var C=a.render.toLowerCase().indexOf(":"),T=[];-1==C?(T[0]=a.render.toLowerCase(),T[1]=""):(T[0]=a.render.toLowerCase().substr(0,C),T[1]=a.render.toLowerCase().substr(C+1));var S=$e.formatters[T[0]];a.options&&!1===a.options.autoFormat&&(S=null),o="function"==typeof S?S(o,T[1],r):"",o='<div style="'+c+'" title="'+j(o)+'">'+g+String(o)+"</div>"}}else{if(l&&-1!=["checkbox","check"].indexOf(l.type)){var O=i?-(e+1):e;c+="text-align: center;",o='<input tabindex="-1" type="checkbox" '+(o?'checked="checked"':"")+" onclick=\"    let obj = w2ui['"+this.name+"'];     obj.editChange.call(obj, this, "+O+", "+t+', event); "/>',g=""}o='<div style="'+c+'" title="'+j(o)+'">'+g+String(o)+"</div>"}if(null==o&&(o=""),"string"==typeof a.render){var E=a.render.toLowerCase().split(":");-1!=["number","int","float","money","currency","percent","size"].indexOf(E[0])&&(u+="text-align: right;")}r&&r.w2ui&&("object"==Object(ge["a"])(r.w2ui.style)&&("string"==typeof r.w2ui.style[t]&&(u+=r.w2ui.style[t]+";"),"string"==typeof r.w2ui.style[a.field]&&(u+=r.w2ui.style[a.field]+";")),"object"==Object(ge["a"])(r.w2ui.class)&&("string"==typeof r.w2ui.class[t]&&(h+=r.w2ui.class[t]+" "),"string"==typeof r.w2ui.class[a.field]&&(h+=r.w2ui.class[a.field]+" ")));var D,I,A=!1;return f&&-1!=$.inArray(t,p.columns[e])&&(A=!0),a.clipboardCopy&&(D="string"==typeof a.clipboardCopy?a.clipboardCopy:$e.lang("Copy to clipboard"),I="<span onmouseEnter=\"jQuery(this).w2tag('"+D+"', { position: 'top|bottom' })\"onclick=\"w2ui['"+this.name+"'].clipboardCopy("+e+", "+t+'); jQuery(this).w2tag(w2utils.lang(\'Copied\'), { position: \'top|bottom\' }); event.stopPropagation();" onmouseLeave="jQuery(this).w2tag()" class="w2ui-clipboard-copy w2ui-icon-paste"></span>'),o='<td class="w2ui-grid-data'+(A?" w2ui-selected":"")+" "+h+(d?" w2ui-changed":"")+'"    id="grid_'+this.name+"_data_"+e+"_"+t+'" col="'+t+'"    style="'+u+(null!=a.style?a.style:"")+'" '+(null!=a.attr?a.attr:"")+(n>1?'colspan="'+n+'"':"")+">"+o+(I&&$e.stripTags(o)?I:"")+"</td>",-1===e&&!0===i&&(o='<td class="w2ui-grid-data" col="'+t+'" style="height: 0px; '+u+'" '+(n>1?'colspan="'+n+'"':"")+"></td>"),o;function j(i){var n="";return s.show.recordTitles&&(null!=a.title?("function"==typeof a.title&&(n=a.title.call(s,r,e,t)),"string"==typeof a.title&&(n=a.title)):n=$e.stripTags(String(i).replace(/"/g,"''"))),null!=n?String(n):""}}},{key:"clipboardCopy",value:function(e,t){var i=this.records[e],n=this.columns[t],s=n?this.parseField(i,n.field):"";"function"==typeof n.clipboardCopy&&(s=n.clipboardCopy(i)),$("#grid_"+this.name+"_focus").text(s).select(),document.execCommand("copy")}},{key:"showBubble",value:function(e,t){var i=this.columns[t].info;if(i){var n="",s=this.records[e],a=$(this.box).find("#grid_"+this.name+"_data_"+e+"_"+t+" .w2ui-info");if(this.last.bubbleEl&&$(this.last.bubbleEl).w2tag(),this.last.bubbleEl=a,null==i.fields){i.fields=[];for(var r=0;r<this.columns.length;r++){var o=this.columns[r];i.fields.push(o.field+("string"==typeof o.render?":"+o.render:""))}}var l=i.fields;if("function"==typeof l&&(l=l(s,e,t)),"function"==typeof i.render)n=i.render(s,e,t);else if(Array.isArray(l)){n='<table cellpadding="0" cellspacing="0">';for(var c=0;c<l.length;c++){var d=String(l[c]).split(":");if(""!=d[0]&&"-"!=d[0]&&"--"!=d[0]&&"---"!=d[0]){var u=this.getColumn(d[0]);null==u&&(u={field:d[0],caption:d[0]});var h=u?this.parseField(s,u.field):"";d.length>1&&($e.formatters[d[1]]?h=$e.formatters[d[1]](h,d[2]||null,s):console.log('ERROR: w2utils.formatters["'+d[1]+'"] does not exists.')),(!0===i.showEmpty||null!=h&&""!=h)&&(null!=i.maxLength&&"string"==typeof h&&h.length>i.maxLength&&(h=h.substr(0,i.maxLength)+"..."),n+="<tr><td>"+u.text+"</td><td>"+((0===h?"0":h)||"")+"</td></tr>")}else n+='<tr><td colspan=2><div style="border-top: '+(""==d[0]?"0":"1")+'px solid #C1BEBE; margin: 6px 0px;"></div></td></tr>'}n+="</table>"}else if($.isPlainObject(l)){for(var p in n='<table cellpadding="0" cellspacing="0">',l){var f=l[p];if(""!=f&&"-"!=f&&"--"!=f&&"---"!=f){var g=String(f).split(":"),m=this.getColumn(g[0]);null==m&&(m={field:g[0],caption:g[0]});var v=m?this.parseField(s,m.field):"";g.length>1&&($e.formatters[g[1]]?v=$e.formatters[g[1]](v,g[2]||null,s):console.log('ERROR: w2utils.formatters["'+g[1]+'"] does not exists.')),"function"==typeof f&&(v=f(s,e,t)),(!0===i.showEmpty||null!=v&&""!=v)&&(null!=i.maxLength&&"string"==typeof v&&v.length>i.maxLength&&(v=v.substr(0,i.maxLength)+"..."),n+="<tr><td>"+p+"</td><td>"+((0===v?"0":v)||"")+"</td></tr>")}else n+='<tr><td colspan=2><div style="border-top: '+(""==f?"0":"1")+'px solid #C1BEBE; margin: 6px 0px;"></div></td></tr>'}n+="</table>"}$(a).w2tag($.extend({html:n,left:-4,position:"bottom|top",className:"w2ui-info-bubble",style:"",hideOnClick:!0},i.options||{}))}}},{key:"getCellEditable",value:function(e,t){var i=this.columns[t],n=this.records[e];if(!n||!i)return null;var s=n.w2ui?n.w2ui.editable:null;if(!1===s)return null;if((null==s||!0===s)&&(s=i?i.editable:null,"function"===typeof s)){var a=this.getCellValue(e,t,!1);s=s.call(this,n,e,t,a)}return s}},{key:"getCellValue",value:function(e,t,i){var n=this.columns[t],s=!0!==i?this.records[e]:this.summary[e],a=this.parseField(s,n.field);if(s&&s.w2ui&&s.w2ui.changes&&null!=s.w2ui.changes[n.field]&&(a=s.w2ui.changes[n.field]),$.isPlainObject(a))if(n.options&&n.options.items){var r=n.options.items.find((function(e){return e.id==a.id}));a=r?r.text:a.id}else null!=a.text&&(a=a.text),null!=a.id&&(a=a.id);return null==a&&(a=""),a}},{key:"getFooterHTML",value:function(){return'<div>    <div class="w2ui-footer-left"></div>    <div class="w2ui-footer-right"></div>    <div class="w2ui-footer-center"></div></div>'}},{key:"status",value:function(e){if(null!=e)$("#grid_"+this.name+"_footer").find(".w2ui-footer-left").html(e);else{var t="",i=this.getSelection();if(i.length>0&&(this.show.statusSelection&&i.length>1&&(t=String(i.length).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+$e.settings.groupSymbol)+" "+$e.lang("selected")),this.show.statusRecordID&&1==i.length)){var n=i[0];"object"==Object(ge["a"])(n)&&(n=n.recid+", "+$e.lang("Column")+": "+n.column),t=$e.lang("Record ID")+": "+n+" "}$("#grid_"+this.name+"_footer .w2ui-footer-left").html(t),1==i.length?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),i.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete")}}},{key:"lock",value:function(e,t){var i=this,n=Array.prototype.slice.call(arguments,0);n.unshift(this.box),setTimeout((function(){$(i.box).find("#grid_"+i.name+"_empty_msg").remove(),$e.lock.apply(window,n)}),10)}},{key:"unlock",value:function(e){var t=this;setTimeout((function(){$(t.box).find(".w2ui-message").not(".w2ui-closing").length>0||$e.unlock(t.box,e)}),25)}},{key:"stateSave",value:function(e){var t=this;if(!$e.hasLocalStorage)return null;for(var i,n={columns:[],show:$.extend({},this.show),last:{search:this.last.search,multi:this.last.multi,logic:this.last.logic,label:this.last.label,field:this.last.field,scrollTop:this.last.scrollTop,scrollLeft:this.last.scrollLeft},sortData:[],searchData:[]},s=function(e){var s=t.columns[e],a={};Object.keys(t.stateColProps).forEach((function(e,n){t.stateColProps[e]&&(i=void 0!==s[e]?s[e]:t.stateColDefaults[e]||null,a[e]=i)})),n.columns.push(a)},a=0;a<this.columns.length;a++)s(a);for(var r=0;r<this.sortData.length;r++)n.sortData.push($.extend({},this.sortData[r]));for(var o=0;o<this.searchData.length;o++)n.searchData.push($.extend({},this.searchData[o]));var l=this.trigger({phase:"before",type:"stateSave",target:this.name,state:n});if(!0!==l.isCancelled){if(!0!==e&&this.useLocalStorage)try{var c=JSON.parse(localStorage.w2ui||"{}");c||(c={}),c.states||(c.states={}),c.states[this.stateId||this.name]=n,localStorage.w2ui=JSON.stringify(c)}catch(d){return delete localStorage.w2ui,null}return this.trigger($.extend(l,{phase:"after"})),n}}},{key:"stateRestore",value:function(e){var t=this,i="object"!=Object(ge["a"])(this.url)?this.url:this.url.get;if(!e){if(!$e.hasLocalStorage&&this.useLocalStorage)return!1;try{var n=JSON.parse(localStorage.w2ui||"{}");n||(n={}),n.states||(n.states={}),e=n.states[this.stateId||this.name]}catch(h){return delete localStorage.w2ui,null}}var s=this.trigger({phase:"before",type:"stateRestore",target:this.name,state:e});if(!0!==s.isCancelled){if($.isPlainObject(e)){$.extend(this.show,e.show),$.extend(this.last,e.last);for(var a=this.last.scrollTop,r=this.last.scrollLeft,o=0;o<e.columns.length;o++){var l=e.columns[o],c=this.getColumn(l.field,!0);null!==c&&($.extend(this.columns[c],l),o!==c&&this.columns.splice(o,0,this.columns.splice(c,1)[0]))}this.sortData.splice(0,this.sortData.length);for(var d=0;d<e.sortData.length;d++)this.sortData.push(e.sortData[d]);this.searchData.splice(0,this.searchData.length);for(var u=0;u<e.searchData.length;u++)this.searchData.push(e.searchData[u]);setTimeout((function(){i||(t.sortData.length>0&&t.localSort(),t.searchData.length>0&&t.localSearch()),t.last.scrollTop=a,t.last.scrollLeft=r,t.refresh()}),1)}return this.trigger($.extend(s,{phase:"after"})),!0}}},{key:"stateReset",value:function(){if(this.stateRestore(this.last.state),$e.hasLocalStorage&&this.useLocalStorage)try{var e=JSON.parse(localStorage.w2ui||"{}");e.states&&e.states[this.stateId||this.name]&&delete e.states[this.stateId||this.name],localStorage.w2ui=JSON.stringify(e)}catch(t){return delete localStorage.w2ui,null}}},{key:"parseField",value:function(e,t){if(this.nestedFields){var i="";try{i=e;for(var n=String(t).split("."),s=0;s<n.length;s++)i=i[n[s]]}catch(event){i=""}return i}return e?e[t]:""}},{key:"prepareData",value:function(){for(var e=this,t=0;t<this.records.length;t++){var i=this.records[t];n(i)}function n(t){for(var i=0;i<e.columns.length;i++){var s=e.columns[i];if(null!=t[s.field]&&"string"==typeof s.render){if(-1!=["number","int","float","money","currency","percent"].indexOf(s.render.split(":")[0])&&"number"!=typeof t[s.field]&&(t[s.field]=parseFloat(t[s.field])),-1!=["date","age"].indexOf(s.render.split(":")[0])&&!t[s.field+"_"]){var a=t[s.field];$e.isInt(a)&&(a=parseInt(a)),t[s.field+"_"]=new Date(a)}if(-1!=["time"].indexOf(s.render))if($e.isTime(t[s.field])){var r=$e.isTime(t[s.field],!0),o=new Date;o.setHours(r.hours,r.minutes,r.seconds?r.seconds:0,0),t[s.field+"_"]||(t[s.field+"_"]=o)}else{var l=t[s.field];$e.isInt(l)&&(l=parseInt(l)),l=null!=l?new Date(l):new Date;var c=new Date;c.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),0),t[s.field+"_"]||(t[s.field+"_"]=c)}}}if(t.w2ui&&t.w2ui.children&&!0!==t.w2ui.expanded)for(var d=0;d<t.w2ui.children.length;d++){var u=t.w2ui.children[d];n(u)}}}},{key:"nextCell",value:function(e,t,i){var n=t+1;if(n>=this.columns.length)return null;var s=this.records[e].w2ui,a=this.columns[n],r=s&&s.colspan&&!isNaN(s.colspan[a.field])?parseInt(s.colspan[a.field]):1;if(null==a)return null;if(a&&a.hidden||0===r)return this.nextCell(e,n,i);if(i){var o=this.getCellEditable(e,t);if(null==o||-1!=["checkbox","check"].indexOf(o.type))return this.nextCell(e,n,i)}return n}},{key:"prevCell",value:function(e,t,i){var n=t-1;if(n<0)return null;var s=this.records[e].w2ui,a=this.columns[n],r=s&&s.colspan&&!isNaN(s.colspan[a.field])?parseInt(s.colspan[a.field]):1;if(null==a)return null;if(a&&a.hidden||0===r)return this.prevCell(e,n,i);if(i){var o=this.getCellEditable(e,t);if(null==o||-1!=["checkbox","check"].indexOf(o.type))return this.prevCell(e,n,i)}return n}},{key:"nextRow",value:function(e,t){var i=this.last.searchIds,n=null;if(e+1<this.records.length&&0===i.length||i.length>0&&e<i[i.length-1]){if(e++,i.length>0)while(1){if(-1!=$.inArray(e,i)||e>this.records.length)break;e++}var s=this.records[e].w2ui,a=this.columns[t],r=s&&s.colspan&&null!=a&&!isNaN(s.colspan[a.field])?parseInt(s.colspan[a.field]):1;n=0===r?this.nextRow(e,t):e}return n}},{key:"prevRow",value:function(e,t){var i=this.last.searchIds,n=null;if(e>0&&0===i.length||i.length>0&&e>i[0]){if(e--,i.length>0)while(1){if(-1!=$.inArray(e,i)||e<0)break;e--}var s=this.records[e].w2ui,a=this.columns[t],r=s&&s.colspan&&null!=a&&!isNaN(s.colspan[a.field])?parseInt(s.colspan[a.field]):1;n=0===r?this.prevRow(e,t):e}return n}},{key:"selectionSave",value:function(){return this.last._selection=this.getSelection(),this.last._selection}},{key:"selectionRestore",value:function(e){var t=(new Date).getTime();this.last.selection={indexes:[],columns:{}};var i=this.last.selection,n=this.last._selection;if(n)for(var s=0;s<n.length;s++)if($.isPlainObject(n[s])){var a=this.get(n[s].recid,!0);null!=a&&(-1==i.indexes.indexOf(a)&&i.indexes.push(a),i.columns[a]||(i.columns[a]=[]),i.columns[a].push(n[s].column))}else{var r=this.get(n[s],!0);null!=r&&i.indexes.push(r)}return delete this.last._selection,!0!==e&&this.refresh(),(new Date).getTime()-t}},{key:"message",value:function(e,t){return"string"==typeof e&&(e={width:e.length<300?350:550,height:e.length<300?170:250,body:'<div class="w2ui-centered">'+e+"</div>",buttons:'<button type="button" class="w2ui-btn" onclick="w2ui[\''.concat(this.name,"'].message()\">").concat($e.lang("Ok"),"</button>"),onOpen:function(e){var t=this;setTimeout((function(){$(t.box).find(".w2ui-btn").focus()}),25)},onClose:function(e){"function"==typeof t&&t()}}),$e.message.call(this,{box:this.box,path:"w2ui."+this.name,title:".w2ui-grid-header:visible",body:".w2ui-grid-box"},e)}},{key:"confirm",value:function(e,t){var i=this;"string"==typeof e&&(e={width:e.length<300?350:550,height:e.length<300?170:250,body:'<div class="w2ui-centered">'+e+"</div>"});var n=function(){"function"==typeof e.yes_click&&e.yes_click("yes"),"function"==typeof t&&t("yes"),i.message()},s=function(){"function"==typeof e.no_click&&e.no_click("no"),"function"==typeof t&&t("no"),i.message()},a='<button type="button" class="w2ui-btn btn-yes '.concat(e.yes_class||"",'">').concat($e.lang(e.yes_text||"Yes"),"</button>"),r='<button type="button" class="w2ui-btn btn-no '.concat(e.no_class||"",'">').concat($e.lang(e.no_text||"No"),"</button>");Object.assign(e,{buttons:$e.settings.macButtonOrder?r+a:a+r,onOpen:function(e){var t=this;setTimeout((function(){var e=$(t.box).find(".w2ui-btn");e.off(".message").on("blur.message",(function(t){e.index(t.target)+1===e.length&&(e.get(0).focus(),t.preventDefault())})).on("keydown.message",(function(e){27==e.keyCode&&s()})).focus(),$(t.box).find(".w2ui-btn.btn-yes").off("click").on("click",n),$(t.box).find(".w2ui-btn.btn-no").off("click").on("click",s)}),25)}}),$e.message.call(this,{box:this.box,path:"w2ui."+this.name,title:".w2ui-grid-header:visible",body:".w2ui-grid-box"},e);var o={yes:function(t){return e.yes_click=t,o},no:function(t){return e.no_click=t,o}};return o}}]),i}(we),Ce=["top","left","main","preview","right","bottom"],Te=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;function s(e,t,i){var n=e.get(t);return null!=n&&null==i&&(i=n.tabs),null!=n&&null!=i&&(Array.isArray(i)&&(i={tabs:i}),$().w2destroy(e.name+"_"+t+"_tabs"),n.tabs=new Ae($.extend({},i,{owner:e,name:e.name+"_"+t+"_tabs"})),n.show.tabs=!0,!0)}function a(e,t,i){var n=e.get(t);return null!=n&&null==i&&(i=n.toolbar),null!=n&&null!=i&&(Array.isArray(i)&&(i={items:i}),$().w2destroy(e.name+"_"+t+"_toolbar"),n.toolbar=new je($.extend({},i,{owner:e,name:e.name+"_"+t+"_toolbar"})),n.show.toolbar=!0,!0)}return Object(me["a"])(this,i),n=t.call(this,e.name),n.box=null,n.name=null,n.panels=[],n.tmp={},n.padding=1,n.resizer=4,n.style="",n.onShow=null,n.onHide=null,n.onResizing=null,n.onResizerClick=null,n.onRender=null,n.onRefresh=null,n.onChange=null,n.onResize=null,n.onDestroy=null,n.panel_template={type:null,title:"",size:100,minSize:20,maxSize:!1,hidden:!1,resizable:!1,overflow:"auto",style:"",html:"",tabs:null,toolbar:null,width:null,height:null,show:{toolbar:!1,tabs:!1},removed:null,onRefresh:null,onShow:null,onHide:null},$.extend(!0,Object(ue["a"])(n),e),Array.isArray(n.panels)||(n.panels=[]),n.panels.forEach((function(e,t){n.panels[t]=$.extend(!0,{},n.panel_template,e),($.isPlainObject(e.tabs)||Array.isArray(e.tabs))&&s(Object(ue["a"])(n),e.type),($.isPlainObject(e.toolbar)||Array.isArray(e.toolbar))&&a(Object(ue["a"])(n),e.type)})),Ce.forEach((function(e){null==n.get(e)&&n.panels.push($.extend(!0,{},n.panel_template,{type:e,hidden:"main"!==e,size:50}))})),n}return Object(ve["a"])(i,[{key:"html",value:function(e,t,i){var n=this,s=this.get(e),a={panel:e,html:s.html,error:!1,cancelled:!1,removed:function(e){"function"==typeof e&&(s.removed=e)}};if("function"==typeof s.removed&&(s.removed({panel:e,html:s.html,html_new:t,transition:i||"none"}),s.removed=null),"css"==e)return $("#layout_"+n.name+"_panel_css").html("<style>"+t+"</style>"),a.status=!0,a;if(null==s)return console.log("ERROR: incorrect panel name. Panel name can be main, left, right, top, bottom, preview or css"),a.error=!0,a;if(null==t)return a;var r=this.trigger({phase:"before",type:"change",target:e,panel:s,html_new:t,transition:i});if(!0===r.isCancelled)return a.cancelled=!0,a;if(t instanceof jQuery)return console.log("ERROR: You can not pass jQuery object to w2layout.html() method"),a;var o="#layout_"+this.name+"_panel_"+s.type,l=$(o+"> .w2ui-panel-content"),c=0;if(l.length>0&&($(o).scrollTop(0),c=$(l).position().top),""===s.html)s.html=t,this.refresh(e);else{if(s.html=t,!s.hidden&&null!=i&&""!==i){var d=$(o+"> .w2ui-panel-content");d.after('<div class="w2ui-panel-content new-panel" style="'+d[0].style.cssText+'"></div>');var u=$(o+"> .w2ui-panel-content.new-panel");d.css("top",c),u.css("top",c),"object"==Object(ge["a"])(t)?(t.box=u[0],t.render()):u.html(t),$e.transition(d[0],u[0],i,(function(){d.remove(),u.removeClass("new-panel"),u.css("overflow",s.overflow),$(o+"> .w2ui-panel-content").slice(1).remove(),n.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout((function(){n.resize()}),100)}))}this.refresh(e)}return n.trigger($.extend(r,{phase:"after"})),n.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout((function(){n.resize()}),100),a}},{key:"message",value:function(e,t){var i=this;"string"==typeof t&&(t={width:t.length<300?350:550,height:t.length<300?170:250,body:'<div class="w2ui-centered">'+t+"</div>",buttons:'<button class="w2ui-btn" data-click=\'["message", "'.concat(e,"\"]'>Ok</button>"),onOpen:function(e){setTimeout((function(){$e.bindEvents($(i.box).find(".w2ui-btn"),i),$(i.box).find(".w2ui-btn").focus()}),25)}});var n,s=this.get(e),a=$("#layout_"+this.name+"_panel_"+s.type),r=a.css("overflow");return t&&(t.onClose&&(n=t.onClose),t.onClose=function(e){"function"==typeof n&&n(e),e.done((function(){$("#layout_"+i.name+"_panel_"+s.type).css("overflow",r)}))}),$("#layout_"+this.name+"_panel_"+s.type).css("overflow","hidden"),$e.message.call(this,{box:$("#layout_"+this.name+"_panel_"+s.type),param:e,path:"w2ui."+this.name,title:".w2ui-panel-title:visible",body:".w2ui-panel-content"},t)}},{key:"load",value:function(e,t,i,n){var s=this;return"css"==e?($.get(t,(function(t,i,a){var r=s.html(e,a.responseText);n&&n(r)})),!0):null!=this.get(e)&&($.get(t,(function(t,a,r){var o=s.html(e,r.responseText,i);n&&n(o),s.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout((function(){s.resize()}),100)})),!0)}},{key:"sizeTo",value:function(e,t,i){var n=this,s=n.get(e);return null!=s&&($(n.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition",!0!==i?".2s":"0s")),setTimeout((function(){n.set(e,{size:t})}),1),setTimeout((function(){$(n.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition","0s")),n.resize()}),500),!0)}},{key:"show",value:function(e,t){var i=this,n=this.trigger({phase:"before",type:"show",target:e,object:this.get(e),immediate:t});if(!0!==n.isCancelled){var s=i.get(e);return null!=s&&(s.hidden=!1,!0===t?($("#layout_"+i.name+"_panel_"+e).css({opacity:"1"}),i.trigger($.extend(n,{phase:"after"})),i.resize()):($("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),$(i.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition",".2s")),setTimeout((function(){i.resize()}),1),setTimeout((function(){$("#layout_"+i.name+"_panel_"+e).css({opacity:"1"})}),250),setTimeout((function(){$(i.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition","0s")),i.trigger($.extend(n,{phase:"after"})),i.resize()}),500)),!0)}}},{key:"hide",value:function(e,t){var i=this,n=this.trigger({phase:"before",type:"hide",target:e,object:this.get(e),immediate:t});if(!0!==n.isCancelled){var s=i.get(e);return null!=s&&(s.hidden=!0,!0===t?($("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),i.trigger($.extend(n,{phase:"after"})),i.resize()):($(i.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition",".2s")),$("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),setTimeout((function(){i.resize()}),1),setTimeout((function(){$(i.box).find(" > div > .w2ui-panel").css($e.cssPrefix("transition","0s")),i.trigger($.extend(n,{phase:"after"})),i.resize()}),500)),!0)}}},{key:"toggle",value:function(e,t){var i=this.get(e);return null!=i&&(i.hidden?this.show(e,t):this.hide(e,t))}},{key:"set",value:function(e,t){var i=this.get(e,!0);return null!=i&&($.extend(this.panels[i],t),null==t.html&&null==t.resizable||this.refresh(e),this.resize(),!0)}},{key:"get",value:function(e,t){for(var i=0;i<this.panels.length;i++)if(this.panels[i].type==e)return!0===t?i:this.panels[i];return null}},{key:"el",value:function(e){var t=$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-content");return 1!=t.length?null:t[0]}},{key:"hideToolbar",value:function(e){var t=this.get(e);t&&(t.show.toolbar=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").hide(),this.resize())}},{key:"showToolbar",value:function(e){var t=this.get(e);t&&(t.show.toolbar=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").show(),this.resize())}},{key:"toggleToolbar",value:function(e){var t=this.get(e);t&&(t.show.toolbar?this.hideToolbar(e):this.showToolbar(e))}},{key:"assignToolbar",value:function(e,t){"string"==typeof t&&null!=_e[t]&&(t=_e[t]);var i=this.get(e);i.toolbar=t;var n=$(this.box).find(e+"> .w2ui-panel-toolbar");null!=i.toolbar?(0===n.find("[name="+i.toolbar.name+"]").length?n.w2render(i.toolbar):null!=i.toolbar&&i.toolbar.refresh(),t.owner=this,this.showToolbar(e),this.refresh(e)):(n.html(""),this.hideToolbar(e))}},{key:"hideTabs",value:function(e){var t=this.get(e);t&&(t.show.tabs=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").hide(),this.resize())}},{key:"showTabs",value:function(e){var t=this.get(e);t&&(t.show.tabs=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").show(),this.resize())}},{key:"toggleTabs",value:function(e){var t=this.get(e);t&&(t.show.tabs?this.hideTabs(e):this.showTabs(e))}},{key:"render",value:function(e){var t=this,i=(new Date).getTime(),n=t.trigger({phase:"before",type:"render",target:t.name,box:e});if(!0!==n.isCancelled){if(null!=e&&($(t.box).find("#layout_"+t.name+"_panel_main").length>0&&$(t.box).removeAttr("name").removeClass("w2ui-layout").html(""),t.box=e),!t.box)return!1;$(t.box).attr("name",t.name).addClass("w2ui-layout").html("<div></div>"),$(t.box).length>0&&($(t.box)[0].style.cssText+=t.style);for(var s=0;s<Ce.length;s++){var a='<div id="layout_'+t.name+"_panel_"+Ce[s]+'" class="w2ui-panel">    <div class="w2ui-panel-title"></div>    <div class="w2ui-panel-tabs"></div>    <div class="w2ui-panel-toolbar"></div>    <div class="w2ui-panel-content"></div></div><div id="layout_'+t.name+"_resizer_"+Ce[s]+'" class="w2ui-resizer"></div>';$(t.box).find(" > div").append(a)}return $(t.box).find(" > div").append('<div id="layout_'+t.name+'_panel_css" style="position: absolute; top: 10000px;"></div>'),t.refresh(),t.trigger($.extend(n,{phase:"after"})),setTimeout((function(){r(),t.resize()}),0),(new Date).getTime()-i}function r(){t.tmp.events={resize:function(e){null==_e[t.name]?$(window).off("resize.w2ui-"+t.name):_e[t.name].resize()},resizeStart:o,mouseMove:c,mouseUp:l},$(window).on("resize.w2ui-"+t.name,t.tmp.events.resize)}function o(e,i){if(t.box){i||(i=window.event),$(document).off("mousemove",t.tmp.events.mouseMove).on("mousemove",t.tmp.events.mouseMove),$(document).off("mouseup",t.tmp.events.mouseUp).on("mouseup",t.tmp.events.mouseUp),t.tmp.resize={type:e,x:i.screenX,y:i.screenY,diff_x:0,diff_y:0,value:0};for(var n=0;n<Ce.length;n++){var s=$(t.el(Ce[n])).parent().find(".w2ui-lock");s.length>0?s.attr("locked","previous"):t.lock(Ce[n],{opacity:0})}"left"!=e&&"right"!=e||(t.tmp.resize.value=parseInt($("#layout_"+t.name+"_resizer_"+e)[0].style.left)),"top"!=e&&"preview"!=e&&"bottom"!=e||(t.tmp.resize.value=parseInt($("#layout_"+t.name+"_resizer_"+e)[0].style.top))}}function l(e){if(t.box&&(e||(e=window.event),$(document).off("mousemove",t.tmp.events.mouseMove),$(document).off("mouseup",t.tmp.events.mouseUp),null!=t.tmp.resize)){for(var i=0;i<Ce.length;i++){var n=$(t.el(Ce[i])).parent().find(".w2ui-lock");"previous"==n.attr("locked")?n.removeAttr("locked"):t.unlock(Ce[i])}if(0!==t.tmp.diff_x||0!==t.tmp.resize.diff_y){var s,a,r=t.get("top"),o=t.get("bottom"),l=t.get(t.tmp.resize.type),c=parseInt($(t.box).height()),d=parseInt($(t.box).width()),u=String(l.size);switch(t.tmp.resize.type){case"top":s=parseInt(l.sizeCalculated)+t.tmp.resize.diff_y,a=0;break;case"bottom":s=parseInt(l.sizeCalculated)-t.tmp.resize.diff_y,a=0;break;case"preview":s=parseInt(l.sizeCalculated)-t.tmp.resize.diff_y,a=(r&&!r.hidden?r.sizeCalculated:0)+(o&&!o.hidden?o.sizeCalculated:0);break;case"left":s=parseInt(l.sizeCalculated)+t.tmp.resize.diff_x,a=0;break;case"right":s=parseInt(l.sizeCalculated)-t.tmp.resize.diff_x,a=0;break}"%"==u.substr(u.length-1)?l.size=Math.floor(100*s/("left"==l.type||"right"==l.type?d:c-a)*100)/100+"%":"-"==String(l.size).substr(0,1)?l.size=parseInt(l.size)-l.sizeCalculated+s:l.size=s,t.resize()}$("#layout_"+t.name+"_resizer_"+t.tmp.resize.type).removeClass("active"),delete t.tmp.resize}}function c(e){if(t.box&&(e||(e=window.event),null!=t.tmp.resize)){var i=t.get(t.tmp.resize.type),n=t.tmp.resize,s=t.trigger({phase:"before",type:"resizing",target:t.name,object:i,originalEvent:e,panel:n?n.type:"all",diff_x:n?n.diff_x:0,diff_y:n?n.diff_y:0});if(!0!==s.isCancelled){var a=$("#layout_"+t.name+"_resizer_"+n.type),r=e.screenX-n.x,o=e.screenY-n.y,l=t.get("main");switch(a.hasClass("active")||a.addClass("active"),n.type){case"left":i.minSize-r>i.width&&(r=i.minSize-i.width),i.maxSize&&i.width+r>i.maxSize&&(r=i.maxSize-i.width),l.minSize+r>l.width&&(r=l.width-l.minSize);break;case"right":i.minSize+r>i.width&&(r=i.width-i.minSize),i.maxSize&&i.width-r>i.maxSize&&(r=i.width-i.maxSize),l.minSize-r>l.width&&(r=l.minSize-l.width);break;case"top":i.minSize-o>i.height&&(o=i.minSize-i.height),i.maxSize&&i.height+o>i.maxSize&&(o=i.maxSize-i.height),l.minSize+o>l.height&&(o=l.height-l.minSize);break;case"preview":case"bottom":i.minSize+o>i.height&&(o=i.height-i.minSize),i.maxSize&&i.height-o>i.maxSize&&(o=i.height-i.maxSize),l.minSize-o>l.height&&(o=l.minSize-l.height);break}switch(n.diff_x=r,n.diff_y=o,n.type){case"top":case"preview":case"bottom":n.diff_x=0,a.length>0&&(a[0].style.top=n.value+n.diff_y+"px");break;case"left":case"right":n.diff_y=0,a.length>0&&(a[0].style.left=n.value+n.diff_x+"px");break}t.trigger($.extend(s,{phase:"after"}))}}}}},{key:"refresh",value:function(e){var t=this;null==e&&(e=null);var i=(new Date).getTime(),n=t.trigger({phase:"before",type:"refresh",target:null!=e?e:t.name,object:t.get(e)});if(!0!==n.isCancelled){if("string"==typeof e){var s=t.get(e);if(null==s)return;var a="#layout_"+t.name+"_panel_"+s.type,r="#layout_"+t.name+"_resizer_"+s.type;$(a).css({display:s.hidden?"none":"block"}),s.resizable?$(r).show():$(r).hide(),"object"==Object(ge["a"])(s.html)&&"function"===typeof s.html.render?(s.html.box=$(a+"> .w2ui-panel-content")[0],setTimeout((function(){$(a+"> .w2ui-panel-content").length>0&&($(a+"> .w2ui-panel-content").removeClass().removeAttr("name").addClass("w2ui-panel-content").css("overflow",s.overflow)[0].style.cssText+=";"+s.style),s.html&&"function"==typeof s.html.render&&s.html.render()}),1)):$(a+"> .w2ui-panel-content").length>0&&($(a+"> .w2ui-panel-content").removeClass().removeAttr("name").addClass("w2ui-panel-content").html(s.html).css("overflow",s.overflow)[0].style.cssText+=";"+s.style);var o=$(t.box).find(a+"> .w2ui-panel-tabs");s.show.tabs?0===o.find("[name="+s.tabs.name+"]").length&&null!=s.tabs?o.w2render(s.tabs):s.tabs.refresh():o.html("").removeClass("w2ui-tabs").hide(),o=$(t.box).find(a+"> .w2ui-panel-toolbar"),s.show.toolbar?0===o.find("[name="+s.toolbar.name+"]").length&&null!=s.toolbar?o.w2render(s.toolbar):s.toolbar.refresh():o.html("").removeClass("w2ui-toolbar").hide(),o=$(t.box).find(a+"> .w2ui-panel-title"),s.title?o.html(s.title).show():o.html("").hide()}else{if(0===$("#layout_"+t.name+"_panel_main").length)return void t.render();t.resize();for(var l=0;l<this.panels.length;l++)t.refresh(this.panels[l].type)}return t.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-i}}},{key:"resize",value:function(){if(!this.box)return!1;var e=(new Date).getTime(),t=this.tmp.resize,i=this.trigger({phase:"before",type:"resize",target:this.name,panel:t?t.type:"all",diff_x:t?t.diff_x:0,diff_y:t?t.diff_y:0});if(!0!==i.isCancelled){this.padding<0&&(this.padding=0);var n=parseInt($(this.box).width()),s=parseInt($(this.box).height());$(this.box).find(" > div").css({width:n+"px",height:s+"px"});for(var a,r,o,l,c,d=this,u=this.get("main"),h=this.get("preview"),p=this.get("left"),f=this.get("right"),g=this.get("top"),m=this.get("bottom"),v=null!=h&&!0!==h.hidden,y=null!=p&&!0!==p.hidden,b=null!=f&&!0!==f.hidden,w=null!=g&&!0!==g.hidden,x=null!=m&&!0!==m.hidden,_=0;_<Ce.length;_++)if("main"!==Ce[_]&&(t=this.get(Ce[_]),t)){var k=String(t.size||0);if("%"==k.substr(k.length-1)){var C=s;"preview"==t.type&&(C=C-(g&&!g.hidden?g.sizeCalculated:0)-(m&&!m.hidden?m.sizeCalculated:0)),t.sizeCalculated=parseInt(("left"==t.type||"right"==t.type?n:C)*parseFloat(t.size)/100)}else t.sizeCalculated=parseInt(t.size);t.sizeCalculated=Math.max(t.sizeCalculated,parseInt(t.minSize))}"-"==String(f.size).substr(0,1)&&(y&&"-"==String(p.size).substr(0,1)?console.log("ERROR: you cannot have both left panel.size and right panel.size be negative."):f.sizeCalculated=n-(y?p.sizeCalculated:0)+parseInt(f.size)),"-"==String(p.size).substr(0,1)&&(b&&"-"==String(f.size).substr(0,1)?console.log("ERROR: you cannot have both left panel.size and right panel.size be negative."):p.sizeCalculated=n-(b?f.sizeCalculated:0)+parseInt(p.size)),null!=g&&!0!==g.hidden?(a=0,r=0,o=n,l=g.sizeCalculated,$("#layout_"+this.name+"_panel_top").css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}).show(),g.width=o,g.height=l,g.resizable&&(r=g.sizeCalculated-(0===this.padding?this.resizer:0),l=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_top").show().css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",(function(e){var t=d.trigger({phase:"before",type:"resizerClick",target:"top",originalEvent:e});if(!0!==t.isCancelled)return _e[d.name].tmp.events.resizeStart("top",e),d.trigger($.extend(t,{phase:"after"})),!1})))):($("#layout_"+this.name+"_panel_top").hide(),$("#layout_"+this.name+"_resizer_top").hide()),null!=p&&!0!==p.hidden?(a=0,r=0+(w?g.sizeCalculated+this.padding:0),o=p.sizeCalculated,l=s-(w?g.sizeCalculated+this.padding:0)-(x?m.sizeCalculated+this.padding:0),c=$("#layout_"+this.name+"_panel_left"),-1!=window.navigator.userAgent.indexOf("MSIE")&&c.length>0&&c[0].clientHeight<c[0].scrollHeight&&(o+=17),c.css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}).show(),p.width=o,p.height=l,p.resizable&&(a=p.sizeCalculated-(0===this.padding?this.resizer:0),o=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_left").show().css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",(function(e){var t=d.trigger({phase:"before",type:"resizerClick",target:"left",originalEvent:e});if(!0!==t.isCancelled)return _e[d.name].tmp.events.resizeStart("left",e),d.trigger($.extend(t,{phase:"after"})),!1})))):($("#layout_"+this.name+"_panel_left").hide(),$("#layout_"+this.name+"_resizer_left").hide()),null!=f&&!0!==f.hidden?(a=n-f.sizeCalculated,r=0+(w?g.sizeCalculated+this.padding:0),o=f.sizeCalculated,l=s-(w?g.sizeCalculated+this.padding:0)-(x?m.sizeCalculated+this.padding:0),$("#layout_"+this.name+"_panel_right").css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}).show(),f.width=o,f.height=l,f.resizable&&(a-=this.padding,o=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_right").show().css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",(function(e){var t=d.trigger({phase:"before",type:"resizerClick",target:"right",originalEvent:e});if(!0!==t.isCancelled)return _e[d.name].tmp.events.resizeStart("right",e),d.trigger($.extend(t,{phase:"after"})),!1})))):($("#layout_"+this.name+"_panel_right").hide(),$("#layout_"+this.name+"_resizer_right").hide()),null!=m&&!0!==m.hidden?(a=0,r=s-m.sizeCalculated,o=n,l=m.sizeCalculated,$("#layout_"+this.name+"_panel_bottom").css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}).show(),m.width=o,m.height=l,m.resizable&&(r-=0===this.padding?0:this.padding,l=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_bottom").show().css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",(function(e){var t=d.trigger({phase:"before",type:"resizerClick",target:"bottom",originalEvent:e});if(!0!==t.isCancelled)return _e[d.name].tmp.events.resizeStart("bottom",e),d.trigger($.extend(t,{phase:"after"})),!1})))):($("#layout_"+this.name+"_panel_bottom").hide(),$("#layout_"+this.name+"_resizer_bottom").hide()),a=0+(y?p.sizeCalculated+this.padding:0),r=0+(w?g.sizeCalculated+this.padding:0),o=n-(y?p.sizeCalculated+this.padding:0)-(b?f.sizeCalculated+this.padding:0),l=s-(w?g.sizeCalculated+this.padding:0)-(x?m.sizeCalculated+this.padding:0)-(v?h.sizeCalculated+this.padding:0),c=$("#layout_"+this.name+"_panel_main"),-1!=window.navigator.userAgent.indexOf("MSIE")&&c.length>0&&c[0].clientHeight<c[0].scrollHeight&&(o+=17),c.css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}),u.width=o,u.height=l,null!=h&&!0!==h.hidden?(a=0+(y?p.sizeCalculated+this.padding:0),r=s-(x?m.sizeCalculated+this.padding:0)-h.sizeCalculated,o=n-(y?p.sizeCalculated+this.padding:0)-(b?f.sizeCalculated+this.padding:0),l=h.sizeCalculated,c=$("#layout_"+this.name+"_panel_preview"),-1!=window.navigator.userAgent.indexOf("MSIE")&&c.length>0&&c[0].clientHeight<c[0].scrollHeight&&(o+=17),c.css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px"}).show(),h.width=o,h.height=l,h.resizable&&(r-=0===this.padding?0:this.padding,l=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_preview").show().css({display:"block",left:a+"px",top:r+"px",width:o+"px",height:l+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",(function(e){var t=d.trigger({phase:"before",type:"resizerClick",target:"preview",originalEvent:e});if(!0!==t.isCancelled)return _e[d.name].tmp.events.resizeStart("preview",e),d.trigger($.extend(t,{phase:"after"})),!1})))):($("#layout_"+this.name+"_panel_preview").hide(),$("#layout_"+this.name+"_resizer_preview").hide());for(var T=0;T<Ce.length;T++){var S=this.get(Ce[T]),O="#layout_"+this.name+"_panel_"+Ce[T]+" > .w2ui-panel-",E=0;S&&(S.title&&(E+=$e.getSize($(O+"title").css({top:E+"px",display:"block"}),"height")),S.show.tabs&&(null!=S.tabs&&_e[this.name+"_"+Ce[T]+"_tabs"]&&_e[this.name+"_"+Ce[T]+"_tabs"].resize(),E+=$e.getSize($(O+"tabs").css({top:E+"px",display:"block"}),"height")),S.show.toolbar&&(null!=S.toolbar&&_e[this.name+"_"+Ce[T]+"_toolbar"]&&_e[this.name+"_"+Ce[T]+"_toolbar"].resize(),E+=$e.getSize($(O+"toolbar").css({top:E+"px",display:"block"}),"height"))),$(O+"content").css({display:"block"}).css({top:E+"px"})}return clearTimeout(this._resize_timer),this._resize_timer=setTimeout((function(){for(var e in _e)if("function"==typeof _e[e].resize){null==_e[e].panels&&_e[e].resize();var t=$(_e[e].box).parents(".w2ui-layout");t.length>0&&t.attr("name")==d.name&&_e[e].resize()}}),100),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-e}}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(!0!==e.isCancelled)return null!=_e[this.name]&&($(this.box).find("#layout_"+this.name+"_panel_main").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-layout").html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})),this.tmp.events&&this.tmp.events.resize&&$(window).off("resize",this.tmp.events.resize),!0)}},{key:"lock",value:function(e,t,i){if(-1!=Ce.indexOf(e)){var n=Array.from(arguments);n[0]="#layout_"+this.name+"_panel_"+e,$e.lock.apply(window,n)}else console.log("ERROR: First parameter needs to be the a valid panel name.")}},{key:"unlock",value:function(e,t){if(-1!=Ce.indexOf(e)){var i="#layout_"+this.name+"_panel_"+e;$e.unlock(i,t)}else console.log("ERROR: First parameter needs to be the a valid panel name.")}}]),i}(we),Se=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;return Object(me["a"])(this,i),n=t.call(this),n.defaults={title:"",body:"",buttons:"",actions:null,style:"",color:"#000",opacity:.4,speed:.3,modal:!1,maximized:!1,keyboard:!0,width:500,height:300,showClose:!0,showMax:!1,transition:null,multiple:!1,openMaximized:!1},n.status="closed",n.onOpen=null,n.onClose=null,n.onMax=null,n.onMin=null,n.onToggle=null,n.onKeydown=null,n.onAction=null,n.onMove=null,n.onMsgOpen=null,n.onMsgClose=null,n}return Object(ve["a"])(i,[{key:"open",value:function(e){var t=this;return new Promise((function(i,n){var s=t,a=$.extend(!0,{},e);if("closing"!=Ie.status){var r,o,l,c,d,u=$("#w2ui-popup").data("options");e=$.extend({},t.defaults,u,{title:"",body:"",buttons:""},e,{maximized:!1}),0===$("#w2ui-popup").length?(Ie.onOpen=null,Ie.onClose=null,Ie.onMax=null,Ie.onMin=null,Ie.onToggle=null,Ie.onKeydown=null,Ie.onAction=null,Ie.onMove=null,Ie.onMsgOpen=null,Ie.onMsgClose=null):$("#w2ui-popup").data("options",e),e.onOpen&&(Ie.onOpen=e.onOpen),e.onClose&&(Ie.onClose=e.onClose),e.onMax&&(Ie.onMax=e.onMax),e.onMin&&(Ie.onMin=e.onMin),e.onToggle&&(Ie.onToggle=e.onToggle),e.onKeydown&&(Ie.onKeydown=e.onKeydown),e.onAction&&(Ie.onAction=e.onAction),e.onMove&&(Ie.onMove=e.onMove),e.onMsgOpen&&(Ie.onMsgOpen=e.onMsgOpen),e.onMsgClose&&(Ie.onMsgClose=e.onMsgClose),e.width=parseInt(e.width),e.height=parseInt(e.height),void 0==window.innerHeight?(r=parseInt(document.documentElement.offsetWidth),o=parseInt(document.documentElement.offsetHeight),"IE7"===$e.engine&&(r+=21,o+=4)):(r=parseInt(window.innerWidth),o=parseInt(window.innerHeight)),r-10<e.width&&(e.width=r-10),o-10<e.height&&(e.height=o-10);var h=(o-e.height)/2*.6,p=(r-e.width)/2;if(null!=e.actions&&(e.buttons="",Object.keys(e.actions).forEach((function(t){var i=e.actions[t];"function"==typeof i&&(e.buttons+='<button class="w2ui-btn w2ui-popup-action" data-click=\'["action","'.concat(t,"\"]'>").concat(t,"</button>")),"object"==Object(ge["a"])(i)&&(e.buttons+='<button class="w2ui-btn w2ui-popup-action '.concat(i.class||"",'" data-click=\'["action","').concat(t,'"]\'\n                            style="').concat(i.style,'">').concat(i.text||t,"</button>")),"string"==typeof i&&(e.buttons+=i)}))),0===$("#w2ui-popup").length){if(l=t.trigger({phase:"before",type:"open",target:"popup",options:e,present:!1}),!0===l.isCancelled)return;Ie.status="opening",Ie.lockScreen(e);var f="";e.showClose&&(f+='<div class="w2ui-popup-button w2ui-popup-close">\n                                <span class="w2ui-icon w2ui-icon-cross w2ui-popup-action" data-mousedown="stop" data-click="close"></span>\n                            </div>'),e.showMax&&(f+='<div class="w2ui-popup-button w2ui-popup-max">\n                                <span class="w2ui-icon w2ui-icon-box w2ui-popup-action" data-mousedown="stop" data-click="toggle"></span>\n                            </div>'),c='<div id="w2ui-popup" class="w2ui-popup w2ui-popup-opening" style="left: '+p+"px; top: "+h+"px;     width: "+parseInt(e.width)+"px; height: "+parseInt(e.height)+'px;"></div>',$("body").append(c),$("#w2ui-popup").data("options",e);var g=$("#w2ui-popup");g.find("div[rel=title], div[rel=body], div[rel=buttons]").length>0&&(d=g.find("div[rel=title]"),d.length>0&&(e.title=d.html(),d.remove()),d=g.find("div[rel=buttons]"),d.length>0&&(e.buttons=d.html(),d.remove()),d=g.find("div[rel=body]"),d.length>0?e.body=d.html():e.body=g.html()),c='<div class="w2ui-popup-title" style="'+(e.title?"":"display: none")+'">'+f+'</div><div class="w2ui-box" style="'+(e.title?"":"top: 0px !important;")+(e.buttons?"":"bottom: 0px !important;")+'">    <div class="w2ui-popup-body'+(e.title?"":" w2ui-popup-no-title")+(e.buttons?"":" w2ui-popup-no-buttons")+'" style="'+e.style+'">    </div></div><div class="w2ui-popup-buttons" style="'+(e.buttons?"":"display: none")+'"></div><input class="w2ui-popup-hidden" style="position: absolute; top: -100px"/>',$("#w2ui-popup").html(c),e.title&&$("#w2ui-popup .w2ui-popup-title").append(e.title),e.buttons&&$("#w2ui-popup .w2ui-popup-buttons").append(e.buttons),e.body&&$("#w2ui-popup .w2ui-popup-body").append(e.body),setTimeout((function(){$("#w2ui-popup").css($e.cssPrefix({transition:e.speed+"s opacity, "+e.speed+"s -webkit-transform"})).removeClass("w2ui-popup-opening"),s.focus()}),1),setTimeout((function(){$("#w2ui-popup").css($e.cssPrefix("transform","")),Ie.status="open"}),1e3*e.speed),setTimeout((function(){s.trigger($.extend(l,{phase:"after"})),$e.bindEvents("#w2ui-popup .w2ui-popup-action",Ie),$("#w2ui-popup").find(".w2ui-popup-body").show(),i(l)}),50)}else if(!0===e.multiple)Ie.message(a);else{if(null==Ie._prev&&null!=Ie._template&&s.restoreTemplate(),l=t.trigger({phase:"before",type:"open",target:"popup",options:e,present:!0}),!0===l.isCancelled)return;Ie.status="opening",null!=u&&(u.maximized||u.width==e.width&&u.height==e.height||Ie.resize(e.width,e.height),e.prevSize=e.width+"px:"+e.height+"px",e.maximized=u.maximized);var m=$("#w2ui-popup .w2ui-box").clone();m.removeClass("w2ui-box").addClass("w2ui-box-temp").find(".w2ui-popup-body").empty().append(e.body),"string"==typeof e.body&&m.find("div[rel=title], div[rel=body], div[rel=buttons]").length>0&&(d=m.find("div[rel=title]"),d.length>0&&(e.title=d.html(),d.remove()),d=m.find("div[rel=buttons]"),d.length>0&&(e.buttons=d.html(),d.remove()),d=m.find("div[rel=body]"),d.length>0?e.body=d.html():e.body=m.html(),m.html(e.body)),$("#w2ui-popup .w2ui-box").after(m),e.buttons?($("#w2ui-popup .w2ui-popup-buttons").show().html("").append(e.buttons),$("#w2ui-popup .w2ui-popup-body").removeClass("w2ui-popup-no-buttons"),$("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("bottom","")):($("#w2ui-popup .w2ui-popup-buttons").hide().html(""),$("#w2ui-popup .w2ui-popup-body").addClass("w2ui-popup-no-buttons"),$("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("bottom","0px")),e.title?($("#w2ui-popup .w2ui-popup-title").show().html((e.showClose?'<div class="w2ui-popup-button w2ui-popup-close">\n                                 <span class="w2ui-icon w2ui-icon-cross w2ui-popup-action" data-mousedown="stop" data-click="close"></span>\n                               </div>':"")+(e.showMax?'<div class="w2ui-popup-button w2ui-popup-max">\n                                  <span class="w2ui-icon w2ui-icon-box w2ui-popup-action" data-mousedown="stop" data-click="toggle"></span>\n                               </div>':"")).append(e.title),$("#w2ui-popup .w2ui-popup-body").removeClass("w2ui-popup-no-title"),$("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("top","")):($("#w2ui-popup .w2ui-popup-title").hide().html(""),$("#w2ui-popup .w2ui-popup-body").addClass("w2ui-popup-no-title"),$("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("top","0px"));var v=$("#w2ui-popup .w2ui-box")[0],y=$("#w2ui-popup .w2ui-box-temp")[0];$e.transition(v,y,e.transition,(function(){s.restoreTemplate(),$(v).remove(),$(y).removeClass("w2ui-box-temp").addClass("w2ui-box");var t=$(y).find(".w2ui-popup-body");1==t.length&&(t[0].style.cssText=e.style,t.show()),$("#w2ui-popup").data("prev-size",null),s.focus()})),Ie.status="open",s.trigger($.extend(l,{phase:"after"})),$e.bindEvents("#w2ui-popup .w2ui-popup-action",Ie),$("#w2ui-popup").find(".w2ui-popup-body").show(),i(l)}e.openMaximized&&t.max(),e._last_focus=$(":focus"),e.keyboard&&$(document).on("keydown",t.keydown),d={resizing:!1,mvMove:w,mvStop:x},$("#w2ui-popup .w2ui-popup-title").on("mousedown",(function(e){Ie.get().maximized||b(e)}))}else setTimeout((function(){s.open.call(s,e)}),100);function b(e){if(e||(e=window.event),Ie.status="moving",d.resizing=!0,d.isLocked=1==$("#w2ui-popup > .w2ui-lock").length,d.x=e.screenX,d.y=e.screenY,d.pos_x=$("#w2ui-popup").position().left,d.pos_y=$("#w2ui-popup").position().top,d.isLocked||Ie.lock({opacity:0}),$(document).on("mousemove",d.mvMove),$(document).on("mouseup",d.mvStop),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!e.preventDefault)return!1;e.preventDefault()}function w(e){if(1==d.resizing){e||(e=window.event),d.div_x=e.screenX-d.x,d.div_y=e.screenY-d.y;var t=Ie.trigger({phase:"before",type:"move",target:"popup",div_x:d.div_x,div_y:d.div_y});!0!==t.isCancelled&&($("#w2ui-popup").css($e.cssPrefix({transition:"none",transform:"translate3d("+d.div_x+"px, "+d.div_y+"px, 0px)"})),Ie.trigger($.extend(t,{phase:"after"})))}}function x(e){1==d.resizing&&(e||(e=window.event),Ie.status="open",d.div_x=e.screenX-d.x,d.div_y=e.screenY-d.y,$("#w2ui-popup").css({left:d.pos_x+d.div_x+"px",top:d.pos_y+d.div_y+"px"}).css($e.cssPrefix({transition:"none",transform:"translate3d(0px, 0px, 0px)"})),d.resizing=!1,$(document).off("mousemove",d.mvMove),$(document).off("mouseup",d.mvStop),d.isLocked||Ie.unlock())}}))}},{key:"load",value:function(e){var t=this;return new Promise((function(i,n){if("string"==typeof e&&(e={url:e}),null==e.url)return console.log("ERROR: The url is not defined."),void n("The url is not defined");Ie.status="loading";var s=String(e.url).split("#"),a=s[0],r=s[1];null==e&&(e={});var o=$("#w2ui-popup").data(a);null!=o?t.template(o,r):$.get(a,(function(n,s,a){t.template(a.responseText,r,e).then((function(){i()}))}))}))}},{key:"template",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=$(e);return t&&(n=n.filter("#"+t)),$.extend(i,{style:n[0].style.cssText,width:n.width(),height:n.height(),title:n.find("[rel=title]").html(),body:n.find("[rel=body]").html(),buttons:n.find("[rel=buttons]").html()}),Ie.open(i)}},{key:"action",value:function(e,t){var i=this,n=$("#w2ui-popup").data("options");null!=t&&(n=$("#w2ui-message"+t).data("options"),i={parent:this,options:n,close:function(){Ie.message({msgId:t})}});var s=n.actions[e],a=s;$.isPlainObject(s)&&s.onClick&&(a=s.onClick);var r=this.trigger({phase:"before",target:e,msgId:t,type:"action",action:s,originalEvent:event});!0!==r.isCancelled&&("function"===typeof a&&a.call(i,event),this.trigger($.extend(r,{phase:"after"})))}},{key:"keydown",value:function(e){var t=$("#w2ui-popup").data("options");if(!t||t.keyboard){var i=Ie.trigger({phase:"before",type:"keydown",target:"popup",options:t,originalEvent:e});if(!0!==i.isCancelled){switch(e.keyCode){case 27:e.preventDefault(),$("#w2ui-popup .w2ui-message").length>0?Ie.message():Ie.close();break}Ie.trigger($.extend(i,{phase:"after"}))}}}},{key:"close",value:function(e){var t=this;if(e=$.extend({},$("#w2ui-popup").data("options"),e),0!==$("#w2ui-popup").length&&"closed"!=this.status)if("opening"!=this.status){var i=this.trigger({phase:"before",type:"close",target:"popup",options:e});!0!==i.isCancelled&&(Ie.status="closing",$("#w2ui-popup").css($e.cssPrefix({transition:e.speed+"s opacity, "+e.speed+"s -webkit-transform"})).addClass("w2ui-popup-closing"),Ie.unlockScreen(e),setTimeout((function(){t.restoreTemplate(),$("#w2ui-popup").remove(),Ie.status="closed",e._last_focus&&e._last_focus.length>0&&e._last_focus.focus(),t.trigger($.extend(i,{phase:"after"}))}),1e3*e.speed),e.keyboard&&$(document).off("keydown",this.keydown))}else setTimeout((function(){Ie.close()}),100)}},{key:"toggle",value:function(){var e=this,t=$("#w2ui-popup").data("options"),i=this.trigger({phase:"before",type:"toggle",target:"popup",options:t});!0!==i.isCancelled&&(!0===t.maximized?Ie.min():Ie.max(),setTimeout((function(){e.trigger($.extend(i,{phase:"after"}))}),1e3*t.speed+50))}},{key:"max",value:function(){var e=this,t=this,i=$("#w2ui-popup").data("options");if(!0!==i.maximized){var n=this.trigger({phase:"before",type:"max",target:"popup",options:i});!0!==n.isCancelled&&(Ie.status="resizing",i.prevSize=$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height"),Ie.resize(1e4,1e4,(function(){Ie.status="open",i.maximized=!0,t.trigger($.extend(n,{phase:"after"})),$("#w2ui-popup .w2ui-grid, #w2ui-popup .w2ui-form, #w2ui-popup .w2ui-layout").each((function(){var t=$(e).attr("name");_e[t]&&_e[t].resize&&_e[t].resize()}))})))}}},{key:"min",value:function(){var e=this,t=this,i=$("#w2ui-popup").data("options");if(!0===i.maximized){var n=i.prevSize.split(":"),s=this.trigger({phase:"before",type:"min",target:"popup",options:i});!0!==s.isCancelled&&(Ie.status="resizing",Ie.resize(parseInt(n[0]),parseInt(n[1]),(function(){Ie.status="open",i.maximized=!1,i.prevSize=null,t.trigger($.extend(s,{phase:"after"})),$("#w2ui-popup .w2ui-grid, #w2ui-popup .w2ui-form, #w2ui-popup .w2ui-layout").each((function(){var t=$(e).attr("name");_e[t]&&_e[t].resize&&_e[t].resize()}))})))}}},{key:"get",value:function(){return $("#w2ui-popup").data("options")}},{key:"set",value:function(e){Ie.open(e)}},{key:"clear",value:function(){$("#w2ui-popup .w2ui-popup-title").html(""),$("#w2ui-popup .w2ui-popup-body").html(""),$("#w2ui-popup .w2ui-popup-buttons").html("")}},{key:"reset",value:function(){Ie.open(Ie.defaults)}},{key:"message",value:function(e){var t=this;return new Promise((function(i,n){var s=t;$().w2tag(),"string"==typeof e&&(e={html:e,width:200,height:100}),e||(e={width:200,height:100});var a=parseInt($("#w2ui-popup").width()),r=parseInt($("#w2ui-popup").height());e.originalWidth=e.width,e.originalHeight=e.height,parseInt(e.width)<10&&(e.width=10),parseInt(e.height)<10&&(e.height=10),null==e.hideOnClick&&(e.hideOnClick=!1);var o=$("#w2ui-popup").data("options")||{},l=parseInt($("#w2ui-popup > .w2ui-popup-title").css("height"));(null==e.width||e.width>o.width-10)&&(e.width=o.width-10),(null==e.height||e.height>o.height-l-5)&&(e.height=o.height-l-5),e.originalHeight<0&&(e.height=r+e.originalHeight-l),e.originalWidth<0&&(e.width=a+2*e.originalWidth);var c=$("#w2ui-popup .w2ui-popup-title"),d=$("#w2ui-popup .w2ui-message").length;if(null!=e.actions&&(e.buttons="",Object.keys(e.actions).forEach((function(t){var i=e.actions[t];"function"==typeof i&&(e.buttons+='<button class="w2ui-btn w2ui-popup-action" data-click=\'["action","'.concat(t,'","').concat(d,"\"]'>").concat(t,"</button>")),"object"==Object(ge["a"])(i)&&(e.buttons+='<button class="w2ui-btn w2ui-popup-action '.concat(i.class||"",'" style="').concat(i.style||"",'"\n                            data-click=\'["action","').concat(t,'","').concat(d,"\"]'>").concat(i.text||t,"</button>")),"string"==typeof i&&(e.buttons+=i)}))),""===(e.html||"").trim()&&""===(e.body||"").trim()&&""===(e.buttons||"").trim()){var u=$("#w2ui-popup .w2ui-message").last();null!=e.msgId&&(u=$("#w2ui-message"+e.msgId)),e=u.data("options")||{};var h=s.trigger({phase:"before",type:"msgClose",msgId:u.attr("data-msgId"),target:"popup",options:e});if(!0===h.isCancelled)return;u.css($e.cssPrefix({transition:"0.15s",transform:"translateY(-"+e.height+"px)"}));var p=$("#w2ui-popup .w2ui-message");p=$(p[p.length-2]).css("z-index",1500).data("msg-focus"),p&&p.length>0?p.focus():s.focus(),1==d&&Ie.unlock(150),setTimeout((function(){u.remove(),"function"==typeof e.onClose&&e.onClose(h),s.trigger($.extend(h,{phase:"after"})),i(h)}),150)}else{""===(e.body||"").trim()&&""===(e.buttons||"").trim()||(e.html='<div class="w2ui-message-body">'+e.body+'</div><div class="w2ui-message-buttons">'+e.buttons+"</div>"),$("#w2ui-popup .w2ui-message").css("z-index",1390).data("msg-focus",$(":focus")),c.css("z-index",1501),null==e.close&&(e.close=function(){Ie.message({msgId:d})}),$("#w2ui-popup .w2ui-box").before('<div id="w2ui-message'+d+'" class="w2ui-message" style="display: none; z-index: 1500; '+(0===c.length?"top: 0px;":"top: "+$e.getSize(c,"height")+"px;")+(null!=e.width?"width: "+e.width+"px; left: "+(a-e.width)/2+"px;":"left: 10px; right: 10px;")+(null!=e.height?"height: "+e.height+"px;":"bottom: 6px;")+$e.cssPrefix("transition","0s",!0)+'" data-msgId="'+d+'" '+(!0===e.hideOnClick?'onclick="w2popup.message();"':"")+"></div>"),$("#w2ui-popup #w2ui-message"+d).data("options",e);var f=$("#w2ui-popup #w2ui-message"+d).css("display");if($("#w2ui-popup #w2ui-message"+d).css($e.cssPrefix({transform:"none"==f?"translateY(-"+e.height+"px)":"translateY(0px)"})),"none"==f){$("#w2ui-popup #w2ui-message"+d).show().html(e.html),setTimeout((function(){$("#w2ui-popup #w2ui-message"+d).css($.extend($e.cssPrefix("transition",".3s",!1),$e.cssPrefix({transform:"none"==f?"translateY(0px)":"translateY(-"+e.height+"px)"})))}),1),0===d&&Ie.lock();var g=s.trigger({phase:"before",type:"msgOpen",msgId:d,target:"popup",options:e});if(!0===g.isCancelled)return;setTimeout((function(){s.focus(),$("#w2ui-popup #w2ui-message"+d).css($e.cssPrefix({transition:"0s"})),"function"==typeof e.onOpen&&e.onOpen(g),s.trigger($.extend(g,{phase:"after"})),$e.bindEvents("#w2ui-popup #w2ui-message".concat(d," .w2ui-popup-action"),Ie),i(g)}),350)}}}))}},{key:"focus",value:function(){var e=null,t=$("#w2ui-popup"),i="input:visible, button:visible, select:visible, textarea:visible, [contentEditable], .w2ui-input";$(t).find(i).off(".keep-focus");var n=$("#w2ui-popup .w2ui-message").length-1,s=$("#w2ui-popup #w2ui-message"+n);if(s.length>0){var a=$(s[s.length-1]).find("button");a.length>0&&a[0].focus(),e=s}else if(t.length>0){var r=t.find(".w2ui-popup-buttons button");r.length>0&&r[0].focus(),e=t}$(e).find(i).on("blur.keep-focus",(function(t){setTimeout((function(){var t=$(":focus");if(t.length>0&&!$(e).find(i).is(t)||t.hasClass("w2ui-popup-hidden")){var n=$(e).find(i);n.length>0&&n[0].focus()}}),1)}))}},{key:"lock",value:function(e,t){var i=Array.prototype.slice.call(arguments,0);i.unshift($("#w2ui-popup")),$e.lock.apply(window,i)}},{key:"unlock",value:function(e){$e.unlock($("#w2ui-popup"),e)}},{key:"lockScreen",value:function(e){return!($("#w2ui-lock").length>0)&&(null==e&&(e=$("#w2ui-popup").data("options")),null==e&&(e={}),e=$.extend({},Ie.defaults,e),$("body").append('<div id="w2ui-lock"     style="position: '+("IE5"==$e.engine?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px;            padding: 0px; margin: 0px; background-color: "+e.color+'; width: 100%; height: 100%; opacity: 0;"></div>'),setTimeout((function(){$("#w2ui-lock").css("opacity",e.opacity).css($e.cssPrefix("transition",e.speed+"s opacity"))}),1),1==e.modal?$("#w2ui-lock").on("mousedown",(function(){$("#w2ui-lock").css("opacity","0.6").css($e.cssPrefix("transition",".1s"))})).on("mouseup",(function(){setTimeout((function(){$("#w2ui-lock").css("opacity",e.opacity).css($e.cssPrefix("transition",".1s"))}),100)})).on("mousewheel",(function(e){if(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!e.preventDefault)return!1;e.preventDefault()})):$("#w2ui-lock").on("mousedown",(function(){Ie.close()})),!0)}},{key:"unlockScreen",value:function(e){return 0!==$("#w2ui-lock").length&&(null==e&&(e=$("#w2ui-popup").data("options")),null==e&&(e={}),e=$.extend({},Ie.defaults,e),$("#w2ui-lock").css("opacity","0").css($e.cssPrefix("transition",e.speed+"s opacity")),setTimeout((function(){$("#w2ui-lock").remove()}),1e3*e.speed),!0)}},{key:"resizeMessages",value:function(){var e=this;$("#w2ui-popup .w2ui-message").each((function(){var t=$(e).data("options"),i=$("#w2ui-popup");parseInt(t.width)<10&&(t.width=10),parseInt(t.height)<10&&(t.height=10);var n=parseInt(i.find("> .w2ui-popup-title").css("height")),s=parseInt(i.width()),a=parseInt(i.height());t.width=t.originalWidth,t.width>s-10&&(t.width=s-10),t.height=t.originalHeight,t.height>a-n-5&&(t.height=a-n-5),t.originalHeight<0&&(t.height=a+t.originalHeight-n),t.originalWidth<0&&(t.width=s+2*t.originalWidth),$(e).css({left:(s-t.width)/2+"px",width:t.width+"px",height:t.height+"px"})}))}},{key:"resize",value:function(e,t,i){var n,s,a=this,r=$("#w2ui-popup").data("options")||{};null==r.speed&&(r.speed=0),e=parseInt(e),t=parseInt(t),void 0==window.innerHeight?(n=parseInt(document.documentElement.offsetWidth),s=parseInt(document.documentElement.offsetHeight),"IE7"===$e.engine&&(n+=21,s+=4)):(n=parseInt(window.innerWidth),s=parseInt(window.innerHeight)),n-10<e&&(e=n-10),s-10<t&&(t=s-10);var o=(s-t)/2*.6,l=(n-e)/2;$("#w2ui-popup").css($e.cssPrefix({transition:r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top"})).css({top:o,left:l,width:e,height:t});var c=setInterval((function(){a.resizeMessages()}),10);setTimeout((function(){clearInterval(c),r.width=e,r.height=t,a.resizeMessages(),"function"==typeof i&&i()}),1e3*r.speed+50)}},{key:"restoreTemplate",value:function(){var e=$("#w2ui-popup").data("options");if(null!=e){var t=Ie._template,i=e.title,n=e.body,s=e.buttons;if(Ie._prev?(t=Ie._prev.template,i=Ie._prev.title,n=Ie._prev.body,s=Ie._prev.buttons,delete Ie._prev):delete Ie._template,null!=t){var a=$(t);if(0===a.length)return;"body"==$(n).attr("rel")?(i&&a.append(i),n&&a.append(n),s&&a.append(s)):a.append(n)}}}}]),i}(we);function Oe(e,t,i){var n=jQuery;return null==t&&(t=$e.lang("Notification")),n("#w2ui-popup").length>0&&"closing"!=Ie.status?Ie.message({width:400,height:180,body:'<div class="w2ui-centered w2ui-alert-msg" style="font-size: 13px;">'+e+"</div>",actions:{Ok:{text:$e.lang("Ok"),onClick:function(){Ie.message()}}},onOpen:function(){n("#w2ui-popup .w2ui-message .w2ui-popup-btn").focus()},onClose:function(){"function"==typeof i&&i()}}):Ie.open({width:450,height:220,showMax:!1,showClose:!1,title:t,body:'<div class="w2ui-centered w2ui-alert-msg" style="font-size: 13px;">'+e+"</div>",actions:{Ok:{text:$e.lang("Ok"),onClick:function(){Ie.close()}}},onOpen:function(e){setTimeout((function(){n("#w2ui-popup .w2ui-popup-btn").focus()}),1)},onKeydown:function(e){n("#w2ui-popup .w2ui-popup-btn").focus().addClass("clicked")},onClose:function(){"function"==typeof i&&i()}}),{ok:function(e){return i=e,this},done:function(e){return i=e,this},then:function(e){return i=e,this}}}function Ee(e,t,i){var n=jQuery,s={},a={msg:"",title:$e.lang("Confirmation"),width:n("#w2ui-popup").length>0?400:450,height:n("#w2ui-popup").length>0?180:220,btn_yes:{text:"Yes",class:"",styel:"",click:null},btn_no:{text:"No",class:"",styel:"",click:null},focus_to_no:!1,callBack:null};return 1==arguments.length&&"object"==Object(ge["a"])(e)?n.extend(s,a,e):"function"==typeof t?n.extend(s,a,{msg:e,callBack:t}):n.extend(s,a,{msg:e,title:t,callBack:i}),s.yes_text&&(s.btn_yes.text=s.yes_text),s.yes_class&&(s.btn_yes.class=s.yes_class),s.yes_style&&(s.btn_yes.style=s.yes_style),s.yes_onClick&&(s.btn_yes.click=s.yes_onClick),s.yes_callBack&&(s.btn_yes.click=s.yes_callBack),s.no_text&&(s.btn_no.text=s.no_text),s.no_class&&(s.btn_no.class=s.no_class),s.no_style&&(s.btn_no.style=s.no_style),s.no_onClick&&(s.btn_no.click=s.no_onClick),s.no_callBack&&(s.btn_no.click=s.no_callBack),n("#w2ui-popup").length>0&&"closing"!=Ie.status&&Ie.get()?(s.width>Ie.get().width&&(s.width=Ie.get().width),s.height>Ie.get().height-50&&(s.height=Ie.get().height-50),Ie.message({width:s.width,height:s.height,body:'<div class="w2ui-centered w2ui-confirm-msg" style="font-size: 13px;">'+s.msg+"</div>",buttons:$e.settings.macButtonOrder?'<button id="No" class="w2ui-popup-btn w2ui-btn '+s.btn_no.class+'" style="'+s.btn_no.style+'">'+$e.lang(s.btn_no.text)+'</button><button id="Yes" class="w2ui-popup-btn w2ui-btn '+s.btn_yes.class+'" style="'+s.btn_yes.style+'">'+$e.lang(s.btn_yes.text)+"</button>":'<button id="Yes" class="w2ui-popup-btn w2ui-btn '+s.btn_yes.class+'" style="'+s.btn_yes.style+'">'+$e.lang(s.btn_yes.text)+'</button><button id="No" class="w2ui-popup-btn w2ui-btn '+s.btn_no.class+'" style="'+s.btn_no.style+'">'+$e.lang(s.btn_no.text)+"</button>",onOpen:function(e){n("#w2ui-popup .w2ui-message .w2ui-btn").on("click.w2confirm",(function(e){Ie._confirm_btn=e.target.id,Ie.message()})),"function"==typeof s.onOpen&&s.onOpen()},onClose:function(e){n("#w2ui-popup .w2ui-message .w2ui-btn").off("click.w2confirm"),setTimeout((function(){"function"==typeof s.callBack&&s.callBack(Ie._confirm_btn),"Yes"==Ie._confirm_btn&&"function"==typeof s.btn_yes.click&&s.btn_yes.click(),"No"==Ie._confirm_btn&&"function"==typeof s.btn_no.click&&s.btn_no.click()}),300),"function"==typeof s.onClose&&s.onClose()}})):($e.isInt(s.height)||(s.height=s.height+50),Ie.open({width:s.width,height:s.height,title:s.title,modal:!0,showClose:!1,body:'<div class="w2ui-centered w2ui-confirm-msg" style="font-size: 13px;">'+s.msg+"</div>",buttons:$e.settings.macButtonOrder?'<button id="No" class="w2ui-popup-btn w2ui-btn '+s.btn_no.class+'" style="'+s.btn_no.style+'">'+$e.lang(s.btn_no.text)+'</button><button id="Yes" class="w2ui-popup-btn w2ui-btn '+s.btn_yes.class+'" style="'+s.btn_yes.style+'">'+$e.lang(s.btn_yes.text)+"</button>":'<button id="Yes" class="w2ui-popup-btn w2ui-btn '+s.btn_yes.class+'" style="'+s.btn_yes.style+'">'+$e.lang(s.btn_yes.text)+'</button><button id="No" class="w2ui-popup-btn w2ui-btn '+s.btn_no.class+'" style="'+s.btn_no.style+'">'+$e.lang(s.btn_no.text)+"</button>",onOpen:function(e){setTimeout((function(){n("#w2ui-popup .w2ui-popup-btn").on("click",(function(e){Ie.close(),"function"==typeof s.callBack&&s.callBack(e.target.id),"Yes"==e.target.id&&"function"==typeof s.btn_yes.click&&s.btn_yes.click(),"No"==e.target.id&&"function"==typeof s.btn_no.click&&s.btn_no.click()})),s.focus_to_no?n("#w2ui-popup .w2ui-popup-btn#No").focus():n("#w2ui-popup .w2ui-popup-btn#Yes").focus(),"function"==typeof s.onOpen&&s.onOpen()}),1)},onClose:function(e){"function"==typeof s.onClose&&s.onClose()},onKeydown:function(e){if(0===n("#w2ui-popup .w2ui-message").length)switch(e.originalEvent.keyCode){case 13:n("#w2ui-popup .w2ui-popup-btn#Yes").focus().addClass("clicked"),Ie.close();break;case 27:n("#w2ui-popup .w2ui-popup-btn#No").focus().click(),Ie.close();break}}})),{yes:function(e){return s.btn_yes.click=e,this},no:function(e){return s.btn_no.click=e,this}}}function De(e,t,i){var n=jQuery,s={},a={title:$e.lang("Notification"),width:n("#w2ui-popup").length>0?400:450,height:n("#w2ui-popup").length>0?180:220,label:"",value:"",attrs:"",textarea:!1,btn_ok:{text:"Ok",class:"",style:"",click:null},btn_cancel:{text:"Cancel",class:"",style:"",click:null},callBack:null,onOpen:null,onClose:null};function r(e,t){"ok"==e&&"function"==typeof s.btn_ok.click&&s.btn_ok.click(t),"cancel"==e&&"function"==typeof s.btn_cancel.click&&s.btn_cancel.click(t),"function"==typeof s.callBack&&s.callBack(e,t)}return Ie.tmp=Ie.tmp||{},1==arguments.length&&"object"==Object(ge["a"])(e)?n.extend(s,a,e):"function"==typeof t?n.extend(s,a,{label:e,callBack:t}):n.extend(s,a,{label:e,title:t,callBack:i}),s.ok_text&&(s.btn_ok.text=s.ok_text),s.ok_class&&(s.btn_ok.class=s.ok_class),s.ok_style&&(s.btn_ok.style=s.ok_style),s.ok_onClick&&(s.btn_ok.click=s.ok_onClick),s.ok_callBack&&(s.btn_ok.click=s.ok_callBack),s.cancel_text&&(s.btn_cancel.text=s.cancel_text),s.cancel_class&&(s.btn_cancel.class=s.cancel_class),s.cancel_style&&(s.btn_cancel.style=s.cancel_style),s.cancel_onClick&&(s.btn_cancel.click=s.cancel_onClick),s.cancel_callBack&&(s.btn_cancel.click=s.cancel_callBack),n("#w2ui-popup").length>0&&"closing"!=Ie.status&&Ie.get()?(s.width>Ie.get().width&&(s.width=Ie.get().width),s.height>Ie.get().height-50&&(s.height=Ie.get().height-50),Ie.message({width:s.width,height:s.height,body:s.textarea?'<div class="w2ui-prompt textarea">  <div>'+s.label+'</div>  <textarea id="w2prompt" class="w2ui-input" '+s.attrs+"></textarea></div>":'<div class="w2ui-prompt w2ui-centered">  <label>'+s.label+'</label>  <input id="w2prompt" class="w2ui-input" '+s.attrs+"></div>",buttons:$e.settings.macButtonOrder?'<button id="Cancel" class="w2ui-popup-btn w2ui-btn '+s.btn_cancel.class+'" style="'+s.btn_cancel.style+'">'+s.btn_cancel.text+'</button><button id="Ok" class="w2ui-popup-btn w2ui-btn '+s.btn_ok.class+'" style="'+s.btn_ok.style+'">'+s.btn_ok.text+"</button>":'<button id="Ok" class="w2ui-popup-btn w2ui-btn '+s.btn_ok.class+'" style="'+s.btn_ok.style+'">'+s.btn_ok.text+'</button><button id="Cancel" class="w2ui-popup-btn w2ui-btn '+s.btn_cancel.class+'" style="'+s.btn_cancel.style+'">'+s.btn_cancel.text+"</button>",onOpen:function(){n("#w2prompt").val(s.value).off(".w2prompt").on("keydown.w2prompt",(function(e){13==e.keyCode&&n("#w2ui-popup .w2ui-message .w2ui-btn#Ok").click()})),n("#w2ui-popup .w2ui-message .w2ui-btn#Ok").off(".w2prompt").on("click.w2prompt",(function(e){Ie.tmp.btn="ok",Ie.tmp.value=n("#w2prompt").val(),Ie.message()})),n("#w2ui-popup .w2ui-message .w2ui-btn#Cancel").off(".w2prompt").on("click.w2prompt",(function(e){Ie.tmp.btn="cancel",Ie.tmp.value=null,Ie.message()})),setTimeout((function(){n("#w2prompt").focus()}),100),"function"==typeof s.onOpen&&s.onOpen()},onClose:function(){n("#w2ui-popup .w2ui-message .w2ui-btn").off("click.w2prompt"),setTimeout((function(){r(Ie.tmp.btn,Ie.tmp.value)}),300),"function"==typeof s.onClose&&s.onClose()}})):($e.isInt(s.height)||(s.height=s.height+50),Ie.open({width:s.width,height:s.height,title:s.title,modal:!0,showClose:!1,body:s.textarea?'<div class="w2ui-prompt">  <div>'+s.label+'</div>  <textarea id="w2prompt" class="w2ui-input" '+s.attrs+"></textarea></div>":'<div class="w2ui-prompt w2ui-centered" style="font-size: 13px;">  <label>'+s.label+'</label>  <input id="w2prompt" class="w2ui-input" '+s.attrs+"></div>",buttons:$e.settings.macButtonOrder?'<button id="Cancel" class="w2ui-popup-btn w2ui-btn '+s.btn_cancel.class+'" style="'+s.btn_cancel.style+'">'+s.btn_cancel.text+'</button><button id="Ok" class="w2ui-popup-btn w2ui-btn '+s.btn_ok.class+'" style="'+s.btn_ok.style+'">'+s.btn_ok.text+"</button>":'<button id="Ok" class="w2ui-popup-btn w2ui-btn '+s.btn_ok.class+'" style="'+s.btn_ok.style+'">'+s.btn_ok.text+'</button><button id="Cancel" class="w2ui-popup-btn w2ui-btn '+s.btn_cancel.class+'" style="'+s.btn_cancel.style+'">'+s.btn_cancel.text+"</button>",onOpen:function(e){setTimeout((function(){n("#w2prompt").val(s.value),n("#w2prompt").w2field("text"),n("#w2ui-popup .w2ui-popup-btn#Ok").on("click",(function(e){Ie.tmp.btn="ok",Ie.tmp.value=n("#w2prompt").val(),Ie.close()})),n("#w2ui-popup .w2ui-popup-btn#Cancel").on("click",(function(e){Ie.tmp.btn="cancel",Ie.tmp.value=null,Ie.close()})),n("#w2ui-popup .w2ui-popup-btn#Ok"),setTimeout((function(){n("#w2prompt").focus()}),100),"function"==typeof s.onOpen&&s.onOpen()}),1)},onClose:function(e){r(Ie.tmp.btn,Ie.tmp.value),"function"==typeof s.onClose&&s.onClose()},onKeydown:function(e){if(0===n("#w2ui-popup .w2ui-message").length)switch(e.originalEvent.keyCode){case 13:n("#w2ui-popup .w2ui-popup-btn#Ok").focus().addClass("clicked");break;case 27:Ie.tmp.btn="cancel",Ie.tmp.value=null;break}}})),{change:function(e){return n("#w2prompt").on("keyup",e).keyup(),this},ok:function(e){return s.btn_ok.click=e,this},cancel:function(e){return s.btn_cancel.click=e,this}}}var Ie=new Se;self&&(self.w2popup=Ie,self.w2alert=Oe,self.w2confirm=Ee,self.w2prompt=De);var Ae=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;Object(me["a"])(this,i),n=t.call(this,e.name),n.box=null,n.name=null,n.active=null,n.reorder=!1,n.flow="down",n.tooltip="top|left",n.tabs=[],n.routeData={},n.tmp={},n.right="",n.style="",n.onClick=null,n.onClose=null,n.onRender=null,n.onRefresh=null,n.onResize=null,n.onDestroy=null,n.tab_template={id:null,text:null,route:null,hidden:!1,disabled:!1,closable:!1,tooltip:null,style:"",onClick:null,onRefresh:null,onClose:null};var s=e.tabs;return delete e.tabs,$.extend(!0,Object(ue["a"])(n),e),Array.isArray(s)&&n.add(s),n}return Object(ve["a"])(i,[{key:"add",value:function(e){return this.insert(null,e)}},{key:"insert",value:function(e,t){var i=this;Array.isArray(t)||(t=[t]),t.forEach((function(t){if(null!=t.id){if($e.checkUniqueId(t.id,i.tabs,"tabs",i.name)){var n=Object.assign({},i.tab_template,t);if(null==e)i.tabs.push(n),i.animateInsert(null,n);else{var s=i.get(e,!0),a=i.tabs[s].id;i.tabs.splice(s,0,n),i.animateInsert(a,n)}}}else console.log('ERROR: The parameter "id" is required but not supplied. (obj: '.concat(i.name,")"))}))}},{key:"remove",value:function(){var e=this,t=0;return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&(t++,e.tabs.splice(e.get(n.id,!0),1),$(e.box).find("#tabs_".concat(e.name,"_tab_").concat($e.escapeId(n.id))).remove())})),this.resize(),t}},{key:"select",value:function(e){return this.active!=e&&null!=this.get(e)&&(this.active=e,this.refresh(),!0)}},{key:"set",value:function(e,t){var i=this.get(e,!0);return null!=i&&($.extend(this.tabs[i],t),this.refresh(e),!0)}},{key:"get",value:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.tabs.length;n++)null!=this.tabs[n].id&&i.push(this.tabs[n].id);return i}for(var s=0;s<this.tabs.length;s++)if(this.tabs[s].id==e)return!0===t?s:this.tabs[s];return null}},{key:"show",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&!1!==n.hidden&&(n.hidden=!1,t.push(n.id))})),setTimeout((function(){t.forEach((function(t){e.refresh(t),e.resize()}))}),15),t}},{key:"hide",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&!0!==n.hidden&&(n.hidden=!0,t.push(n.id))})),setTimeout((function(){t.forEach((function(t){e.refresh(t),e.resize()}))}),15),t}},{key:"enable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&!1!==n.disabled&&(n.disabled=!1,t.push(n.id))})),setTimeout((function(){t.forEach((function(t){e.refresh(t)}))}),15),t}},{key:"disable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&!0!==n.disabled&&(n.disabled=!0,t.push(n.id))})),setTimeout((function(){t.forEach((function(t){e.refresh(t)}))}),15),t}},{key:"dragMove",value:function(e){if(this.tmp.reordering){var t=this,i=this.tmp.moving,n=this.tabs[i.index],s=g(i.index,1),a=g(i.index,-1),r=$("#tabs_"+this.name+"_tab_"+$e.escapeId(n.id));if(i.divX>0&&s){var o=$("#tabs_"+this.name+"_tab_"+$e.escapeId(s.id)),l=parseInt(r.css("width")),c=parseInt(o.css("width"));if(l<c?(l=Math.floor(l/3),c-=l):(l=Math.floor(c/3),c-=l),i.divX>c){var d=this.tabs.indexOf(s);return this.tabs.splice(i.index,0,this.tabs.splice(d,1)[0]),i.$tab.before(o),i.$tab.css("opacity",0),void Object.assign(this.tmp.moving,{index:d,divX:-l,x:e.pageX+l,left:i.left+i.divX+l})}}if(i.divX<0&&a){var u=$("#tabs_"+this.name+"_tab_"+$e.escapeId(a.id)),h=parseInt(r.css("width")),p=parseInt(u.css("width"));if(h<p?(h=Math.floor(h/3),p-=h):(h=Math.floor(p/3),p-=h),Math.abs(i.divX)>p){var f=this.tabs.indexOf(a);return this.tabs.splice(i.index,0,this.tabs.splice(f,1)[0]),u.before(i.$tab),i.$tab.css("opacity",0),void Object.assign(i,{index:f,divX:h,x:e.pageX-h,left:i.left+i.divX-h})}}}function g(e,i){e+=i;var n=t.tabs[e];return n&&n.hidden&&(n=g(e,i)),n}}},{key:"tooltipShow",value:function(e,t,i){var n=this.get(e),s=$(this.box).find("#tabs_"+this.name+"_tab_"+$e.escapeId(e));if(null!=this.tooltip&&!n.disabled&&!this.tmp.reordering){var a=this.tooltip,r=n.tooltip;"function"==typeof r&&(r=r.call(this,n)),s.prop("_mouse_over",!0),setTimeout((function(){!0===s.prop("_mouse_over")&&!0!==s.prop("_mouse_tooltip")&&(s.prop("_mouse_tooltip",!0),s.w2tag($e.lang(r,!0),{position:a})),1==i&&s.w2tag($e.lang(r,!0),{position:a})}),1)}}},{key:"tooltipHide",value:function(e){var t=this.get(e),i=$(this.box).find("#tabs_"+this.name+"_tab_"+$e.escapeId(e));null==this.tooltip||t.disabled||this.tmp.reordering||(i.removeProp("_mouse_over"),setTimeout((function(){!0!==i.prop("_mouse_over")&&!0===i.prop("_mouse_tooltip")&&(i.removeProp("_mouse_tooltip"),i.w2tag())}),1))}},{key:"getTabHTML",value:function(e){var t=this.get(e,!0),i=this.tabs[t];if(null==i)return!1;null==i.text&&null!=i.caption&&(i.text=i.caption),null==i.tooltip&&null!=i.hint&&(i.tooltip=i.hint),null!=i.caption&&console.log("NOTICE: tabs tab.caption property is deprecated, please use tab.text. Tab -> ",i),null!=i.hint&&console.log("NOTICE: tabs tab.hint property is deprecated, please use tab.tooltip. Tab -> ",i);var n=i.text;"function"==typeof n&&(n=n.call(this,i)),null==n&&(n="");var s="",a="";return i.hidden&&(a+="display: none;"),i.disabled&&(a+="opacity: 0.2;"),i.closable&&!i.disabled&&(s='<div class="w2ui-tab-close w2ui-action '.concat(this.active===i.id?"active":"",'"\n                data-mouseenter=\'["tooltipShow", "').concat(i.id,'", "event"]\'\n                data-mouseleave=\'["tooltipHide", "').concat(i.id,'", "event"]\'\n                data-mousedown="stop"\n                data-mouseup=\'["clickClose", "').concat(i.id,'", "event"]\'>\n            </div>')),'\n            <div id="tabs_'.concat(this.name,"_tab_").concat(i.id,'" style="').concat(a," ").concat(i.style,'"\n               class="w2ui-tab w2ui-action ').concat(this.active===i.id?"active":""," ").concat(i.closable?"closable":""," ").concat(i.class?i.class:"",'"\n               data-mouseenter =\'["tooltipShow", "').concat(i.id,'", "event"]\'\n               data-mouseleave =\'["tooltipHide", "').concat(i.id,'", "event"]\'\n               data-mousedown  =\'["initReorder", "').concat(i.id,'", "event"]\'\n               data-click      =\'["click", "').concat(i.id,'", "event"]\'\n               >\n                    ').concat($e.lang(n,!0)+s,"\n            </div>")}},{key:"refresh",value:function(e){var t=(new Date).getTime();"up"==this.flow?$(this.box).addClass("w2ui-tabs-up"):$(this.box).removeClass("w2ui-tabs-up");var i=this.trigger({phase:"before",type:"refresh",target:null!=e?e:this.name,object:this.get(e)});if(!0!==i.isCancelled){if(null==e)for(var n=0;n<this.tabs.length;n++)this.refresh(this.tabs[n].id);else{var s="#tabs_"+this.name+"_tab_"+$e.escapeId(e),a=$(this.box).find(s),r=this.getTabHTML(e);0===a.length?$(this.box).find("#tabs_"+this.name+"_right").before(r):0==$(this.box).find(".tab-animate-insert").length&&a.replaceWith(r),$e.bindEvents("".concat(s,", ").concat(s," .w2ui-action"),this)}return $("#tabs_"+this.name+"_right").html(this.right),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}}},{key:"render",value:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(!0!==i.isCancelled){if(null!=e&&($(this.box).find("#tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),this.box=e),!this.box)return!1;var n='\n            <div class="w2ui-tabs-line"></div>\n            <div class="w2ui-scroll-wrapper w2ui-action" data-mousedown="resize">\n                <div id="tabs_'.concat(this.name,'_right" class="w2ui-tabs-right">').concat(this.right,'</div>\n            </div>\n            <div class="w2ui-scroll-left w2ui-action" data-click=\'["scroll","left"]\'></div>\n            <div class="w2ui-scroll-right w2ui-action" data-click=\'["scroll","right"]\'></div>');return $(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-tabs").html(n),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),$e.bindEvents($(this.box).find(".w2ui-action"),this),this.trigger($.extend(i,{phase:"after"})),this.refresh(),this.resize(),(new Date).getTime()-t}}},{key:"initReorder",value:function(e,t){if(this.reorder){var i,n=this,s=$("#tabs_"+this.name+"_tab_"+$e.escapeId(e)),a=this.get(e,!0),r=s.clone();r.attr("id","#tabs_"+this.name+"_tab_ghost"),this.tmp.moving={index:a,indexFrom:a,$tab:s,$ghost:r,divX:0,left:s.offset().left,parentX:$(this.box).offset().left,x:t.pageX,opacity:s.css("opacity")},$("body").off(".w2uiTabReorder").on("mousemove.w2uiTabReorder",(function(e){if(!n.tmp.reordering){if(i=n.trigger({phase:"before",type:"reorder",target:n.tabs[a].id,indexFrom:a,tab:n.tabs[a]}),!0===i.isCancelled)return;$().w2tag(),n.tmp.reordering=!0,r.addClass("moving"),r.css({"pointer-events":"none",position:"absolute",left:s.offset().left}),s.css("opacity",0),$(n.box).find(".w2ui-scroll-wrapper").append(r),$(n.box).find(".w2ui-tab-close").hide()}n.tmp.moving.divX=e.pageX-n.tmp.moving.x,r.css("left",n.tmp.moving.left-n.tmp.moving.parentX+n.tmp.moving.divX+"px"),n.dragMove(e)})).on("mouseup.w2uiTabReorder",(function(){$("body").off(".w2uiTabReorder"),r.css({transition:"0.1s",left:n.tmp.moving.$tab.offset().left-n.tmp.moving.parentX}),$(n.box).find(".w2ui-tab-close").show(),setTimeout((function(){r.remove(),s.css({opacity:n.tmp.moving.opacity}),n.tmp.reordering&&n.trigger($.extend(i,{phase:"after",indexTo:n.tmp.moving.index})),n.tmp.reordering=!1}),100)}))}}},{key:"scroll",value:function(e){var t,i=$(this.box),n=this,s=i.find(".w2ui-scroll-wrapper"),a=s.scrollLeft(),r=$(this.box).find(".w2ui-tabs-right"),o=s.outerWidth(),l=a+parseInt(r.offset().left)+parseInt(r.width());switch(e){case"left":t=a-o+50,t<=0&&(t=0),s.animate({scrollLeft:t},300);break;case"right":t=a+o-50,t>=l-o&&(t=l-o),s.animate({scrollLeft:t},300);break}setTimeout((function(){n.resize()}),350)}},{key:"resize",value:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(!0!==t.isCancelled){var i=$(this.box);i.find(".w2ui-scroll-left, .w2ui-scroll-right").hide();var n=i.find(".w2ui-scroll-wrapper"),s=$(i).find(".w2ui-tabs-right"),a=n.outerWidth(),r=s.length>0?s[0].offsetLeft+s[0].clientWidth:0,o=parseInt(i.css("padding-right"));if(a<r-o){n.scrollLeft()>0&&i.find(".w2ui-scroll-left").show();var l=parseInt(n.css("padding-right"));a<r-n.scrollLeft()-o-l&&i.find(".w2ui-scroll-right").show()}return this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});!0!==e.isCancelled&&($(this.box).find("#tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})))}},{key:"click",value:function(e,t){var i=this.get(e);if(null==i||i.disabled||this.tmp.reordering)return!1;var n=this.trigger({phase:"before",type:"click",target:e,tab:i,object:i,originalEvent:t});if(!0!==n.isCancelled){if($(this.box).find("#tabs_"+this.name+"_tab_"+$e.escapeId(this.active)).removeClass("active"),$(this.box).find("#tabs_"+this.name+"_tab_"+$e.escapeId(this.active)).removeClass("active"),this.active=i.id,"string"==typeof i.route){var s=""!==i.route?String("/"+i.route).replace(/\/{2,}/g,"/"):"",a=$e.parseRoute(s);if(a.keys.length>0)for(var r=0;r<a.keys.length;r++)null!=this.routeData[a.keys[r].name]&&(s=s.replace(new RegExp(":"+a.keys[r].name,"g"),this.routeData[a.keys[r].name]));setTimeout((function(){window.location.hash=s}),1)}this.trigger($.extend(n,{phase:"after"})),this.refresh(e)}}},{key:"clickClose",value:function(e,t){var i=this,n=this.get(e);if(null==n||n.disabled)return!1;var s=this.trigger({phase:"before",type:"close",target:e,object:this.get(e),originalEvent:t});!0!==s.isCancelled&&(this.animateClose(e).then((function(){i.remove(e),i.trigger($.extend(s,{phase:"after"})),i.refresh()})),t.stopPropagation())}},{key:"animateClose",value:function(e){var t=this;return new Promise((function(i,n){var s=$(t.box).find("#tabs_"+t.name+"_tab_"+$e.escapeId(e)),a=parseInt(s.css("width")||0),r=$('<div class="tab-animate-close" style="display: inline-block; flex-shrink: 0; width: '.concat(a,'px; transition: width 0.25s"></div>'));s.replaceWith(r),setTimeout((function(){r.css({width:"0px"})}),1),setTimeout((function(){r.remove(),t.resize(),i()}),300)}))}},{key:"animateInsert",value:function(e,t){var i=this;return new Promise((function(n,s){var a=$(i.box).find("#tabs_"+i.name+"_tab_"+$e.escapeId(e)),r=$(i.getTabHTML(t.id));if(0==a.length)a=$(i.box).find("#tabs_tabs_right"),a.before(r),i.resize();else{r.css({opacity:0}),$(i.box).find("#tabs_tabs_right").before(r);var o=$("#"+r.attr("id")),l=parseInt(o.css("width")||0),c=$('<div class="tab-animate-insert" style="display: inline-block; flex-shrink: 0; width: 0px; transition: width 0.25s"></div>');a.before(c),r.hide(),r.insertBefore(c),setTimeout((function(){c.css({width:l+"px"})}),1),setTimeout((function(){c.remove(),r.css({opacity:1}).show(),i.refresh(t.id),i.resize(),n()}),300)}}))}}]),i}(we),je=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;Object(me["a"])(this,i),n=t.call(this,e.name),n.box=null,n.name=null,n.routeData={},n.items=[],n.right="",n.tooltip="top|left",n.onClick=null,n.onRender=null,n.onRefresh=null,n.onResize=null,n.onDestroy=null,n.item_template={id:null,type:"button",text:null,html:"",tooltip:null,count:null,hidden:!1,disabled:!1,checked:!1,icon:null,route:null,arrow:null,style:null,group:null,items:null,selected:null,overlay:{},color:null,options:{advanced:!1,transparent:!0,html:""},onClick:null,onRefresh:null},n.tmp={};var s=e.items;return delete e.items,$.extend(!0,Object(ue["a"])(n),e),Array.isArray(s)&&n.add(s),n}return Object(ve["a"])(i,[{key:"add",value:function(e){this.insert(null,e)}},{key:"insert",value:function(e,t){var i=this;Array.isArray(t)||(t=[t]),t.forEach((function(t){var n=["button","check","radio","drop","menu","menu-radio","menu-check","color","text-color","html","break","spacer","new-line"];if(-1!=n.indexOf(String(t.type)))if(null!=t.id||-1!=["break","spacer","new-line"].indexOf(t.type))if(null!=t.type){if($e.checkUniqueId(t.id,i.items,"toolbar",i.name)){var s=Object.assign({},i.item_template,t);if("menu-check"==s.type?(Array.isArray(s.selected)||(s.selected=[]),Array.isArray(s.items)&&s.items.forEach((function(e){e.checked&&-1==s.selected.indexOf(e.id)&&s.selected.push(e.id),e.checked||-1==s.selected.indexOf(e.id)||(e.checked=!0),null==e.checked&&(e.checked=!1)}))):"menu-radio"==s.type&&Array.isArray(s.items)&&s.items.forEach((function(e){e.checked&&null==s.selected?s.selected=e.id:e.checked=!1,e.checked||s.selected!=e.id||(e.checked=!0),null==e.checked&&(e.checked=!1)})),null==e)i.items.push(s);else{var a=i.get(e,!0);i.items=i.items.slice(0,a).concat([s],i.items.slice(a))}s.line=s.line||1,i.refresh(s.id)}}else console.log('ERROR: The parameter "type" is required but not supplied.',t);else console.log('ERROR: The parameter "id" is required but not supplied.',t);else console.log('ERROR: The parameter "type" should be one of the following:',n,", but ".concat(t.type," is supplied."),t)})),this.resize()}},{key:"remove",value:function(){var e=this,t=0;return Array.from(arguments).forEach((function(i){var n=e.get(i);if(n&&-1==String(i).indexOf(":")){t++,$(e.box).find("#tb_"+e.name+"_item_"+$e.escapeId(n.id)).remove();var s=e.get(n.id,!0);null!=s&&e.items.splice(s,1)}})),this.resize(),t}},{key:"set",value:function(e,t){var i=this.get(e);return null!=i&&(Object.assign(i,t),this.refresh(String(e).split(":")[0]),!0)}},{key:"get",value:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.items.length;n++)null!=this.items[n].id&&i.push(this.items[n].id);return i}for(var s=String(e).split(":"),a=0;a<this.items.length;a++){var r=this.items[a];if(-1!=["menu","menu-radio","menu-check"].indexOf(r.type)&&2==s.length&&r.id==s[0]){var o=r.items;"function"==typeof o&&(o=o(this));for(var l=0;l<o.length;l++){var c=o[l];if(c.id==s[1]||null==c.id&&c.text==s[1])return 1==t?l:c;if(Array.isArray(c.items))for(var d=0;d<c.items.length;d++)if(c.items[d].id==s[1]||null==c.items[d].id&&c.items[d].text==s[1])return 1==t?l:c.items[d]}}else if(r.id==s[0])return 1==t?a:r}return null}},{key:"show",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&(n.hidden=!1,t.push(String(i).split(":")[0]))})),setTimeout((function(){t.forEach((function(t){e.refresh(t),e.resize()}))}),15),t}},{key:"hide",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&(n.hidden=!0,t.push(String(i).split(":")[0]))})),setTimeout((function(){t.forEach((function(t){e.refresh(t),e.tooltipHide(t),e.resize()}))}),15),t}},{key:"enable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&(n.disabled=!1,t.push(String(i).split(":")[0]))})),setTimeout((function(){t.forEach((function(t){e.refresh(t)}))}),15),t}},{key:"disable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&(n.disabled=!0,t.push(String(i).split(":")[0]))})),setTimeout((function(){t.forEach((function(t){e.refresh(t),e.tooltipHide(t)}))}),15),t}},{key:"check",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);n&&-1==String(i).indexOf(":")&&(n.checked=!0,t.push(String(i).split(":")[0]))})),setTimeout((function(){t.forEach((function(t){e.refresh(t)}))}),15),t}},{key:"uncheck",value:function(){var e=this,t=this,i=[];return Array.from(arguments).forEach((function(n){var s=e.get(n);s&&-1==String(n).indexOf(":")&&(-1!=["menu","menu-radio","menu-check","drop","color","text-color"].indexOf(s.type)&&s.checked&&setTimeout((function(){var e=$("#tb_"+t.name+"_item_"+$e.escapeId(s.id));e.w2overlay({name:t.name,data:{"tb-item":s.id}})}),1),s.checked=!1,i.push(String(n).split(":")[0]))})),setTimeout((function(){i.forEach((function(t){e.refresh(t)}))}),15),i}},{key:"click",value:function(e,t){var i=this,n=String(e).split(":"),s=this.get(n[0]),a=s&&s.items?$e.normMenu.call(this,s.items,s):[];if(n.length>1){var r=this.get(e);r&&!r.disabled&&i.menuClick({name:i.name,item:s,subItem:r,originalEvent:t})}else if(s&&!s.disabled){var o=this.trigger({phase:"before",type:"click",target:null!=e?e:this.name,item:s,object:s,originalEvent:t});if(!0===o.isCancelled)return;var l="#tb_"+this.name+"_item_"+$e.escapeId(s.id);if($(l).removeClass("down"),"radio"==s.type){for(var c=0;c<this.items.length;c++){var d=this.items[c];null!=d&&d.id!=s.id&&"radio"===d.type&&(d.group==s.group&&d.checked&&(d.checked=!1,this.refresh(d.id)))}s.checked=!0,$(l).addClass("checked")}if(-1!=["menu","menu-radio","menu-check","drop","color","text-color"].indexOf(s.type)&&(i.tooltipHide(e),s.checked?setTimeout((function(){var e=$("#tb_"+i.name+"_item_"+$e.escapeId(s.id));e.w2overlay({name:i.name,data:{"tb-item":s.id}}),s.checked=!1,i.refresh(s.id)}),1):setTimeout((function(){var e=$("#tb_"+i.name+"_item_"+$e.escapeId(s.id));$.isPlainObject(s.overlay)||(s.overlay={});var t=(e.width()-50)/2;if(t>19&&(t=19),"drop"==s.type&&e.w2overlay(s.html,$.extend({name:i.name,left:t,top:3,data:{"tb-item":s.id}},s.overlay,{onHide:function(e){r()}})),-1!=["menu","menu-radio","menu-check"].indexOf(s.type)){var n="normal";"menu-radio"==s.type&&(n="radio",a.forEach((function(e){s.selected==e.id?e.checked=!0:e.checked=!1}))),"menu-check"==s.type&&(n="check",a.forEach((function(e){Array.isArray(s.selected)&&-1!=s.selected.indexOf(e.id)?e.checked=!0:e.checked=!1}))),i.tmp.overlayEl=e,e.w2menu($.extend({name:i.name,items:a,left:t,top:3,data:{"tb-item":s.id}},s.overlay,{type:n,remove:function(e){i.menuClick({name:i.name,remove:!0,item:s,subItem:e.item,originalEvent:e.originalEvent,keepOpen:e.keepOpen})},select:function(e){i.menuClick({name:i.name,item:s,subItem:e.item,originalEvent:e.originalEvent,keepOpen:e.keepOpen})},onHide:function(e){r()}}))}function r(e){s.checked=!1,$(l).removeClass("checked")}-1!=["color","text-color"].indexOf(s.type)&&$(e).w2color($.extend({color:s.color,onHide:function(e){r(),i._tmpColor&&i.colorClick({name:i.name,item:s,color:i._tmpColor,final:!0}),delete i._tmpColor},onSelect:function(e){null!=e&&(i.colorClick({name:i.name,item:s,color:e}),i._tmpColor=e)}},s.options))}),1)),-1!=["check","menu","menu-radio","menu-check","drop","color","text-color"].indexOf(s.type)&&(s.checked=!s.checked,s.checked?$(l).addClass("checked"):$(l).removeClass("checked")),s.route){var u=String("/"+s.route).replace(/\/{2,}/g,"/"),h=$e.parseRoute(u);if(h.keys.length>0)for(var p=0;p<h.keys.length;p++)u=u.replace(new RegExp(":"+h.keys[p].name,"g"),this.routeData[h.keys[p].name]);setTimeout((function(){window.location.hash=u}),1)}t&&-1!=["button","check","radio"].indexOf(s.type)&&this.tooltipShow(e,t,!0),this.trigger($.extend(o,{phase:"after"}))}}},{key:"scroll",value:function(e,t){var i,n=this,s=$(this.box).find(".w2ui-tb-line:nth-child(".concat(t,") .w2ui-scroll-wrapper")),a=s.scrollLeft(),r=$(s).find(".w2ui-tb-right"),o=s.outerWidth(),l=a+parseInt(r.offset().left)+parseInt(r.width());switch(e){case"left":i=a-o+50,i<=0&&(i=0),s.animate({scrollLeft:i},300);break;case"right":i=a+o-50,i>=l-o&&(i=l-o),s.animate({scrollLeft:i},300);break}setTimeout((function(){n.resize()}),350)}},{key:"render",value:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(!0!==i.isCancelled&&(null!=e&&($(this.box).find(".w2ui-scroll-wrapper .w2ui-tb-right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),this.box=e),this.box)){Array.isArray(this.right)||(this.right=[this.right]);for(var n="",s=0,a=0;a<this.items.length;a++){var r=this.items[a];null!=r&&(null==r.id&&(r.id="item_"+a),null!=r.caption&&console.log("NOTICE: toolbar item.caption property is deprecated, please use item.text. Item -> ",r),null!=r.hint&&console.log("NOTICE: toolbar item.hint property is deprecated, please use item.tooltip. Item -> ",r),0!==a&&"new-line"!=r.type||(s++,n+='\n                    <div class="w2ui-tb-line">\n                        <div class="w2ui-scroll-wrapper w2ui-action" data-mousedown="resize">\n                            <div class="w2ui-tb-right">'.concat(this.right[s-1]||"",'</div>\n                        </div>\n                        <div class="w2ui-scroll-left w2ui-action" data-click=\'["scroll", "left", "').concat(s,'"]\'></div>\n                        <div class="w2ui-scroll-right w2ui-action" data-click=\'["scroll", "right", "').concat(s,"\"]'></div>\n                    </div>\n                ")),r.line=s)}return $(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-toolbar").html(n),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),$e.bindEvents($(this.box).find(".w2ui-tb-line .w2ui-action"),this),this.refresh(),this.resize(),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}}},{key:"refresh",value:function(e){var t,i=(new Date).getTime(),n=this.trigger({phase:"before",type:"refresh",target:null!=e?e:this.name,item:this.get(e)});if(!0!==n.isCancelled)if(null!=e){var s=this.get(e);if(null==s)return!1;if("function"!=typeof s.onRefresh||(t=this.trigger({phase:"before",type:"refresh",target:e,item:s,object:s}),!0!==t.isCancelled)){var a=$(this.box).find("#tb_".concat(this.name,"_item_").concat($e.escapeId(s.id))),r=this.getItemHTML(s);if(this.tooltipHide(e,{}),"spacer"==s.type&&$(this.box).find(".w2ui-tb-line:nth-child(".concat(s.line)).find(".w2ui-tb-right").css("width","auto"),0===a.length){var o=parseInt(this.get(e,!0))+1,l=$(this.box).find("#tb_".concat(this.name,"_item_").concat($e.escapeId(this.items[o]?this.items[o].id:"")));0==l.length?l=$(this.box).find(".w2ui-tb-line:nth-child(".concat(s.line)).find(".w2ui-tb-right").before(r):l.after(r),$e.bindEvents("#tb_".concat(this.name,"_item_").concat($e.escapeId(s.id)),this)}else{if(-1!=["menu","menu-radio","menu-check","drop","color","text-color"].indexOf(s.type)){var c=$("#w2ui-overlay-"+this.name);c.length>0&&(0==s.checked?c[0].hide():-1!=["menu","menu-radio","menu-check"].indexOf(s.type)&&$(this.tmp.overlayEl).w2menu("refresh",{items:s.items}))}a.replaceWith($(r)),s.hidden?a.css("display","none"):a.css("display",""),s.disabled?a.addClass("disabled"):a.removeClass("disabled"),$e.bindEvents("#tb_".concat(this.name,"_item_").concat($e.escapeId(s.id)),this)}return"function"==typeof s.onRefresh&&this.trigger($.extend(t,{phase:"after"})),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-i}}else for(var d=0;d<this.items.length;d++){var u=this.items[d];null==u.id&&(u.id="item_"+d),this.refresh(u.id)}}},{key:"resize",value:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(!0!==t.isCancelled)return $(this.box).find(".w2ui-tb-line").each((function(e,t){var i=$(t);i.find(".w2ui-scroll-left, .w2ui-scroll-right").hide();var n=i.find(".w2ui-scroll-wrapper"),s=$(i).find(".w2ui-tb-right"),a=n.outerWidth(),r=s.length>0?s[0].offsetLeft+s[0].clientWidth:0,o=parseInt(i.css("padding-right"));if(a<r-o){n.scrollLeft()>0&&i.find(".w2ui-scroll-left").show();var l=parseInt(n.css("padding-right"));a<r-n.scrollLeft()-o-l&&i.find(".w2ui-scroll-right").show()}})),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});!0!==e.isCancelled&&($(this.box).find(".w2ui-scroll-wrapper  .w2ui-tb-right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),$(this.box).html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})))}},{key:"getItemHTML",value:function(e){var t="";null!=e.caption&&null==e.text&&(e.text=e.caption),null==e.text&&(e.text=""),null==e.tooltip&&null!=e.hint&&(e.tooltip=e.hint),null==e.tooltip&&(e.tooltip=""),"function"===typeof e.get||!Array.isArray(e.items)&&"function"!=typeof e.items||(e.get=function(t){var i=e.items;return"function"==typeof i&&(i=e.items(e)),i.find((function(e){return e.id==t}))});var i="",n="function"==typeof e.text?e.text.call(this,e):e.text;switch(e.icon&&(i='<div class="w2ui-tb-icon">\n                       <span class="'.concat("function"==typeof e.icon?e.icon.call(this,e):e.icon,'"></span>\n                   </div>')),e.type){case"color":case"text-color":"string"==typeof e.color&&("#"==e.color.substr(0,1)&&(e.color=e.color.substr(1)),3!=e.color.length&&6!=e.color.length||(e.color="#"+e.color)),"color"==e.type&&(n='<span class="w2ui-tb-color-box" style="background-color: '.concat(null!=e.color?e.color:"#fff",'"></span>\n                           ').concat(e.text?'<div style="margin-left: 17px;">'.concat($e.lang(e.text,!0),"</div>"):"")),"text-color"==e.type&&(n='<span style="color: '+(null!=e.color?e.color:"#444")+';">'+(e.text?$e.lang(e.text,!0):"<b>Aa</b>")+"</span>");case"menu":case"menu-check":case"menu-radio":case"button":case"check":case"radio":case"drop":var s=!0===e.arrow||!1!==e.arrow&&-1!=["menu","menu-radio","menu-check","drop","color","text-color"].indexOf(e.type);t='\n                    <div id="tb_'.concat(this.name,"_item_").concat(e.id,'" style="').concat(e.hidden?"display: none":"",'"\n                        class="w2ui-tb-button').concat(e.checked?" checked":"").concat(e.class?" "+e.class:"").concat(e.disabled?" disabled":"").concat(i?"":" no-icon",'"\n                        ').concat(e.disabled?"":'data-click=\'["click","'.concat(e.id,'"]\'\n                               data-mouseenter=\'["mouseAction", "event", "this", "enter", "').concat(e.id,'"]\'\n                               data-mouseleave=\'["mouseAction", "event", "this", "leave", "').concat(e.id,'"]\'\n                               data-mousedown=\'["mouseAction", "event", "this", "down", "').concat(e.id,'"]\'\n                               data-mouseup=\'["mouseAction", "event", "this", "up", "').concat(e.id,"\"]'"),"\n                    >\n                        ").concat(i,"\n                        ").concat(""!=n?'<div class="w2ui-tb-text" style="'.concat(e.style?e.style:"",'">\n                                    ').concat($e.lang(n,!0),"\n                                    ").concat(null!=e.count?'<span class="w2ui-tb-count"><span>'.concat(e.count,"</span></span>"):"","\n                                    ").concat(s?'<span class="w2ui-tb-down"><span></span></span>':"","\n                                </div>"):"","\n                    </div>\n                ");break;case"break":t='<div id="tb_'.concat(this.name,"_item_").concat(e.id,'" class="w2ui-tb-break">&#160;</div>');break;case"spacer":t='<div id="tb_'.concat(this.name,"_item_").concat(e.id,'" class="w2ui-tb-spacer"></div>');break;case"html":t='<div id="tb_'.concat(this.name,"_item_").concat(e.id,'" class="w2ui-tb-html">').concat("function"==typeof e.html?e.html.call(this,e):e.html,"</div>");break}return t}},{key:"tooltipShow",value:function(e,t,i){if(null!=this.tooltip){var n=$(this.box).find("#tb_"+this.name+"_item_"+$e.escapeId(e)),s=this.get(e),a=this.tooltip,r=s.tooltip;"function"==typeof r&&(r=r.call(this,s)),clearTimeout(this._tooltipTimer),this._tooltipTimer=setTimeout((function(){if(!0!==n.prop("_mouse_tooltip")){if(n.prop("_mouse_tooltip",!0),-1!=["menu","menu-radio","menu-check","drop","color","text-color"].indexOf(s.type)&&1==s.checked)return;n.w2tag($e.lang(r,!0),{position:a})}}),0),n.prop("_mouse_tooltip")&&1==i&&n.w2tag($e.lang(r,!0),{position:a})}}},{key:"tooltipHide",value:function(e,t){if(null!=this.tooltip){var i=$(this.box).find("#tb_"+this.name+"_item_"+$e.escapeId(e));clearTimeout(this._tooltipTimer),setTimeout((function(){!0===i.prop("_mouse_tooltip")&&(i.removeProp("_mouse_tooltip"),i.w2tag())}),1)}}},{key:"menuClick",value:function(e){var t=this;if(e.item&&!e.item.disabled){var i=this.trigger({phase:"before",type:!0!==e.remove?"click":"remove",target:e.item.id+":"+e.subItem.id,item:e.item,subItem:e.subItem,originalEvent:e.originalEvent});if(!0===i.isCancelled)return;var n=e.subItem,s=this.get(e.item.id),a=s.items;if("function"==typeof a&&(a=s.items()),"menu-radio"==s.type&&(s.selected=n.id,Array.isArray(a)&&a.forEach((function(e){!0===e.checked&&delete e.checked,Array.isArray(e.items)&&e.items.forEach((function(e){!0===e.checked&&delete e.checked}))})),n.checked=!0),"menu-check"==s.type)if(Array.isArray(s.selected)||(s.selected=[]),null==n.group){var r=s.selected.indexOf(n.id);-1==r?(s.selected.push(n.id),n.checked=!0):(s.selected.splice(r,1),n.checked=!1)}else if(!1===n.group);else{var o=[];(function e(t){t.forEach((function(t){if(t.group===n.group){var i=s.selected.indexOf(t.id);-1!=i&&(t.id!=n.id&&o.push(t.id),s.selected.splice(i,1))}Array.isArray(t.items)&&e(t.items)}))})(a);var l=s.selected.indexOf(n.id);-1==l&&(s.selected.push(n.id),n.checked=!0)}if("string"==typeof n.route){var c=""!==n.route?String("/"+n.route).replace(/\/{2,}/g,"/"):"",d=$e.parseRoute(c);if(d.keys.length>0)for(var u=0;u<d.keys.length;u++)null!=t.routeData[d.keys[u].name]&&(c=c.replace(new RegExp(":"+d.keys[u].name,"g"),this.routeData[d.keys[u].name]));setTimeout((function(){window.location.hash=c}),1)}this.refresh(e.item.id),this.trigger($.extend(i,{phase:"after"}))}}},{key:"colorClick",value:function(e){var t=this;if(e.item&&!e.item.disabled){var i=this.trigger({phase:"before",type:"click",target:e.item.id,item:e.item,color:e.color,final:e.final,originalEvent:e.originalEvent});if(!0===i.isCancelled)return;e.item.color=e.color,t.refresh(e.item.id),this.trigger($.extend(i,{phase:"after"}))}}},{key:"mouseAction",value:function(e,t,i,n){var s=this.get(n);if(!s.disabled&&!s.hidden)switch(i){case"enter":$(t).addClass("over"),this.tooltipShow(n,e);break;case"leave":$(t).removeClass("over").removeClass("down"),this.tooltipHide(n,e);break;case"down":$(t).addClass("down");break;case"up":$(t).removeClass("down");break}}}]),i}(we),ze=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;Object(me["a"])(this,i),n=t.call(this,e.name),n.name=null,n.box=null,n.sidebar=null,n.parent=null,n.nodes=[],n.menu=[],n.routeData={},n.selected=null,n.img=null,n.icon=null,n.style="",n.topHTML="",n.bottomHTML="",n.flatButton=!1,n.keyboard=!0,n.flat=!1,n.hasFocus=!1,n.levelPadding=12,n.skipRefresh=!1,n.tabIndex=0,n.handle={size:0,style:"",content:""},n.onClick=null,n.onDblClick=null,n.onContextMenu=null,n.onMenuClick=null,n.onExpand=null,n.onCollapse=null,n.onKeydown=null,n.onRender=null,n.onRefresh=null,n.onResize=null,n.onDestroy=null,n.onFocus=null,n.onBlur=null,n.onFlat=null,n.node_template={id:null,text:"",count:null,img:null,icon:null,nodes:[],style:"",route:null,selected:!1,expanded:!1,hidden:!1,disabled:!1,group:!1,groupShowHide:!0,collapsible:!1,plus:!1,onClick:null,onDblClick:null,onContextMenu:null,onExpand:null,onCollapse:null,parent:null,sidebar:null};var s=e.nodes;return delete e.nodes,$.extend(!0,Object(ue["a"])(n),e),Array.isArray(s)&&n.add(s),n}return Object(ve["a"])(i,[{key:"add",value:function(e,t){return 1==arguments.length&&(t=arguments[0],e=this),"string"==typeof e&&(e=this.get(e)),null!=e&&""!=e||(e=this),this.insert(e,null,t)}},{key:"insert",value:function(e,t,i){var n,s,a,r,o;if(2==arguments.length&&"string"==typeof e)if(i=arguments[1],t=arguments[0],null!=t){if(s=this.get(t),null==s)return Array.isArray(i)||(i=[i]),null!=i[0].caption&&null==i[0].text&&(console.log("NOTICE: sidebar node.caption property is deprecated, please use node.text. Node -> ",i[0]),i[0].text=i[0].caption),n=i[0].text,console.log('ERROR: Cannot insert node "'+n+'" because cannot find node "'+t+'" to insert before.'),null;e=this.get(t).parent}else e=this;"string"==typeof e&&(e=this.get(e)),null!=e&&""!=e||(e=this),Array.isArray(i)||(i=[i]);for(var l=0;l<i.length;l++)if(r=i[l],null!=typeof r.id)if(null==this.get(this,r.id)){if(a=Object.assign({},this.node_template,r),a.sidebar=this,a.parent=e,o=a.nodes||[],a.nodes=[],null==t)e.nodes.push(a);else{if(s=this.get(e,t,!0),null==s)return console.log('ERROR: Cannot insert node "'+r.text+'" because cannot find node "'+t+'" to insert before.'),null;e.nodes.splice(s,0,a)}o.length>0&&this.insert(a,null,o)}else console.log("ERROR: Cannot insert node with id="+r.id+" (text: "+r.text+") because another node with the same id already exists.");else null!=r.caption&&null==r.text&&(console.log("NOTICE: sidebar node.caption property is deprecated, please use node.text"),r.text=r.caption),n=r.text,console.log('ERROR: Cannot insert node "'+n+'" because it has no id.');return this.skipRefresh||this.refresh(e.id),a}},{key:"remove",value:function(){var e,t=this,i=0;return Array.from(arguments).forEach((function(n){if(e=t.get(n),null!=e){null!=t.selected&&t.selected===e.id&&(t.selected=null);var s=t.get(e.parent,n,!0);null!=s&&(e.parent.nodes[s].selected&&e.sidebar.unselect(e.id),e.parent.nodes.splice(s,1),i++)}})),this.skipRefresh||(i>0&&1==arguments.length?this.refresh(e.parent.id):this.refresh()),i}},{key:"set",value:function(e,t,i){if(2==arguments.length&&(i=t,t=e,e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return null;for(var n=0;n<e.nodes.length;n++){if(e.nodes[n].id===t){var s=this.update(t,i);if(0!=Object.keys(s).length){var a=i.nodes;$.extend(e.nodes[n],i,{nodes:[]}),null!=a&&this.add(e.nodes[n],a),this.skipRefresh||this.refresh(t)}return!0}var r=this.set(e.nodes[n],t,i);if(r)return!0}return!1}},{key:"get",value:function(e,t,i){if(0===arguments.length){for(var n=[],s=this.find({}),a=0;a<s.length;a++)null!=s[a].id&&n.push(s[a].id);return n}if((1==arguments.length||2==arguments.length&&!0===t)&&(i=t,t=e,e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return null;for(var r=0;r<e.nodes.length;r++){if(e.nodes[r].id==t)return!0===i?r:e.nodes[r];var o=this.get(e.nodes[r],t,i);if(o||0===o)return o}return null}},{key:"find",value:function(e,t,i){if(1==arguments.length&&(t=e,e=this),i||(i=[]),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return i;for(var n=0;n<e.nodes.length;n++){var s=!0;for(var a in t)e.nodes[n][a]!=t[a]&&(s=!1);s&&i.push(e.nodes[n]),e.nodes[n].nodes.length>0&&(i=this.find(e.nodes[n],t,i))}return i}},{key:"sort",value:function(e,t){var i=this;e&&"object"==Object(ge["a"])(e)||(e={}),null==e.foldersFirst&&(e.foldersFirst=!0),null==e.caseSensitive&&(e.caseSensitive=!1),null==e.reverse&&(e.reverse=!1),null==t&&(t=this.nodes),t.sort((function(t,i){var n=t.nodes&&t.nodes.length>0,s=i.nodes&&i.nodes.length>0;if(!1===e.foldersFirst||!n&&!s||n&&s){var a=t.text,r=i.text;e.caseSensitive||(a=a.toLowerCase(),r=r.toLowerCase()),null!=t.order&&(a=t.order),null!=i.order&&(r=i.order);var o=$e.naturalCompare(a,r);return(1===o||-1===o)&e.reverse?-o:o}return n&&!s?e.reverse?1:-1:!n&&s?e.reverse?-1:1:void 0})),t.forEach((function(t){t.nodes&&t.nodes.length>0&&i.sort(e,t.nodes)}))}},{key:"each",value:function(e,t){var i=this;null==t&&(t=this.nodes),t.forEach((function(t){e.call(i,t),t.nodes&&t.nodes.length>0&&i.each(e,t.nodes)}))}},{key:"search",value:function(e){var t=0,i=e.toLowerCase();return this.each((function(e){-1===e.text.toLowerCase().indexOf(i)?e.hidden=!0:(t++,n(e),e.hidden=!1)})),this.refresh(),t;function n(e){e.parent&&(e.parent.hidden=!1,n(e.parent))}}},{key:"show",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);null!=n&&!1!==n.hidden&&(n.hidden=!1,t.push(n.id))})),t.length>0&&(1==arguments.length?this.refresh(arguments[0]):this.refresh()),t}},{key:"hide",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);null!=n&&!0!==n.hidden&&(n.hidden=!0,t.push(n.id))})),t.length>0&&(1==arguments.length?this.refresh(arguments[0]):this.refresh()),t}},{key:"enable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);null!=n&&!1!==n.disabled&&(n.disabled=!1,t.push(n.id))})),t.length>0&&(1==arguments.length?this.refresh(arguments[0]):this.refresh()),t}},{key:"disable",value:function(){var e=this,t=[];return Array.from(arguments).forEach((function(i){var n=e.get(i);null!=n&&!0!==n.disabled&&(n.disabled=!0,n.selected&&e.unselect(n.id),t.push(n.id))})),t.length>0&&(1==arguments.length?this.refresh(arguments[0]):this.refresh()),t}},{key:"select",value:function(e){var t=this.get(e);if(!t)return!1;if(this.selected==e&&t.selected)return!1;this.unselect(this.selected);var i=$(this.box).find("#node_"+$e.escapeId(e));return i.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),i.length>0&&this.scrollIntoView(e,!0),t.selected=!0,this.selected=e,!0}},{key:"unselect",value:function(e){0===arguments.length&&(e=this.selected);var t=this.get(e);return!!t&&(t.selected=!1,$(this.box).find("#node_"+$e.escapeId(e)).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),this.selected==e&&(this.selected=null),!0)}},{key:"toggle",value:function(e){var t=this.get(e);return null!=t&&(t.plus?(this.set(e,{plus:!1}),this.expand(e),void this.refresh(e)):0!==t.nodes.length&&(!!t.collapsible&&(this.get(e).expanded?this.collapse(e):this.expand(e))))}},{key:"collapse",value:function(e){var t=this,i=this.get(e);if(null==i)return!1;var n=this.trigger({phase:"before",type:"collapse",target:e,object:i});return!0!==n.isCancelled?($(this.box).find("#node_"+$e.escapeId(e)+"_sub").slideUp(200),$(this.box).find("#node_"+$e.escapeId(e)+" .w2ui-expanded").removeClass("w2ui-expanded").addClass("w2ui-collapsed"),i.expanded=!1,this.trigger($.extend(n,{phase:"after"})),setTimeout((function(){t.refresh(e)}),200),!0):void 0}},{key:"collapseAll",value:function(e){if(null==e&&(e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return!1;for(var t=0;t<e.nodes.length;t++)!0===e.nodes[t].expanded&&(e.nodes[t].expanded=!1),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.collapseAll(e.nodes[t]);return this.refresh(e.id),!0}},{key:"expand",value:function(e){var t=this,i=this.get(e),n=this.trigger({phase:"before",type:"expand",target:e,object:i});if(!0!==n.isCancelled)return $(this.box).find("#node_"+$e.escapeId(e)+"_sub").slideDown(200),$(this.box).find("#node_"+$e.escapeId(e)+" .w2ui-collapsed").removeClass("w2ui-collapsed").addClass("w2ui-expanded"),i.expanded=!0,this.trigger($.extend(n,{phase:"after"})),setTimeout((function(){t.refresh(e)}),200),!0}},{key:"expandAll",value:function(e){if(null==e&&(e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return!1;for(var t=0;t<e.nodes.length;t++)!1===e.nodes[t].expanded&&(e.nodes[t].expanded=!0),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.expandAll(e.nodes[t]);this.refresh(e.id)}},{key:"expandParents",value:function(e){var t=this.get(e);return null!=t&&(t.parent&&(t.parent.expanded||(t.parent.expanded=!0,this.refresh(t.parent.id)),this.expandParents(t.parent.id)),!0)}},{key:"click",value:function(e,t){var i=this,n=this.get(e);if(null!=n&&!n.disabled&&!n.group){$(i.box).find(".w2ui-node.w2ui-selected").each((function(e,t){var n=$(t).attr("id").replace("node_",""),s=i.get(n);null!=s&&(s.selected=!1),$(t).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected")}));var s=$(i.box).find("#node_"+$e.escapeId(e)),a=$(i.box).find("#node_"+$e.escapeId(i.selected));s.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),setTimeout((function(){var r=i.trigger({phase:"before",type:"click",target:e,originalEvent:t,node:n,object:n});if(!0===r.isCancelled)return s.removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),void a.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected");if(null!=a&&(a.selected=!1),i.get(e).selected=!0,i.selected=e,"string"==typeof n.route){var o=""!==n.route?String("/"+n.route).replace(/\/{2,}/g,"/"):"",l=$e.parseRoute(o);if(l.keys.length>0)for(var c=0;c<l.keys.length;c++)null!=i.routeData[l.keys[c].name]&&(o=o.replace(new RegExp(":"+l.keys[c].name,"g"),i.routeData[l.keys[c].name]));setTimeout((function(){window.location.hash=o}),1)}i.trigger($.extend(r,{phase:"after"}))}),1)}}},{key:"focus",value:function(e){var t=this,i=this.trigger({phase:"before",type:"focus",target:this.name,originalEvent:e});if(!0===i.isCancelled)return!1;this.hasFocus=!0,$(this.box).find(".w2ui-sidebar-body").addClass("w2ui-focus"),setTimeout((function(){var e=$(t.box).find("#sidebar_"+t.name+"_focus");e.is(":focus")||e.focus()}),10),this.trigger($.extend(i,{phase:"after"}))}},{key:"blur",value:function(e){var t=this.trigger({phase:"before",type:"blur",target:this.name,originalEvent:e});if(!0===t.isCancelled)return!1;this.hasFocus=!1,$(this.box).find(".w2ui-sidebar-body").removeClass("w2ui-focus"),this.trigger($.extend(t,{phase:"after"}))}},{key:"keydown",value:function(e){var t=this,i=t.get(t.selected);if(!0===t.keyboard){i||(i=t.nodes[0]);var n=t.trigger({phase:"before",type:"keydown",target:t.name,originalEvent:e});!0!==n.isCancelled&&(13!=e.keyCode&&32!=e.keyCode||i.nodes.length>0&&t.toggle(t.selected),37==e.keyCode&&(i.nodes.length>0&&i.expanded?t.collapse(t.selected):(s(i.parent),i.parent.group||t.collapse(i.parent.id))),39==e.keyCode&&(i.nodes.length>0||i.plus)&&!i.expanded&&t.expand(t.selected),38==e.keyCode&&(null==t.get(t.selected)?s(this.nodes[0]||null):s(a(i,o))),40==e.keyCode&&(null==t.get(t.selected)?s(this.nodes[0]||null):s(a(i,r))),-1!=$.inArray(e.keyCode,[13,32,37,38,39,40])&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),t.trigger($.extend(n,{phase:"after"})))}function s(e,i){null==e||e.hidden||e.disabled||e.group||(t.click(e.id,i),setTimeout((function(){t.scrollIntoView()}),50))}function a(e,t){e=t(e);while(null!=e&&(e.hidden||e.disabled)){if(e.group)break;e=t(e)}return e}function r(e,i){if(null==e)return null;var n=e.parent,s=t.get(e.id,!0),a=null;if(e.expanded&&e.nodes.length>0&&!0!==i){var o=e.nodes[0];a=o.hidden||o.disabled||o.group?r(o):o}else a=n&&s+1<n.nodes.length?n.nodes[s+1]:r(n,!0);return null!=a&&(a.hidden||a.disabled||a.group)&&(a=r(a)),a}function o(e){if(null==e)return null;var i=e.parent,n=t.get(e.id,!0),s=n>0?l(i.nodes[n-1]):i;return null!=s&&(s.hidden||s.disabled||s.group)&&(s=o(s)),s}function l(e){if(e.expanded&&e.nodes.length>0){var t=e.nodes[e.nodes.length-1];return t.hidden||t.disabled||t.group?o(t):l(t)}return e}}},{key:"scrollIntoView",value:function(e,t){null==e&&(e=this.selected);var i=this.get(e);if(null!=i){var n=$(this.box).find(".w2ui-sidebar-body"),s=$(this.box).find("#node_"+$e.escapeId(e)),a=s.offset().top-n.offset().top;(a+s.height()>n.height()||a<=0)&&n.animate({scrollTop:n.scrollTop()+a-n.height()/2+s.height()},t?0:250,"linear")}}},{key:"dblClick",value:function(e,t){var i=this.get(e),n=this.trigger({phase:"before",type:"dblClick",target:e,originalEvent:t,object:i});!0!==n.isCancelled&&(this.toggle(e),this.trigger($.extend(n,{phase:"after"})))}},{key:"contextMenu",value:function(e,t){var i=this,n=i.get(e);e!=i.selected&&i.click(e);var s=i.trigger({phase:"before",type:"contextMenu",target:e,originalEvent:t,object:n,allowOnDisabled:!1});!0!==s.isCancelled&&(n.disabled&&!s.allowOnDisabled||(i.menu.length>0&&$(i.box).find("#node_"+$e.escapeId(e)).w2menu({items:i.menu,contextMenu:!0,originalEvent:t,onSelect:function(t){i.menuClick(e,parseInt(t.index),t.originalEvent)}}),t.preventDefault&&t.preventDefault(),i.trigger($.extend(s,{phase:"after"}))))}},{key:"menuClick",value:function(e,t,i){var n=this,s=n.trigger({phase:"before",type:"menuClick",target:e,originalEvent:i,menuIndex:t,menuItem:n.menu[t]});!0!==s.isCancelled&&n.trigger($.extend(s,{phase:"after"}))}},{key:"goFlat",value:function(){var e=this.trigger({phase:"before",type:"flat",goFlat:!this.flat});!0!==e.isCancelled&&(this.flat=!this.flat,this.refresh(),this.trigger($.extend(e,{phase:"after"})))}},{key:"render",value:function(e){var t=(new Date).getTime(),i=this,n=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(!0!==n.isCancelled&&(null!=e&&($(this.box).find("> div > div.w2ui-sidebar-body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),this.box=e),this.box)){$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-sidebar").html('<div><input id="sidebar_'+this.name+'_focus" '+(this.tabIndex?'tabindex="'+this.tabIndex+'"':"")+'   style="position: absolute; top: 0; right: 0; width: 1px; z-index: -1; opacity: 0" '+($e.isIOS?"readonly":"")+'/><div class="w2ui-sidebar-top"></div><div class="w2ui-sidebar-body"></div><div class="w2ui-sidebar-bottom"></div></div>'),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style);var s,a="";return 1==this.flatButton&&(a='<div class="w2ui-flat-'+(this.flat?"right":"left")+'" onclick="w2ui[\''+this.name+"'].goFlat()\"></div>"),""===this.topHTML&&""===a||($(this.box).find(".w2ui-sidebar-top").html(this.topHTML+a),$(this.box).find(".w2ui-sidebar-body").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),""!==this.bottomHTML&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-body").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),$(this.box).find("#sidebar_"+this.name+"_focus").on("focus",(function(e){clearTimeout(s),i.hasFocus||i.focus(e)})).on("blur",(function(e){s=setTimeout((function(){i.hasFocus&&i.blur(e)}),100)})).on("keydown",(function(e){9!=e.keyCode&&_e[i.name].keydown.call(_e[i.name],e)})),$(this.box).off("mousedown").on("mousedown",(function(e){setTimeout((function(){if(-1==["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName.toUpperCase())){var t=$(i.box).find("#sidebar_"+i.name+"_focus");if(!t.is(":focus")){if($(e.target).hasClass("w2ui-node")){var n=$(e.target).position().top+$(i.box).find(".w2ui-sidebar-top").height()+e.offsetY;t.css({top:n+"px",left:"0px"})}t.focus()}}}),1)})),this.trigger($.extend(n,{phase:"after"})),this.refresh(),(new Date).getTime()-t}}},{key:"update",value:function(e,t){var i,n=this.get(e);if(n){var s=$(this.box).find("#node_"+$e.escapeId(n.id));if(n.group)t.text&&(n.text=t.text,s.find(".w2ui-group-text").replaceWith("function"==typeof n.text?n.text.call(this,n):'<span class="w2ui-group-text">'+n.text+"</span>"),delete t.text),t.class&&(n.class=t.class,i=s.data("level"),s[0].className="w2ui-node-group w2ui-level-"+i+(n.class?" "+n.class:""),delete t.class),t.style&&(n.style=t.style,s.next()[0].style=n.style+";"+(!n.hidden&&n.expanded?"":"display: none;"),delete t.style);else{if(t.icon){var a=s.find(".w2ui-node-image > span");a.length>0&&(n.icon=t.icon,a[0].className="function"==typeof n.icon?n.icon.call(this,n):n.icon,delete t.icon)}if(t.count&&(n.count=t.count,s.find(".w2ui-node-count").html(n.count),s.find(".w2ui-node-count").length>0&&delete t.count),t.class&&s.length>0&&(n.class=t.class,i=s.data("level"),s[0].className="w2ui-node w2ui-level-"+i+(n.selected?" w2ui-selected":"")+(n.disabled?" w2ui-disabled":"")+(n.class?" "+n.class:""),delete t.class),t.text&&(n.text=t.text,s.find(".w2ui-node-text").html("function"==typeof n.text?n.text.call(this,n):n.text),delete t.text),t.style&&s.length>0){var r=s.find(".w2ui-node-text");n.style=t.style,r[0].style=n.style,delete t.style}}}return t}},{key:"refresh",value:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"refresh",target:null!=e?e:this.name,fullRefresh:null==e});if(!0!==i.isCancelled){var n="";if(1==this.flatButton&&(n='<div class="w2ui-flat-'+(this.flat?"right":"left")+'" onclick="w2ui[\''+this.name+"'].goFlat()\"></div>"),""===this.topHTML&&""===n||($(this.box).find(".w2ui-sidebar-top").html(this.topHTML+n),$(this.box).find(".w2ui-sidebar-body").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),""!==this.bottomHTML&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-body").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),$(this.box).find("> div").removeClass("w2ui-sidebar-flat").addClass(this.flat?"w2ui-sidebar-flat":"").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),this.nodes.length>0&&null==this.nodes[0].parent){var s=this.nodes;this.nodes=[],this.add(this,s)}var a,r,o,l,c=this;if(null==e)a=this,o=".w2ui-sidebar-body";else{if(a=this.get(e),null==a)return;o="#node_"+$e.escapeId(a.id)+"_sub"}if(a!==this){var d="#node_"+$e.escapeId(a.id);l=f(a),$(this.box).find(d).before('<div id="sidebar_'+this.name+'_tmp"></div>'),$(this.box).find(d).remove(),$(this.box).find(o).remove(),$("#sidebar_"+this.name+"_tmp").before(l),$("#sidebar_"+this.name+"_tmp").remove()}var u={top:$(this.box).find(o).scrollTop(),left:$(this.box).find(o).scrollLeft()};$(this.box).find(o).html("");for(var h=0;h<a.nodes.length;h++)if(r=a.nodes[h],l=f(r),$(this.box).find(o).append(l),0!==r.nodes.length)this.refresh(r.id);else{var p=this.trigger({phase:"before",type:"refresh",target:r.id});if(!0===p.isCancelled)return;this.trigger($.extend(p,{phase:"after"}))}return $(this.box).find(o).scrollLeft(u.left).scrollTop(u.top),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}function f(e){var t="",i=e.img,n=e.icon;null==n&&null==i&&(null==n&&(n=c.icon),null==i&&(i=c.img));var s=e.parent,a=0;while(s&&null!=s.parent)s=s.parent,a++;if(null!=e.caption&&null==e.text&&(e.text=e.caption),null!=e.caption&&(console.log("NOTICE: sidebar node.caption property is deprecated, please use node.text. Node -> ",e),e.text=e.caption),Array.isArray(e.nodes)&&e.nodes.length>0&&(e.collapsible=!0),e.group)t='<div class="w2ui-node-group w2ui-level-'+a+(e.class?" "+e.class:"")+'" id="node_'+e.id+'" data-level="'+a+'"   style="'+(e.hidden?"display: none":"")+'" onclick="w2ui[\''+c.name+"'].toggle('"+e.id+"')\"   oncontextmenu=\"w2ui['"+c.name+"'].contextMenu('"+e.id+"', event);\"   onmouseout=\"jQuery(this).find('span:nth-child(1)').css('color', 'transparent')\"    onmouseover=\"jQuery(this).find('span:nth-child(1)').css('color', 'inherit')\">"+(e.groupShowHide&&e.collapsible?"<span>"+(!e.hidden&&e.expanded?$e.lang("Hide"):$e.lang("Show"))+"</span>":"<span></span>")+("function"==typeof e.text?e.text.call(c,e):'<span class="w2ui-group-text">'+e.text+"</span>")+'</div><div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>',c.flat&&(t='<div class="w2ui-node-group" id="node_'+e.id+'"><span>&#160;</span></div><div id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>');else{e.selected&&!e.disabled&&(c.selected=e.id),s="",i&&(s='<div class="w2ui-node-image w2ui-icon '+i+(e.selected&&!e.disabled?" w2ui-icon-selected":"")+'"></div>'),n&&(s='<div class="w2ui-node-image"><span class="'+("function"==typeof n?n.call(c,e):n)+'"></span></div>');var r=e.text,o="",l=null!=e.count?'<div class="w2ui-node-count">'+e.count+"</div>":"";!0===e.collapsible&&(o='<div class="w2ui-'+(e.expanded?"expanded":"collapsed")+'"><span></span></div>'),"function"==typeof e.text&&(r=e.text.call(c,e)),t='<div class="w2ui-node w2ui-level-'+a+(e.selected?" w2ui-selected":"")+(e.disabled?" w2ui-disabled":"")+(e.class?" "+e.class:"")+'"    id="node_'+e.id+'" data-level="'+a+'" style="position: relative; '+(e.hidden?"display: none;":"")+'"    ondblclick="w2ui[\''+c.name+"'].dblClick('"+e.id+"', event);\"    oncontextmenu=\"w2ui['"+c.name+"'].contextMenu('"+e.id+"', event);\"    onClick=\"w2ui['"+c.name+"'].click('"+e.id+"', event); \">"+(c.handle.content?'<div class="w2ui-node-handle" style="width: '+c.handle.size+"px; "+c.handle.style+'">'+("function"==typeof c.handle.content?c.handle.content.call(c,e):c.handle.content)+"</div>":"")+'   <div class="w2ui-node-data" style="margin-left:'+(a*c.levelPadding+c.handle.size)+'px">'+o+s+l+'<div class="w2ui-node-text w2ui-node-caption" style="'+(e.style||"")+'">'+r+'</div>   </div></div><div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>',c.flat&&(t='<div class="w2ui-node w2ui-level-'+a+" "+(e.selected?"w2ui-selected":"")+" "+(e.disabled?"w2ui-disabled":"")+(e.class?" "+e.class:"")+'" id="node_'+e.id+'" style="'+(e.hidden?"display: none;":"")+"\"    onmouseover=\"jQuery(this).find('.w2ui-node-data').w2tag(w2utils.base64decode('"+$e.base64encode(r+(e.count||0===e.count?' - <span class="w2ui-node-count">'+e.count+"</span>":""))+"'),                { id: '"+e.id+"', left: -5 })\"    onmouseout=\"jQuery(this).find('.w2ui-node-data').w2tag(null, { id: '"+e.id+"' })\"    ondblclick=\"w2ui['"+c.name+"'].dblClick('"+e.id+"', event);\"    oncontextmenu=\"w2ui['"+c.name+"'].contextMenu('"+e.id+"', event);\"    onClick=\"w2ui['"+c.name+"'].click('"+e.id+'\', event); "><div class="w2ui-node-data w2ui-node-flat">'+s+'</div></div><div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>')}return t}}},{key:"resize",value:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});if(!0!==t.isCancelled)return $(this.box).css("overflow","hidden"),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});!0!==e.isCancelled&&($(this.box).find("> div > div.w2ui-sidebar-body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})))}},{key:"lock",value:function(e,t){var i=Array.prototype.slice.call(arguments,0);i.unshift(this.box),$e.lock.apply(window,i)}},{key:"unlock",value:function(e){$e.unlock(this.box,e)}}]),i}(we),Re={};var Ne=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e,n){var s;return Object(me["a"])(this,i),s=t.call(this),"string"==typeof e&&null==n&&(n={type:e}),"object"==Object(ge["a"])(e)&&null==n&&(n=$.extend(!0,{},e)),"string"==typeof e&&"object"==Object(ge["a"])(n)&&(n.type=e),n.type=String(n.type).toLowerCase(),s.options=n,s.el=null,s.helpers={},s.type=n.type||"text",s.options=$.extend(!0,{},n),s.onSearch=n.onSearch||null,s.onRequest=n.onRequest||null,s.onLoad=n.onLoad||null,s.onError=n.onError||null,s.onClick=n.onClick||null,s.onAdd=n.onAdd||null,s.onNew=n.onNew||null,s.onRemove=n.onRemove||null,s.onMouseOver=n.onMouseOver||null,s.onMouseOut=n.onMouseOut||null,s.onIconClick=n.onIconClick||null,s.onScroll=n.onScroll||null,s.tmp={},delete s.options.type,delete s.options.onSearch,delete s.options.onRequest,delete s.options.onLoad,delete s.options.onError,delete s.options.onClick,delete s.options.onMouseOver,delete s.options.onMouseOut,delete s.options.onIconClick,delete s.options.onScroll,s}return Object(ve["a"])(i,[{key:"render",value:function(e){0!=$(e).length?(this.el=$(e)[0],this.init()):console.log("ERROR: Cannot init w2field on empty set")}},{key:"init",value:function(){var e,t=this,i=this.options;if("function"!==typeof Re[this.type])if(-1!=["INPUT","TEXTAREA"].indexOf(this.el.tagName.toUpperCase())){switch(this.type){case"text":case"int":case"float":case"money":case"currency":case"percent":case"alphanumeric":case"bin":case"hex":e={min:null,max:null,step:1,autoFormat:!0,currencyPrefix:$e.settings.currencyPrefix,currencySuffix:$e.settings.currencySuffix,currencyPrecision:$e.settings.currencyPrecision,decimalSymbol:$e.settings.decimalSymbol,groupSymbol:$e.settings.groupSymbol,arrows:!1,keyboard:!0,precision:null,silent:!0,prefix:"",suffix:""},this.options=$.extend(!0,{},e,i),i=this.options,i.numberRE=new RegExp("["+i.groupSymbol+"]","g"),i.moneyRE=new RegExp("["+i.currencyPrefix+i.currencySuffix+i.groupSymbol+"]","g"),i.percentRE=new RegExp("["+i.groupSymbol+"%]","g"),-1!==["text","alphanumeric","hex","bin"].indexOf(this.type)&&(i.arrows=!1,i.keyboard=!1),this.addPrefix(),this.addSuffix();break;case"color":e={prefix:"",suffix:'<div style="width: '+(parseInt($(this.el).css("font-size"))||12)+'px">&#160;</div>',arrows:!1,keyboard:!1,advanced:null,transparent:!0},this.options=$.extend(!0,{},e,i),i=this.options,this.addPrefix(),this.addSuffix(),""!==$(this.el).val()&&setTimeout((function(){t.change()}),1);break;case"date":e={format:$e.settings.dateFormat,keyboard:!0,silent:!0,start:"",end:"",blocked:{},colored:{},blockWeekDays:null},this.options=$.extend(!0,{},e,i),i=this.options,null==$(this.el).attr("placeholder")&&$(this.el).attr("placeholder",i.format);break;case"time":e={format:$e.settings.timeFormat,keyboard:!0,silent:!0,start:"",end:"",noMinutes:!1},this.options=$.extend(!0,{},e,i),i=this.options,null==$(this.el).attr("placeholder")&&$(this.el).attr("placeholder",i.format);break;case"datetime":e={format:$e.settings.dateFormat+" | "+$e.settings.timeFormat,keyboard:!0,silent:!0,start:"",end:"",blocked:[],colored:{},placeholder:null,btn_now:!0,noMinutes:!1},this.options=$.extend(!0,{},e,i),i=this.options,null==$(this.el).attr("placeholder")&&$(this.el).attr("placeholder",i.placeholder||i.format);break;case"list":case"combo":if(e={items:[],selected:{},url:null,recId:null,recText:null,method:null,interval:350,postData:{},minLength:1,cacheMax:250,maxDropHeight:350,maxDropWidth:null,minDropWidth:null,match:"begins",silent:!0,icon:null,iconStyle:"",align:"both",altRows:!0,onSearch:null,onRequest:null,onLoad:null,onError:null,onIconClick:null,renderDrop:null,compare:null,filter:!0,prefix:"",suffix:"",openOnFocus:!1,markSearch:!1},"function"==typeof i.items&&(i._items_fun=i.items),i.items=$e.normMenu.call(this,i.items),"list"===this.type){if(e.openOnFocus=!0,$(this.el).addClass("w2ui-select"),!$.isPlainObject(i.selected)&&Array.isArray(i.items))for(var n=0;n<i.items.length;n++){var s=i.items[n];if(s&&s.id===i.selected){i.selected=$.extend(!0,{},s);break}}this.watchSize()}i=$.extend({},e,i),this.options=i,$.isPlainObject(i.selected)||(i.selected={}),$(this.el).data("selected",i.selected),i.url&&(i.items=[],this.request(0)),"list"===this.type&&this.addFocus(),this.addPrefix(),this.addSuffix(),setTimeout((function(){t.refresh()}),10),$(this.el).attr("autocapitalize","off").attr("autocomplete","off").attr("autocorrect","off").attr("spellcheck","false"),null!=i.selected.text&&$(this.el).val(i.selected.text);break;case"enum":e={items:[],selected:[],max:0,url:null,recId:null,recText:null,interval:350,method:null,postData:{},minLength:1,cacheMax:250,maxWidth:250,maxHeight:350,maxDropHeight:350,maxDropWidth:null,match:"contains",silent:!0,align:"both",altRows:!0,openOnFocus:!1,markSearch:!0,renderDrop:null,renderItem:null,compare:null,filter:!0,style:"",onSearch:null,onRequest:null,onLoad:null,onError:null,onClick:null,onAdd:null,onNew:null,onRemove:null,onMouseOver:null,onMouseOut:null,onScroll:null},i=$.extend({},e,i,{suffix:""}),"function"==typeof i.items&&(i._items_fun=i.items),i.items=$e.normMenu.call(this,i.items),i.selected=$e.normMenu.call(this,i.selected),this.options=i,Array.isArray(i.selected)||(i.selected=[]),$(this.el).data("selected",i.selected),i.url&&(i.items=[],this.request(0)),this.addSuffix(),this.addMulti(),this.watchSize();break;case"file":e={selected:[],max:0,maxSize:0,maxFileSize:0,maxWidth:250,maxHeight:350,maxDropHeight:350,maxDropWidth:null,readContent:!0,silent:!0,align:"both",altRows:!0,renderItem:null,style:"",onClick:null,onAdd:null,onRemove:null,onMouseOver:null,onMouseOut:null},i=$.extend({},e,i),this.options=i,Array.isArray(i.selected)||(i.selected=[]),$(this.el).data("selected",i.selected),null==$(this.el).attr("placeholder")&&$(this.el).attr("placeholder",$e.lang("Attach files by dragging and dropping or Click to Select")),this.addMulti(),this.watchSize();break}this.tmp={onChange:function(e){t.change.call(t,e)},onClick:function(e){t.click.call(t,e)},onFocus:function(e){t.focus.call(t,e)},onBlur:function(e){t.blur.call(t,e)},onKeydown:function(e){t.keyDown.call(t,e)},onKeyup:function(e){t.keyUp.call(t,e)},onKeypress:function(e){t.keyPress.call(t,e)}},$(this.el).addClass("w2field w2ui-input").data("w2field",this).on("change.w2field",this.tmp.onChange).on("click.w2field",this.tmp.onClick).on("focus.w2field",this.tmp.onFocus).on("blur.w2field",this.tmp.onBlur).on("keydown.w2field",this.tmp.onKeydown).on("keyup.w2field",this.tmp.onKeyup).on("keypress.w2field",this.tmp.onKeypress).css($e.cssPrefix("box-sizing","border-box")),this.change($.Event("change"))}else console.log("ERROR: w2field could only be applied to INPUT or TEXTAREA.",this.el);else Re[this.type].call(this,i)}},{key:"watchSize",value:function(){var e=this,t=$(e.el).data("tmp")||{};t.sizeTimer=setInterval((function(){$(e.el).parents("body").length>0?e.resize():clearInterval(t.sizeTimer)}),200),$(e.el).data("tmp",t)}},{key:"get",value:function(){var e;return e=-1!==["list","enum","file"].indexOf(this.type)?$(this.el).data("selected"):$(this.el).val(),e}},{key:"set",value:function(e,t){if(-1!==["list","enum","file"].indexOf(this.type)){if("list"!==this.type&&t)null==$(this.el).data("selected")&&$(this.el).data("selected",[]),$(this.el).data("selected").push(e),$(this.el).trigger("input").trigger("change");else{var i="enum"===this.type?[e]:e;$(this.el).data("selected",i).trigger("input").trigger("change")}this.refresh()}else $(this.el).val(e)}},{key:"setIndex",value:function(e,t){if(-1!==["list","enum"].indexOf(this.type)){var i=this.options.items;if(i&&i[e]){if("list"!==this.type&&t)null==$(this.el).data("selected")&&$(this.el).data("selected",[]),$(this.el).data("selected").push(i[e]),$(this.el).trigger("input").trigger("change");else{var n="enum"===this.type?[i[e]]:i[e];$(this.el).data("selected",n).trigger("input").trigger("change")}return this.refresh(),!0}}return!1}},{key:"clear",value:function(){var e=this.options;-1!==["money","currency"].indexOf(this.type)&&$(this.el).val($(this.el).val().replace(e.moneyRE,"")),"percent"===this.type&&$(this.el).val($(this.el).val().replace(/%/g,"")),"list"===this.type&&$(this.el).removeClass("w2ui-select"),this.type="clear";var t=$(this.el).data("tmp");if(this.tmp){for(var i in null!=t&&($(this.el).height("auto"),t&&t["old-padding-left"]&&$(this.el).css("padding-left",t["old-padding-left"]),t&&t["old-padding-right"]&&$(this.el).css("padding-right",t["old-padding-right"]),t&&t["old-background-color"]&&$(this.el).css("background-color",t["old-background-color"]),t&&t["old-border-color"]&&$(this.el).css("border-color",t["old-border-color"]),clearInterval(t.sizeTimer)),$(this.el).val(this.clean($(this.el).val())).removeClass("w2field").removeData().off(".w2field"),this.helpers)$(this.helpers[i]).remove();this.helpers={}}}},{key:"refresh",value:function(){var e=this,t=this.options,i=$(this.el).data("selected"),n=(new Date).getTime();if(-1!==["list"].indexOf(this.type)&&($(e.el).parent().css("white-space","nowrap"),e.helpers.prefix&&e.helpers.prefix.hide(),setTimeout((function(){if(e.helpers.focus){!$.isEmptyObject(i)&&t.icon?(t.prefix='<span class="w2ui-icon '+t.icon+'"style="cursor: pointer; font-size: 14px; display: inline-block; margin-top: -1px; color: #7F98AD;'+t.iconStyle+'"></span>',e.addPrefix()):(t.prefix="",e.addPrefix());var n=e.helpers.focus.find("input");""===$(n).val()?($(n).css({"text-indent":"-9999em",outline:"none"}).prev().css("opacity",0),$(e.el).val(i&&null!=i.text?$e.lang(i.text):"")):($(n).css("text-indent",0).prev().css("opacity",1),$(e.el).val(""),setTimeout((function(){e.helpers.prefix&&e.helpers.prefix.hide(),t.icon?($(n).css("margin-left","17px"),$(e.helpers.focus).find(".w2ui-icon-search").addClass("show-search")):($(n).css("margin-left","0px"),$(e.helpers.focus).find(".w2ui-icon-search").removeClass("show-search"))}),1)),$(e.el).prop("readonly")||$(e.el).prop("disabled")?setTimeout((function(){$(e.helpers.prefix).css("opacity","0.6"),$(e.helpers.suffix).css("opacity","0.6")}),1):setTimeout((function(){$(e.helpers.prefix).css("opacity","1"),$(e.helpers.suffix).css("opacity","1")}),1)}}),1)),-1!==["enum","file"].indexOf(this.type)){var s="";if(i)for(var a=0;a<i.length;a++){var r=i[a],o="";o="function"===typeof t.renderItem?t.renderItem(r,a,'<div class="w2ui-list-remove" title="'+$e.lang("Remove")+'" index="'+a+'">&#160;&#160;</div>'):'<div class="w2ui-list-remove" title="'+$e.lang("Remove")+'" index="'+a+'">&#160;&#160;</div>'+("enum"===e.type?r.text:r.name+'<span class="file-size"> - '+$e.formatSize(r.size)+"</span>"),s+='<li index="'+a+'" style="max-width: '+parseInt(t.maxWidth)+"px; "+(r.style?r.style:"")+'">'+o+"</li>"}var l=e.helpers.multi,c=l.find("ul");if(l.attr("style",l.attr("style")+";"+t.style),$(e.el).css("z-index","-1"),$(e.el).prop("readonly")||$(e.el).prop("disabled")?setTimeout((function(){l[0].scrollTop=0,l.addClass("w2ui-readonly").find("li").css("opacity","0.9").parent().find("li.nomouse").hide().find("input").prop("readonly",!0).parents("ul").find(".w2ui-list-remove").hide()}),1):setTimeout((function(){l.removeClass("w2ui-readonly").find("li").css("opacity","1").parent().find("li.nomouse").show().find("input").prop("readonly",!1).parents("ul").find(".w2ui-list-remove").show()}),1),l.find(".w2ui-enum-placeholder").remove(),c.find("li").not("li.nomouse").remove(),""!==s)c.prepend(s);else if(null!=$(e.el).attr("placeholder")&&""===l.find("input").val()){var d="padding-top: "+$(this.el).css("padding-top")+";padding-left: "+$(this.el).css("padding-left")+"; box-sizing: "+$(this.el).css("box-sizing")+"; line-height: "+$(this.el).css("line-height")+"; font-size: "+$(this.el).css("font-size")+"; font-family: "+$(this.el).css("font-family")+"; ";l.prepend('<div class="w2ui-enum-placeholder" style="'+d+'">'+$(e.el).attr("placeholder")+"</div>")}l.off("scroll.w2field").on("scroll.w2field",(function(t){var i=e.trigger({phase:"before",type:"scroll",target:e.el,originalEvent:t});!0!==i.isCancelled&&e.trigger($.extend(i,{phase:"after"}))})).find("li").data("mouse","out").on("click",(function(t){var n,s="LI"===t.target.tagName.toUpperCase()?t.target:$(t.target).parents("LI"),a=i[$(s).attr("index")];if(!$(s).hasClass("nomouse"))if(t.stopPropagation(),$(t.target).hasClass("w2ui-list-remove")){if($(e.el).prop("readonly")||$(e.el).prop("disabled"))return;if(n=e.trigger({phase:"before",type:"remove",target:e.el,originalEvent:t.originalEvent,item:a}),!0===n.isCancelled)return;$().w2overlay(),i.splice($(t.target).attr("index"),1),$(e.el).trigger("input").trigger("change"),$(t.target).parent().fadeOut("fast"),setTimeout((function(){e.refresh(),e.trigger($.extend(n,{phase:"after"}))}),300)}else{if(n=e.trigger({phase:"before",type:"click",target:e.el,originalEvent:t.originalEvent,item:a}),!0===n.isCancelled)return;if("file"===e.type){var r="";/image/i.test(a.type)&&(r='<div style="padding: 3px;">    <img src="'+(a.content?"data:"+a.type+";base64,"+a.content:"")+'" style="max-width: 300px;"         onload="var w = jQuery(this).width(); var h = jQuery(this).height();             if (w < 300 & h < 300) return;             if (w >= h && w > 300) jQuery(this).width(300);            if (w < h && h > 300) jQuery(this).height(300);"        onerror="this.style.display = \'none\'"    ></div>');var o='style="padding: 3px; text-align: right; color: #777;"',l='style="padding: 3px"';r+='<div style="padding: 8px;">    <table cellpadding="2"><tbody>    <tr><td '+o+">"+$e.lang("Name")+":</td><td "+l+">"+a.name+"</td></tr>    <tr><td "+o+">"+$e.lang("Size")+":</td><td "+l+">"+$e.formatSize(a.size)+"</td></tr>    <tr><td "+o+">"+$e.lang("Type")+":</td><td "+l+'>        <span style="width: 200px; display: block-inline; overflow: hidden; text-overflow: ellipsis; white-space: nowrap="nowrap";">'+a.type+"</span>    </td></tr>    <tr><td "+o+">"+$e.lang("Modified")+":</td><td "+l+">"+$e.date(a.modified)+"</td></tr>    </tbody></table></div>",$("#w2ui-overlay").remove(),$(s).w2overlay(r)}e.trigger($.extend(n,{phase:"after"}))}})).on("mouseover",(function(t){var n="LI"===t.target.tagName.toUpperCase()?t.target:$(t.target).parents("LI");if(!$(n).hasClass("nomouse")){if("out"===$(n).data("mouse")){var s=i[$(t.target).attr("index")],a=e.trigger({phase:"before",type:"mouseOver",target:e.el,originalEvent:t.originalEvent,item:s});if(!0===a.isCancelled)return;e.trigger($.extend(a,{phase:"after"}))}$(n).data("mouse","over")}})).on("mouseout",(function(t){var n="LI"===t.target.tagName.toUpperCase()?t.target:$(t.target).parents("LI");$(n).hasClass("nomouse")||($(n).data("mouse","leaving"),setTimeout((function(){if("leaving"===$(n).data("mouse")){$(n).data("mouse","out");var s=i[$(t.target).attr("index")],a=e.trigger({phase:"before",type:"mouseOut",target:e.el,originalEvent:t.originalEvent,item:s});if(!0===a.isCancelled)return;e.trigger($.extend(a,{phase:"after"}))}}),0))})),$(this.el).height("auto");var u=$(l).find("> div.w2ui-multi-items").height()+2*$e.getSize(l,"+height");u<26&&(u=26),u>t.maxHeight&&(u=t.maxHeight),l.length>0&&(l[0].scrollTop=1e3);var h=$e.getSize($(this.el),"height")-2;if(h>u&&(u=h),$(l).css({height:u+"px",overflow:u==t.maxHeight?"auto":"hidden"}),u<t.maxHeight&&$(l).prop("scrollTop",0),$(this.el).css({height:u+0+"px"}),"enum"===e.type){var p=e.helpers.multi.find("input");p.width(8*(p.val().length+2)+"px")}}return(new Date).getTime()-n}},{key:"reset",value:function(){var e=this.type;this.clear(),this.type=e,this.init()}},{key:"resize",value:function(){var e=this,t=$(e.el).width(),i=$(e.el).height();if(!(e.tmp.current_width==t&&i>0)){var n=this.helpers.focus,s=this.helpers.multi,a=this.helpers.suffix,r=this.helpers.prefix;if(n&&n.width($(e.el).width()),s){var o=$e.getSize(e.el,"width")-parseInt($(e.el).css("margin-left"),10)-parseInt($(e.el).css("margin-right"),10);$(s).width(o)}a&&(e.options.suffix='<div class="arrow-down" style="margin-top: '+(parseInt($(e.el).height())-6)/2+'px;"></div>',e.addSuffix()),r&&e.addPrefix(),e.tmp.current_width=t}}},{key:"clean",value:function(e){if("number"===typeof e)return e;var t=this.options;return e=String(e).trim(),-1!==["int","float","money","currency","percent"].indexOf(this.type)&&("string"===typeof e&&(t.autoFormat&&-1!==["money","currency"].indexOf(this.type)&&(e=String(e).replace(t.moneyRE,"")),t.autoFormat&&"percent"===this.type&&(e=String(e).replace(t.percentRE,"")),t.autoFormat&&-1!==["int","float"].indexOf(this.type)&&(e=String(e).replace(t.numberRE,"")),e=e.replace(/\s+/g,"").replace($e.settings.groupSymbol,"").replace($e.settings.decimalSymbol,".")),parseFloat(e)==e&&(null!=t.min&&e<t.min&&(e=t.min,$(this.el).val(t.min)),null!=t.max&&e>t.max&&(e=t.max,$(this.el).val(t.max))),e=""!==e&&$e.isFloat(e)?Number(e):""),e}},{key:"format",value:function(e){var t=this.options;if(t.autoFormat&&""!==e)switch(this.type){case"money":case"currency":e=$e.formatNumber(e,t.currencyPrecision,t.groupSymbol),""!==e&&(e=t.currencyPrefix+e+t.currencySuffix);break;case"percent":e=$e.formatNumber(e,t.precision,t.groupSymbol),""!==e&&(e+="%");break;case"float":e=$e.formatNumber(e,t.precision,t.groupSymbol);break;case"int":e=$e.formatNumber(e,0,t.groupSymbol);break}return e}},{key:"change",value:function(e){var t=this,i=t.options;if(-1!==["int","float","money","currency","percent"].indexOf(this.type)){var n=$(this.el).val(),s=this.format(this.clean($(this.el).val()));if(""!==n&&n!=s)return $(this.el).val(s).trigger("input").trigger("change"),e.stopPropagation(),e.preventDefault(),!1}if("color"===this.type){var a=$(this.el).val();if("rgb"!==a.substr(0,3).toLowerCase()){a="#"+a;var r=$(this.el).val().length;8!==r&&6!==r&&3!==r&&(a="")}$(this.el).next().find("div").css("background-color",a),$(this.el).hasClass("has-focus")&&!0!==$(this.el).data("skipInit")&&this.updateOverlay()}if(-1!==["list","enum","file"].indexOf(this.type)&&(t.refresh(),setTimeout((function(){t.refresh()}),5)),-1!==["date","time","datetime"].indexOf(this.type)){var o=parseInt(t.el.value);$e.isInt(t.el.value)&&o>3e3&&("time"===this.type&&$(t.el).val($e.formatTime(new Date(o),i.format)).trigger("input").trigger("change"),"date"===this.type&&$(t.el).val($e.formatDate(new Date(o),i.format)).trigger("input").trigger("change"),"datetime"===this.type&&$(t.el).val($e.formatDateTime(new Date(o),i.format)).trigger("input").trigger("change"))}}},{key:"click",value:function(e){e.stopPropagation(),-1!==["list","combo","enum"].indexOf(this.type)&&($(this.el).hasClass("has-focus")||this.focus(e),"combo"==this.type&&this.updateOverlay()),-1!==["date","time","color","datetime"].indexOf(this.type)&&this.updateOverlay()}},{key:"focus",value:function(e){var t=this;if(!$(t.el).hasClass("has-focus")){if($(t.el).addClass("has-focus"),-1!==["color","date","time","datetime"].indexOf(t.type)){if($(t.el).prop("readonly")||$(t.el).prop("disabled"))return;$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide(),setTimeout((function(){t.updateOverlay()}),150)}if(-1!==["list","combo","enum"].indexOf(t.type)){if($(t.el).prop("readonly")||$(t.el).prop("disabled"))return;$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide(),t.resize(),setTimeout((function(){"list"===t.type&&$(t.el).is(":focus")?$(t.helpers.focus).find("input").focus():(t.updateOverlay(),t.search())}),1),"function"==typeof t.options._items_fun&&(t.options.items=$e.normMenu.call(this,t.options._items_fun))}}}},{key:"blur",value:function(e){var t=this,i=t.options,n=$(t.el).val().trim(),s=$("#w2ui-overlay");if($(t.el).removeClass("has-focus"),-1!==["color","date","time","list","combo","enum","datetime"].indexOf(t.type)){var a=setTimeout((function(){!0!==s.data("keepOpen")&&s.hide()}),0);$(".menu",s).one("focus",(function(){clearTimeout(a),$(this).one("focusout",(function(e){s.hide()}))}))}-1!==["int","float","money","currency","percent"].indexOf(t.type)&&(""===n||t.checkType(n)||($(t.el).val("").trigger("input").trigger("change"),!1===i.silent&&($(t.el).w2tag("Not a valid number"),setTimeout((function(){$(t.el).w2tag("")}),3e3)))),-1!==["date","time","datetime"].indexOf(t.type)&&(""===n||t.inRange(t.el.value)?"date"!==t.type||""===n||$e.isDate(t.el.value,i.format)?"time"!==t.type||""===n||$e.isTime(t.el.value)?"datetime"!==t.type||""===n||$e.isDateTime(t.el.value,i.format)||($(t.el).val("").removeData("selected").trigger("input").trigger("change"),!1===i.silent&&($(t.el).w2tag("Not a valid date"),setTimeout((function(){$(t.el).w2tag("")}),3e3))):($(t.el).val("").removeData("selected").trigger("input").trigger("change"),!1===i.silent&&($(t.el).w2tag("Not a valid time"),setTimeout((function(){$(t.el).w2tag("")}),3e3))):($(t.el).val("").removeData("selected").trigger("input").trigger("change"),!1===i.silent&&($(t.el).w2tag("Not a valid date"),setTimeout((function(){$(t.el).w2tag("")}),3e3))):($(t.el).val("").removeData("selected").trigger("input").trigger("change"),!1===i.silent&&($(t.el).w2tag("Not in range"),setTimeout((function(){$(t.el).w2tag("")}),3e3)))),"enum"===t.type&&$(t.helpers.multi).find("input").val("").width(20)}},{key:"keyPress",value:function(e){var t=this;if(-1!==["int","float","money","currency","percent","hex","bin","color","alphanumeric"].indexOf(t.type)){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var i=String.fromCharCode(e.charCode);if(!t.checkType(i,!0)&&13!=e.keyCode)return e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}-1!==["date","time","datetime"].indexOf(t.type)&&9!==e.keyCode&&setTimeout((function(){t.updateOverlay()}),1)}},{key:"keyDown",value:function(e,t){var i,n,s,a,r,o,l=this,c=l.options,d=e.keyCode||t&&t.keyCode,u=!1;if(-1!==["int","float","money","currency","percent"].indexOf(l.type)){if(!c.keyboard||$(l.el).prop("readonly")||$(l.el).prop("disabled"))return;switch(i=parseFloat($(l.el).val().replace(c.moneyRE,""))||0,n=c.step,(e.ctrlKey||e.metaKey)&&(n=10),d){case 38:if(e.shiftKey)break;r=i+n<=c.max||null==c.max?Number((i+n).toFixed(12)):c.max,$(l.el).val(r).trigger("input").trigger("change"),u=!0;break;case 40:if(e.shiftKey)break;r=i-n>=c.min||null==c.min?Number((i-n).toFixed(12)):c.min,$(l.el).val(r).trigger("input").trigger("change"),u=!0;break}u&&(e.preventDefault(),setTimeout((function(){l.el.setSelectionRange(l.el.value.length,l.el.value.length)}),0))}if("date"===l.type){if(!c.keyboard||$(l.el).prop("readonly")||$(l.el).prop("disabled"))return;switch(s=864e5,n=1,(e.ctrlKey||e.metaKey)&&(n=10),a=$e.isDate($(l.el).val(),c.format,!0),a||(a=new Date,s=0),d){case 38:if(e.shiftKey)break;o=$e.formatDate(a.getTime()+s,c.format),10==n&&(o=$e.formatDate(new Date(a.getFullYear(),a.getMonth()+1,a.getDate()),c.format)),$(l.el).val(o).trigger("input").trigger("change"),u=!0;break;case 40:if(e.shiftKey)break;o=$e.formatDate(a.getTime()-s,c.format),10==n&&(o=$e.formatDate(new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),c.format)),$(l.el).val(o).trigger("input").trigger("change"),u=!0;break}u&&(e.preventDefault(),setTimeout((function(){l.el.setSelectionRange(l.el.value.length,l.el.value.length),l.updateOverlay()}),0))}if("time"===l.type){if(!c.keyboard||$(l.el).prop("readonly")||$(l.el).prop("disabled"))return;n=e.ctrlKey||e.metaKey?60:1,i=$(l.el).val();var h=l.toMin(i)||l.toMin((new Date).getHours()+":"+((new Date).getMinutes()-1));switch(d){case 38:if(e.shiftKey)break;h+=n,u=!0;break;case 40:if(e.shiftKey)break;h-=n,u=!0;break}u&&($(l.el).val(l.fromMin(h)).trigger("input").trigger("change"),e.preventDefault(),setTimeout((function(){l.el.setSelectionRange(l.el.value.length,l.el.value.length)}),0))}if("datetime"===l.type){if(!c.keyboard||$(l.el).prop("readonly")||$(l.el).prop("disabled"))return;s=864e5,n=1,(e.ctrlKey||e.metaKey)&&(n=10);var p=$(l.el).val();switch(a=$e.isDateTime(p,this.options.format,!0),a||(a=new Date,s=0),d){case 38:if(e.shiftKey)break;o=$e.formatDateTime(a.getTime()+s,c.format),10==n&&(o=$e.formatDateTime(new Date(a.getFullYear(),a.getMonth()+1,a.getDate()),c.format)),$(l.el).val(o).trigger("input").trigger("change"),u=!0;break;case 40:if(e.shiftKey)break;o=$e.formatDateTime(a.getTime()-s,c.format),10==n&&(o=$e.formatDateTime(new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),c.format)),$(l.el).val(o).trigger("input").trigger("change"),u=!0;break}u&&(e.preventDefault(),setTimeout((function(){l.el.setSelectionRange(l.el.value.length,l.el.value.length),l.updateOverlay()}),0))}if("color"===l.type){if($(l.el).prop("readonly")||$(l.el).prop("disabled"))return;if((e.ctrlKey||e.metaKey)&&!e.shiftKey){var f=null,g=null;switch(d){case 38:f="up";break;case 40:f="down";break;case 39:f="right";break;case 37:f="left";break}l.el.nav&&null!=f&&(g=l.el.nav(f),$(l.el).val(g).trigger("input").trigger("change"),e.preventDefault())}}if(-1!==["list","combo","enum"].indexOf(l.type)){if($(l.el).prop("readonly")||$(l.el).prop("disabled"))return;var m=$(l.el).data("selected"),v=$(l.el),y=!1;switch(-1!==["list","enum"].indexOf(l.type)&&("list"===l.type&&(v=$(l.helpers.focus).find("input")),"enum"===l.type&&(v=$(l.helpers.multi).find("input")),-1==[37,38,39,40].indexOf(d)&&setTimeout((function(){l.refresh()}),1),86==e.keyCode&&(e.ctrlKey||e.metaKey)&&setTimeout((function(){l.refresh(),l.search(),l.request()}),50)),d){case 27:"list"===l.type&&(""!==v.val()&&v.val(""),e.stopPropagation());break;case 37:case 39:break;case 13:if(0===$("#w2ui-overlay").length){l.updateOverlay();break}var b=c.items[c.index];if("enum"===l.type)if(null==b||b.hidden||b.disabled){b={id:v.val(),text:v.val()};var w=l.trigger({phase:"before",type:"new",target:l.el,originalEvent:e.originalEvent,item:b});if(!0===w.isCancelled)return;if(b=w.item,l.options.autoAdd){if(!b||"undefined"===typeof b.id||""===String(b.id).trim()||b.disabled||b.hidden)return void e.preventDefault();delete l.tmp.force_open,m.length>=c.max&&c.max>0&&m.pop(),m.push(b),$(l.el).trigger("input").trigger("change"),v.val("").width(20),l.refresh()}l.trigger($.extend(w,{phase:"after"}))}else{var x=l.trigger({phase:"before",type:"add",target:l.el,originalEvent:e.originalEvent,item:b});if(!0===x.isCancelled)return;b=x.item,m.length>=c.max&&c.max>0&&m.pop(),delete b.hidden,delete l.tmp.force_open,m.push(b),$(l.el).trigger("input").trigger("change"),v.val("").width(20),l.refresh(),l.trigger($.extend(x,{phase:"after"}))}else b&&$(l.el).data("selected",b).val(b.text).trigger("input").trigger("change"),""===$(l.el).val()&&$(l.el).data("selected")&&$(l.el).removeData("selected").val("").trigger("input").trigger("change"),"list"===l.type&&(v.val(""),l.refresh()),l.tmp.force_hide=!0;break;case 8:case 46:if("enum"===l.type&&8===d&&""===v.val()&&m.length>0){var _=m[m.length-1],k=l.trigger({phase:"before",type:"remove",target:l.el,originalEvent:e.originalEvent,item:_});if(!0===k.isCancelled)return;m.pop(),$(l.el).trigger("input").trigger("change"),l.refresh(),l.trigger($.extend(k,{phase:"after"}))}"list"===l.type&&""===v.val()&&($(l.el).data("selected",{}).trigger("input").trigger("change"),l.refresh());break;case 38:if(0===$("#w2ui-overlay").length){l.updateOverlay();break}c.index=$e.isInt(c.index)?parseInt(c.index):0,c.index--;while(c.index>0&&(c.items[c.index].hidden||c.items[c.index].disabled))c.index--;if(0===c.index&&(c.items[c.index].hidden||c.items[c.index].disabled))while(c.items[c.index]&&(c.items[c.index].hidden||c.items[c.index].disabled))c.index++;y=!0;break;case 40:if(0===$("#w2ui-overlay").length){l.updateOverlay();break}c.index=$e.isInt(c.index)?parseInt(c.index):-1,c.index++;while(c.index<c.items.length-1&&(c.items[c.index].hidden||c.items[c.index].disabled))c.index++;if(c.index==c.items.length-1&&(c.items[c.index].hidden||c.items[c.index].disabled))while(c.items[c.index]&&(c.items[c.index].hidden||c.items[c.index].disabled))c.index--;""===v.val()&&0===$("#w2ui-overlay").length?l.tmp.force_open=!0:y=!0;break;default:0===$("#w2ui-overlay").length&&l.updateOverlay()}if(y)return c.index<0&&(c.index=0),c.index>=c.items.length&&(c.index=c.items.length-1),l.updateOverlay(y),e.preventDefault(),void setTimeout((function(){if("enum"===l.type){var e=v.get(0);e.setSelectionRange(e.value.length,e.value.length)}else if("list"===l.type){var t=v.get(0);t.setSelectionRange(t.value.length,t.value.length)}else l.el.setSelectionRange(l.el.value.length,l.el.value.length)}),0);"enum"===l.type&&v.width(8*(v.val().length+2)+"px")}}},{key:"keyUp",value:function(e){var t=this;if(-1!==["list","combo","enum"].indexOf(this.type)){if($(t.el).prop("readonly")||$(t.el).prop("disabled"))return;if(-1==[16,17,18,20,37,39,91].indexOf(e.keyCode)){var i=$(this.helpers.focus).find("input");0===i.length&&(i=$(this.el));var n=this.trigger({phase:"before",type:"search",originalEvent:e,target:i,search:i.val()});if(!0===n.isCancelled)return;this.tmp.force_hide||this.request(),1==i.val().length&&this.refresh(),0!==$("#w2ui-overlay").length&&-1!=[38,40].indexOf(e.keyCode)||this.search(),this.trigger($.extend(n,{phase:"after"}))}}}},{key:"clearCache",value:function(){var e=this.options;e.items=[],this.tmp.xhr_loading=!1,this.tmp.xhr_search="",this.tmp.xhr_total=-1}},{key:"request",value:function(e){var t=this,i=this.options,n=$(t.el).val()||"";if(i.url){if("enum"===t.type){var s=$(t.helpers.multi).find("input");n=0===s.length?"":s.val()}if("list"===t.type){var a=$(t.helpers.focus).find("input");n=0===a.length?"":a.val()}if(0!==i.minLength&&n.length<i.minLength)return i.items=[],void this.updateOverlay();if(null==e&&(e=i.interval),null==t.tmp.xhr_search&&(t.tmp.xhr_search=""),null==t.tmp.xhr_total&&(t.tmp.xhr_total=-1),i.url&&!0!==$(t.el).prop("readonly")&&!0!==$(t.el).prop("disabled")&&(0===i.items.length&&0!==t.tmp.xhr_total||t.tmp.xhr_total==i.cacheMax&&n.length>t.tmp.xhr_search.length||n.length>=t.tmp.xhr_search.length&&n.substr(0,t.tmp.xhr_search.length)!==t.tmp.xhr_search||n.length<t.tmp.xhr_search.length)){if(t.tmp.xhr)try{t.tmp.xhr.abort()}catch(r){}t.tmp.xhr_loading=!0,t.search(),clearTimeout(t.tmp.timeout),t.tmp.timeout=setTimeout((function(){var e=i.url,s={search:n,max:i.cacheMax};$.extend(s,i.postData);var a=t.trigger({phase:"before",type:"request",search:n,target:t.el,url:e,postData:s});if(!0!==a.isCancelled){e=a.url,s=a.postData;var o={type:"GET",url:e,data:s,dataType:"JSON"};i.method&&(o.type=i.method),"JSON"===$e.settings.dataType&&(o.type="POST",o.data=JSON.stringify(o.data),o.contentType="application/json"),"HTTPJSON"===$e.settings.dataType&&(o.data={request:JSON.stringify(o.data)}),"RESTFULLJSON"===$e.settings.dataType&&(o.contentType="application/json"),null!=i.method&&(o.type=i.method),"string"!==typeof o.data&&(o.data.w2ui=!0),console.log("entrando no ajax 1"),t.tmp.xhr=$.ajax(o).done((function(e,a,r){var o=t.trigger({phase:"before",type:"load",target:t.el,search:s.search,data:e,xhr:r});if(!0!==o.isCancelled)if(e=o.data,"string"===typeof e&&(e=JSON.parse(e)),null==e.records&&null!=e.items&&(e.records=e.items,delete e.items),"success"===e.status&&null==e.records&&(e.records=[]),"success"===e.status&&Array.isArray(e.records)){e.records.length>i.cacheMax&&e.records.splice(i.cacheMax,1e5),null==i.recId&&null!=i.recid&&(i.recId=i.recid),(i.recId||i.recText)&&e.records.forEach((function(e){"string"===typeof i.recId&&(e.id=e[i.recId]),"function"===typeof i.recId&&(e.id=i.recId(e)),"string"===typeof i.recText&&(e.text=e[i.recText]),"function"===typeof i.recText&&(e.text=i.recText(e))})),t.tmp.xhr_loading=!1,t.tmp.xhr_search=n,t.tmp.xhr_total=e.records.length,t.tmp.lastError="",i.items=$e.normMenu(e.records),""===n&&0===e.records.length?t.tmp.emptySet=!0:t.tmp.emptySet=!1;var l,c=$(t.el).data("find_selected");if(c)Array.isArray(c)?(l=[],c.forEach((function(e){var t=!1;i.items.forEach((function(i){(i.id==e||e&&e.id==i.id)&&(l.push($.extend(!0,{},i)),t=!0)})),t||l.push(e)}))):(l=c,i.items.forEach((function(e){(e.id==c||c&&c.id==e.id)&&(l=e)}))),$(t.el).data("selected",l).removeData("find_selected").trigger("input").trigger("change");t.search(),t.trigger($.extend(o,{phase:"after"}))}else console.log("ERROR: server did not return proper structure. It should return",{status:"success",records:[{id:1,text:"item"}]})})).fail((function(e,s,a){var o={status:s,error:a,rawResponseText:e.responseText},l=t.trigger({phase:"before",type:"error",target:t.el,search:n,error:o,xhr:e});if(!0!==l.isCancelled){if("abort"!==s){var c;try{c=JSON.parse(e.responseText)}catch(r){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",records:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"===Object(ge["a"])(c)?c:e.responseText)}t.tmp.xhr_loading=!1,t.tmp.xhr_search=n,t.tmp.xhr_total=0,t.tmp.emptySet=!0,t.tmp.lastError=l.error||"Server communication failed",i.items=[],t.clearCache(),t.search(),t.updateOverlay(!1),t.trigger($.extend(l,{phase:"after"}))}})),t.trigger($.extend(a,{phase:"after"}))}}),e)}}}},{key:"search",value:function(){var e=this,t=this.options,i=$(e.el).val(),n=e.el,s=[],a=$(e.el).data("selected");if("enum"===e.type)for(var r in n=$(e.helpers.multi).find("input"),i=n.val(),a)a[r]&&s.push(a[r].id);else if("list"===e.type)for(var o in n=$(e.helpers.focus).find("input"),i=n.val(),a)a[o]&&s.push(a[o].id);var l=t.items;if(!0!==e.tmp.xhr_loading){for(var c=0,d=0;d<l.length;d++){var u=l[d];if(null!=t.compare)"function"===typeof t.compare&&(u.hidden=!1===t.compare.call(this,u,i));else{var h="",p="";-1!==["is","begins"].indexOf(t.match)&&(h="^"),-1!==["is","ends"].indexOf(t.match)&&(p="$");try{var f=new RegExp(h+i+p,"i");f.test(u.text)||"..."===u.text?u.hidden=!1:u.hidden=!0}catch(g){}}!1===t.filter&&(u.hidden=!1),"enum"===e.type&&-1!==$.inArray(u.id,s)&&(u.hidden=!0),!0!==u.hidden&&(c++,delete u.hidden)}t.index=-1;while(l[t.index]&&l[t.index].hidden)t.index++;c<=0&&(t.index=-1),t.spinner=!1,setTimeout((function(){$("#w2ui-overlay").html();t.markSearch&&0==$("#w2ui-overlay .no-matches").length&&$("#w2ui-overlay").w2marker(i)}),1)}else l.splice(0,t.cacheMax),t.spinner=!0;$("#w2ui-overlay").length>0&&e.updateOverlay()}},{key:"updateOverlay",value:function(e){var t,i,n,s,a=this,r=this.options;if("color"===this.type){if($(a.el).prop("readonly")||$(a.el).prop("disabled"))return;$(this.el).w2color({color:$(this.el).val(),transparent:r.transparent,advanced:r.advanced},(function(e){null!=e&&$(a.el).val(e).trigger("input").trigger("change")}))}if("date"===this.type){if($(a.el).prop("readonly")||$(a.el).prop("disabled"))return;0===$("#w2ui-overlay").length&&$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar"></div>',{css:{"background-color":"#f5f5f5"},onShow:function(e){$e.isIE&&$(".w2ui-calendar").on("mousedown",(function(e){var t=$(e.target);1===t.length&&"w2ui-jump-year"===t[0].id&&$("#w2ui-overlay").data("keepOpen",!0)}))}}),n=$e.isDate($(a.el).val(),a.options.format,!0),n&&(t=n.getMonth()+1,i=n.getFullYear()),function e(t,i){if(!t&&!i){var n=new Date;t=n.getMonth(),i=n.getFullYear()}$("#w2ui-overlay > div > div").html(a.getMonthHTML(t,i,$(a.el).val())),$("#w2ui-overlay .w2ui-calendar-title").on("mousedown",(function(){var n,s;$(this).next().hasClass("w2ui-calendar-jump")?$(this).next().remove():($(this).after('<div class="w2ui-calendar-jump" style=""></div>'),$(this).next().hide().html(a.getYearHTML()).fadeIn(200),setTimeout((function(){$("#w2ui-overlay .w2ui-calendar-jump").find(".w2ui-jump-month, .w2ui-jump-year").on("dblclick",(function(){$(this).hasClass("w2ui-jump-month")&&($(this).parent().find(".w2ui-jump-month").removeClass("selected"),$(this).addClass("selected"),s=$(this).attr("name")),$(this).hasClass("w2ui-jump-year")&&($(this).parent().find(".w2ui-jump-year").removeClass("selected"),$(this).addClass("selected"),n=$(this).attr("name")),null==s&&(s=t),null==n&&(n=i),$("#w2ui-overlay .w2ui-calendar-jump").fadeOut(100),setTimeout((function(){e(parseInt(s)+1,n)}),100)})).on("click",(function(){$(this).hasClass("w2ui-jump-month")&&($(this).parent().find(".w2ui-jump-month").removeClass("selected"),$(this).addClass("selected"),s=$(this).attr("name")),$(this).hasClass("w2ui-jump-year")&&($(this).parent().find(".w2ui-jump-year").removeClass("selected"),$(this).addClass("selected"),n=$(this).attr("name")),null!=n&&null!=s&&($("#w2ui-overlay .w2ui-calendar-jump").fadeOut(100),setTimeout((function(){e(parseInt(s)+1,n)}),100))})),$("#w2ui-overlay .w2ui-calendar-jump >:last-child").prop("scrollTop",2e3)}),1))})),$("#w2ui-overlay .w2ui-date").on("mousedown",(function(){var e=$(this).attr("date");$(a.el).val(e).trigger("input").trigger("change"),$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"})})).on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)})),$("#w2ui-overlay .previous").on("mousedown",(function(){var t=a.options.current.split("/");t[0]=parseInt(t[0])-1,e(t[0],t[1])})),$("#w2ui-overlay .next").on("mousedown",(function(){var t=a.options.current.split("/");t[0]=parseInt(t[0])+1,e(t[0],t[1])}))}(t,i)}if("time"===this.type){if($(a.el).prop("readonly")||$(a.el).prop("disabled"))return;0===$("#w2ui-overlay").length&&$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#fff"}});var o="h24"===this.options.format;$("#w2ui-overlay > div").html(a.getHourHTML()),$("#w2ui-overlay .w2ui-time").on("mousedown",(function(e){$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var t=$(this).attr("hour");$(a.el).val((t>12&&!o?t-12:t)+":00"+(o?"":t<12?" am":" pm")).trigger("input").trigger("change")})),null==this.options.noMinutes||!1===this.options.noMinutes?$("#w2ui-overlay .w2ui-time").on("mouseup",(function(){var e=$(this).attr("hour");$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide(),$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time"></div>',{css:{"background-color":"#fff"}}),$("#w2ui-overlay > div").html(a.getMinHTML(e)),$("#w2ui-overlay .w2ui-time").on("mousedown",(function(){$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var t=$(this).attr("min");$(a.el).val((e>12&&!o?e-12:e)+":"+(t<10?0:"")+t+(o?"":e<12?" am":" pm")).trigger("input").trigger("change")})).on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)}))})):$("#w2ui-overlay .w2ui-time").on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)}))}if("datetime"===this.type){if($(a.el).prop("readonly")||$(a.el).prop("disabled"))return;$("#w2ui-overlay .w2ui-time").length>0&&$("#w2ui-overlay")[0].hide(),0===$("#w2ui-overlay").length&&$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#f5f5f5"},onShow:function(e){$e.isIE&&$(".w2ui-calendar").on("mousedown",(function(e){var t=$(e.target);1===t.length&&"w2ui-jump-year"===t[0].id&&$("#w2ui-overlay").data("keepOpen",!0)}))}}),n=$e.isDateTime($(a.el).val(),a.options.format,!0),n&&(t=n.getMonth()+1,i=n.getFullYear());var l=null;(function e(t,i){$("#w2ui-overlay > div > div").html(a.getMonthHTML(t,i,$(a.el).val())+(r.btn_now?'<div class="w2ui-calendar-now now">'+$e.lang("Current Date & Time")+"</div>":"")),$("#w2ui-overlay .w2ui-calendar-title").on("mousedown",(function(){var t,i;$(this).next().hasClass("w2ui-calendar-jump")?$(this).next().remove():($(this).after('<div class="w2ui-calendar-jump" style=""></div>'),$(this).next().hide().html(a.getYearHTML()).fadeIn(200),setTimeout((function(){$("#w2ui-overlay .w2ui-calendar-jump").find(".w2ui-jump-month, .w2ui-jump-year").on("click",(function(){$(this).hasClass("w2ui-jump-month")&&($(this).parent().find(".w2ui-jump-month").removeClass("selected"),$(this).addClass("selected"),i=$(this).attr("name")),$(this).hasClass("w2ui-jump-year")&&($(this).parent().find(".w2ui-jump-year").removeClass("selected"),$(this).addClass("selected"),t=$(this).attr("name")),null!=t&&null!=i&&($("#w2ui-overlay .w2ui-calendar-jump").fadeOut(100),setTimeout((function(){e(parseInt(i)+1,t)}),100))})),$("#w2ui-overlay .w2ui-calendar-jump >:last-child").prop("scrollTop",2e3)}),1))})),$("#w2ui-overlay .w2ui-date").on("mousedown",(function(){var e=$(this).attr("date");$(a.el).val(e).trigger("input").trigger("change"),$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"}),l=new Date($(this).attr("data-date"))})).on("mouseup",(function(){var e,t;$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide(),$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time"></div>',{css:{"background-color":"#fff"}}),$("#w2ui-overlay > div").html(a.getHourHTML()),$("#w2ui-overlay .w2ui-time").on("mousedown",(function(t){$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"}),e=$(this).attr("hour"),l.setHours(e);var i=$e.formatDateTime(l,a.options.format);$(a.el).val(i).trigger("input").trigger("change")})),null==a.options.noMinutes||!1===a.options.noMinutes?$("#w2ui-overlay .w2ui-time").on("mouseup",(function(){var i=$(this).attr("hour");$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide(),$(a.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time"></div>',{css:{"background-color":"#fff"}}),$("#w2ui-overlay > div").html(a.getMinHTML(i)),$("#w2ui-overlay .w2ui-time").on("mousedown",(function(){$(this).css({"background-color":"#B6D5FB","border-color":"#aaa"}),t=$(this).attr("min"),l.setHours(e,t);var i=$e.formatDateTime(l,a.options.format);$(a.el).val(i).trigger("input").trigger("change")})).on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)}))})):$("#w2ui-overlay .w2ui-time").on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)}))})),$("#w2ui-overlay .previous").on("mousedown",(function(){var t=a.options.current.split("/");t[0]=parseInt(t[0])-1,e(t[0],t[1])})),$("#w2ui-overlay .next").on("mousedown",(function(){var t=a.options.current.split("/");t[0]=parseInt(t[0])+1,e(t[0],t[1])})),$("#w2ui-overlay .now").on("mousedown",(function(){var e=$e.formatDateTime(new Date,a.options.format);return $(a.el).val(e).trigger("input").trigger("change"),!1})).on("mouseup",(function(){setTimeout((function(){$("#w2ui-overlay").length>0&&$("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)}))})(t,i)}if(-1!==["list","combo","enum"].indexOf(this.type)){var c=this.el,d=this.el;if("enum"===this.type&&(c=$(this.helpers.multi),d=$(c).find("input")),"list"===this.type){var u=$(d).data("selected");$.isPlainObject(u)&&!$.isEmptyObject(u)&&-1==r.index&&r.items.forEach((function(e,t){e.id===u.id&&(r.index=t)})),d=$(this.helpers.focus).find("input")}if($(this.el).hasClass("has-focus")){if(!1===r.openOnFocus&&""===$(d).val()&&!0!==a.tmp.force_open)return void $().w2overlay();if(a.tmp.force_hide)return $().w2overlay(),void setTimeout((function(){delete a.tmp.force_hide}),1);""!==$(d).val()&&delete a.tmp.force_open;var h=$e.lang("No matches");if(null!=r.url&&String($(d).val()).length<r.minLength&&!0!==a.tmp.emptySet&&(h=$e.lang("${count} letters or more...",{count:r.minLength})),null!=r.url&&""===$(d).val()&&!0!==a.tmp.emptySet&&(h=$e.lang(r.msgSearch||"Type to search...")),null==r.url&&0===r.items.length&&(h=$e.lang("Empty list")),null!=r.msgNoItems){var p={search:$(d).val(),options:$.extend(!0,{},r)};r.url&&(p.remote={url:r.url,empty:!!a.tmp.emptySet,error:a.tmp.lastError,minLength:r.minLength}),h="function"===typeof r.msgNoItems?r.msgNoItems(p):r.msgNoItems}a.tmp.lastError&&(h=a.tmp.lastError),h&&(h='<div class="no-matches" style="white-space: normal; line-height: 1.3">'+h+"</div>"),s=$.extend(!0,{},r,{search:!1,render:r.renderDrop,maxHeight:r.maxDropHeight,maxWidth:r.maxDropWidth,minWidth:r.minDropWidth,msgNoItems:h,onSelect:function(e){if("enum"===a.type){var t=$(a.el).data("selected");if(e.item){var i,n=a.trigger({phase:"before",type:"add",target:a.el,originalEvent:e.originalEvent,item:e.item});if(!0===n.isCancelled)return;if(t.length>=r.max&&r.max>0&&t.pop(),delete e.item.hidden,t.push(e.item),$(a.el).data("selected",t).trigger("input").trigger("change"),$(a.helpers.multi).find("input").val("").width(20),a.refresh(),!0!==e.keepOpen)$("#w2ui-overlay").length>0&&$("#w2ui-overlay")[0].hide();else s.items.forEach((function(t,n){t.id==e.item.id&&(i=n)})),null!=i&&s.items.splice(i,1),s.selected=t,$(c).w2menu("refresh",s);a.trigger($.extend(n,{phase:"after"}))}}else $(a.el).data("selected",e.item).val(e.item.text).trigger("input").trigger("change"),a.helpers.focus&&a.helpers.focus.find("input").val("")}}),e?$(c).w2menu("refresh-index",s):$("#w2ui-overlay").length>0?$(c).w2menu("refresh",s):$(c).w2menu(s)}}}},{key:"inRange",value:function(e,t){var i=!1;if("date"===this.type){var n=$e.isDate(e,this.options.format,!0);if(n){if(this.options.start||this.options.end){var s="string"===typeof this.options.start?this.options.start:$(this.options.start).val(),a="string"===typeof this.options.end?this.options.end:$(this.options.end).val(),r=$e.isDate(s,this.options.format,!0),o=$e.isDate(a,this.options.format,!0),l=new Date(n);r||(r=l),o||(o=l),l>=r&&l<=o&&(i=!0)}else i=!0;if(this.options.blocked&&-1!==$.inArray(e,this.options.blocked)&&(i=!1),null!==this.options.blockWeekDays&&void 0!==this.options.blockWeekDays&&void 0!=this.options.blockWeekDays.length)for(var c=this.options.blockWeekDays.length,d=0;d<c;d++)n.getDay()==this.options.blockWeekDays[d]&&(i=!1)}}else if("time"===this.type)if(this.options.start||this.options.end){var u=this.toMin(e),h=this.toMin(this.options.start),p=this.toMin(this.options.end);h||(h=u),p||(p=u),u>=h&&u<=p&&(i=!0)}else i=!0;else if("datetime"===this.type){var f=$e.isDateTime(e,this.options.format,!0);if(f){if(this.options.start||this.options.end){var g,m;if("object"===Object(ge["a"])(this.options.start)&&this.options.start instanceof Date)g=this.options.start;else{var v="string"===typeof this.options.start?this.options.start:$(this.options.start).val();g=""!==v.trim()?$e.isDateTime(v,this.options.format,!0):""}if("object"===Object(ge["a"])(this.options.end)&&this.options.end instanceof Date)m=this.options.end;else{var y="string"===typeof this.options.end?this.options.end:$(this.options.end).val();m=""!==y.trim()?$e.isDateTime(y,this.options.format,!0):""}var b=f;g||(g=b),m||(m=b),t&&g instanceof Date&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0)),b>=g&&b<=m&&(i=!0)}else i=!0;if(i&&this.options.blocked)for(var w=0;w<this.options.blocked.length;w++){var x=this.options.blocked[w];if("string"===typeof x&&(x=$e.isDateTime(x,this.options.format,!0)),"object"===Object(ge["a"])(x)&&x instanceof Date&&x.getFullYear()==f.getFullYear()&&x.getMonth()==f.getMonth()&&x.getDate()==f.getDate()){i=!1;break}}}}return i}},{key:"checkType",value:function(e,t){var i=this;switch(i.type){case"int":return!(!t||-1===["-",i.options.groupSymbol].indexOf(e))||$e.isInt(e.replace(i.options.numberRE,""));case"percent":e=e.replace(/%/g,"");case"float":return!(!t||-1===["-",$e.settings.decimalSymbol,i.options.groupSymbol].indexOf(e))||$e.isFloat(e.replace(i.options.numberRE,""));case"money":case"currency":return!(!t||-1===["-",i.options.decimalSymbol,i.options.groupSymbol,i.options.currencyPrefix,i.options.currencySuffix].indexOf(e))||$e.isFloat(e.replace(i.options.moneyRE,""));case"bin":return $e.isBin(e);case"hex":return $e.isHex(e);case"alphanumeric":return $e.isAlphaNumeric(e)}return!0}},{key:"addPrefix",value:function(){var e=this;setTimeout((function(){if("clear"!==e.type){var t,i=$(e.el).data("tmp")||{};i["old-padding-left"]&&$(e.el).css("padding-left",i["old-padding-left"]),i["old-padding-left"]=$(e.el).css("padding-left"),$(e.el).data("tmp",i),e.helpers.prefix&&$(e.helpers.prefix).remove(),""!==e.options.prefix&&($(e.el).before('<div class="w2ui-field-helper">'+e.options.prefix+"</div>"),t=$(e.el).prev(),t.css({color:$(e.el).css("color"),"font-family":$(e.el).css("font-family"),"font-size":$(e.el).css("font-size"),"padding-top":$(e.el).css("padding-top"),"padding-bottom":$(e.el).css("padding-bottom"),"padding-left":$(e.el).css("padding-left"),"padding-right":0,"margin-top":parseInt($(e.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt($(e.el).css("margin-bottom"),10)+1+"px","margin-left":$(e.el).css("margin-left"),"margin-right":0}).on("click",(function(t){if(e.options.icon&&"function"===typeof e.onIconClick){var i=e.trigger({phase:"before",type:"iconClick",target:e.el,el:$(this).find("span.w2ui-icon")[0]});if(!0===i.isCancelled)return;e.trigger($.extend(i,{phase:"after"}))}else"list"===e.type?$(e.helpers.focus).find("input").focus():$(e.el).focus()})),$(e.el).css("padding-left",t.width()+parseInt($(e.el).css("padding-left"),10)+"px"),e.helpers.prefix=t)}}),1)}},{key:"addSuffix",value:function(){var e,t,i=this;setTimeout((function(){if("clear"!==i.type){var n=$(i.el).data("tmp")||{};n["old-padding-right"]&&$(i.el).css("padding-right",n["old-padding-right"]),n["old-padding-right"]=$(i.el).css("padding-right"),$(i.el).data("tmp",n),t=parseInt($(i.el).css("padding-right"),10),i.options.arrows&&(i.helpers.arrows&&$(i.helpers.arrows).remove(),$(i.el).after('<div class="w2ui-field-helper" style="border: 1px solid transparent">&#160;    <div class="w2ui-field-up" type="up">        <div class="arrow-up" type="up"></div>    </div>    <div class="w2ui-field-down" type="down">        <div class="arrow-down" type="down"></div>    </div></div>'),e=$(i.el).next(),e.css({color:$(i.el).css("color"),"font-family":$(i.el).css("font-family"),"font-size":$(i.el).css("font-size"),height:$(i.el).height()+parseInt($(i.el).css("padding-top"),10)+parseInt($(i.el).css("padding-bottom"),10)+"px",padding:0,"margin-top":parseInt($(i.el).css("margin-top"),10)+1+"px","margin-bottom":0,"border-left":"1px solid silver"}).css("margin-left","-"+(e.width()+parseInt($(i.el).css("margin-right"),10)+12)+"px").on("mousedown",(function(e){var t=$("body");function n(){clearTimeout(t.data("_field_update_timer")),t.off("mouseup",n)}function s(t){$(i.el).focus(),i.keyDown($.Event("keydown"),{keyCode:"up"===$(e.target).attr("type")?38:40}),!1!==t&&$("body").data("_field_update_timer",setTimeout(s,60))}t.on("mouseup",n),t.data("_field_update_timer",setTimeout(s,700)),s(!1)})),t+=e.width()+12,$(i.el).css("padding-right",t+"px"),i.helpers.arrows=e),""!==i.options.suffix&&(i.helpers.suffix&&$(i.helpers.suffix).remove(),$(i.el).after('<div class="w2ui-field-helper">'+i.options.suffix+"</div>"),e=$(i.el).next(),e.css({color:$(i.el).css("color"),"font-family":$(i.el).css("font-family"),"font-size":$(i.el).css("font-size"),"padding-top":$(i.el).css("padding-top"),"padding-bottom":$(i.el).css("padding-bottom"),"padding-left":"3px","padding-right":$(i.el).css("padding-right"),"margin-top":parseInt($(i.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt($(i.el).css("margin-bottom"),10)+1+"px"}).on("click",(function(e){"list"===i.type?$(i.helpers.focus).find("input").focus():$(i.el).focus()})),e.css("margin-left","-"+($e.getSize(e,"width")+parseInt($(i.el).css("margin-right"),10)+2)+"px"),t+=e.width()+3,$(i.el).css("padding-right",t+"px"),i.helpers.suffix=e)}}),1)}},{key:"addFocus",value:function(){var e,t=this,i=0;$(t.helpers.focus).remove();var n=parseInt($(t.el).attr("tabIndex"));isNaN(n)||-1===n||(t.el._tabIndex=n),t.el._tabIndex&&(n=t.el._tabIndex),null==n&&(n=-1),isNaN(n)&&(n=0);var s="";null!=$(t.el).attr("id")&&(s='id="'+$(t.el).attr("id")+'_search"');var a='<div class="w2ui-field-helper">    <span class="w2ui-icon w2ui-icon-search"></span>    <input '+s+' type="text" tabIndex="'+n+'" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false"/></div>';$(t.el).attr("tabindex",-1).before(a);var r=$(t.el).prev();t.helpers.focus=r,r.css({width:$(t.el).width(),"margin-top":$(t.el).css("margin-top"),"margin-left":parseInt($(t.el).css("margin-left"))+parseInt($(t.el).css("padding-left"))+"px","margin-bottom":$(t.el).css("margin-bottom"),"margin-right":$(t.el).css("margin-right")}).find("input").css({cursor:"default",width:"100%",opacity:1,margin:0,border:"1px solid transparent",padding:$(t.el).css("padding-top"),"padding-left":0,"margin-left":i>0?i+6:0,"background-color":"transparent"}),r.find("input").on("click",(function(e){0==$("#w2ui-overlay").length?t.updateOverlay():$("#w2ui-overlay").data("keepOpen",!0)})).on("focus",(function(i){e=$(t.el).attr("placeholder"),$(this).val(""),$(t.el).triggerHandler("focus"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0})).on("blur",(function(i){$(this).val(""),t.refresh(),$(t.el).triggerHandler("blur"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,null!=e&&$(t.el).attr("placeholder",e)})).on("keydown",(function(i){var n=this;t.keyDown(i),setTimeout((function(){""===n.value?$(t.el).attr("placeholder",e):$(t.el).attr("placeholder","")}),10)})).on("keyup",(function(e){t.keyUp(e)})).on("keypress",(function(e){t.keyPress(e)})),r.on("click",(function(e){$(this).find("input").focus()})),t.refresh()}},{key:"addMulti",value:function(){var e=this;$(e.helpers.multi).remove();var t="",i="margin-top     : 0px; margin-bottom  : 0px; margin-left    : "+$(e.el).css("margin-left")+"; margin-right   : "+$(e.el).css("margin-right")+"; width          : "+($e.getSize(e.el,"width")-parseInt($(e.el).css("margin-left"),10)-parseInt($(e.el).css("margin-right"),10))+"px;",n="";if(null!=$(e.el).attr("id")&&(n='id="'+$(e.el).attr("id")+'_search" '),"enum"===e.type){var s=$(e.el).attr("tabIndex");s&&-1!==s&&(e.el._tabIndex=s),e.el._tabIndex&&(s=e.el._tabIndex),null==s&&(s=0),t='<div class="w2ui-field-helper w2ui-list" style="'+i+'; box-sizing: border-box">    <div style="padding: 0px; margin: 0px; display: inline-block" class="w2ui-multi-items">    <ul>        <li style="padding-left: 0px; padding-right: 0px" class="nomouse">            <input '+n+' type="text" style="width: 20px; margin: -3px 0 0; padding: 2px 0; border-color: transparent" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false"'+($(e.el).prop("readonly")?' readonly="readonly"':"")+($(e.el).prop("disabled")?' disabled="disabled"':"")+' tabindex="'+s+'"/>        </li>    </ul>    </div></div>'}"file"===e.type&&(t='<div class="w2ui-field-helper w2ui-list" style="'+i+'; box-sizing: border-box">   <div style="position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;">       <input '+n+' name="attachment" class="file-input" type="file" style="width: 100%; height: 100%; opacity: 0;" tabindex="-1"'+(1!==e.options.max?' multiple="multiple"':"")+($(e.el).prop("readonly")?' readonly="readonly"':"")+($(e.el).prop("disabled")?' disabled="disabled"':"")+($(e.el).attr("accept")?' accept="'+$(e.el).attr("accept")+'"':"")+'/>   </div>    <div style="position: absolute; padding: 0px; margin: 0px; display: inline-block" class="w2ui-multi-items">        <ul><li style="padding-left: 0px; padding-right: 0px" class="nomouse"></li></ul>    </div></div>');var a=$(e.el).data("tmp")||{};a["old-background-color"]=$(e.el).css("background-color"),a["old-border-color"]=$(e.el).css("border-color"),$(e.el).data("tmp",a),$(e.el).before(t).css({"background-color":"transparent","border-color":"transparent"});var r=$(e.el).prev();e.helpers.multi=r,"enum"===e.type&&($(e.el).attr("tabindex",-1),r.find("input").on("click",(function(t){0===$("#w2ui-overlay").length&&e.focus(t),$(e.el).triggerHandler("click")})).on("focus",(function(t){$(e.el).triggerHandler("focus"),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0})).on("blur",(function(t){$(e.el).triggerHandler("blur"),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0})).on("keyup",(function(t){e.keyUp(t)})).on("keydown",(function(t){e.keyDown(t)})).on("keypress",(function(t){e.keyPress(t)})),r.on("click",(function(e){$(this).find("input").focus()}))),"file"===e.type&&r.find("input").off(".drag").on("click.drag",(function(t){t.stopPropagation(),$(e.el).prop("readonly")||$(e.el).prop("disabled")||$(e.el).focus()})).on("dragenter.drag",(function(t){$(e.el).prop("readonly")||$(e.el).prop("disabled")||$(r).addClass("w2ui-file-dragover")})).on("dragleave.drag",(function(t){$(e.el).prop("readonly")||$(e.el).prop("disabled")||$(r).removeClass("w2ui-file-dragover")})).on("drop.drag",(function(t){if(!$(e.el).prop("readonly")&&!$(e.el).prop("disabled")){$(r).removeClass("w2ui-file-dragover");for(var i=t.originalEvent.dataTransfer.files,n=0,s=i.length;n<s;n++)e.addFile.call(e,i[n]);$(e.el).focus(),t.preventDefault(),t.stopPropagation()}})).on("dragover.drag",(function(e){e.preventDefault(),e.stopPropagation()})).on("change.drag",(function(){if($(e.el).focus(),"undefined"!==typeof this.files)for(var t=0,i=this.files.length;t<i;t++)e.addFile.call(e,this.files[t])})),e.refresh()}},{key:"addFile",value:function(e){var t,i=this,n=this.options,s=$(i.el).data("selected"),a={name:e.name,type:e.type,modified:e.lastModifiedDate,size:e.size,content:null,file:e},r=0,o=0;if(s)for(var l=0;l<s.length;l++){if(s[l].name==e.name&&s[l].size==e.size)return;r+=s[l].size,o++}var c=i.trigger({phase:"before",type:"add",target:i.el,file:a,total:o,totalSize:r});if(!0!==c.isCancelled){if(0!==n.maxFileSize&&a.size>n.maxFileSize)return t="Maximum file size is "+$e.formatSize(n.maxFileSize),!1===n.silent&&$(i.el).w2tag(t),void console.log("ERROR: "+t);if(0!==n.maxSize&&r+a.size>n.maxSize)return t=$e.lang("Maximum total size is ${count}",{count:$e.formatSize(n.maxSize)}),void(!1===n.silent?$(i.el).w2tag(t):console.log("ERROR: "+t));if(0!==n.max&&o>=n.max)return t=$e.lang("Maximum number of files is ${count}",{count:n.max}),void(!1===n.silent?$(i.el).w2tag(t):console.log("ERROR: "+t));if(s.push(a),"undefined"!==typeof FileReader&&!0===n.readContent){var d=new FileReader;d.onload=function(){return function(e){var t=e.target.result,n=t.indexOf(",");a.content=t.substr(n+1),i.refresh(),$(i.el).trigger("input").trigger("change"),i.trigger($.extend(c,{phase:"after"}))}}(),d.readAsDataURL(e)}else i.refresh(),$(i.el).trigger("input").trigger("change"),i.trigger($.extend(c,{phase:"after"}))}}},{key:"getMonthHTML",value:function(e,t,i){var n=new Date,s=$e.settings.fullmonths,a=["31","28","31","30","31","30","31","31","30","31","30","31"],r=n.getFullYear()+"/"+(Number(n.getMonth())+1)+"/"+n.getDate(),o=$e.settings.fulldays.slice(),l=$e.settings.shortdays.slice();"M"!==$e.settings.weekStarts&&(o.unshift(o.pop()),l.unshift(l.pop()));var c=this.options;null==c&&(c={}),t=$e.isInt(t)?parseInt(t):n.getFullYear(),e=$e.isInt(e)?parseInt(e):n.getMonth()+1,e>12&&(e-=12,t++),(e<1||0===e)&&(e+=12,t--),t/4==Math.floor(t/4)?a[1]="29":a[1]="28",c.current=e+"/"+t,n=new Date(t,e-1,1);for(var d=n.getDay(),u="",h=0;h<l.length;h++)u+='<td title="'+o[h]+'">'+l[h]+"</td>";var p='<div class="w2ui-calendar-title title">    <div class="w2ui-calendar-previous previous"> <div></div> </div>    <div class="w2ui-calendar-next next"> <div></div> </div> '+s[e-1]+", "+t+'       <span class="arrow-down" style="position: relative; top: -1px; left: 5px; opacity: 0.6;"></span></div><table class="w2ui-calendar-days" cellspacing="0"><tbody>    <tr class="w2ui-day-title">'+u+"</tr>    <tr>",f=1;if("M"!==$e.settings.weekStarts&&d++,"datetime"===this.type){var g=$e.isDateTime(i,c.format,!0);i=$e.formatDate(g,$e.settings.dateFormat)}for(var m=1;m<43;m++){if(0===d&&1==m){for(var v=0;v<6;v++)p+='<td class="w2ui-day-empty">&#160;</td>';m+=6}else if(m<d||f>a[e-1]){p+='<td class="w2ui-day-empty">&#160;</td>',m%7===0&&(p+="</tr><tr>");continue}var y=t+"/"+e+"/"+f,b=new Date(y),w="";6===b.getDay()&&(w=" w2ui-saturday"),0===b.getDay()&&(w=" w2ui-sunday"),y==r&&(w+=" w2ui-today");var x=f,_="",$="",k=void 0,C=void 0;if("datetime"===this.type?(k=$e.formatDateTime(y,c.format),C=$e.formatDate(y,$e.settings.dateFormat)):(k=$e.formatDate(y,c.format),C=k),c.colored&&void 0!==c.colored[C]){var T=c.colored[C].split(":");$="background-color: "+T[0]+";",_="color: "+T[1]+";"}p+='<td class="'+(this.inRange(k,!0)?"w2ui-date "+(C==i?"w2ui-date-selected":""):"w2ui-blocked")+w+'"    style="'+_+$+'" date="'+k+'" data-date="'+b+'">'+x+"</td>",(m%7===0||0===d&&1==m)&&(p+="</tr><tr>"),f++}return p+="</tr></tbody></table>",p}},{key:"getYearHTML",value:function(){for(var e=$e.settings.shortmonths,t=$e.settings.dateStartYear,i=$e.settings.dateEndYear,n="",s="",a=0;a<e.length;a++)n+='<div class="w2ui-jump-month" name="'+a+'">'+e[a]+"</div>";for(var r=t;r<=i;r++)s+='<div class="w2ui-jump-year" name="'+r+'">'+r+"</div>";return'<div id="w2ui-jump-month">'+n+'</div><div id="w2ui-jump-year">'+s+"</div>"}},{key:"getHourHTML",value:function(){var e=[],t=this.options;null==t&&(t={format:$e.settings.timeFormat});for(var i=t.format.indexOf("h24")>-1,n=0;n<24;n++){var s=(n>=12&&!i?n-12:n)+":00"+(i?"":n<12?" am":" pm");12!=n||i||(s="12:00 pm"),e[Math.floor(n/8)]||(e[Math.floor(n/8)]="");var a=this.fromMin(this.toMin(s)),r=this.fromMin(this.toMin(s)+59);if("datetime"===this.type){var o=$e.isDateTime(this.el.value,t.format,!0),l=t.format.split("|")[0].trim();a=$e.formatDate(o,l)+" "+a,r=$e.formatDate(o,l)+" "+r}e[Math.floor(n/8)]+='<div class="'+(this.inRange(a)||this.inRange(r)?"w2ui-time ":"w2ui-blocked")+'" hour="'+n+'">'+s+"</div>"}var c='<div class="w2ui-calendar">   <div class="w2ui-calendar-title">'+$e.lang("Select Hour")+'</div>   <div class="w2ui-calendar-time"><table><tbody><tr>       <td>'+e[0]+"</td>       <td>"+e[1]+"</td>       <td>"+e[2]+"</td>   </tr></tbody></table></div></div>";return c}},{key:"getMinHTML",value:function(e){null==e&&(e=0);var t=this.options;null==t&&(t={format:$e.settings.timeFormat});for(var i=t.format.indexOf("h24")>-1,n=[],s=0;s<60;s+=5){var a=(e>12&&!i?e-12:e)+":"+(s<10?0:"")+s+" "+(i?"":e<12?"am":"pm"),r=a,o=s<20?0:s<40?1:2;if(n[o]||(n[o]=""),"datetime"===this.type){var l=$e.isDateTime(this.el.value,t.format,!0),c=t.format.split("|")[0].trim();r=$e.formatDate(l,c)+" "+r}n[o]+='<div class="'+(this.inRange(r)?"w2ui-time ":"w2ui-blocked")+'" min="'+s+'">'+a+"</div>"}var d='<div class="w2ui-calendar">   <div class="w2ui-calendar-title">'+$e.lang("Select Minute")+'</div>   <div class="w2ui-calendar-time"><table><tbody><tr>       <td>'+n[0]+"</td>       <td>"+n[1]+"</td>       <td>"+n[2]+"</td>   </tr></tbody></table></div></div>";return d}},{key:"toMin",value:function(e){if("string"!==typeof e)return null;var t=e.split(":");return 2!==t.length?null:(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),-1!==e.indexOf("pm")&&12!==t[0]&&(t[0]+=12),60*t[0]+t[1])}},{key:"fromMin",value:function(e){var t="";e>=1440&&(e%=1440),e<0&&(e=1440+e);var i=Math.floor(e/60),n=(e%60<10?"0":"")+e%60,s=this.options;return null==s&&(s={format:$e.settings.timeFormat}),t=-1!==s.format.indexOf("h24")?i+":"+n:(i<=12?i:i-12)+":"+n+" "+(i>=12?"pm":"am"),t}}]),i}(we),Me=function(e){Object(he["a"])(i,e);var t=ye(i);function i(e){var n;Object(me["a"])(this,i),n=t.call(this,e.name),n.name=null,n.header="",n.box=null,n.url="",n.routeData={},n.formURL="",n.formHTML="",n.page=0,n.pageStyle="",n.recid=0,n.fields=[],n.actions={},n.record={},n.original=null,n.postData={},n.httpHeaders={},n.method=null,n.toolbar={},n.tabs={},n.style="",n.focus=0,n.autosize=!0,n.nestedFields=!0,n.multipart=!1,n.tabindexBase=0,n.isGenerated=!1,n.last={xhr:null,errors:[]},n.onRequest=null,n.onLoad=null,n.onValidate=null,n.onSubmit=null,n.onProgress=null,n.onSave=null,n.onChange=null,n.onInput=null,n.onRender=null,n.onRefresh=null,n.onResize=null,n.onDestroy=null,n.onAction=null,n.onToolbar=null,n.onError=null,n.msgNotJSON="Returned data is not in valid JSON format.",n.msgAJAXerror="AJAX error. See console for more details.",n.msgRefresh="Loading...",n.msgSaving="Saving...",$.extend(!0,Object(ue["a"])(n),e);var s=e.record,a=e.original,r=e.fields,o=e.toolbar,l=e.tabs;if($.extend(Object(ue["a"])(n),{record:{},original:null,fields:[],tabs:{},toolbar:{},handlers:[]}),Array.isArray(l)){$.extend(!0,n.tabs,{tabs:[]});for(var c=0;c<l.length;c++){var d=l[c];"object"===Object(ge["a"])(d)?(n.tabs.tabs.push(d),!0===d.active&&(n.tabs.active=d.id)):n.tabs.tabs.push({id:d,text:d})}}else $.extend(!0,n.tabs,l);for(var u in $.extend(!0,n.toolbar,o),r&&(n.fields=p(r)),s)$.isPlainObject(s[u])?n.record[u]=$.extend(!0,{},s[u]):n.record[u]=s[u];for(var h in a)$.isPlainObject(a[h])?n.original[h]=$.extend(!0,{},a[h]):n.original[h]=a[h];function p(e){var t=[];if($.isPlainObject(e)){var i=function(e){var t=["html"];return null==e.html&&(e.html={}),Object.keys(e).forEach((function(i){-1==t.indexOf(i)&&-1!=["label","attr","style","text","span","page","column","anchor","group","groupStyle","groupTitleStyle","groupCollapsible"].indexOf(i)&&(e.html[i]=e[i],delete e[i])})),e},n=e;e=[],Object.keys(n).forEach((function(t){var s=n[t];if("group"==s.type){if(s.text=t,$.isPlainObject(s.fields)){var a=s.fields;s.fields=[],Object.keys(a).forEach((function(e){var t=a[e];t.field=e,s.fields.push(i(t))}))}}else s.field=t;e.push("group"==s.type?s:i(s))}))}return e.forEach((function(e){if("group"==e.type){var i={group:e.text||"",groupStyle:e.style||"",groupTitleStyle:e.titleStyle||"",groupCollapsible:!0===e.collapsible};Array.isArray(e.fields)&&e.fields.forEach((function(n){var s=$.extend(!0,{},n);null==s.html&&(s.html={}),$.extend(s.html,i),Array("span","page","column","attr").forEach((function(t){null==s.html[t]&&null!=e[t]&&(s.html[t]=e[t])})),null==s.field&&null!=s.name&&(console.log("NOTICE: form field.name property is deprecated, please use field.field. Field ->",e),s.field=s.name),t.push(s)}))}else{var n=$.extend(!0,{},e);null==n.field&&null!=n.name&&(console.log("NOTICE: form field.name property is deprecated, please use field.field. Field ->",e),n.field=n.name),t.push(n)}})),t}return""!==n.formURL?$.get(n.formURL,(function(e){n.formHTML=e,n.isGenerated=!0})):n.formURL||n.formHTML||(n.formHTML=n.generateHTML(),n.isGenerated=!0),n}return Object(ve["a"])(i,[{key:"get",value:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.fields.length;n++)null!=this.fields[n].field&&i.push(this.fields[n].field);return i}for(var s=0;s<this.fields.length;s++)if(this.fields[s].field==e)return!0===t?s:this.fields[s];return null}},{key:"set",value:function(e,t){for(var i=0;i<this.fields.length;i++)if(this.fields[i].field==e)return $.extend(this.fields[i],t),this.refresh(e),!0;return!1}},{key:"getValue",value:function(e){if(this.nestedFields){var t=void 0;try{var i=this.record;t=String(e).split(".").reduce((function(e,t){return e[t]}),i)}catch(event){}return t}return this.record[e]}},{key:"setValue",value:function(e,t){if(!this.nestedFields)return this.record[e]=t,!0;try{var i=this.record;return String(e).split(".").map((function(e,n,s){s.length-1!==n?(i[e]||(i[e]={}),i=i[e]):i[e]=t})),!0}catch(event){return!1}}},{key:"show",value:function(){for(var e=[],t=0;t<arguments.length;t++){var i=this.get(arguments[t]);i&&i.hidden&&(i.hidden=!1,e.push(i.field))}return e.length>0&&this.refresh.apply(this,e),this.updateEmptyGroups(),e}},{key:"hide",value:function(){for(var e=[],t=0;t<arguments.length;t++){var i=this.get(arguments[t]);i&&!i.hidden&&(i.hidden=!0,e.push(i.field))}return e.length>0&&this.refresh.apply(this,e),this.updateEmptyGroups(),e}},{key:"enable",value:function(){for(var e=[],t=0;t<arguments.length;t++){var i=this.get(arguments[t]);i&&i.disabled&&(i.disabled=!1,e.push(i.field))}return e.length>0&&this.refresh.apply(this,e),e}},{key:"disable",value:function(){for(var e=[],t=0;t<arguments.length;t++){var i=this.get(arguments[t]);i&&!i.disabled&&(i.disabled=!0,e.push(i.field))}return e.length>0&&this.refresh.apply(this,e),e}},{key:"updateEmptyGroups",value:function(){function e(e){var t=!0;return e.each((function(e,i){"none"!=i.style.display&&(t=!1)})),t}$(this.box).find(".w2ui-group").each((function(t,i){e($(i).find(".w2ui-field"))?$(i).hide():$(i).show()}))}},{key:"change",value:function(){var e=this;Array.from(arguments).forEach((function(t){var i=e.get(t);i.$el&&i.$el.change()}))}},{key:"reload",value:function(e){var t="object"!==Object(ge["a"])(this.url)?this.url:this.url.get;t&&0!==this.recid&&null!=this.recid?this.request(e):"function"===typeof e&&e()}},{key:"clear",value:function(){var e=this;0!=arguments.length?Array.from(arguments).forEach((function(t){var i=e.record;String(t).split(".").map((function(e,t,n){n.length-1!==t?i=i[e]:delete i[e]})),e.refresh(t)})):(this.recid=0,this.record={},this.original=null,this.refresh()),$().w2tag()}},{key:"error",value:function(e){var t=this,i=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});!0!==i.isCancelled&&(setTimeout((function(){t.message(e)}),1),this.trigger($.extend(i,{phase:"after"})))}},{key:"message",value:function(e){return"string"===typeof e&&(e={width:e.length<300?350:550,height:e.length<300?170:250,body:'<div class="w2ui-centered">'+e+"</div>",buttons:'<button class="w2ui-btn" onclick="w2ui[\''.concat(this.name,"'].message()\">Ok</button>"),onOpen:function(e){setTimeout((function(){$(e.box).find(".w2ui-btn").focus()}),25)}}),$e.message.call(this,{box:this.box,path:"w2ui."+this.name,title:".w2ui-form-header:visible",body:".w2ui-form-box"},e)}},{key:"confirm",value:function(e,t){var i=this;"string"==typeof e&&(e={width:e.length<300?350:550,height:e.length<300?170:250,body:'<div class="w2ui-centered">'+e+"</div>"});var n=function(){"function"==typeof e.yes_click&&e.yes_click("yes"),"function"==typeof t&&t("yes"),i.message()},s=function(){"function"==typeof e.no_click&&e.no_click("no"),"function"==typeof t&&t("no"),i.message()},a='<button type="button" class="w2ui-btn btn-yes '.concat(e.yes_class||"",'">').concat($e.lang(e.yes_text||"Yes"),"</button>"),r='<button type="button" class="w2ui-btn btn-no '.concat(e.no_class||"",'">').concat($e.lang(e.no_text||"No"),"</button>");Object.assign(e,{buttons:$e.settings.macButtonOrder?r+a:a+r,onOpen:function(e){var t=this;setTimeout((function(){var e=$(t.box).find(".w2ui-btn");e.off(".message").on("blur.message",(function(t){e.index(t.target)+1===e.length&&(e.get(0).focus(),t.preventDefault())})).on("keydown.message",(function(e){27==e.keyCode&&s()})).focus(),$(t.box).find(".w2ui-btn.btn-yes").off("click").on("click",n),$(t.box).find(".w2ui-btn.btn-no").off("click").on("click",s)}),25)}}),$e.message.call(this,{box:this.box,path:"w2ui."+this.name,title:".w2ui-form-header:visible",body:".w2ui-form-box"},e);var o={yes:function(t){return e.yes_click=t,o},no:function(t){return e.no_click=t,o}};return o}},{key:"validate",value:function(e){null==e&&(e=!0),$().w2tag();for(var t=[],i=0;i<this.fields.length;i++){var n=this.fields[i];switch(null==this.getValue(n.field)&&this.setValue(n.field,""),n.type){case"alphanumeric":this.getValue(n.field)&&!$e.isAlphaNumeric(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not alpha-numeric")});break;case"int":this.getValue(n.field)&&!$e.isInt(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not an integer")});break;case"float":this.getValue(n.field)&&!$e.isFloat(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not a float")});break;case"currency":case"money":this.getValue(n.field)&&!$e.isMoney(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not in money format")});break;case"color":case"hex":this.getValue(n.field)&&!$e.isHex(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not a hex number")});break;case"email":this.getValue(n.field)&&!$e.isEmail(this.getValue(n.field))&&t.push({field:n,error:$e.lang("Not a valid email")});break;case"checkbox":1==this.getValue(n.field)?this.setValue(n.field,1):this.setValue(n.field,0);break;case"date":n.options.format||(n.options.format=$e.settings.dateFormat),this.getValue(n.field)&&!$e.isDate(this.getValue(n.field),n.options.format)&&t.push({field:n,error:$e.lang("Not a valid date")+": "+n.options.format});break;case"list":case"combo":break;case"enum":break}var s=this.getValue(n.field);n.required&&!0!==n.hidden&&-1==["div","custom","html","empty"].indexOf(n.type)&&(""===s||Array.isArray(s)&&0===s.length||$.isPlainObject(s)&&$.isEmptyObject(s))&&t.push({field:n,error:$e.lang("Required field")}),n.options&&!0!==n.hidden&&n.options.minLength>0&&-1==["enum","list","combo"].indexOf(n.type)&&this.getValue(n.field).length<n.options.minLength&&t.push({field:n,error:$e.lang("Field should be at least ${count} characters.",{count:n.options.minLength})})}var a=this.trigger({phase:"before",target:this.name,type:"validate",errors:t});if(!0!==a.isCancelled)return this.last.errors=t,e&&this.showErrors(),this.trigger($.extend(a,{phase:"after"})),t}},{key:"showErrors",value:function(){var e=this.last.errors;if(e.length>0){var t=e[0];this.goto(e[0].field.page),$(t.field.$el).parents(".w2ui-field")[0].scrollIntoView(!0);for(var i=0;i<e.length;i++){t=e[i];var n=$.extend({class:"w2ui-error",hideOnFocus:!0},t.options);null!=t.field&&("radio"===t.field.type?$($(t.field.el).closest("div")[0]).w2tag(t.error,n):-1!==["enum","file"].indexOf(t.field.type)?function(e){setTimeout((function(){var t=$(e.field.el).data("w2field").helpers.multi;$(e.field.el).w2tag(e.error,e.options),$(t).addClass("w2ui-error")}),1)}(t):$(t.field.el).w2tag(t.error,n))}setTimeout((function(){var t=e[0];$(t.field.$el).parents(".w2ui-page").off(".hideErrors").on("scroll.hideErrors",(function(i){for(var n=0;n<e.length;n++)t=e[n],$(t.field.el).w2tag();$(t.field.$el).parents(".w2ui-page").off(".hideErrors")}))}),300)}}},{key:"getChanges",value:function(){var e={};return null==this.original||"object"!=Object(ge["a"])(this.original)||$.isEmptyObject(this.record)||(e=t(this.record,this.original,{})),e;function t(e,i,n){if(Array.isArray(e)&&Array.isArray(i))while(e.length<i.length)e.push(null);for(var s in e)null!=e[s]&&"object"===Object(ge["a"])(e[s])?(n[s]=t(e[s],i[s]||{},{}),(!n[s]||$.isEmptyObject(n[s])&&$.isEmptyObject(i[s]))&&delete n[s]):(e[s]!=i[s]||null==e[s]&&null!=i[s])&&(n[s]=e[s]);return $.isEmptyObject(n)?null:n}}},{key:"getCleanRecord",value:function(e){var t=this,i=$.extend(!0,{},this.record);return this.fields.forEach((function(e){if(-1!=["list","combo","enum"].indexOf(e.type)){var n={nestedFields:!0,record:i},s=t.getValue.call(n,e.field);$.isPlainObject(s)&&null!=s.id&&t.setValue.call(n,e.field,s.id),Array.isArray(s)&&s.forEach((function(e,t){$.isPlainObject(e)&&e.id&&(s[t]=e.id)}))}if("map"==e.type){var a={nestedFields:!0,record:i},r=t.getValue.call(a,e.field);r._order&&delete r._order}})),!0===e&&Object.keys(i).forEach((function(e){t.get(e)||delete i[e]})),i}},{key:"request",value:function(e,t){var i=this;if("function"===typeof e&&(t=e,e=null),null==e&&(e={}),this.url&&("object"!==Object(ge["a"])(this.url)||this.url.get)){null==this.recid&&(this.recid=0);var n={cmd:"get"};n.recid=this.recid,n.name=this.name,$.extend(n,this.postData),$.extend(n,e);var s=this.trigger({phase:"before",type:"request",target:this.name,url:this.url,postData:n,httpHeaders:this.httpHeaders});if(!0!==s.isCancelled){this.record={},this.original=null,this.lock($e.lang(this.msgRefresh));var a=s.url;if("object"===Object(ge["a"])(s.url)&&s.url.get&&(a=s.url.get),this.last.xhr)try{this.last.xhr.abort()}catch(d){}if(!$.isEmptyObject(i.routeData)){var r=$e.parseRoute(a);if(r.keys.length>0)for(var o=0;o<r.keys.length;o++)null!=i.routeData[r.keys[o].name]&&(a=a.replace(new RegExp(":"+r.keys[o].name,"g"),i.routeData[r.keys[o].name]))}var l={type:"POST",url:a,data:s.postData,headers:s.httpHeaders,dataType:"json"},c=i.dataType||$e.settings.dataType;switch(s.dataType&&(c=s.dataType),c){case"HTTP":l.data=String($.param(l.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]");break;case"HTTPJSON":l.data={request:JSON.stringify(l.data)};break;case"RESTFULL":l.type="GET",l.data=String($.param(l.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]");break;case"RESTFULLJSON":l.type="GET",l.data=l.data,l.data.w2ui=!0,l.contentType="application/json",console.lop("ENTRANDO RESTFULLJSON 2");break;case"JSON":l.type="POST",l.data=JSON.stringify(l.data),l.contentType="application/json";break}this.method&&(l.type=this.method),s.method&&(l.type=s.method),this.last.xhr=$.ajax(l).done((function(e,n,s){i.unlock(),e=s.responseJSON,null==e&&(e={status:"error",message:$e.lang(i.msgNotJSON),responseText:s.responseText});var a=i.trigger({phase:"before",target:i.name,type:"load",data:e,xhr:s});!0!==a.isCancelled?("error"===a.data.status?i.error($e.lang(a.data.message)):i.record=$.extend({},a.data.record),i.trigger($.extend(a,{phase:"after"})),i.refresh(),i.applyFocus(),"function"===typeof t&&t(a.data)):"function"===typeof t&&t({status:"error",message:$e.lang("Request aborted.")})})).fail((function(e,t,n){var s={status:t,error:n,rawResponseText:e.responseText},a=i.trigger({phase:"before",type:"error",error:s,xhr:e});if(!0!==a.isCancelled){if("abort"!==t){var r;try{r="object"===Object(ge["a"])(e.responseJSON)?e.responseJSON:JSON.parse(e.responseText)}catch(d){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",items:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"===Object(ge["a"])(r)?r:e.responseText),i.unlock()}i.trigger($.extend(a,{phase:"after"}))}})),this.trigger($.extend(s,{phase:"after"}))}else"function"===typeof t&&t({status:"error",message:$e.lang("Request aborted.")})}}},{key:"submit",value:function(e,t){return this.save(e,t)}},{key:"save",value:function(e,t){var i=this,n=this;$(this.box).find(":focus").change(),"function"===typeof e&&(t=e,e=null);var s=n.validate(!0);0===s.length&&(null==e&&(e={}),n.url&&("object"!==Object(ge["a"])(n.url)||n.url.save)?(n.lock($e.lang(n.msgSaving)+' <span id="'+n.name+'_progress"></span>'),setTimeout((function(){var s={cmd:"save"};s.recid=n.recid,s.name=n.name,$.extend(s,n.postData),$.extend(s,e),n.multipart||n.fields.forEach((function(e){"file"===e.type&&Array.isArray(n.getValue(e.field))&&n.getValue(e.field).forEach((function(e){delete e.file}))})),s.record=$.extend(!0,{},n.record),s=s.record;var a=n.trigger({phase:"before",type:"submit",target:n.name,url:n.url,postData:s,httpHeaders:n.httpHeaders});if(!0!==a.isCancelled){var r=a.url;if("object"===Object(ge["a"])(a.url)&&a.url.save&&(r=a.url.save),n.last.xhr)try{n.last.xhr.abort()}catch(p){}if(!$.isEmptyObject(n.routeData)){var o=$e.parseRoute(r);if(o.keys.length>0)for(var l=0;l<o.keys.length;l++)null!=n.routeData[o.keys[l].name]&&(r=r.replace(new RegExp(":"+o.keys[l].name,"g"),n.routeData[o.keys[l].name]))}var c={type:"POST",url:r,data:a.postData,headers:a.httpHeaders,dataType:"json",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=n.trigger({phase:"before",type:"progress",total:e.total,loaded:e.loaded,originalEvent:e});if(!0===t.isCancelled)return;var i=Math.round(e.loaded/e.total*100);(i&&100!=i||""!=$("#"+n.name+"_progress").text())&&$("#"+n.name+"_progress").text(i+"%"),n.trigger($.extend(t,{phase:"after"}))}}),!1),e}},d=n.dataType||$e.settings.dataType;switch(a.dataType&&(d=a.dataType),d){case"HTTP":c.data=String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]");break;case"HTTPJSON":c.data={request:JSON.stringify(c.data)};break;case"RESTFULL":0!==n.recid&&null!=n.recid&&(c.type="PUT"),c.data=String($.param(c.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]");break;case"RESTFULLJSON":0!==n.recid&&null!=n.recid&&(c.type="PUT"),c.data=c.data,c.data.w2ui=!0,c.data=JSON.stringify(c.data),c.contentType="application/json",console.log("entrando RESTFULLJSON 3");break;case"JSON":if(c.type="POST",c.contentType="application/json",n.multipart){var u=function e(t,i,n,s){function a(i,n,s){if("object"===Object(ge["a"])(i)&&i instanceof File&&t.append(s,i),"object"===Object(ge["a"])(i))if(i&&i.constructor===Array)for(var r=0;r<i.length;r++){var o=n?n[r]:n;a(i[r],o,s+"["+r+"]")}else e(t,i,n,s)}for(var r in null==s&&(s=""),i){var o=""==s?r:"${p}[${prop}]",l=n?n[r]:n;a(i[r],l,o)}},h=new FormData;h.append("__body",JSON.stringify(c.data)),u(h,c.data),c.data=h,c.contentType=!1,c.processData=!1}else c.data=JSON.stringify(c.data);break}i.method&&(c.type=i.method),a.method&&(c.type=a.method),n.last.xhr=$.ajax(c).done((function(e,i,s){n.unlock();var a=n.trigger({phase:"before",target:n.name,type:"save",xhr:s,status:i,data:e});!0!==a.isCancelled&&(e=s.responseJSON,null==e&&(e={status:"error",message:$e.lang(n.msgNotJSON),responseText:s.responseText}),"error"===e.status?n.error($e.lang(e.message)):n.original=null,n.trigger($.extend(a,{phase:"after"})),n.refresh(),"function"===typeof t&&t(e,s))})).fail((function(e,t,i){var s={status:t,error:i,rawResponseText:e.responseText},a=n.trigger({phase:"before",type:"error",error:s,xhr:e});!0!==a.isCancelled&&(console.log("ERROR: server communication failed. The server should return",{status:"success"},"OR",{status:"error",message:"error message"},", instead the AJAX request produced this: ",s),n.unlock(),n.trigger($.extend(a,{phase:"after"})))})),n.trigger($.extend(a,{phase:"after"}))}}),50)):console.log("ERROR: Form cannot be saved because no url is defined."))}},{key:"lock",value:function(e,t){var i=Array.prototype.slice.call(arguments,0);i.unshift(this.box),setTimeout((function(){$e.lock.apply(window,i)}),10)}},{key:"unlock",value:function(e){var t=this.box;setTimeout((function(){$e.unlock(t,e)}),25)}},{key:"lockPage",value:function(e,t,i){var n=$(this.box).find(".page-"+e);return!!n.length&&($e.lock(n,t,i),!0)}},{key:"unlockPage",value:function(e,t){var i=$(this.box).find(".page-"+e);return!!i.length&&($e.unlock(i,t),!0)}},{key:"goto",value:function(e){this.page!==e&&(null!=e&&(this.page=e),!0===$(this.box).data("auto-size")&&$(this.box).height(0),this.refresh())}},{key:"generateHTML",value:function(){for(var e,t,i,n,s,a=this,r=[],o="",l=0;l<this.fields.length;l++){i="",n=this.tabindexBase+l+1,s=' tabindex="'+n+'"';var c=this.fields[l];null==c.html&&(c.html={}),null==c.options&&(c.options={}),null!=c.html.caption&&null==c.html.label&&(console.log("NOTICE: form field.html.caption property is deprecated, please use field.html.label. Field ->",c),c.html.label=c.html.caption),null==c.html.label&&(c.html.label=c.field),c.html=$.extend(!0,{label:"",span:6,attr:"",text:"",style:"",page:0,column:0},c.html),null==e&&(e=c.html.page),null==t&&(t=c.html.column);var d='<input id="'+c.field+'" name="'+c.field+'" class="w2ui-input" type="text" '+c.html.attr+s+">";switch(c.type){case"pass":case"password":d='<input id="'+c.field+'" name="'+c.field+'" class="w2ui-input" type = "password" '+c.html.attr+s+">";break;case"check":case"checks":null==c.options.items&&null!=c.html.items&&(c.options.items=c.html.items);var u=c.options.items;d="",Array.isArray(u)||(u=[]),u.length>0&&(u=$e.normMenu.call(this,u,c));for(var h=0;h<u.length;h++)d+='<label class="w2ui-box-label">  <input id="'+c.field+h+'" name="'+c.field+'" class="w2ui-input" type="checkbox" '+c.html.attr+s+' data-value="'+u[h].id+'" data-index="'+h+'"><span>&#160;'+u[h].text+"</span></label><br>";break;case"checkbox":d='<label class="w2ui-box-label">   <input id="'+c.field+'" name="'+c.field+'" class="w2ui-input" type="checkbox" '+c.html.attr+s+">   <span>"+c.html.label+"</span></label>";break;case"radio":d="",null==c.options.items&&null!=c.html.items&&(c.options.items=c.html.items);var p=c.options.items;Array.isArray(p)||(p=[]),p.length>0&&(p=$e.normMenu.call(this,p,c));for(var f=0;f<p.length;f++)d+='<label class="w2ui-box-label">  <input id="'+c.field+f+'" name="'+c.field+'" class="w2ui-input" type = "radio" '+c.html.attr+(0===f?s:"")+' value="'+p[f].id+'"><span>&#160;'+p[f].text+"</span></label><br>";break;case"select":d='<select id="'+c.field+'" name="'+c.field+'" class="w2ui-input" '+c.html.attr+s+">",null==c.options.items&&null!=c.html.items&&(c.options.items=c.html.items);var g=c.options.items;Array.isArray(g)||(g=[]),g.length>0&&(g=$e.normMenu.call(this,g,c));for(var m=0;m<g.length;m++)d+='<option value="'+g[m].id+'">'+g[m].text+"</option>";d+="</select>";break;case"textarea":d='<textarea id="'+c.field+'" name="'+c.field+'" class="w2ui-input" '+c.html.attr+s+"></textarea>";break;case"toggle":d='<input id="'+c.field+'" name="'+c.field+'" type="checkbox" '+c.html.attr+s+' class="w2ui-input w2ui-toggle"><div><div></div></div>';break;case"map":case"array":c.html.key=c.html.key||{},c.html.value=c.html.value||{},c.html.tabindex_str=s,d='<span style="float: right">'+(c.html.text||"")+'</span><input id="'+c.field+'" name="'+c.field+'" type="hidden" '+c.html.attr+s+'><div class="w2ui-map-container"></div>';break;case"div":case"custom":d='<div id="'+c.field+'" name="'+c.field+'" '+c.html.attr+s+' class="w2ui-input">'+(c&&c.html&&c.html.html?c.html.html:"")+"</div>";break;case"html":case"empty":d=c&&c.html?(c.html.html||"")+(c.html.text||""):"";break}if(""!==o&&(e!=c.html.page||t!=c.html.column||c.html.group&&o!=c.html.group)&&(r[e][t]+="\n   </div>\n  </div>",o=""),c.html.group&&o!=c.html.group){var v="";c.html.groupCollapsible&&(v='<span class="w2ui-icon-collapse" style="width: 15px; display: inline-block; position: relative; top: -2px;"></span>'),i+='\n <div class="w2ui-group">\n   <div class="w2ui-group-title" style="'+(c.html.groupTitleStyle||"")+"; "+(""!=v?"cursor: pointer; user-select: none":"")+'"'+(""!=v?'data-group="'+$e.base64encode(c.html.group)+'"':"")+(""!=v?"onclick=\"w2ui['"+this.name+"'].toggleGroup('"+c.html.group+"')\"":"")+">"+v+c.html.group+'</div>\n   <div class="w2ui-group-fields" style="'+(c.html.groupStyle||"")+'">',o=c.html.group}if(null==c.html.anchor){var y=null!=c.html.span?"w2ui-span"+c.html.span:"";-1==c.html.span&&(y="w2ui-span-none");var b="<label"+("none"==y?' style="display: none"':"")+">"+$e.lang("checkbox"!=c.type?c.html.label:c.html.text,!0)+"</label>";c.html.label||(b=""),i+='\n      <div class="w2ui-field '+y+'" style="'+(c.hidden?"display: none;":"")+c.html.style+'">\n         '+b+("empty"===c.type?d:"\n         <div>"+d+("array"!=c.type&&"map"!=c.type?$e.lang("checkbox"!=c.type?c.html.text:"",!0):"")+"</div>")+"\n      </div>"}else r[c.html.page].anchors=r[c.html.page].anchors||{},r[c.html.page].anchors[c.html.anchor]='<div class="w2ui-field w2ui-field-inline" style="'+(c.hidden?"display: none;":"")+c.html.style+'">'+("empty"===c.type?d:"<div>"+$e.lang("checkbox"!=c.type?c.html.label:c.html.text,!0)+d+$e.lang("checkbox"!=c.type?c.html.text:"",!0)+"</div>")+"</div>";null==r[c.html.page]&&(r[c.html.page]={}),null==r[c.html.page][c.html.column]&&(r[c.html.page][c.html.column]=""),r[c.html.page][c.html.column]+=i,e=c.html.page,t=c.html.column}if(""!==o&&(r[e][t]+="\n   </div>\n  </div>"),this.tabs.tabs)for(var w=0;w<this.tabs.tabs.length;w++)null==r[w]&&(r[w]=[]);var x="";if(!$.isEmptyObject(this.actions)){for(var _ in x+='\n<div class="w2ui-buttons">',n=this.tabindexBase+this.fields.length+1,this.actions){var k=this.actions[_],C={text:"",style:"",class:""};$.isPlainObject(k)?(null==k.text&&null!=k.caption&&(console.log("NOTICE: form action.caption property is deprecated, please use action.text. Action ->",k),k.text=k.caption),k.text&&(C.text=k.text),k.style&&(C.style=k.style),k.class&&(C.class=k.class)):(C.text=_,-1!==["save","update","create"].indexOf(_.toLowerCase())?C.class="w2ui-btn-blue":C.class=""),x+='\n    <button name="'+_+'" class="w2ui-btn '+C.class+'" style="'+C.style+'" tabindex="'+n+'">'+$e.lang(C.text,!0)+"</button>",n++}x+="\n</div>"}i="";for(var T=function(e){if(i+='<div class="w2ui-page page-'+e+'" style="'+(0!==e?"display: none;":"")+a.pageStyle+'">',!r[e])return console.log("ERROR: Page ".concat(e," does not exist")),{v:!1};r[e].before&&(i+=r[e].before),i+='<div class="w2ui-column-container">',Object.keys(r[e]).sort().forEach((function(t,n){t==parseInt(t)&&(i+='<div class="w2ui-column col-'+t+'">'+(r[e][t]||"")+"\n</div>")})),i+="\n</div>",r[e].after&&(i+=r[e].after),i+="\n</div>",r[e].anchors&&Object.keys(r[e].anchors).forEach((function(t,n){i=i.replace(t,r[e].anchors[t])}))},S=0;S<r.length;S++){var O=T(S);if("object"===Object(ge["a"])(O))return O.v}return i+=x,i}},{key:"toggleGroup",value:function(e,t){var i=$(this.box).find('.w2ui-group-title[data-group="'+$e.base64encode(e)+'"]');if(i&&i.length){var n=i.next();if("undefined"===typeof t&&(t="none"==n.css("display")),t)n.slideDown(300),n.next().remove(),i.find("span").addClass("w2ui-icon-collapse").removeClass("w2ui-icon-expand");else{n.slideUp(300);var s="width: "+n.css("width")+";padding-left: "+n.css("padding-left")+";padding-right: "+n.css("padding-right")+";margin-left: "+n.css("margin-left")+";margin-right: "+n.css("margin-right")+";";setTimeout((function(){n.after('<div style="height: 5px;'+s+'"></div>')}),100),i.find("span").addClass("w2ui-icon-expand").removeClass("w2ui-icon-collapse")}}}},{key:"action",value:function(e,t){var i=this.actions[e],n=i;$.isPlainObject(i)&&i.onClick&&(n=i.onClick);var s=this.trigger({phase:"before",target:e,type:"action",action:i,originalEvent:t});!0!==s.isCancelled&&("function"===typeof n&&n.call(this,t),this.trigger($.extend(s,{phase:"after"})))}},{key:"resize",value:function(){var e=this,t=this.trigger({phase:"before",target:this.name,type:"resize"});if(!0!==t.isCancelled){var i=$(this.box).find("> div.w2ui-form-box"),n=$(this.box).find("> div .w2ui-form-header"),s=$(this.box).find("> div .w2ui-form-toolbar"),a=$(this.box).find("> div .w2ui-form-tabs"),r=$(this.box).find("> div .w2ui-page"),o=$(this.box).find("> div .w2ui-page.page-"+this.page),l=$(this.box).find("> div .w2ui-page.page-"+this.page+" > div"),c=$(this.box).find("> div .w2ui-buttons");d(),this.autosize&&(0!==parseInt($(this.box).height())&&!0!==$(this.box).data("auto-size")||($(this.box).height((n.length>0?$e.getSize(n,"height"):0)+("object"===Object(ge["a"])(this.tabs)&&Array.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?$e.getSize(a,"height"):0)+("object"===Object(ge["a"])(this.toolbar)&&Array.isArray(this.toolbar.items)&&this.toolbar.items.length>0?$e.getSize(s,"height"):0)+(r.length>0?$e.getSize(l,"height")+$e.getSize(o,"+height")+12:0)+(c.length>0?$e.getSize(c,"height"):0)),$(this.box).data("auto-size",!0)),d()),this.toolbar&&this.toolbar.resize&&this.toolbar.resize(),this.tabs&&this.tabs.resize&&this.tabs.resize(),e.trigger($.extend(t,{phase:"after"}))}function d(){i.width($(e.box).width()).height($(e.box).height()),s.css("top",""!==e.header?$e.getSize(n,"height"):0),a.css("top",(""!==e.header?$e.getSize(n,"height"):0)+("object"===Object(ge["a"])(e.toolbar)&&Array.isArray(e.toolbar.items)&&e.toolbar.items.length>0?$e.getSize(s,"height"):0)),r.css("top",(""!==e.header?$e.getSize(n,"height"):0)+("object"===Object(ge["a"])(e.toolbar)&&Array.isArray(e.toolbar.items)&&e.toolbar.items.length>0?$e.getSize(s,"height")+5:0)+("object"===Object(ge["a"])(e.tabs)&&Array.isArray(e.tabs.tabs)&&e.tabs.tabs.length>0?$e.getSize(a,"height")+5:0)),r.css("bottom",c.length>0?$e.getSize(c,"height"):0)}}},{key:"refresh",value:function(){var e=this,t=(new Date).getTime(),i=this;if(this.box&&this.isGenerated&&null!=$(this.box).html()){var n=this.trigger({phase:"before",target:this.name,type:"refresh",page:this.page,field:arguments[0],fields:arguments});if(!0!==n.isCancelled){var s=Array.from(this.fields.keys());arguments.length>0?s=Array.from(arguments).map((function(t,i){return"string"!=typeof t&&console.log("ERROR: Arguments in refresh functions should be field names"),e.get(t,!0)})).filter((function(e,t){return null!=e})):($(this.box).find("input, textarea, select").each((function(e,t){var n=null!=$(t).attr("name")?$(t).attr("name"):$(t).attr("id"),s=i.get(n);if(s){var a=$(t).closest(".w2ui-page");if(a.length>0)for(var r=0;r<100;r++)if(a.hasClass("page-"+r)){s.page=r;break}}})),$(this.box).find(".w2ui-page").hide(),$(this.box).find(".w2ui-page.page-"+this.page).show(),$(this.box).find(".w2ui-form-header").html(this.header),"object"===Object(ge["a"])(this.tabs)&&Array.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?($("#form_"+this.name+"_tabs").show(),this.tabs.active=this.tabs.tabs[this.page].id,this.tabs.refresh()):$("#form_"+this.name+"_tabs").hide(),"object"===Object(ge["a"])(this.toolbar)&&Array.isArray(this.toolbar.items)&&this.toolbar.items.length>0?($("#form_"+this.name+"_toolbar").show(),this.toolbar.refresh()):$("#form_"+this.name+"_toolbar").hide());for(var a=0;a<s.length;a++){var r=this.fields[s[a]];null==r.name&&null!=r.field&&(r.name=r.field),null==r.field&&null!=r.name&&(r.field=r.name),r.$el=$(this.box).find('[name="'+String(r.name).replace(/\\/g,"\\\\")+'"]'),r.el=r.$el[0],r.el&&(r.el.id=r.name);var o=$(r).data("w2field");if(o&&o.clear(),$(r.$el).off(".w2form").on("change.w2form",(function(e){var t=this,n=i.get(this.name);if(null!=n)if(1!=$(this).data("skip_change")){var s=this.value,a=i.getValue(this.name);if(null==a&&(a=""),-1!==["list","enum","file"].indexOf(n.type)&&$(this).data("selected")){var r=$(this).data("selected"),o=i.getValue(this.name);if(Array.isArray(r)){s=[];for(var l=0;l<r.length;l++)s[l]=$.extend(!0,{},r[l])}if($.isPlainObject(r)&&(s=$.extend(!0,{},r)),Array.isArray(o)){a=[];for(var c=0;c<o.length;c++)a[c]=$.extend(!0,{},o[c])}$.isPlainObject(o)&&(a=$.extend(!0,{},o))}if(-1!==["toggle","checkbox"].indexOf(n.type)&&(s=!!$(this).prop("checked")&&("on"===$(this).prop("value")||$(this).prop("value"))),-1!==["check","checks"].indexOf(n.type)){Array.isArray(a)||(a=[]),s=a.slice();var d=n.options.items[$(this).attr("data-index")];$(this).prop("checked")?s.push(d.id):s.splice(s.indexOf(d.id),1)}if(-1!==["int","float","percent","money","currency"].indexOf(n.type)&&(s=$(this).data("w2field").clean(s)),s!==a){var u=i.trigger({phase:"before",target:this.name,type:"change",value_new:s,value_previous:a,originalEvent:e});!0===u.isCancelled&&(u.value_new=i.getValue(this.name),$(this).val()!==u.value_new&&($(this).data("skip_change",!0),setTimeout((function(){$(t).data("skip_change",!1)}),10)),$(this).val(u.value_new));var h=u.value_new;if(-1!==["enum","file"].indexOf(n.type)&&h.length>0){var p=$(n.el).data("w2field").helpers.multi;$(p).removeClass("w2ui-error")}(""===h||null==h||Array.isArray(h)&&0===h.length||$.isPlainObject(h)&&$.isEmptyObject(h))&&(h=null),i.setValue(this.name,h),i.trigger($.extend(u,{phase:"after"}))}}else $(this).data("skip_change",!1)})).on("input.w2form",(function(e){var t=this.value;"checkbox"==e.target.type&&(t=e.target.checked),null==i.original&&($.isEmptyObject(i.record)?i.original={}:i.original=$.extend(!0,{},i.record));var n=i.trigger({phase:"before",target:this.name,type:"input",value_new:t,originalEvent:e});!0!==n.isCancelled&&i.trigger($.extend(n,{phase:"after"}))})),r.required?$(r.el).parent().parent().addClass("w2ui-required"):$(r.el).parent().parent().removeClass("w2ui-required"),null!=r.disabled){var l=$(r.el);r.disabled?(null==l.data("w2ui-tabIndex")&&l.data("w2ui-tabIndex",l.prop("tabIndex")),$(r.el).prop("readonly",!0).prop("tabindex",-1).closest(".w2ui-field").addClass("w2ui-disabled")):$(r.el).prop("readonly",!1).prop("tabIndex",l.data("w2ui-tabIndex")).closest(".w2ui-field").removeClass("w2ui-disabled")}o=r.el,o||(o=$(this.box).find("#"+r.field)),r.hidden?$(o).closest(".w2ui-field").hide():$(o).closest(".w2ui-field").show()}$(this.box).find("button, input[type=button]").each((function(e,t){$(t).off("click").on("click",(function(e){var t=this.value;this.id&&(t=this.id),this.name&&(t=this.name),i.action(t,e)}))}));for(var c=function(t){var n=e.fields[s[t]],a=null!=e.getValue(n.name)?e.getValue(n.name):"";if(!n.el)return"continue";switch($(n.el).hasClass("w2ui-input")||$(n.el).addClass("w2ui-input"),n.type=String(n.type).toLowerCase(),n.options||(n.options={}),n.type){case"text":case"textarea":case"email":case"pass":case"password":n.el.value=a;break;case"int":case"float":case"money":case"currency":case"percent":n.el.value=a,$(n.el).w2field($.extend({},n.options,{type:n.type}));break;case"hex":case"alphanumeric":case"color":case"date":case"time":case"datetime":n.el.value=a,$(n.el).w2field($.extend({},n.options,{type:n.type}));break;case"toggle":$e.isFloat(a)&&(a=parseFloat(a)),$(n.el).prop("checked",!!a),e.setValue(n.name,a||!1);break;case"radio":$(n.$el).prop("checked",!1).each((function(e,t){$(t).val()==a&&$(t).prop("checked",!0)}));break;case"checkbox":$(n.el).prop("checked",!!a),!0!==n.disabled&&!1!==n.disabled||$(n.el).prop("disabled",!!n.disabled);break;case"check":case"checks":Array.isArray(a)&&a.forEach((function(e){$(n.el).closest("div").find('[data-value="'+e+'"]').prop("checked",!0)})),n.disabled?$(n.el).closest("div").find("input[type=checkbox]").prop("disabled",!0):$(n.el).closest("div").find("input[type=checkbox]").removeProp("disabled");break;case"list":case"combo":if("list"===n.type){var r=$.isPlainObject(a)?a.id:$.isPlainObject(n.options.selected)?n.options.selected.id:a;n.options.items||(n.options.items=[]);var o=n.options.items;"function"==typeof o&&(o=o());var l=!1;if(Array.isArray(o))for(var c=0;c<o.length;c++){var d=o[c];if(d.id==r){a=$.extend(!0,{},d),i.setValue(n.name,a),l=!0;break}}l||null==a||""===a||n.$el.data("find_selected",a)}else"combo"!==n.type||$.isPlainObject(a)?$.isPlainObject(a)&&null!=a.text?n.el.value=a.text:n.el.value="":n.el.value=a;$.isPlainObject(a)||(a={}),$(n.el).w2field($.extend({},n.options,{type:n.type,selected:a}));break;case"enum":case"file":var u=[],h=!1;Array.isArray(a)||(a=[]),"function"!=typeof n.options.items&&(Array.isArray(n.options.items)||(n.options.items=[]),a.forEach((function(e){n.options.items.forEach((function(t){t&&(t.id==e||$.isPlainObject(e)&&t.id==e.id)&&(u.push($.isPlainObject(t)?$.extend(!0,{},t):t),h=!0)}))}))),h||null==a||0===a.length||(n.$el.data("find_selected",a),u=a);var p=$.extend({},n.options,{type:n.type,selected:u});Object.keys(n.options).forEach((function(e){"function"==typeof n.options[e]&&(p[e]=n.options[e])})),$(n.el).w2field(p);break;case"select":var f=n.options.items;if(null!=f&&f.length>0){f=$e.normMenu.call(e,f,n),$(n.el).html("");for(var g=0;g<f.length;g++)$(n.el).append('<option value="'+f[g].id+'">'+f[g].text+"</option")}$(n.el).val(a);break;case"map":case"array":"map"!=n.type||null!=a&&$.isPlainObject(a)||(e.setValue(n.field,{}),a=e.getValue(n.field)),"array"!=n.type||null!=a&&Array.isArray(a)||(e.setValue(n.field,[]),a=e.getValue(n.field)),function(e,t){t.el.mapAdd=function(e,t,i){var n=(e.disabled?" readOnly ":"")+(e.html.tabindex_str||""),s='<div class="w2ui-map-field" style="margin-bottom: 5px"><input id="'+e.field+"_key_"+i+'" data-cnt="'+i+'" type="text" '+e.html.key.attr+n+' class="w2ui-input w2ui-map key">'+(e.html.key.text||"")+'<input id="'+e.field+"_value_"+i+'" data-cnt="'+i+'" type="text" '+e.html.value.attr+n+' class="w2ui-input w2ui-map value">'+(e.html.value.text||"")+"</div>";t.append(s)},t.el.mapRefresh=function(i,n){var s,a,r,o=1;"map"==t.type&&($.isPlainObject(i)||(i={}),null==i._order&&(i._order=Object.keys(i)),s=i._order),"array"==t.type&&(Array.isArray(i)||(i=[]),s=i.map((function(e){return e.key}))),s.forEach((function(e){a=n.find("#"+$e.escapeId(t.name)+"_key_"+o),r=n.find("#"+$e.escapeId(t.name)+"_value_"+o),0!=a.length&&0!=r.length||(t.el.mapAdd(t,n,o),a=n.find("#"+$e.escapeId(t.name)+"_key_"+o),r=n.find("#"+$e.escapeId(t.name)+"_value_"+o));var s=i[e];if("array"==t.type){var l=i.filter((function(t){return t.key==e}));l.length>0&&(s=l[0].value)}a.val(e),r.val(s),!0!==t.disabled&&!1!==t.disabled||(a.prop("readOnly",!!t.disabled),r.prop("readOnly",!!t.disabled)),a.parents(".w2ui-map-field").attr("data-key",e),o++}));var l=n.find("#"+$e.escapeId(t.name)+"_key_"+o).parent(),c=n.find("#"+$e.escapeId(t.name)+"_key_"+(o+1)).parent();0!==l.length||a&&(!0===a.prop("readOnly")||!0===a.prop("disabled"))||t.el.mapAdd(t,n,o),1==l.length&&1==c.length&&(l.removeAttr("data-key"),l.find(".key").val(c.find(".key").val()),l.find(".value").val(c.find(".value").val()),c.remove()),!0!==t.disabled&&!1!==t.disabled||(l.find(".key").prop("readOnly",!!t.disabled),l.find(".value").prop("readOnly",!!t.disabled)),$(t.el).next().find("input.w2ui-map").off(".mapChange").on("keyup.mapChange",(function(e){var t=$(e.target).parents(".w2ui-map-field");13==e.keyCode&&t.next().find("input.key").focus()})).on("change.mapChange",(function(){var s=$(event.target).parents(".w2ui-map-field"),a=s.attr("data-key"),r=s.find(".key").val(),o=s.find(".value").val(),l={},c={},d=null,u=null;l[r]=o,"array"==t.type&&(i.forEach((function(e,t){e.key==a&&(u=t)})),d=i[u]),null!=a&&"map"==t.type&&(c[a]=i[a]),null!=a&&"array"==t.type&&(c[a]=d.value);var h=e.trigger({phase:"before",target:t.field,type:"change",originalEvent:event,value_new:l,value_previous:c});if(!0!==h.isCancelled){if("map"==t.type){delete i[a];var p=i._order.indexOf(a);if(""!=r){if(null!=i[r]){var f,g=0;do{g++,f=r+g}while(null!=i[f]);r=f,s.find(".key").val(f)}i[r]=o,s.attr("data-key",r),-1!=p?i._order[p]=r:i._order.push(r)}else i._order.splice(p,1),s.find(".value").val("")}else"array"==t.type&&(""!=r?null==d?i.push({key:r,value:o}):(d.key=r,d.value=o):i.splice(u,1));e.setValue(t.field,i),t.el.mapRefresh(i,n),e.trigger($.extend(h,{phase:"after"}))}}))},t.el.mapRefresh(a,$(t.el).parent().find(".w2ui-map-container"))}(e,n);break;case"div":case"custom":$(n.el).html(a);break;case"html":case"empty":break;default:$(n.el).val(a),$(n.el).w2field($.extend({},n.options,{type:n.type}));break}},d=0;d<s.length;d++)c(d);for(var u=$(this.box).find(".w2ui-page"),h=0;h<u.length;h++)$(u[h]).find("> *").length>1&&$(u[h]).wrapInner("<div></div>");return this.trigger($.extend(n,{phase:"after"})),this.resize(),(new Date).getTime()-t}}}},{key:"render",value:function(e){var t=(new Date).getTime(),i=this;if("object"===Object(ge["a"])(e)&&($(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),this.box=e),this.isGenerated&&this.box){var n=this.trigger({phase:"before",target:this.name,type:"render",box:null!=e?e:this.box});if(!0!==n.isCancelled){var s='<div class="w2ui-form-box">'+(""!==this.header?'<div class="w2ui-form-header">'+this.header+"</div>":"")+'    <div id="form_'+this.name+'_toolbar" class="w2ui-form-toolbar" style="display: none"></div>    <div id="form_'+this.name+'_tabs" class="w2ui-form-tabs" style="display: none"></div>'+this.formHTML+"</div>";$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-form").html(s),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),"function"!==typeof this.toolbar.render&&(this.toolbar=new je($.extend({},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.toolbar.on("click",(function(e){var t=i.trigger({phase:"before",type:"toolbar",target:e.target,originalEvent:e});!0!==t.isCancelled&&i.trigger($.extend(t,{phase:"after"}))}))),"object"===Object(ge["a"])(this.toolbar)&&"function"===typeof this.toolbar.render&&this.toolbar.render($("#form_"+this.name+"_toolbar")[0]),"function"!==typeof this.tabs.render&&(this.tabs=new Ae($.extend({},this.tabs,{name:this.name+"_tabs",owner:this,active:this.tabs.active})),this.tabs.on("click",(function(e){i.goto(this.get(e.target,!0))}))),"object"===Object(ge["a"])(this.tabs)&&"function"===typeof this.tabs.render&&(this.tabs.render($("#form_"+this.name+"_tabs")[0]),this.tabs.active&&this.tabs.click(this.tabs.active)),this.trigger($.extend(n,{phase:"after"})),this.resize();var a="object"!==Object(ge["a"])(this.url)?this.url:this.url.get;return a&&0!==this.recid&&null!=this.recid?this.request():this.refresh(),0===$(".w2ui-layout").length&&(this.tmp_resize=function(e){null==_e[i.name]?$(window).off("resize.w2uiResize",i.tmp_resize):_e[i.name].resize()},$(window).off("resize.w2uiResize").on("resize.w2uiResize",i.tmp_resize)),-1!=this.focus&&setTimeout((function(){0===$(i.box).find("input, select, textarea").length?setTimeout(i.applyFocus,500):i.applyFocus()}),50),(new Date).getTime()-t}}}},{key:"applyFocus",value:function(e){var t;if("undefined"===typeof e&&(e=this.focus),$e.isInt(e)){if(e<0)return;var i=$(this.box).find("div:not(.w2ui-field-helper) > input, select, textarea, div > label:nth-child(1) > :radio").not(".file-input");while($(i[e]).is(":hidden")&&i.length>=e)e++;i[e]&&(t=$(i[e]))}else"string"===typeof e&&(t=$(this.box).find("[name='"+e+"']").first());return t&&t.trigger("focus"),t}},{key:"destroy",value:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});!0!==e.isCancelled&&("object"===Object(ge["a"])(this.toolbar)&&this.toolbar.destroy&&this.toolbar.destroy(),"object"===Object(ge["a"])(this.tabs)&&this.tabs.destroy&&this.tabs.destroy(),$(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),delete _e[this.name],this.trigger($.extend(e,{phase:"after"})),$(window).off("resize","body"))}}]),i}(we);(function(e){function t(t,i){var n;if(e.isPlainObject(t))return"w2form"==i&&(n=new Me(t),this.find(".w2ui-field").length>0&&(n.formHTML=this.html())),"w2grid"==i&&(n=new ke(t)),"w2layout"==i&&(n=new Te(t)),"w2sidebar"==i&&(n=new ze(t)),"w2tabs"==i&&(n=new Ae(t)),"w2toolbar"==i&&(n=new je(t)),0!==e(this).length&&n.render(this[0]),n;var s=_e[e(this).attr("name")];return s?arguments.length>0?(s[t]&&s[t].apply(s,Array.prototype.slice.call(arguments,1)),this):s:null}e&&(e.fn.w2render=function(t){e(this).length>0&&("string"===typeof t&&_e[t]&&_e[t].render(e(this)[0]),"object"===Object(ge["a"])(t)&&t.render(e(this)[0]))},e.fn.w2destroy=function(e){!e&&this.length>0&&(e=this.attr("name")),"string"===typeof e&&_e[e]&&_e[e].destroy(),"object"===Object(ge["a"])(e)&&e.destroy()},e.fn.w2field=function(t,i){if(0===arguments.length){var n=e(this).data("w2field");return n}return this.each((function(n,s){var a=e(s).data("w2field");return null==a?(a=new Ne(t,i),a.render(s),a):(a.clear(),"clear"!==t?(a=new Ne(t,i),a.render(s),a):void 0)}))},e.fn.w2form=function(e){return t.call(this,e,"w2form")},e.fn.w2grid=function(e){return t.call(this,e,"w2grid")},e.fn.w2layout=function(e){return t.call(this,e,"w2layout")},e.fn.w2sidebar=function(e){return t.call(this,e,"w2sidebar")},e.fn.w2tabs=function(e){return t.call(this,e,"w2tabs")},e.fn.w2toolbar=function(e){return t.call(this,e,"w2toolbar")},e.fn.w2popup=function(e){this.length>0?Ie.template(this[0],null,e):e.url&&Ie.load(e)},e.fn.w2marker=function(){var t=Array.prototype.slice.call(arguments,0);return Array.isArray(t[0])&&(t=t[0]),0!==t.length&&t[0]?e(this).each((function(e,n){i(e,n);for(var s=0;s<t.length;s++){var a=t[s];"string"!==typeof a&&(a=String(a)),a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&gt;").replace(/>/g,"&lt;");var r=new RegExp(a+"(?!([^<]+)?>)","gi");n.innerHTML=n.innerHTML.replace(r,o)}function o(e){return'<span class="w2ui-marker">'+e+"</span>"}})):e(this).each(i);function i(e,t){while(-1!==t.innerHTML.indexOf('<span class="w2ui-marker">'))t.innerHTML=t.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>((.|\n|\r)*)\<\/span\>/gi,"$1")}},e.fn.w2tag=function(t,i){var n=this;if(1===arguments.length&&"object"===Object(ge["a"])(t)&&(i=t,null!=i.html&&(t=i.html)),i=e.extend({id:null,auto:null,html:t,position:"right|top",align:"none",left:0,top:0,maxWidth:null,style:"",css:{},className:"",inputClass:"",onShow:null,onHide:null,hideOnKeyPress:!0,hideOnFocus:!1,hideOnBlur:!1,hideOnClick:!1,hideOnChange:!0},i),null!=i.name&&null==i.id&&(i.id=i.name),""!==i.class&&""===i.inputClass&&(i.inputClass=i.class),0!==e(this).length)return!0===i.auto||null!=i.showOn||null!=i.hideOn?0!=arguments.length&&t?e(this).each((function(n,s){var a="mouseenter",r="mouseleave";i.showOn&&(a=String(i.showOn).toLowerCase(),delete i.showOn),i.hideOn&&(r=String(i.hideOn).toLowerCase(),delete i.hideOn),i.position||(i.position="top|bottom"),e(s).off(".w2tooltip").on(a+".w2tooltip",(function(){i.auto=!1,e(this).w2tag(t,i)})).on(r+".w2tooltip",(function(){e(this).w2tag()}))})):e(this).each((function(t,i){e(i).off(".w2tooltip")})):e(this).each((function(s,a){var r,o=i.id?i.id:a.id;""==o&&(o=e(a).find("input").attr("id")),o||(o="noid");var l=$e.escapeId(o);if(null!=e(n).data("w2tag")?(r=e(n).data("w2tag"),e.extend(r.options,i)):r={id:o,attachedTo:a,box:e("#w2ui-tag-"+l),options:e.extend({},i),init:d,hide:u,getPos:p,isMoved:h,tmp:{}},""===t||null==t)r.hide();else if(0!==r.box.length)r.box.find(".w2ui-tag-body").css(r.options.css).attr("style",r.options.style).addClass(r.options.className).html(r.options.html);else{r.tmp.originalCSS="",e(r.attachedTo).length>0&&(r.tmp.originalCSS=e(r.attachedTo)[0].style.cssText);var c="white-space: nowrap;";r.options.maxWidth&&$e.getStrWidth(t)>r.options.maxWidth&&(c="width: "+r.options.maxWidth+"px"),e("body").append('<div onclick="event.stopPropagation()" style="display: none;" id="w2ui-tag-'+r.id+'"        class="w2ui-tag '+(e(r.attachedTo).parents(".w2ui-popup, .w2ui-overlay-popup, .w2ui-message").length>0?"w2ui-tag-popup":"")+'">   <div style="margin: -2px 0px 0px -2px; '+c+'">      <div class="w2ui-tag-body '+r.options.className+'" style="'+(r.options.style||"")+'">'+t+"</div>   </div></div>"),r.box=e("#w2ui-tag-"+l),e(r.attachedTo).data("w2tag",r),setTimeout(d,1)}return;function d(){if(r.box.css("display","block"),r&&r.box&&e(r.attachedTo).offset()){var t=r.getPos();r.box.css({opacity:"1",left:t.left+"px",top:t.top+"px"}).data("w2tag",r).find(".w2ui-tag-body").addClass(t.posClass),r.tmp.pos=t.left+"x"+t.top,e(r.attachedTo).off(".w2tag").css(r.options.css).addClass(r.options.inputClass),r.options.hideOnKeyPress&&e(r.attachedTo).on("keypress.w2tag",r.hide),r.options.hideOnFocus&&e(r.attachedTo).on("focus.w2tag",r.hide),i.hideOnChange&&("INPUT"===a.nodeName?e(a).on("change.w2tag",r.hide):e(a).find("input").on("change.w2tag",r.hide)),r.options.hideOnBlur&&e(r.attachedTo).on("blur.w2tag",r.hide),r.options.hideOnClick&&e("body").on("click.w2tag"+(r.id||""),r.hide),"function"===typeof r.options.onShow&&r.options.onShow(),h()}}function u(){r.box.length<=0||(r.tmp.timer&&clearTimeout(r.tmp.timer),r.box.remove(),r.options.hideOnClick&&e("body").off(".w2tag"+(r.id||"")),e(r.attachedTo).off(".w2tag").removeClass(r.options.inputClass).removeData("w2tag"),e(r.attachedTo).length>0&&(e(r.attachedTo)[0].style.cssText=r.tmp.originalCSS),"function"===typeof r.options.onHide&&r.options.onHide())}function h(t){var i=e(r.attachedTo).offset();if(0===e(r.attachedTo).length||0===i.left&&0===i.top||0===r.box.find(".w2ui-tag-body").length)r.hide();else{var n=p();r.tmp.pos!==n.left+"x"+n.top&&(r.box.css($e.cssPrefix({transition:t?"0s":".2s"})).css({left:n.left+"px",top:n.top+"px"}),r.tmp.pos=n.left+"x"+n.top),r.tmp.timer&&clearTimeout(r.tmp.timer),r.tmp.timer=setTimeout(h,100)}}function p(){var t=e(r.attachedTo).offset(),i="w2ui-tag-right",n=parseInt(t.left+r.attachedTo.offsetWidth+(r.options.left?r.options.left:0)),s=parseInt(t.top+(r.options.top?r.options.top:0)),a=r.box.find(".w2ui-tag-body"),o=a[0].offsetWidth,l=a[0].offsetHeight;if("string"===typeof r.options.position&&-1!==r.options.position.indexOf("|")&&(r.options.position=r.options.position.split("|")),"top"===r.options.position)i="w2ui-tag-top",n=parseInt(t.left+(r.options.left?r.options.left:0))-14,s=parseInt(t.top+(r.options.top?r.options.top:0))-l-10;else if("bottom"===r.options.position)i="w2ui-tag-bottom",n=parseInt(t.left+(r.options.left?r.options.left:0))-14,s=parseInt(t.top+r.attachedTo.offsetHeight+(r.options.top?r.options.top:0))+10;else if("left"===r.options.position)i="w2ui-tag-left",n=parseInt(t.left+(r.options.left?r.options.left:0))-o-20,s=parseInt(t.top+(r.options.top?r.options.top:0));else if(Array.isArray(r.options.position)){for(var c=window.innerWidth,d=window.innerHeight,u=0;u<r.options.position.length;u++){var h=r.options.position[u];if("right"===h){if(i="w2ui-tag-right",n=parseInt(t.left+r.attachedTo.offsetWidth+(r.options.left?r.options.left:0)),s=parseInt(t.top+(r.options.top?r.options.top:0)),n+o<=c)break}else if("left"===h){if(i="w2ui-tag-left",n=parseInt(t.left+(r.options.left?r.options.left:0))-o-20,s=parseInt(t.top+(r.options.top?r.options.top:0)),n>=0)break}else if("top"===h){if(i="w2ui-tag-top",n=parseInt(t.left+(r.options.left?r.options.left:0))-14,s=parseInt(t.top+(r.options.top?r.options.top:0))-l-10,n+o<=c&&s>=0)break}else if("bottom"===h&&(i="w2ui-tag-bottom",n=parseInt(t.left+(r.options.left?r.options.left:0))-14,s=parseInt(t.top+r.attachedTo.offsetHeight+(r.options.top?r.options.top:0))+10,n+o<=c&&s+l<=d))break}a.data("posClass")!==i&&a.removeClass("w2ui-tag-right w2ui-tag-left w2ui-tag-top w2ui-tag-bottom").addClass(i).data("posClass",i)}return{left:n,top:s,posClass:i}}}));e(".w2ui-tag").each((function(t,i){var n=e(i).data("w2tag");n&&n.hide()}))},e.fn.w2overlay=function(t,i){var n,s=this,a="",r={name:null,html:"",align:"none",left:0,top:0,tipLeft:30,noTip:!1,selectable:!1,width:0,height:0,minWidth:null,maxWidth:null,maxHeight:null,contextMenu:!1,pageX:null,pageY:null,originalEvent:null,style:"",class:"",overlayStyle:"",onShow:null,onHide:null,openAbove:null,tmp:{}};if(1===arguments.length&&(i="object"===Object(ge["a"])(t)?t:{html:t}),2===arguments.length&&(i.html=t),e.isPlainObject(i)||(i={}),i=e.extend({},r,i),i.name&&(a="-"+i.name),0===this.length||""===i.html||null==i.html)return e("#w2ui-overlay"+a).length>0?(n=e("#w2ui-overlay"+a)[0].hide,"function"===typeof n&&n()):e("#w2ui-overlay"+a).remove(),e(this);e("#w2ui-overlay"+a).length>0&&(n=e("#w2ui-overlay"+a)[0].hide,e(document).off(".w2overlay"+a),"function"===typeof n&&n()),s.length>0&&(null==s[0].tagName||"BODY"===s[0].tagName.toUpperCase())&&(i.contextMenu=!0),i.contextMenu&&i.originalEvent&&(i.pageX=i.originalEvent.pageX,i.pageY=i.originalEvent.pageY),!i.contextMenu||null!=i.pageX&&null!=i.pageY||console.log("ERROR: to display menu at mouse location, pass options.pageX and options.pageY.");var o="";i.data&&Object.keys(i.data).forEach((function(e){o+="data-"+e+'="'+i.data[e]+'"'})),e("body").append('<div id="w2ui-overlay'+a+'" style="display: none; left: 0px; top: 0px; '+i.overlayStyle+'" '+o+'        class="w2ui-reset w2ui-overlay '+(e(this).parents(".w2ui-popup, .w2ui-overlay-popup, .w2ui-message").length>0?"w2ui-overlay-popup":"")+'">    <style></style>    <div style="min-width: 100%; '+i.style+'" class="'+i.class+'"></div></div>');var l=e("#w2ui-overlay"+a),c=l.find(" > div");c.html(i.html);var d=c.css("background-color");null!=d&&"rgba(0, 0, 0, 0)"!==d&&"transparent"!==d&&l.css({"background-color":d,"border-color":d});var u=e(s).offset()||{};return l.data("element",s.length>0?s[0]:null).data("options",i).data("position",u.left+"x"+u.top).fadeIn("fast").on("click",(function(t){e("#w2ui-overlay"+a).data("keepOpen",!0),"LABEL"===t.target.tagName.toUpperCase()&&t.stopPropagation()})).on("mousedown",(function(e){var t=e.target.tagName.toUpperCase();-1!==["INPUT","TEXTAREA","SELECT"].indexOf(t)||i.selectable||e.preventDefault()})),l[0].hide=p,l[0].resize=f,setTimeout((function(){e(document).off(".w2overlay"+a).on("click.w2overlay"+a,p),"function"===typeof i.onShow&&i.onShow(),f()}),10),h(),e(this);function h(){var t=e("#w2ui-overlay"+a);if(t.data("element")===s[0]&&0!==t.length){var i=e(s).offset()||{},n=i.left+"x"+i.top;t.data("position")!==n?p():setTimeout(h,250)}}function p(t){if(!t||0===t.button){var n,s=e("#w2ui-overlay"+a);if(!t||e(e(t.target).closest(".w2ui-overlay").data("element")).closest(".w2ui-overlay")[0]!==s[0])if(!0!==s.data("keepOpen"))"function"===typeof i.onHide&&(n=i.onHide()),!1!==n&&(s.remove(),e(document).off(".w2overlay"+a),clearInterval(s.data("timer")));else s.removeData("keepOpen")}}function f(){var t=e("#w2ui-overlay"+a),n=t.find(" > div"),r=e("#w2ui-overlay"+a+" div.w2ui-menu"),o={};if(r.length>0&&(r.css("overflow-y","hidden"),o.scrollTop=r.scrollTop(),o.scrollLeft=r.scrollLeft()),t.length>0){n.height("auto").width("auto");var l=!1,c=n.height(),d=n.width();i.width&&i.width<d&&(d=i.width),d<30&&(d=30),i.tmp.contentHeight&&(c=parseInt(i.tmp.contentHeight),n.height(c),setTimeout((function(){var e=n.find("div.w2ui-menu");c>e.height()&&n.find("div.w2ui-menu").css("overflow-y","hidden")}),1),setTimeout((function(){var e=n.find("div.w2ui-menu");"auto"!==e.css("overflow-y")&&e.css("overflow-y","auto")}),10)),i.tmp.contentWidth&&"both"!==i.align&&(d=parseInt(i.tmp.contentWidth),n.width(d),setTimeout((function(){d>n.find("div.w2ui-menu > table").width()&&n.find("div.w2ui-menu > table").css("overflow-x","hidden")}),1),setTimeout((function(){n.find("div.w2ui-menu > table").css("overflow-x","auto")}),10)),n.find("div.w2ui-menu").css("width","100%");var u=i.left,h=i.width,p=i.tipLeft,g=i.minWidth,m=i.maxWidth,v=$e.getSize(e(s),"width");switch(i.align){case"both":u=17,g="input",m="input";break;case"left":u=17;break;case"right":break}if(g&&"auto"!==g||(g=0),"input"===g&&(g=v),g=parseInt(g,10),m&&"auto"!==m||(m=0),"input"===m&&(m=v),m=parseInt(m,10),h&&"auto"!==h||(h=0),"input"===h&&(h=v),h=parseInt(h,10),g&&(h=Math.max(h,g)),m&&(h=Math.min(h,m)),"right"===i.align){var y=Math.max(d-10,g-17);u=v-y,p=y-30}30!==d||h||(h=30);var b,w,x,_=((h||d)-17)/2;if(_<25&&(p=Math.floor(_)),i.contextMenu)b=i.pageX+8,w=i.pageY-0,x=i.pageY;else{var $=s.offset()||{};b=($.left>25?$.left:25)+u,w=$.top+$e.getSize(s,"height")+i.top+7,x=$.top}t.css({left:b+"px",top:w+"px",width:h||"auto","min-width":g||"auto","max-width":m||"auto","min-height":i.height||"auto"});var k,C=n.offset()||{},T=window.innerHeight+e(document).scrollTop()-C.top-7;if(m=window.innerWidth+e(document).scrollLeft()-C.left-7,i.contextMenu&&(T=window.innerHeight+e(document).scrollTop()-i.pageY-15,m=window.innerWidth+e(document).scrollLeft()-i.pageX),(T>-50&&T<210||!0===i.openAbove)&&!1!==i.openAbove)i.contextMenu?(T=i.pageY-7,k=5):(T=C.top-e(document).scrollTop()-7,k=24),i.maxHeight&&T>i.maxHeight&&(T=i.maxHeight),c>T&&(l=!0,n.height(T).width(d).css({"overflow-y":"auto"}),c=T),t.addClass("bottom-arrow"),t.css("top",x-c-k+i.top+"px"),t.find(">style").html("#w2ui-overlay"+a+":before { margin-left: "+parseInt(p)+"px; }#w2ui-overlay"+a+":after { margin-left: "+parseInt(p)+"px; }");else i.maxHeight&&T>i.maxHeight&&(T=i.maxHeight),c>T&&(l=!0,n.height(T).width(d).css({"overflow-y":"auto"})),t.addClass("top-arrow"),t.find(">style").html("#w2ui-overlay"+a+":before { margin-left: "+parseInt(p)+"px; }#w2ui-overlay"+a+":after { margin-left: "+parseInt(p)+"px; }");d=n.width(),m=window.innerWidth+e(document).scrollLeft()-C.left-7,i.maxWidth&&m>i.maxWidth&&(m=i.maxWidth),d>m&&"both"!==i.align&&(i.align="right",setTimeout((function(){f()}),1)),(i.contextMenu||i.noTip)&&t.find(">style").html("#w2ui-overlay"+a+":before { display: none; }#w2ui-overlay"+a+":after { display: none; }"),l&&"both"!==i.align&&n.width(d+$e.scrollBarSize()+2)}r.length>0&&(r.css("overflow-y","auto"),r.scrollTop(o.scrollTop),r.scrollLeft(o.scrollLeft))}},e.fn.w2tmp={},e.fn.w2menu=function(t,i){i&&"function"===typeof i.items&&(i.items=i.items());var n,s={type:"normal",index:null,items:[],render:null,msgNoItems:$e.lang("No items found"),onSelect:null,hideOnRemove:!1,tmp:{}},a=this,r="";if("refresh"===t){e.fn.w2tmp.menuOptions&&e.fn.w2tmp.menuOptions.name&&(r="-"+e.fn.w2tmp.menuOptions.name),i.name&&(r="-"+i.name);var o=e("#w2ui-overlay"+r).data("element");if(0==e("#w2ui-overlay"+r).length||null!=o&&o!=this[0])e(this).w2menu(i);else{i=e.extend(e.fn.w2tmp.menuOptions,i);var l=e("#w2ui-overlay"+r+" div.w2ui-menu").scrollTop();e("#w2ui-overlay"+r+" div.w2ui-menu").html(b()),e("#w2ui-overlay"+r+" div.w2ui-menu").scrollTop(l),v()}}else if("refresh-index"===t){var c=e("#w2ui-overlay"+r+" div.w2ui-menu"),d=c.find("tr[index="+i.index+"]"),u=c.scrollTop();if(c.find("tr.w2ui-selected").removeClass("w2ui-selected"),d.addClass("w2ui-selected"),d.length>0){var h=d[0].offsetTop-5,p=c.height();c.scrollTop(u),(h<u||h+d.height()>u+p)&&c.animate({scrollTop:h-(p-2*d.height())/2},200,"linear")}v()}else{1===arguments.length?i=t:i.items=t,"object"!==Object(ge["a"])(i)&&(i={}),i=e.extend({},s,i),e.fn.w2tmp.menuOptions=i,i.name&&(r="-"+i.name),"function"===typeof i.select&&"function"!==typeof i.onSelect&&(i.onSelect=i.select),"function"===typeof i.remove&&"function"!==typeof i.onRemove&&(i.onRemove=i.remove),"function"===typeof i.onRender&&"function"!==typeof i.render&&(i.render=i.onRender),e.fn.w2tmp.menuClick=function(t,n,s){var a,o=!1,l=e(t.target).closest("tr");if((t.shiftKey||t.metaKey||t.ctrlKey)&&(o=!0),a=null==s?i.items:i.items[s].items,e(t.target).hasClass("remove"))"function"===typeof i.onRemove&&i.onRemove({index:n,parentIndex:s,item:a[n],keepOpen:o,originalEvent:t}),o=!i.hideOnRemove,e(t.target).closest("tr").remove(),v();else if(l.hasClass("has-sub-menu"))o=!0,l.hasClass("expanded")?(a[n].expanded=!1,l.removeClass("expanded").addClass("collapsed").next().hide()):(a[n].expanded=!0,l.addClass("expanded").removeClass("collapsed").next().show()),v();else if("function"===typeof i.onSelect){var c=a;"function"==typeof a&&(c=a(i.items[s])),null!=c[n].keepOpen&&(o=c[n].keepOpen),i.onSelect({index:n,parentIndex:s,item:c[n],keepOpen:o,originalEvent:t})}if(null==a[n]||!0!==a[n].keepOpen){var d=e("#w2ui-overlay"+r);d.removeData("keepOpen"),d.length>0&&"function"===typeof d[0].hide&&!o&&d[0].hide()}},e.fn.w2tmp.menuDown=function(t,n,s){var a,r=e(t.target).closest("tr"),o=e(r.get(0)).find(".w2ui-icon");a=null==s?i.items:i.items[s].items;var l=a[n];"check"!==i.type&&"radio"!==i.type||!1===l.group||e(t.target).hasClass("remove")||e(t.target).closest("tr").hasClass("has-sub-menu")||(l.checked=!l.checked,l.checked?("radio"===i.type&&o.parents("table").find(".w2ui-icon").removeClass("w2ui-icon-check").addClass("w2ui-icon-empty"),"check"===i.type&&null!=l.group&&a.forEach((function(e,t){e.id!=l.id&&e.group===l.group&&e.checked&&(o.closest("table").find("tr[index="+t+"] .w2ui-icon").removeClass("w2ui-icon-check").addClass("w2ui-icon-empty"),a[t].checked=!1)})),o.removeClass("w2ui-icon-empty").addClass("w2ui-icon-check")):"check"===i.type&&null==l.group&&!1!==l.group&&o.removeClass("w2ui-icon-check").addClass("w2ui-icon-empty")),r.parent().find("tr").removeClass("w2ui-selected"),r.addClass("w2ui-selected")};var f="";if(i.search){f+='<div style="position: absolute; top: 0px; height: 40px; left: 0px; right: 0px; border-bottom: 1px solid silver; background-color: #ECECEC; padding: 8px 5px;">    <div class="w2ui-icon w2ui-icon-search" style="position: absolute; margin-top: 4px; margin-left: 6px; width: 11px; background-position: left !important;"></div>    <input id="menu-search" type="text" style="width: 100%; outline: none; padding-left: 20px;" onclick="event.stopPropagation();"/></div>',i.style+=";background-color: #ECECEC",i.index=0;for(var g=0;g<i.items.length;g++)i.items[g].hidden=!1}f+=(i.topHTML||"")+'<div class="w2ui-menu" style="top: '+(i.search?40:0)+"px;"+(i.menuStyle||"")+'">'+b()+"</div>",n=e(this).w2overlay(f,i),setTimeout((function(){if(e("#w2ui-overlay"+r+" #menu-search").on("keyup",y).on("keydown",(function(e){9===e.keyCode&&(e.stopPropagation(),e.preventDefault())})),i.search){if(-1!==["text","password"].indexOf(e(a)[0].type)||"TEXTAREA"===e(a)[0].tagName.toUpperCase())return;e("#w2ui-overlay"+r+" #menu-search").focus()}v()}),1),v();var m=e("#w2ui-overlay"+r);m.length>0&&(m[0].mresize=v,m[0].change=y)}return n;function v(){setTimeout((function(){e("#w2ui-overlay"+r+" tr.w2ui-selected").removeClass("w2ui-selected");var t=e("#w2ui-overlay"+r+" tr[index="+i.index+"]"),n=e("#w2ui-overlay"+r+" div.w2ui-menu").scrollTop();if(t.addClass("w2ui-selected"),i.tmp&&(i.tmp.contentHeight=e("#w2ui-overlay"+r+" table").height()+(i.search?50:10)+(parseInt(e("#w2ui-overlay"+r+" .w2ui-menu").css("top"))||0)+(parseInt(e("#w2ui-overlay"+r+" .w2ui-menu").css("bottom"))||0),i.tmp.contentWidth=e("#w2ui-overlay"+r+" table").width()),e("#w2ui-overlay"+r).length>0&&e("#w2ui-overlay"+r)[0].resize(),t.length>0){var s=t[0].offsetTop-5,a=e("#w2ui-overlay"+r+" div.w2ui-menu"),o=a.height();e("#w2ui-overlay"+r+" div.w2ui-menu").scrollTop(n),(s<n||s+t.height()>n+o)&&e("#w2ui-overlay"+r+" div.w2ui-menu").animate({scrollTop:s-(o-2*t.height())/2},200,"linear")}}),1)}function y(t){var n=this.value,s=t.keyCode,o=!1;switch(s){case 13:e("#w2ui-overlay"+r).remove(),e.fn.w2tmp.menuClick(t,i.index);break;case 9:case 27:e("#w2ui-overlay"+r).remove(),e.fn.w2tmp.menuClick(t,-1);break;case 38:i.index=$e.isInt(i.index)?parseInt(i.index):0,i.index--;while(i.index>0&&i.items[i.index].hidden)i.index--;if(0===i.index&&i.items[i.index].hidden)while(i.items[i.index]&&i.items[i.index].hidden)i.index++;i.index<0&&(i.index=0),o=!0;break;case 40:i.index=$e.isInt(i.index)?parseInt(i.index):0,i.index++;while(i.index<i.items.length-1&&i.items[i.index].hidden)i.index++;if(i.index===i.items.length-1&&i.items[i.index].hidden)while(i.items[i.index]&&i.items[i.index].hidden)i.index--;i.index>=i.items.length&&(i.index=i.items.length-1),o=!0;break}if(!o){for(var l=0,c=0;c<i.items.length;c++){var d=i.items[c],u="",h="";-1!==["is","begins with"].indexOf(i.match)&&(u="^"),-1!==["is","ends with"].indexOf(i.match)&&(h="$");try{var p=new RegExp(u+n+h,"i");p.test(d.text)||"..."===d.text?d.hidden=!1:d.hidden=!0}catch(f){}"enum"===a.type&&-1!==e.inArray(d.id,ids)&&(d.hidden=!0),!0!==d.hidden&&l++}i.index=0;while(i.index<i.items.length-1&&i.items[i.index].hidden)i.index++;l<=0&&(i.index=-1)}e(a).w2menu("refresh",i),v()}function b(e,t,n,s){if(i.spinner)return'<table><tr>\n                    <td style="padding: 5px 10px 13px 10px; text-align: center">\n                        <div class="w2ui-spinner" style="width: 18px; height: 18px; position: relative; top: 5px;"></div>\n                        <div style="display: inline-block; padding: 3px; color: #999;">'.concat($e.lang("Loading..."),"</div>\n                    </td>\n                </tr></table>");var a=0,r='<table cellspacing="0" cellpadding="0" class="'+(t?" sub-menu":"")+'"><tbody>',o=null,l=null;null==e&&(e=i.items),Array.isArray(e)||(e=[]);for(var c=0;c<e.length;c++){var d=e[c];if("string"===typeof d?d={id:d,text:d}:(null!=d.text&&null==d.id&&(d.id=d.text),null==d.text&&null!=d.id&&(d.text=d.id),null!=d.caption&&(d.text=d.caption),o=d.img,l=d.icon,null==o&&(o=null),null==l&&(l=null)),-1==["radio","check"].indexOf(i.type)||Array.isArray(d.items)||!1===d.group||(l=!0===d.checked?"w2ui-icon-check":"w2ui-icon-empty"),!0!==d.hidden){var u="",h=d.text,p="";if("function"===typeof i.render&&(h=i.render(d,i)),"function"==typeof h&&(h=h(d,i)),o&&(u='<td class="menu-icon"><div class="w2ui-tb-image w2ui-icon '+o+'"></div></td>'),l&&(u='<td class="menu-icon" align="center"><span class="w2ui-icon '+l+'"></span></td>'),"break"!==d.type&&null!=h&&""!==h&&"--"!=String(h).substr(0,2)){var f=a%2===0?"w2ui-item-even":"w2ui-item-odd";!0!==i.altRows&&(f="");var g=1;""===u&&g++,null==d.count&&null==d.hotkey&&!0!==d.remove&&null==d.items&&g++,null==d.tooltip&&null!=d.hint&&(d.tooltip=d.hint);var m="";if(!0===d.remove)m='<span class="remove">X</span>';else if(null!=d.items){var v=[];"function"==typeof d.items?v=d.items(d):Array.isArray(d.items)&&(v=d.items),m="<span></span>",p='<tr style="'+(d.expanded?"":"display: none")+'">     <td colspan="3">'+b(v,!0,!d.expanded,c)+"</td><tr>"}else null!=d.count&&(m+="<span>"+d.count+"</span>"),null!=d.hotkey&&(m+='<span class="hotkey">'+d.hotkey+"</span>");r+='<tr index="'+c+'" style="'+(d.style?d.style:"")+'" '+(d.tooltip?'title="'+$e.lang(d.tooltip,!0)+'"':"")+' class="'+f+(i.index===c?" w2ui-selected":"")+(!0===d.disabled?" w2ui-disabled":"")+(""!==p?" has-sub-menu"+(d.expanded?" expanded":" collapsed"):"")+'"        onmousedown="if ('+(!0===d.disabled?"true":"false")+") return;               jQuery.fn.w2tmp.menuDown(event, "+c+",  "+s+');"        onclick="event.stopPropagation();                if ('+(!0===d.disabled?"true":"false")+") return;               jQuery.fn.w2tmp.menuClick(event, "+c+",  "+s+');">'+(t?"<td></td>":"")+u+'   <td class="menu-text" colspan="'+g+'">'+$e.lang(h,!0)+'</td>   <td class="menu-count">'+m+"</td></tr>"+p,a++}else{var y=h.replace(/^-+/g,"");r+='<tr><td colspan="3" class="menu-divider '+(""!=y?"divider-text":"")+'">   <div class="line">'+y+'</div>   <div class="text">'+y+"</div></td></tr>"}}e[c]=d}return 0===a&&i.msgNoItems&&(r+='<tr>\n                    <td style="padding: 5px 10px 13px 10px; text-align: center">\n                        <div style="display: inline-block; padding-top: 3px; color: #999;">\n                            '.concat($e.lang(i.msgNoItems),"\n                        </div>\n                    </td>\n                </tr>")),r+="</tbody></table>",r}},e.fn.w2color=function(t,i){var n=this,s=e(this),a=s[0];if(s.data("skipInit"))s.removeData("skipInit");else{var r=[-1,-1];null==e.fn.w2colorPalette&&(e.fn.w2colorPalette=[["000000","333333","555555","777777","888888","999999","AAAAAA","CCCCCC","DDDDDD","EEEEEE","F7F7F7","FFFFFF"],["FF011B","FF9838","FFC300","FFFD59","86FF14","14FF7A","2EFFFC","2693FF","006CE7","9B24F4","FF21F5","FF0099"],["FFEAEA","FCEFE1","FCF4DC","FFFECF","EBFFD9","D9FFE9","E0FFFF","E8F4FF","ECF4FC","EAE6F4","FFF5FE","FCF0F7"],["F4CCCC","FCE5CD","FFF1C2","FFFDA1","D5FCB1","B5F7D0","BFFFFF","D6ECFF","CFE2F3","D9D1E9","FFE3FD","FFD9F0"],["EA9899","F9CB9C","FFE48C","F7F56F","B9F77E","84F0B1","83F7F7","B5DAFF","9FC5E8","B4A7D6","FAB9F6","FFADDE"],["E06666","F6B26B","DEB737","E0DE51","8FDB48","52D189","4EDEDB","76ACE3","6FA8DC","8E7CC3","E07EDA","F26DBD"],["CC0814","E69138","AB8816","B5B20E","6BAB30","27A85F","1BA8A6","3C81C7","3D85C6","674EA7","A14F9D","BF4990"],["99050C","B45F17","80650E","737103","395E14","10783D","13615E","094785","0A5394","351C75","780172","782C5A"]]);var o,l=e.fn.w2colorPalette;"string"===typeof t&&(t={color:t,transparent:!0}),null==t.onSelect&&null!=i&&(t.onSelect=i),t.transparent&&"333333"==l[0][1]&&(l[0].splice(1,1),l[0].push("")),t.transparent||"333333"==l[0][1]||(l[0].splice(1,0,"333333"),l[0].pop()),t.color&&(t.color=String(t.color).toUpperCase()),"string"===typeof t.color&&"#"===t.color.substr(0,1)&&(t.color=t.color.substr(1)),null==t.fireChange&&(t.fireChange=!0),0===e("#w2ui-overlay").length?e(a).w2overlay(b(t),t):(e("#w2ui-overlay .w2ui-colors").parent().html(b(t)),e("#w2ui-overlay").show()),e("#w2ui-overlay .w2ui-color").off(".w2color").on("mousedown.w2color",(function(i){var n=e(i.originalEvent.target).attr("name");r=e(i.originalEvent.target).attr("index").split(":"),"INPUT"===a.tagName.toUpperCase()?(t.fireChange&&e(a).change(),e(a).next().find(">div").css("background-color",n)):e(a).data("_color",n),"function"===typeof t.onSelect&&t.onSelect(n)})).on("mouseup.w2color",(function(){setTimeout((function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()}),10)})),e("#w2ui-overlay .color-original").off(".w2color").on("click.w2color",(function(t){var i=$e.parseColor(e(t.target).css("background-color"));null!=i&&(d=i,c=$e.rgb2hsv(d),p(c),f(),g())})),e("#w2ui-overlay input").off(".w2color").on("mousedown.w2color",(function(t){e("#w2ui-overlay").data("keepOpen",!0),setTimeout((function(){e("#w2ui-overlay").data("keepOpen",!0)}),10),t.stopPropagation()})).on("change.w2color",(function(){var t=e(n),i=parseFloat(t.val()),s=parseFloat(t.attr("max"));isNaN(i)&&(i=0),s>1&&(i=parseInt(i)),s>0&&i>s&&(t.val(s),i=s),i<0&&(t.val(0),i=0);var a=t.attr("name"),r={};-1!==["r","g","b","a"].indexOf(a)?(d[a]=i,c=$e.rgb2hsv(d)):-1!==["h","s","v"].indexOf(a)&&(r[a]=i),p(r),f(),g()}));var c,d=$e.parseColor(t.color);null==d&&(d={r:140,g:150,b:160,a:1},c=$e.rgb2hsv(d)),c=$e.rgb2hsv(d),!0!==e.fn._colorAdvanced&&!0!==t.advanced||(e("#w2ui-overlay .w2ui-color-tabs :nth-child(2)").click(),e("#w2ui-overlay").removeData("keepOpen")),p({},!0),g(),f();var u="mouseup.w2color",h="mousemove.w2color";$e.isIOS&&(u="touchend.w2color",h="touchmove.w2color"),e("#w2ui-overlay .palette").off(".w2color").on("mousedown.w2color",m),e("#w2ui-overlay .rainbow").off(".w2color").on("mousedown.w2color",m),e("#w2ui-overlay .alpha").off(".w2color").on("mousedown.w2color",m),a.nav=function(t){switch(t){case"up":r[0]--;break;case"down":r[0]++;break;case"right":r[1]++;break;case"left":r[1]--;break}r[0]<0&&(r[0]=0),r[0]>l.length-2&&(r[0]=l.length-2),r[1]<0&&(r[1]=0),r[1]>l[0].length-1&&(r[1]=l[0].length-1);var i=l[r[0]][r[1]];return e(a).data("_color",i),i}}function p(i,n){null!=i.h&&(c.h=i.h),null!=i.s&&(c.s=i.s),null!=i.v&&(c.v=i.v),null!=i.a&&(d.a=i.a,c.a=i.a),d=$e.hsv2rgb(c);var s="rgba("+d.r+","+d.g+","+d.b+","+d.a+")",r=[Number(d.r).toString(16).toUpperCase(),Number(d.g).toString(16).toUpperCase(),Number(d.b).toString(16).toUpperCase(),Math.round(255*Number(d.a)).toString(16).toUpperCase()];r.forEach((function(e,t){1===e.length&&(r[t]="0"+e)})),s=r[0]+r[1]+r[2]+r[3],1===d.a&&(s=r[0]+r[1]+r[2]),e("#w2ui-overlay .color-preview").css("background-color","#"+s),e("#w2ui-overlay input").each((function(e,t){t.name&&(null!=d[t.name]&&(t.value=d[t.name]),null!=c[t.name]&&(t.value=c[t.name]),"a"===t.name&&(t.value=d.a))})),n?e("#w2ui-overlay .color-original").css("background-color","#"+s):("INPUT"===a.tagName.toUpperCase()?(e(a).val(s).data("skipInit",!0),t.fireChange&&e(a).change(),e(a).next().find(">div").css("background-color","#"+s)):e(a).data("_color",s),"function"===typeof t.onSelect&&t.onSelect(s))}function f(){var t=e("#w2ui-overlay .palette .value1"),i=e("#w2ui-overlay .rainbow .value2"),n=e("#w2ui-overlay .alpha .value2"),s=parseInt(t.width())/2,a=parseInt(i.width())/2;t.css({left:150*c.s/100-s,top:125*(100-c.v)/100-s}),i.css("left",c.h/2.4-a),n.css("left",150*d.a-a)}function g(){var t=$e.hsv2rgb(c.h,100,100),i=t.r+","+t.g+","+t.b;e("#w2ui-overlay .palette").css("background-image","linear-gradient(90deg, rgba("+i+",0) 0%, rgba("+i+",1) 100%)")}function m(t){var i=e(this).find(".value1, .value2"),n=parseInt(i.width())/2;i.hasClass("move-x")&&i.css({left:t.offsetX-n+"px"}),i.hasClass("move-y")&&i.css({top:t.offsetY-n+"px"}),o={$el:i,x:t.pageX,y:t.pageY,width:i.parent().width(),height:i.parent().height(),left:parseInt(i.css("left")),top:parseInt(i.css("top"))},y(t),e("body").off(".w2color").on(h,y).on(u,v)}function v(t){e("body").off(".w2color")}function y(e){var t=o.$el,i=e.pageX-o.x,n=e.pageY-o.y,s=o.left+i,a=o.top+n,r=parseInt(t.width())/2;s<-r&&(s=-r),a<-r&&(a=-r),s>o.width-r&&(s=o.width-r),a>o.height-r&&(a=o.height-r),t.hasClass("move-x")&&t.css({left:s+"px"}),t.hasClass("move-y")&&t.css({top:a+"px"});var l=t.parent().attr("name"),c=parseInt(t.css("left"))+r,d=parseInt(t.css("top"))+r;if("palette"===l&&p({s:Math.round(c/o.width*100),v:Math.round(100-d/o.height*100)}),"rainbow"===l){var u=Math.round(2.4*c);p({h:u}),g()}"alpha"===l&&p({a:parseFloat(Number(c/150).toFixed(2))})}function b(e){for(var t,i='<div class="w2ui-colors" onmousedown="jQuery(this).parents(\'.w2ui-overlay\').data(\'keepOpen\', true)"><div class="w2ui-color-palette"><table cellspacing="5"><tbody>',n=0;n<l.length;n++){i+="<tr>";for(var s=0;s<l[n].length;s++)t="FFFFFF"===l[n][s]?";border: 1px solid #efefef":"",i+='<td>    <div class="w2ui-color '+(""===l[n][s]?"w2ui-no-color":"")+'" style="background-color: #'+l[n][s]+t+';"        name="'+l[n][s]+'" index="'+n+":"+s+'">'+(e.color==l[n][s]?"&#149;":"&#160;")+"    </div></td>",e.color==l[n][s]&&(r=[n,s]);i+="</tr>",n<2&&(i+='<tr><td style="height: 8px" colspan="8"></td></tr>')}return i+="</tbody></table></div>",i+='<div class="w2ui-color-advanced" style="display: none">   <div class="color-info">       <div class="color-preview-bg"><div class="color-preview"></div><div class="color-original"></div></div>       <div class="color-part">           <span>H</span> <input name="h" maxlength="3" max="360" tabindex="101">           <span>R</span> <input name="r" maxlength="3" max="255" tabindex="104">       </div>       <div class="color-part">           <span>S</span> <input name="s" maxlength="3" max="100" tabindex="102">           <span>G</span> <input name="g" maxlength="3" max="255" tabindex="105">       </div>       <div class="color-part">           <span>V</span> <input name="v" maxlength="3" max="100" tabindex="103">           <span>B</span> <input name="b" maxlength="3" max="255" tabindex="106">       </div>       <div class="color-part" style="margin: 30px 0px 0px 2px">           <span style="width: 40px">Opacity</span>            <input name="a" maxlength="5" max="1" style="width: 32px !important" tabindex="107">       </div>   </div>   <div class="palette" name="palette">       <div class="palette-bg"></div>       <div class="value1 move-x move-y"></div>   </div>   <div class="rainbow" name="rainbow">       <div class="value2 move-x"></div>   </div>   <div class="alpha" name="alpha">       <div class="alpha-bg"></div>       <div class="value2 move-x"></div>   </div></div>',i+="<div class=\"w2ui-color-tabs\">   <div class=\"w2ui-color-tab selected\" onclick=\"jQuery(this).addClass('selected').next().removeClass('selected').parents('.w2ui-overlay').find('.w2ui-color-advanced').hide().parent().find('.w2ui-color-palette').show(); jQuery.fn._colorAdvanced = false; jQuery('#w2ui-overlay')[0].resize()\"><span class=\"w2ui-icon w2ui-icon-colors\"></span></div>   <div class=\"w2ui-color-tab\" onclick=\"jQuery(this).addClass('selected').prev().removeClass('selected').parents('.w2ui-overlay').find('.w2ui-color-advanced').show().parent().find('.w2ui-color-palette').hide(); jQuery.fn._colorAdvanced = true; jQuery('#w2ui-overlay')[0].resize()\"><span class=\"w2ui-icon w2ui-icon-settings\"></span></div>   <div style=\"padding: 8px; text-align: right;\">"+("string"==typeof e.html?e.html:"")+'</div></div></div><div style="clear: both; height: 0"></div>',i}})})(jQuery);var Fe=i("8c4f"),Le=i("9d9a");a["default"].use(Fe["a"]);var Pe=new Fe["a"]({mode:"history",base:"/",scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"",component:function(){return i.e("chunk-474f40e8").then(i.bind(null,"f135"))},children:[{path:"/",name:"home",component:function(){return i.e("chunk-2d21a3d2").then(i.bind(null,"bb51"))}},{path:"/usuarios",name:"UsuÃ¡rios",component:function(){return i.e("chunk-2d0ab2cc").then(i.bind(null,"13c7"))}},{path:"/veiculos",name:"Veiculos",component:function(){return i.e("chunk-3112e1ea").then(i.bind(null,"ab26"))}}],beforeEnter:function(e,t,i){var n=localStorage.getItem("token");n?i():i("/login")}},{path:"",component:function(){return i.e("chunk-2d22c341").then(i.bind(null,"f1dd"))},children:[{path:"/register",name:"page-register",component:function(){return i.e("chunk-5cecc67e").then(i.bind(null,"1ec6"))}},{path:"/login",name:"page-login",component:function(){return i.e("chunk-0101c9e5").then(i.bind(null,"8b48"))}},{path:"/pages/error-404",name:"page-error-404",component:function(){return i.e("chunk-59c47205").then(i.bind(null,"c0ba"))}}]},{path:"*",redirect:"/pages/error-404"}]});Pe.afterEach((function(){var e=document.getElementById("loading-bg");e&&(e.style.display="none")})),Pe.beforeEach((function(e,t,i){var n;Le["a"].state.page=null,e.matched.some((function(e){n=e.meta.guard})),"undefined"===typeof n?i():Le["a"].getters["auth/checkPermission"](n)?(window.scrollTo(0,0),i()):Le["a"].getters["auth/isLogged"]?i("/home"):i("/login")}));var He=Pe,Be=i("2f62"),qe={pages:{key:"title",data:[{title:"Home",url:"/",icon:"HomeIcon",is_bookmarked:!1},{title:"Page 2",url:"/page2",icon:"FileIcon",is_bookmarked:!1}]}},We={uid:0,displayName:"John Doe",about:"Dessert chocolate cake lemon drops jujubes. Biscuit cupcake ice cream bear claw brownie brownie marshmallow.",photoURL:i("3f31"),status:"online",userRole:"admin"},Ue={AppActiveUser:We,bodyOverlay:!1,isVerticalNavMenuActive:!0,mainLayoutType:c["a"].mainLayoutType||"vertical",navbarSearchAndPinList:qe,reduceButton:c["a"].sidebarCollapsed,verticalNavMenuWidth:"default",verticalNavMenuItemsMin:!1,scrollY:0,starredPages:qe["pages"].data.filter((function(e){return e.is_bookmarked})),theme:c["a"].theme||"light",themePrimaryColor:c["a"].primary,windowWidth:null},Ye=Ue,Xe={windowBreakPoint:function(e){return e.windowWidth>=1200?"xl":e.windowWidth>=992?"lg":e.windowWidth>=768?"md":e.windowWidth>=576?"sm":"xs"}},Ve=Xe,Je={TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE:function(e,t){e.isVerticalNavMenuActive=t},TOGGLE_REDUCE_BUTTON:function(e,t){e.reduceButton=t},UPDATE_MAIN_LAYOUT_TYPE:function(e,t){e.mainLayoutType=t},UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN:function(e,t){e.verticalNavMenuItemsMin=t},UPDATE_VERTICAL_NAV_MENU_WIDTH:function(e,t){e.verticalNavMenuWidth=t},UPDATE_STARRED_PAGE:function(e,t){var i=e.navbarSearchAndPinList["pages"].data.findIndex((function(e){return e.url==t.url}));if(e.navbarSearchAndPinList["pages"].data[i].is_bookmarked=t.val,t.val)e.starredPages.push(e.navbarSearchAndPinList["pages"].data[i]);else{var n=e.starredPages.findIndex((function(e){return e.url==t.url}));e.starredPages.splice(n,1)}},ARRANGE_STARRED_PAGES_LIMITED:function(e,t){var i=e.starredPages.slice(10);e.starredPages=t.concat(i)},ARRANGE_STARRED_PAGES_MORE:function(e,t){var i=!1,n=e.starredPages[10],s=e.starredPages.slice(0,10);e.starredPages=s.concat(t),e.starredPages.slice(0,10).map((function(e){t.indexOf(e)>-1&&(i=!0)})),i||e.starredPages.splice(10,0,n)},TOGGLE_CONTENT_OVERLAY:function(e,t){e.bodyOverlay=t},UPDATE_PRIMARY_COLOR:function(e,t){e.themePrimaryColor=t},UPDATE_THEME:function(e,t){e.theme=t},UPDATE_WINDOW_WIDTH:function(e,t){e.windowWidth=t},UPDATE_WINDOW_SCROLL_Y:function(e,t){e.scrollY=t},UPDATE_USER_INFO:function(e,t){for(var i=JSON.parse(localStorage.getItem("userInfo"))||e.AppActiveUser,n=0,s=Object.keys(t);n<s.length;n++){var a=s[n];null!=t[a]&&(e.AppActiveUser[a]=t[a],i[a]=t[a])}localStorage.setItem("userInfo",JSON.stringify(i))}},Ke=Je,Ge={updateVerticalNavMenuWidth:function(e,t){var i=e.commit;i("UPDATE_VERTICAL_NAV_MENU_WIDTH",t)},updateStarredPage:function(e,t){var i=e.commit;i("UPDATE_STARRED_PAGE",t)},arrangeStarredPagesLimited:function(e,t){var i=e.commit;i("ARRANGE_STARRED_PAGES_LIMITED",t)},arrangeStarredPagesMore:function(e,t){var i=e.commit;i("ARRANGE_STARRED_PAGES_MORE",t)},toggleContentOverlay:function(e){var t=e.commit;t("TOGGLE_CONTENT_OVERLAY")},updateTheme:function(e,t){var i=e.commit;i("UPDATE_THEME",t)},updateUserInfo:function(e,t){var i=e.commit;i("UPDATE_USER_INFO",t)}},Qe=Ge;a["default"].use(Be["a"]);var Ze=new Be["a"].Store({auth:Le["a"],getters:Ve,mutations:Ke,state:Ye,actions:Qe,strict:!1}),et=i("7bb1"),tt=i("a925"),it=i("229e"),nt=i.n(it),st=i("6591");i("c197"),i("84bf");m.a.config(),a["default"].use(y.a),a["default"].prototype.$http=_,a["default"].use(tt["a"]);var at=new tt["a"];at.locale="pt_BR",a["default"].use(et["a"],{i18nRootKey:"validations",i18n:at,dictionary:{en:nt.a}}),a["default"].use(st["VueHammer"]),i("3a10"),a["default"].config.productionTip=!1,new a["default"]({router:He,store:Ze,w2toolbar:je,w2layout:Te,w2sidebar:ze,w2grid:ke,w2alert:Oe,$:$,render:function(e){return e(f)}}).$mount("#app")},"5aea":function(e,t,i){},"863b":function(e,t,i){},"89b8":function(e,t,i){"use strict";i("e8ae")},9943:function(e,t,i){"use strict";i("4363")},"9d9a":function(e,t,i){"use strict";var n={logged:0,user:localStorage.getItem("user"),token:localStorage.getItem("token"),permissions:localStorage.getItem("permissions"),userUpdated:!1,userPasswordUpdated:!1,userPasswordUpdateError:!1,userPasswordUpdateErrorMsg:"",loginWait:!1,loginFailed:!1},s=n,a={isLogged:function(e){return e.logged},userPermissions:function(e){return JSON.parse(e.permissions)||[]},checkPermission:function(e,t){return function(e){return 1}},userInfo:function(e){return JSON.parse(e.user)||{active:null,email:null,name:null}},userUpdated:function(e){return e.userUpdated},userPasswordUpdated:function(e){return e.userPasswordUpdated},userPasswordUpdateError:function(e){return e.userPasswordUpdateError},userPasswordUpdateErrorMsg:function(e){return e.userPasswordUpdateErrorMsg}},r=a,o={login:function(e,t){e.logged=1,e.loginFailed=!1;var i=t.token,n=JSON.stringify(t.user);localStorage.setItem("token",i),localStorage.setItem("user",n),localStorage.setItem("permissions",[]),e.token=i,e.user=n,e.permissions=[]},loginWait:function(e,t){e.loginWait=t},loginFailed:function(e){e.loginFailed=!0},logout:function(e){e.loginWait=!1,e.loginFailed=!1,e.logged=0,e.user=null,e.token=null,e.permissions=null,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("permissions")},editUser:function(e,t){var i=JSON.stringify(t);localStorage.setItem("user",i),e.user=i,e.userUpdated=!0,setTimeout((function(){e.userUpdated=!1}),3e3)},editPassword:function(e,t){1===t.status?(e.userPasswordUpdated=!0,setTimeout((function(){e.userPasswordUpdated=!1}),3e3)):-1===t.status&&(e.userPasswordUpdateError=!0,e.userPasswordUpdateErrorMsg=t.msg,setTimeout((function(){e.userPasswordUpdateError=!1}),3e3))},refreshToken:function(e,t){var i=t.token;localStorage.setItem("token",i),e.token=i}},l=o,c=(i("6762"),i("2fdb"),i("2b0e")),d="https://dasdrasys.com.br/api/",u={login:function(e,t){var i=e.commit;return i("loginWait",!0),new Promise((function(e){c["default"].http.post(d+"login",t).then((function(e){return e.json()})).then((function(t){i("login",t),e()})).catch((function(){i("loginWait",!1),i("loginFailed")}))}))},logout:function(e){e.commit},getUser:function(e){var t=e.commit;return new Promise((function(e){var i=auth.paths.getUser||"user";c["default"].http.get(getUrl(i)).then((function(e){return e.json()})).then((function(i){[400,401,403].includes(i.status)&&t("logout"),e()}))}))}},h=u,p={state:s,getters:r,mutations:l,actions:h};t["a"]=p},a4fc:function(e,t,i){"use strict";i("e84c")},c1c3:function(e,t,i){},dca1:function(e,t,i){"use strict";i("41a6")},e84c:function(e,t,i){},e8ae:function(e,t,i){}});
//# sourceMappingURL=app.1e695099.js.map